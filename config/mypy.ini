[mypy]
# MyStocks项目mypy配置
python_version = 3.12

# 严格模式配置
warn_return_any = true
warn_unused_configs = true
warn_redundant_casts = true
warn_unused_ignores = true
warn_no_return = true
warn_unreachable = true
mypy_path = /opt/claude/mystocks_spec/src

# 类型检查严格性
disallow_untyped_defs = true
disallow_incomplete_defs = true
check_untyped_defs = true
disallow_untyped_decorators = true
no_implicit_optional = true
strict_optional = true

# 错误格式
show_error_codes = true
show_error_context = true
color_output = true
error_summary = true

# 对于缺少类型注解的第三方库，忽略错误
[mypy-pandas.*]
ignore_missing_imports = True

[mypy-numpy.*]
ignore_missing_imports = True

[mypy-akshare.*]
ignore_missing_imports = True

[mypy-baostock.*]
ignore_missing_imports = True

[mypy-tushare.*]
ignore_missing_imports = True

[mypy-taospy.*]
ignore_missing_imports = True

[mypy-psycopg2.*]
ignore_missing_imports = True

[mypy-fastapi.*]
ignore_missing_imports = True

[mypy-uvicorn.*]
ignore_missing_imports = True

[mypy-pydantic.*]
ignore_missing_imports = True

[mypy-cupy.*]
ignore_missing_imports = True

[mypy-cudf.*]
ignore_missing_imports = True

[mypy-cuml.*]
ignore_missing_imports = True

[mypy-python-dotenv.*]
ignore_missing_imports = True

[mypy-requests.*]
ignore_missing_imports = True

[mypy-pytest.*]
ignore_missing_imports = True

[mypy-efinance.*]
ignore_missing_imports = True

[mypy-redis.*]
ignore_missing_imports = True

[mypy-locust.*]
ignore_missing_imports = True

[mypy-celery.*]
ignore_missing_imports = True

[mypy-anthropic.*]
ignore_missing_imports = True

[mypy-boto3.*]
ignore_missing_imports = True

[mypy-botocore.*]
ignore_missing_imports = True

[mypy-python-socketio.*]
ignore_missing_imports = True

[mypy-python-engineio.*]
ignore_missing_imports = True

[mypy-aiofiles.*]
ignore_missing_imports = True

[mypy-python-multipart.*]
ignore_missing_imports = True

[mypy-pandera.*]
ignore_missing_imports = True

[mypy-pyyaml.*]
ignore_missing_imports = True

[mypy-schedule.*]
ignore_missing_imports = True

[mypy-certifi.*]
ignore_missing_imports = True

[mypy-bcrypt.*]
ignore_missing_imports = True

[mypy-attrs.*]
ignore_missing_imports = True

[mypy-anyio.*]
ignore_missing_imports = True

[mypy-cachetools.*]
ignore_missing_imports = True

# 项目特定模块配置
[mypy-src.*]
# 为src目录下的模块启用严格类型检查
disallow_untyped_defs = true

[mypy-tests.*]
# 为测试目录下的模块启用类型检查但允许一些灵活性
disallow_untyped_defs = false

[mypy-src.storage.database.connection_manager.*]
# 忽略数据库连接管理器中的错误，因为它在缺少环境变量时会抛出异常
ignore_errors = true

[mypy-src.data_access.tdengine_access.*]
# 忽略TDengine访问层中的错误
ignore_errors = true

[mypy-src.data_access.postgresql_access.*]
# 忽略PostgreSQL访问层中的错误
ignore_errors = true
