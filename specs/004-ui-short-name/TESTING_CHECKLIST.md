# UI/UX 改进功能测试检查清单

**Feature**: Market Data UI/UX Improvements
**Branch**: 004-ui-short-name
**Test Date**: _____________
**Tester**: _____________

---

## 测试环境

- [ ] Chrome 90+ (版本: _________)
- [ ] Firefox 88+ (版本: _________)
- [ ] Edge 90+ (版本: _________)
- [ ] Safari 14+ (版本: _________)
- [ ] 操作系统: _____________

---

## Phase 1: 基础设施验证

### Typography System
- [ ] **CSS 变量已加载**: 打开浏览器 DevTools → Elements → :root，检查是否存在 `--font-size-base` 等变量
- [ ] **字体家族正确**: 检查页面字体为 "Helvetica Neue" 或中文字体
- [ ] **行高正确**: 文本行高为 1.5

### Table Common Styles
- [ ] **固定表头样式加载**: 检查 `.sticky-header-table` 样式是否存在
- [ ] **z-index 正确**: 固定表头 z-index 为 10

### User Preferences
- [ ] **LocalStorage 读取**: 刷新页面后，偏好设置保持
- [ ] **SessionStorage 降级**: 禁用 LocalStorage 时自动降级
- [ ] **版本控制**: 检查 LocalStorage 中 version 字段

### Pagination Composable
- [ ] **自动隐藏**: 数据少于一页时分页控件自动隐藏
- [ ] **页面跳转**: 输入页码跳转功能正常

---

## Phase 2: User Story 1 - 资金流向趋势分析 (P1 MVP)

### FR-001: 固定表头
- [ ] **初始状态**: 表头显示正常
- [ ] **滚动时**: 向下滚动，表头保持在顶部
- [ ] **滚动回顶部**: 表头恢复正常位置
- [ ] **性能**: 滚动流畅，无卡顿 (60fps)

### FR-002: 分页控制
- [ ] **页面大小选择**: 可选 10/20/50/100
- [ ] **翻页功能**: 上一页/下一页按钮工作
- [ ] **跳转页面**: 输入页码跳转功能正常
- [ ] **显示总数**: 显示"共 X 条"信息

### FR-003: 自动隐藏分页
- [ ] **数据 ≤ 1 页**: 分页控件隐藏
- [ ] **数据 > 1 页**: 分页控件显示
- [ ] **动态切换**: 切换页面大小时正确显示/隐藏

### FR-004: 行业名称可点击
- [ ] **样式**: 行业名称显示为蓝色链接
- [ ] **鼠标悬停**: 显示下划线
- [ ] **点击响应**: 点击后立即高亮

### FR-005: 趋势图显示
- [ ] **图表出现**: 点击行业名称后图表显示在表格下方
- [ ] **数据正确**: 显示该行业的净流入、主力流入、散户流入
- [ ] **图例**: 三条曲线有颜色区分和图例说明
- [ ] **响应式**: 图表宽度自适应容器

### FR-006: 切换行业
- [ ] **清除旧图表**: 点击其他行业时旧图表消失
- [ ] **显示新图表**: 新图表立即显示
- [ ] **高亮状态**: 当前选中行业名称高亮

### FR-007: 分页偏好保存
- [ ] **设置保存**: 修改页面大小后刷新页面，设置保持
- [ ] **跨页面**: 访问其他页面再回来，设置保持
- [ ] **跨浏览器会话**: 关闭浏览器重新打开，设置保持

### SC-001: 图表更新性能
- [ ] **点击响应时间**: < 500ms
- [ ] **控制台验证**: 检查控制台日志，确认性能符合要求
- [ ] **无卡顿**: 切换行业时界面流畅

### SC-002: 滚动性能
- [ ] **固定表头流畅**: 滚动时 FPS ≥ 60
- [ ] **大数据量**: 加载 100 条数据时滚动流畅

---

## Phase 3: User Story 2 - ETF/龙虎榜表格优化 (P2)

### FR-008: ETF 固定表头
- [ ] **滚动时固定**: 表头保持在顶部
- [ ] **背景色**: 固定时有阴影效果
- [ ] **z-index**: 表头在内容之上

### FR-009: ETF 分页控制
- [ ] **页面大小**: 可选 10/20/50/100
- [ ] **偏好保存**: 设置保存到 LocalStorage (key: `pageSizeETF`)
- [ ] **刷新保持**: 刷新页面后设置保持

### FR-010: 龙虎榜固定表头
- [ ] **滚动时固定**: 同 FR-008
- [ ] **性能**: 滚动流畅

### FR-011: 龙虎榜分页控制
- [ ] **页面大小**: 可选 10/20/50/100
- [ ] **偏好保存**: 设置保存到 LocalStorage (key: `pageSizeDragonTiger`)
- [ ] **自动隐藏**: 数据少于一页时隐藏

### SC-003: 表格响应性
- [ ] **页面大小切换**: < 200ms
- [ ] **翻页响应**: < 300ms
- [ ] **控制台无错误**: 检查无 JavaScript 错误

---

## Phase 4: User Story 3 - 自选股选项卡重构 (P2)

### FR-025: 路由重命名
- [ ] **URL 路径**: 访问 `/watchlist` 正常显示页面
- [ ] **菜单标签**: 左侧菜单显示"自选股"（非"股票管理"）
- [ ] **页面标题**: 浏览器标签标题为"自选股"

### FR-026: 选项卡切换
- [ ] **4 个选项卡**: 显示"用户自选/系统自选/策略自选/监控列表"
- [ ] **图标显示**: 每个选项卡有对应图标
- [ ] **点击切换**: 点击选项卡切换内容
- [ ] **高亮状态**: 当前选项卡高亮显示

### FR-027: 默认选项卡
- [ ] **首次访问**: 默认显示"用户自选"
- [ ] **URL 参数**: 访问 `/watchlist?tab=strategy` 显示策略自选

### FR-028: 固定表头
- [ ] **滚动时固定**: 所有选项卡的表格表头都固定
- [ ] **切换选项卡**: 表头状态正确重置

### FR-029: 分组标签
- [ ] **颜色区分**: 不同子分组有不同颜色标签
- [ ] **标签显示**: 分组名称清晰可见
- [ ] **一致性**: 同一分组的标签颜色一致

### FR-030: 选项卡状态持久化
- [ ] **LocalStorage**: 切换选项卡后刷新页面，状态保持
- [ ] **URL 同步**: 切换选项卡时 URL 参数更新
- [ ] **浏览器导航**: 后退/前进按钮正确切换选项卡

### SC-004: 选项卡性能
- [ ] **切换时间**: < 300ms
- [ ] **数据加载**: 每个选项卡数据独立加载
- [ ] **控制台日志**: 检查选项卡切换日志

---

## Phase 5: User Story 4 - 全局字体大小调整 (P3)

### FR-013: 设置界面
- [ ] **访问路径**: 系统设置 > 显示设置
- [ ] **FontSizeSetting 组件**: 在页面顶部显示
- [ ] **5 个选项**: 显示 12px/14px/16px/18px/20px 五个按钮

### FR-014: 字体大小选项
- [ ] **特小 (12px)**: 可选择
- [ ] **小 (14px)**: 可选择
- [ ] **中 (16px)**: 默认选中
- [ ] **大 (18px)**: 可选择
- [ ] **特大 (20px)**: 可选择

### FR-015: 立即应用
- [ ] **选择后**: 无需刷新，字体立即变化
- [ ] **全局应用**: 导航到其他页面，字体大小保持
- [ ] **响应时间**: < 200ms

### FR-016: 字体层级
- [ ] **辅助文字**: 基础字号 - 2px
- [ ] **正文**: 基础字号
- [ ] **副标题**: 基础字号 + 2px
- [ ] **标题**: 基础字号 + 4px
- [ ] **大标题**: 基础字号 + 6px
- [ ] **动态计算**: 切换基础字号后，所有层级自动调整

### FR-017: 预览效果
- [ ] **实时预览**: 设置卡片中显示预览区域
- [ ] **多层级展示**: 预览区显示 5 种层级文字
- [ ] **即时更新**: 选择字号后预览立即更新

### FR-018: 字体家族
- [ ] **中英文混排**: 中文和英文字体正确显示
- [ ] **等宽数字**: 数字显示对齐

### FR-019: 持久化
- [ ] **LocalStorage 保存**: 设置保存到 `fontSize` 字段
- [ ] **刷新保持**: 刷新页面后字体大小保持
- [ ] **跨页面**: 导航到其他页面后字体大小保持
- [ ] **跨会话**: 关闭浏览器重新打开，设置保持

### FR-020: 响应式
- [ ] **桌面显示**: 字体显示正常
- [ ] **移动端**: 在移动端视口下字体自适应（可选）

### SC-005: 字体切换性能
- [ ] **切换时间**: < 200ms
- [ ] **无闪烁**: 切换过程平滑
- [ ] **控制台日志**: 检查应用日志

---

## Phase 6: User Story 5 - 问财筛选默认查询 (P3)

### FR-021: 预设查询卡片
- [ ] **卡片数量**: 显示 9 个查询卡片
- [ ] **布局**: 3 行 x 3 列（每行 3 个）
- [ ] **卡片内容**: 每个卡片显示名称和描述
- [ ] **响应式**: 窗口缩小时卡片自适应

### FR-022: 执行预设查询
- [ ] **点击卡片**: 点击卡片执行查询
- [ ] **加载状态**: 卡片显示 loading 状态
- [ ] **成功提示**: 查询完成后显示成功消息

### FR-023: 显示查询结果
- [ ] **表格更新**: 下方表格显示查询结果
- [ ] **数据正确**: 结果包含股票代码、名称、价格等
- [ ] **排序**: 支持列排序
- [ ] **分页**: 结果支持分页浏览

### FR-024: 清除旧结果
- [ ] **切换查询**: 点击其他预设查询时，旧结果清空
- [ ] **表格重置**: 分页重置到第一页
- [ ] **状态清除**: 查询名称和描述更新

### SC-006: 查询性能
- [ ] **响应时间**: < 1 秒
- [ ] **控制台验证**: 检查查询耗时日志
- [ ] **性能警告**: 如果 > 1 秒，控制台显示警告

---

## Phase 7: 跨功能验证

### 用户交互日志 (T032)
- [ ] **控制台日志**: 打开浏览器控制台，执行各种操作
- [ ] **日志格式**: 日志格式为 `[ComponentName] 描述`
- [ ] **关键操作**: 以下操作有日志：
  - [ ] 字体大小切换
  - [ ] 预设查询执行
  - [ ] 选项卡切换
  - [ ] 分页大小变更
  - [ ] 行业趋势图点击

### 性能优化 (T033)
- [ ] **页面加载时间**: < 2 秒
- [ ] **首次内容绘制 (FCP)**: < 1 秒
- [ ] **最大内容绘制 (LCP)**: < 2.5 秒
- [ ] **首次输入延迟 (FID)**: < 100ms
- [ ] **累积布局偏移 (CLS)**: < 0.1

### 浏览器兼容性 (T034)
- [ ] **Chrome**: 所有功能正常
- [ ] **Firefox**: 所有功能正常
- [ ] **Edge**: 所有功能正常
- [ ] **Safari**: 所有功能正常（如适用）
- [ ] **CSS 降级**: 旧浏览器显示基本功能

### 错误处理
- [ ] **网络错误**: 断网情况下有友好提示
- [ ] **数据错误**: 数据格式错误时不崩溃
- [ ] **LocalStorage 满**: 存储空间满时降级到 sessionStorage
- [ ] **控制台无错误**: 正常操作时控制台无红色错误

### 可访问性
- [ ] **键盘导航**: Tab 键可以导航所有交互元素
- [ ] **焦点可见**: 焦点元素有可见指示器
- [ ] **语义化标签**: 使用正确的 HTML 语义标签
- [ ] **对比度**: 文字和背景对比度 ≥ 4.5:1

---

## 集成测试场景

### 场景 1: 新用户首次访问
1. 清除浏览器缓存和 LocalStorage
2. 访问首页
3. 导航到"资金流向"页面
4. 验证默认字体大小为 16px
5. 验证默认分页大小为 20
6. 验证表头固定功能正常

### 场景 2: 用户偏好持久化
1. 修改字体大小为 18px
2. 修改资金流向分页大小为 50
3. 切换到"策略自选"选项卡
4. 关闭浏览器
5. 重新打开浏览器访问系统
6. 验证字体大小为 18px
7. 验证资金流向分页大小为 50
8. 验证自选股显示"策略自选"选项卡

### 场景 3: 多功能组合使用
1. 调整字体大小为 20px
2. 访问问财筛选页面
3. 执行预设查询"高市值蓝筹股"
4. 查看结果表格（验证固定表头）
5. 修改分页大小为 100
6. 切换到资金流向页面
7. 点击行业名称查看趋势图
8. 验证所有功能正常协同工作

### 场景 4: 压力测试
1. 快速切换字体大小 5 次
2. 快速切换自选股选项卡 10 次
3. 快速执行 5 个不同的预设查询
4. 验证无 JavaScript 错误
5. 验证界面响应流畅
6. 验证内存占用正常（DevTools Memory Profiler）

---

## 回归测试

### 已有功能验证
- [ ] **登录功能**: 未受影响
- [ ] **仪表盘**: 显示正常
- [ ] **TDX 行情**: 显示正常
- [ ] **数据分析**: 功能正常
- [ ] **系统设置**: 其他设置未受影响

---

## 缺陷报告模板

**缺陷 ID**: _______
**严重程度**: [ ] 致命 [ ] 严重 [ ] 一般 [ ] 轻微
**功能需求**: FR-_____ / SC-_____
**浏览器**: _____________
**重现步骤**:
1.
2.
3.

**期望结果**:

**实际结果**:

**截图/控制台日志**:

**备注**:

---

## 测试总结

**总测试项**: _______
**通过**: _______
**失败**: _______
**通过率**: _______%

**关键发现**:

**遗留问题**:

**建议**:

**测试完成日期**: _____________
**签字**: _____________
