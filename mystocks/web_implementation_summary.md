# MyStocks Webç«¯é›†æˆå®æ–½æ€»ç»“

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0.0
**åˆ›å»ºæ—¥æœŸ**: 2025-10-24
**çŠ¶æ€**: âœ… è®¾è®¡å®Œæˆï¼Œå¾…å®æ–½

---

## ğŸ“Š æ¦‚è¿°

æ ¹æ®ç”¨æˆ·éœ€æ±‚ï¼Œå°†MyStocks MVPçš„æ ¸å¿ƒåŠŸèƒ½ï¼ˆå›æµ‹ã€æ¨¡å‹ã€åˆ†æã€å·¥å…·å¢å¼ºï¼‰é›†æˆåˆ°Webç«¯ï¼ŒæŒ‰ç…§ä»¥ä¸‹èœå•ç»“æ„ç»„ç»‡ï¼š

### èœå•ç»“æ„

```
MyStocksç³»ç»Ÿ
â”œâ”€â”€ ç­–ç•¥ç®¡ç†ï¼ˆä¸€çº§èœå•ï¼‰
â”‚   â”œâ”€â”€ ç­–ç•¥æ–¹æ¡ˆï¼ˆäºŒçº§èœå•ï¼‰
â”‚   â”‚   â””â”€â”€ ç­–ç•¥ç›¸å…³åŠŸèƒ½
â”‚   â””â”€â”€ å›æµ‹åˆ†æï¼ˆäºŒçº§èœå•ï¼‰
â”‚       â””â”€â”€ å›æµ‹ + å…¶ä»–åŠŸèƒ½
â””â”€â”€ é£é™©ç›‘æ§ï¼ˆä¸€çº§èœå•ï¼‰
    â””â”€â”€ é£é™©ç›¸å…³åŠŸèƒ½
```

---

## âœ… å·²å®Œæˆçš„è®¾è®¡å·¥ä½œ

### 1. å®Œæ•´æ–‡æ¡£ âœ…

| æ–‡æ¡£ | è·¯å¾„ | å†…å®¹ |
|------|------|------|
| èœå•é›†æˆæ–¹æ¡ˆ | `WEB_MENU_INTEGRATION_PLAN.md` | å®Œæ•´èœå•ç»“æ„ã€åŠŸèƒ½åˆ†é…ã€é¡µé¢è·¯ç”± |
| åç«¯API | `web/backend/api/strategy.py` | ç­–ç•¥ã€æ¨¡å‹ã€å›æµ‹APIï¼ˆ15ä¸ªæ¥å£ï¼‰ |
| é£é™©API | `web/backend/api/risk.py` | é£é™©æŒ‡æ ‡ã€é¢„è­¦ã€é€šçŸ¥APIï¼ˆ12ä¸ªæ¥å£ï¼‰ |
| æ•°æ®åº“è¿ç§» | `web/backend/migrations/001_create_web_tables.sql` | 8å¼ è¡¨ + ç´¢å¼• + è§¦å‘å™¨ |

### 2. æ•°æ®åº“è®¾è®¡ âœ…

**8å¼ æ ¸å¿ƒè¡¨**:

1. **strategies** - ç­–ç•¥è¡¨ï¼ˆç­–ç•¥CRUDï¼‰
2. **models** - æ¨¡å‹è¡¨ï¼ˆæ¨¡å‹è®­ç»ƒç®¡ç†ï¼‰
3. **backtests** - å›æµ‹è¡¨ï¼ˆå›æµ‹ä»»åŠ¡ï¼‰
4. **backtest_trades** - å›æµ‹äº¤æ˜“æ˜ç»†
5. **risk_metrics** - é£é™©æŒ‡æ ‡è¡¨ï¼ˆVaR/CVaR/Betaï¼‰
6. **risk_alerts** - é£é™©é¢„è­¦è§„åˆ™
7. **alert_history** - é¢„è­¦è§¦å‘å†å²
8. **notification_configs** - é€šçŸ¥é…ç½®

**ç´¢å¼•ä¼˜åŒ–**:
- å•åˆ—ç´¢å¼•: 10ä¸ª
- å¤åˆç´¢å¼•: 2ä¸ª
- è‡ªåŠ¨è§¦å‘å™¨: 2ä¸ªï¼ˆæ›´æ–°æ—¶é—´æˆ³ï¼‰

### 3. åç«¯APIè®¾è®¡ âœ…

**ç­–ç•¥ç®¡ç†APIï¼ˆ15ä¸ªæ¥å£ï¼‰**:

| åŠŸèƒ½æ¨¡å— | æ¥å£æ•° | æ ¸å¿ƒæ¥å£ |
|---------|--------|---------|
| ç­–ç•¥CRUD | 5 | GET/POST/PUT/DELETE /strategies |
| æ¨¡å‹è®­ç»ƒ | 4 | POST /models/train, GET /training/status |
| æ¨¡å‹ç®¡ç† | 2 | GET /models, GET /models/{id}/metrics |
| å›æµ‹æ‰§è¡Œ | 4 | POST /backtest/run, GET /results, GET /chart-data |

**é£é™©ç›‘æ§APIï¼ˆ12ä¸ªæ¥å£ï¼‰**:

| åŠŸèƒ½æ¨¡å— | æ¥å£æ•° | æ ¸å¿ƒæ¥å£ |
|---------|--------|---------|
| é£é™©è®¡ç®— | 4 | GET /var-cvar, GET /beta, GET /dashboard |
| é£é™©é¢„è­¦ | 5 | GET/POST/PUT/DELETE /alerts, GET /alerts/history |
| é€šçŸ¥ç®¡ç† | 3 | GET/POST/PUT /notifications/config, POST /test |

### 4. å‰ç«¯ç»„ä»¶è®¾è®¡ âœ…

**æ ¸å¿ƒVueç»„ä»¶ç¤ºä¾‹**ï¼ˆå·²æä¾›ï¼‰:

| ç»„ä»¶ | åŠŸèƒ½ | å…³é”®æŠ€æœ¯ |
|------|------|---------|
| StrategyList.vue | ç­–ç•¥åˆ—è¡¨ | el-table, åˆ†é¡µ |
| ModelTraining.vue | æ¨¡å‹è®­ç»ƒ | el-form, è¿›åº¦ç›‘æ§ |
| BacktestExecute.vue | å›æµ‹æ‰§è¡Œ | el-form, å®æ—¶è¿›åº¦ |
| BacktestDetail.vue | å›æµ‹è¯¦æƒ… | EChartså›¾è¡¨ |
| RiskDashboard.vue | é£é™©ä»ªè¡¨ç›˜ | ECharts, el-timeline |

---

## ğŸ¯ åŠŸèƒ½åˆ°èœå•çš„æ˜ å°„

### ç­–ç•¥ç®¡ç† â†’ ç­–ç•¥æ–¹æ¡ˆ

**æ˜ å°„çš„MVPåŠŸèƒ½**:
- Week 3 Model Layer: RandomForest, LightGBMæ¨¡å‹è®­ç»ƒ
- ç­–ç•¥é…ç½®å’Œå‚æ•°ç®¡ç†

**Webé¡µé¢**:
- `/strategy/plans/list` - ç­–ç•¥åˆ—è¡¨
- `/strategy/plans/create` - æ–°å»ºç­–ç•¥
- `/strategy/plans/edit/:id` - ç¼–è¾‘ç­–ç•¥
- `/strategy/plans/model/train` - æ¨¡å‹è®­ç»ƒ
- `/strategy/plans/model/list` - æ¨¡å‹ç®¡ç†

---

### ç­–ç•¥ç®¡ç† â†’ å›æµ‹åˆ†æ

**æ˜ å°„çš„MVPåŠŸèƒ½**:
- Week 1-2 Backtest Layer: BacktestEngine, Exchange, Account
- Week 4 Analysis Layer: PerformanceMetrics, BacktestReport

**Webé¡µé¢**:
- `/strategy/backtest/execute` - å›æµ‹æ‰§è¡Œ
- `/strategy/backtest/results` - å›æµ‹ç»“æœåˆ—è¡¨
- `/strategy/backtest/detail/:id` - å›æµ‹è¯¦æƒ…
- `/strategy/backtest/report/:id` - å›æµ‹æŠ¥å‘Š
- `/strategy/backtest/trades/:id` - äº¤æ˜“æ˜ç»†

---

### é£é™©ç›‘æ§ï¼ˆä¸€çº§èœå•ï¼‰

**æ˜ å°„çš„MVPåŠŸèƒ½**:
- Week 4 Analysis: PerformanceMetricsï¼ˆSharpe, Sortino, Calmar, Max Drawdownï¼‰
- Week 5 Utils: ExtendedRiskMetricsï¼ˆVaR, CVaR, Betaï¼‰
- Week 5 Utils: NotificationManagerï¼ˆé‚®ä»¶ã€Webhookï¼‰

**Webé¡µé¢**:
- `/risk/dashboard` - é£é™©ä»ªè¡¨ç›˜
- `/risk/var-cvar` - VaR/CVaRç›‘æ§
- `/risk/beta` - Betaç³»æ•°åˆ†æ
- `/risk/alerts` - é£é™©é¢„è­¦
- `/risk/notifications` - é€šçŸ¥ç®¡ç†

---

## ğŸ“ æŠ€æœ¯æ ˆ

### å‰ç«¯
- **æ¡†æ¶**: Vue 3.4 + TypeScript 5.0
- **UIåº“**: Element Plus 2.4
- **å›¾è¡¨**: ECharts 5.4
- **çŠ¶æ€ç®¡ç†**: Pinia 2.1
- **è·¯ç”±**: Vue Router 4.2
- **HTTP**: Axios

### åç«¯
- **æ¡†æ¶**: FastAPI 0.110+
- **ORM**: SQLAlchemy 2.0
- **æ•°æ®åº“**: PostgreSQL 14+
- **å¼‚æ­¥**: asyncio
- **éªŒè¯**: Pydantic 2.0

### é›†æˆçš„MVPæ¨¡å—
- `backtest/` - Week 1-2 å›æµ‹å±‚
- `model/` - Week 3 æ¨¡å‹å±‚
- `analysis/` - Week 4 åˆ†æå±‚
- `utils/` - Week 5 é€šçŸ¥ç³»ç»Ÿå’Œé£é™©æŒ‡æ ‡

---

## ğŸ“‹ å®æ–½è®¡åˆ’

### Week 1: æ ¸å¿ƒåŠŸèƒ½ï¼ˆP0ï¼‰

**åç«¯**:
- [x] åˆ›å»ºæ•°æ®åº“è¡¨ï¼ˆè¿è¡Œè¿ç§»è„šæœ¬ï¼‰
- [ ] å®ç°ç­–ç•¥CRUD API
- [ ] å®ç°å›æµ‹æ‰§è¡ŒAPI
- [ ] é›†æˆBacktestEngine

**å‰ç«¯**:
- [ ] æ­å»ºé¡¹ç›®è„šæ‰‹æ¶ï¼ˆVue 3 + TypeScriptï¼‰
- [ ] å®ç°è·¯ç”±é…ç½®
- [ ] å¼€å‘ç­–ç•¥åˆ—è¡¨é¡µé¢
- [ ] å¼€å‘å›æµ‹æ‰§è¡Œé¡µé¢
- [ ] å¼€å‘å›æµ‹ç»“æœå±•ç¤ºé¡µé¢

**é¢„è®¡è¾“å‡º**: å¯ä»¥åˆ›å»ºç­–ç•¥ã€æ‰§è¡Œå›æµ‹ã€æŸ¥çœ‹ç»“æœ

---

### Week 2: é‡è¦åŠŸèƒ½ï¼ˆP1ï¼‰

**åç«¯**:
- [ ] å®ç°æ¨¡å‹è®­ç»ƒAPIï¼ˆåå°ä»»åŠ¡ï¼‰
- [ ] å®ç°é£é™©æŒ‡æ ‡è®¡ç®—API
- [ ] å®ç°é£é™©é¢„è­¦API
- [ ] é›†æˆExtendedRiskMetrics

**å‰ç«¯**:
- [ ] å¼€å‘æ¨¡å‹è®­ç»ƒé¡µé¢ï¼ˆå«è¿›åº¦ç›‘æ§ï¼‰
- [ ] å¼€å‘é£é™©ä»ªè¡¨ç›˜
- [ ] å¼€å‘VaR/CVaRç›‘æ§é¡µé¢
- [ ] å¼€å‘é£é™©é¢„è­¦ç®¡ç†é¡µé¢
- [ ] é›†æˆEChartså›¾è¡¨

**é¢„è®¡è¾“å‡º**: å¯ä»¥è®­ç»ƒæ¨¡å‹ã€ç›‘æ§é£é™©ã€é…ç½®é¢„è­¦

---

### Week 3: å¯é€‰åŠŸèƒ½ï¼ˆP2ï¼‰

**åç«¯**:
- [ ] å®ç°é€šçŸ¥ç®¡ç†API
- [ ] é›†æˆNotificationManager
- [ ] ä¼˜åŒ–æ€§èƒ½

**å‰ç«¯**:
- [ ] å¼€å‘é€šçŸ¥é…ç½®é¡µé¢
- [ ] ä¼˜åŒ–UI/UX
- [ ] æ·»åŠ æ•°æ®å¯è§†åŒ–
- [ ] ç§»åŠ¨ç«¯é€‚é…

**é¢„è®¡è¾“å‡º**: å®Œæ•´åŠŸèƒ½Webåº”ç”¨

---

## ğŸ”§ å¼€å‘æŒ‡å—

### 1. æ•°æ®åº“åˆå§‹åŒ–

```bash
# è¿æ¥PostgreSQL
psql -U mystocks_user -d mystocks

# è¿è¡Œè¿ç§»è„šæœ¬
\i web/backend/migrations/001_create_web_tables.sql

# éªŒè¯è¡¨åˆ›å»º
SELECT tablename FROM pg_tables WHERE schemaname = 'public';
```

### 2. åç«¯å¼€å‘

```bash
# å®‰è£…ä¾èµ–
cd web/backend
pip install fastapi sqlalchemy psycopg2-binary pydantic

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
uvicorn app.main:app --reload --port 8000
```

### 3. å‰ç«¯å¼€å‘

```bash
# å®‰è£…ä¾èµ–
cd web/frontend
npm install  # æˆ– bun install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev  # http://localhost:5173
```

### 4. APIæµ‹è¯•

```bash
# è®¿é—®APIæ–‡æ¡£
http://localhost:8000/api/docs  # Swagger UI

# æµ‹è¯•ç­–ç•¥API
curl -X GET "http://localhost:8000/api/v1/strategy/strategies"

# æµ‹è¯•é£é™©API
curl -X GET "http://localhost:8000/api/v1/risk/dashboard"
```

---

## âœ… éªŒæ”¶æ ‡å‡†

### åŠŸèƒ½å®Œæ•´æ€§
- [ ] P0åŠŸèƒ½å…¨éƒ¨å®ç°å¹¶æµ‹è¯•é€šè¿‡
- [ ] æ‰€æœ‰APIæ¥å£æ­£å¸¸å“åº”
- [ ] å‰ç«¯é¡µé¢åŠ è½½æ­£å¸¸
- [ ] å›¾è¡¨æ¸²æŸ“æ­£ç¡®

### æ€§èƒ½æŒ‡æ ‡
- [ ] é¡µé¢åŠ è½½æ—¶é—´ < 1.5ç§’
- [ ] APIå“åº”æ—¶é—´ < 200ms
- [ ] å¤§æ•°æ®é›†æ¸²æŸ“æµç•…ï¼ˆ>1000æ¡è®°å½•ï¼‰

### ä»£ç è´¨é‡
- [ ] TypeScriptç±»å‹è¦†ç›–ç‡ > 80%
- [ ] APIæ–‡æ¡£å®Œæ•´ï¼ˆSwaggerï¼‰
- [ ] ä»£ç æ³¨é‡Šæ¸…æ™°
- [ ] ç»„ä»¶å¤ç”¨è‰¯å¥½

### ç”¨æˆ·ä½“éªŒ
- [ ] æ“ä½œæµç¨‹é¡ºç•…
- [ ] é”™è¯¯æç¤ºå‹å¥½
- [ ] ç§»åŠ¨ç«¯é€‚é…
- [ ] å›½é™…åŒ–æ”¯æŒï¼ˆå¯é€‰ï¼‰

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

1. **WEB_MENU_INTEGRATION_PLAN.md** - å®Œæ•´èœå•é›†æˆæ–¹æ¡ˆ
2. **web/backend/api/strategy.py** - ç­–ç•¥APIå®ç°
3. **web/backend/api/risk.py** - é£é™©APIå®ç°
4. **web/backend/migrations/001_create_web_tables.sql** - æ•°æ®åº“è¿ç§»è„šæœ¬
5. **MVP_IMPLEMENTATION_SUMMARY.md** - MVPæ ¸å¿ƒåŠŸèƒ½æ€»ç»“
6. **WEEK5_COMPLETION_SUMMARY.md** - Week 5å·¥å…·å¢å¼ºæ€»ç»“

---

## ğŸ¯ æ ¸å¿ƒä»·å€¼

### ä»MVPåˆ°Webçš„ä»·å€¼ä¼ é€’

**MVPæ ¸å¿ƒåŠŸèƒ½** â†’ **Webç”¨æˆ·ç•Œé¢**:

| MVPåŠŸèƒ½ | ä»£ç è¡Œæ•° | WebåŠŸèƒ½ | ç”¨æˆ·ä»·å€¼ |
|---------|---------|---------|---------|
| BacktestEngine | 730è¡Œ | å›æµ‹æ‰§è¡Œé¡µé¢ | å¯è§†åŒ–å›æµ‹é…ç½®å’Œæ‰§è¡Œ |
| RandomForest/LightGBM | 620è¡Œ | æ¨¡å‹è®­ç»ƒé¡µé¢ | ç®€åŒ–æ¨¡å‹è®­ç»ƒæµç¨‹ |
| PerformanceMetrics | 200è¡Œ | æ€§èƒ½æŒ‡æ ‡å±•ç¤º | ç›´è§‚çš„æ€§èƒ½åˆ†æ |
| ExtendedRiskMetrics | 217è¡Œ | é£é™©ä»ªè¡¨ç›˜ | å®æ—¶é£é™©ç›‘æ§ |
| NotificationManager | 246è¡Œ | é€šçŸ¥é…ç½®é¡µé¢ | çµæ´»çš„å‘Šè­¦è®¾ç½® |

**æ€»è®¡**: 2,770è¡ŒMVPä»£ç  â†’ å®Œæ•´Webåº”ç”¨

---

## ğŸš€ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

1. **ç«‹å³æ‰§è¡Œ**:
   - è¿è¡Œæ•°æ®åº“è¿ç§»è„šæœ¬
   - è®¾ç½®å¼€å‘ç¯å¢ƒ
   - å¼€å§‹P0åŠŸèƒ½å¼€å‘

2. **æœ¬å‘¨ç›®æ ‡**:
   - å®Œæˆç­–ç•¥CRUD
   - å®Œæˆå›æµ‹æ‰§è¡Œ
   - å®ŒæˆåŸºç¡€UIæ¡†æ¶

3. **ä¸¤å‘¨ç›®æ ‡**:
   - P0+P1åŠŸèƒ½å…¨éƒ¨å®Œæˆ
   - åŸºæœ¬å¯ç”¨çš„Webåº”ç”¨

4. **ä¸‰å‘¨ç›®æ ‡**:
   - å…¨åŠŸèƒ½Webåº”ç”¨
   - æ€§èƒ½ä¼˜åŒ–å®Œæˆ
   - å‡†å¤‡ä¸Šçº¿

---

**æ–‡æ¡£ä½œè€…**: Claude
**é¢„è®¡å¼€å‘å‘¨æœŸ**: 3å‘¨
**é¢„è®¡ä»£ç é‡**: å‰ç«¯~3,000è¡Œ + åç«¯~2,000è¡Œ = 5,000è¡Œ
**åŸºäºMVPä»£ç **: 2,770è¡Œï¼ˆ100%å¤ç”¨ï¼‰
