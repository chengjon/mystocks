# GitHub Actions: AI Test Optimization Integration
# AIæµ‹è¯•ä¼˜åŒ–å™¨é›†æˆå·¥ä½œæµ

name: AI Test Optimization

on:
  pull_request:
    branches: [ main, develop ]
    types: [opened, synchronize, reopened]
  push:
    branches: [ develop ]
  schedule:
    # æ¯å‘¨ä¸€ä¸Šåˆ9ç‚¹è¿è¡Œå…¨é‡åˆ†æ
    - cron: '0 9 * * 1'
  workflow_dispatch:
    inputs:
      scope:
        description: 'åˆ†æèŒƒå›´'
        required: true
        default: 'changed'
        type: choice
        options:
        - changed
        - core
        - adapters
        - monitoring
        - all
      generate_tests:
        description: 'ç”Ÿæˆæµ‹è¯•ä»£ç '
        required: false
        default: false
        type: boolean

env:
  PYTHON_VERSION: '3.12'
  AI_OPTIMIZER_CACHE_DIR: /tmp/ai_optimizer_cache

jobs:
  # æ£€æµ‹å˜æ›´æ–‡ä»¶
  detect-changes:
    name: Detect Changes
    runs-on: ubuntu-latest
    if: github.event_name != 'schedule'
    outputs:
      python-files: ${{ steps.changes.outputs.python-files }}
      has-python-changes: ${{ steps.changes.outputs.has-python-changes }}
      core-changed: ${{ steps.changes.outputs.core-changed }}
      adapters-changed: ${{ steps.changes.outputs.adapters-changed }}
      monitoring-changed: ${{ steps.changes.outputs.monitoring-changed }}

    steps:
    - name: Checkout code
      uses: actions/checkout@v4
      with:
        fetch-depth: 0

    - name: Detect Python file changes
      id: changes
      run: |
        if [ "${{ github.event_name }}" = "pull_request" ]; then
          # PRæ¨¡å¼ï¼šæ¯”è¾ƒPRåˆ†æ”¯ä¸ç›®æ ‡åˆ†æ”¯
          BASE_BRANCH=${{ github.base_ref }}
          echo "Analyzing changes against $BASE_BRANCH"

          # è·å–å˜æ›´çš„Pythonæ–‡ä»¶
          CHANGED_FILES=$(git diff --name-only origin/$BASE_BRANCH...HEAD | grep '\.py$' || echo "")
          echo "python-files=$CHANGED_FILES" >> $GITHUB_OUTPUT

          # æ£€æŸ¥æ˜¯å¦æœ‰Pythonæ–‡ä»¶å˜æ›´
          if [ -n "$CHANGED_FILES" ]; then
            echo "has-python-changes=true" >> $GITHUB_OUTPUT
          else
            echo "has-python-changes=false" >> $GITHUB_OUTPUT
          fi

          # æ£€æŸ¥ç‰¹å®šç›®å½•å˜æ›´
          if echo "$CHANGED_FILES" | grep -q "src/core/"; then
            echo "core-changed=true" >> $GITHUB_OUTPUT
          else
            echo "core-changed=false" >> $GITHUB_OUTPUT
          fi

          if echo "$CHANGED_FILES" | grep -q "src/adapters/"; then
            echo "adapters-changed=true" >> $GITHUB_OUTPUT
          else
            echo "adapters-changed=false" >> $GITHUB_OUTPUT
          fi

          if echo "$CHANGED_FILES" | grep -q "src/monitoring/"; then
            echo "monitoring-changed=true" >> $GITHUB_OUTPUT
          else
            echo "monitoring-changed=false" >> $GITHUB_OUTPUT
          fi
        else
          # Pushæ¨¡å¼ï¼šæ¯”è¾ƒå½“å‰æäº¤ä¸ä¸Šä¸€ä¸ªæäº¤
          CHANGED_FILES=$(git diff --name-only HEAD~1 | grep '\.py$' || echo "")
          echo "python-files=$CHANGED_FILES" >> $GITHUB_OUTPUT
          echo "has-python-changes=$(if [ -n "$CHANGED_FILES" ]; then echo "true"; else echo "false"; fi)" >> $GITHUB_OUTPUT
        fi

  # AIæµ‹è¯•ä¼˜åŒ–åˆ†æ
  ai-optimization:
    name: AI Test Optimization Analysis
    runs-on: ubuntu-latest
    needs: detect-changes
    if: |
      github.event_name == 'schedule' ||
      github.event_name == 'workflow_dispatch' ||
      needs.detect-changes.outputs.has-python-changes == 'true'

    steps:
    - name: Checkout code
      uses: actions/checkout@v4
      with:
        fetch-depth: 0

    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: ${{ env.PYTHON_VERSION }}

    - name: Cache dependencies
      uses: actions/cache@v3
      with:
        path: ~/.cache/pip
        key: ${{ runner.os }}-pip-${{ hashFiles('**/requirements.txt') }}
        restore-keys: |
          ${{ runner.os }}-pip-

    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install pytest pytest-cov ast-tools memory-profiler

    - name: Create cache directory
      run: |
        mkdir -p ${{ env.AI_OPTIMIZER_CACHE_DIR }}

    - name: Determine analysis scope
      id: scope
      run: |
        case "${{ github.event_name }}" in
          "schedule")
            SCOPE="all"
            FILES="src/"
            ;;
          "workflow_dispatch")
            SCOPE="${{ github.event.inputs.scope }}"
            case "$SCOPE" in
              "changed")
                FILES="${{ needs.detect-changes.outputs.python-files }}"
                ;;
              "core")
                FILES="src/core/"
                ;;
              "adapters")
                FILES="src/adapters/"
                ;;
              "monitoring")
                FILES="src/monitoring/"
                ;;
              "all")
                FILES="src/"
                ;;
            esac
            ;;
          *)
            FILES="${{ needs.detect-changes.outputs.python-files }}"
            SCOPE="changed"
            ;;
        esac

        echo "scope=$SCOPE" >> $GITHUB_OUTPUT
        echo "files=$FILES" >> $GITHUB_OUTPUT
        echo "Analysis scope: $SCOPE"
        echo "Files to analyze: $FILES"

    - name: Run AI Test Optimizer
      id: optimizer
      run: |
        echo "ğŸ¤– Running AI Test Optimizer..."
        echo "Scope: ${{ steps.scope.outputs.scope }}"
        echo "Files: ${{ steps.scope.outputs.files }}"

        # æ„å»ºå‘½ä»¤å‚æ•°
        OPTIMIZER_CMD="python scripts/ai_test_optimizer.py"

        if [ -n "${{ steps.scope.outputs.files }}" ]; then
          OPTIMIZER_CMD="$OPTIMIZER_CMD ${{ steps.scope.outputs.files }}"
        fi

        OPTIMIZER_CMD="$OPTIMIZER_CMD --batch --verbose --output optimization-report.md"

        # æ·»åŠ æµ‹è¯•ç”Ÿæˆå‚æ•°ï¼ˆå¦‚æœéœ€è¦ï¼‰
        if [ "${{ github.event.inputs.generate_tests }}" = "true" ] || [ "${{ steps.scope.outputs.scope }}" = "all" ]; then
          OPTIMIZER_CMD="$OPTIMIZER_CMD --generate-tests"
        fi

        # è¿è¡Œä¼˜åŒ–å™¨
        echo "Running: $OPTIMIZER_CMD"

        # æ•è·è¾“å‡ºå’Œé€€å‡ºç 
        set +e
        eval $OPTIMIZER_CMD 2>&1 | tee optimizer-output.log
        OPTIMIZER_EXIT_CODE=$?
        set -e

        echo "Optimizer exit code: $OPTIMIZER_EXIT_CODE"
        echo "optimizer-exit-code=$OPTIMIZER_EXIT_CODE" >> $GITHUB_OUTPUT

        # æ£€æŸ¥æ˜¯å¦ç”Ÿæˆäº†æŠ¥å‘Š
        if [ -f optimization-report.md ]; then
          echo "optimizer-report-generated=true" >> $GITHUB_OUTPUT
          echo "âœ… Optimization report generated"
        else
          echo "optimizer-report-generated=false" >> $GITHUB_OUTPUT
          echo "âŒ No optimization report generated"
        fi

        # æ£€æŸ¥æ˜¯å¦ç”Ÿæˆäº†æµ‹è¯•
        if [ -d ai_generated_tests ]; then
          TEST_COUNT=$(find ai_generated_tests -name "*.py" | wc -l)
          echo "optimizer-tests-generated=$TEST_COUNT" >> $GITHUB_OUTPUT
          echo "âœ… Generated $TEST_COUNT test files"
        else
          echo "optimizer-tests-generated=0" >> $GITHUB_OUTPUT
        fi

    - name: Quality Gate Check
      id: quality-gate
      run: |
        QUALITY_PASSED=true
        QUALITY_ISSUES=""

        if [ -f optimization-report.md ]; then
          echo "ğŸ” Performing quality gate checks..."

          # æ£€æŸ¥ä½è´¨é‡æ¨¡å—ï¼ˆè´¨é‡è¯„åˆ† < 70ï¼‰
          LOW_QUALITY_COUNT=$(grep -c "è´¨é‡è¯„åˆ†: [0-6][0-9]\." optimization-report.md || echo "0")
          echo "Low quality modules: $LOW_QUALITY_COUNT"

          if [ "$LOW_QUALITY_COUNT" -gt 0 ]; then
            QUALITY_PASSED=false
            QUALITY_ISSUES="$QUALITY_ISSUES å‘ç° $LOW_QUALITY_COUNT ä¸ªä½è´¨é‡æ¨¡å—; "
          fi

          # æ£€æŸ¥æä½è¦†ç›–ç‡æ¨¡å—ï¼ˆè¦†ç›–ç‡ < 50%ï¼‰
          LOW_COVERAGE_COUNT=$(grep -c "å½“å‰è¦†ç›–ç‡: [0-4][0-9]\." optimization-report.md || echo "0")
          echo "Low coverage modules: $LOW_COVERAGE_COUNT"

          if [ "$LOW_COVERAGE_COUNT" -gt 0 ]; then
            QUALITY_PASSED=false
            QUALITY_ISSUES="$QUALITY_ISSUES å‘ç° $LOW_COVERAGE_COUNT ä¸ªæä½è¦†ç›–ç‡æ¨¡å—; "
          fi

          # æ£€æŸ¥å¤æ‚åº¦é—®é¢˜
          COMPLEXITY_ISSUES_COUNT=$(grep -c "å¤æ‚åº¦" optimization-report.md || echo "0")
          echo "Complexity issues: $COMPLEXITY_ISSUES_COUNT"

          if [ "$COMPLEXITY_ISSUES_COUNT" -gt 5 ]; then
            QUALITY_PASSED=false
            QUALITY_ISSUES="$QUALITY_ISSUES å¤æ‚åº¦é—®é¢˜è¿‡å¤š ($COMPLEXITY_ISSUES_COUNT ä¸ª); "
          fi
        else
          QUALITY_PASSED=false
          QUALITY_ISSUES="æœªç”Ÿæˆä¼˜åŒ–æŠ¥å‘Š; "
        fi

        echo "quality-passed=$QUALITY_PASSED" >> $GITHUB_OUTPUT
        echo "quality-issues=$QUALITY_ISSUES" >> $GITHUB_OUTPUT

        if [ "$QUALITY_PASSED" = "true" ]; then
          echo "âœ… Quality gate passed"
        else
          echo "âŒ Quality gate failed: $QUALITY_ISSUES"
        fi

    - name: Run Generated Tests
      if: steps.optimizer.outputs.optimizer-tests-generated > 0
      run: |
        echo "ğŸ§ª Running generated tests..."

        # è¿è¡Œç”Ÿæˆçš„æµ‹è¯•
        pytest ai_generated_tests/ -v --tb=short --junitxml=generated-tests-results.xml

        # ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
        pytest ai_generated_tests/ --cov=src --cov-report=xml --cov-report=html || echo "Coverage report generation completed with warnings"

    - name: Upload Optimization Report
      uses: actions/upload-artifact@v3
      if: always()
      with:
        name: ai-optimization-report
        path: |
          optimization-report.md
          optimizer-output.log
        retention-days: 30

    - name: Upload Generated Tests
      uses: actions/upload-artifact@v3
      if: steps.optimizer.outputs.optimizer-tests-generated > 0
      with:
        name: ai-generated-tests
        path: ai_generated_tests/
        retention-days: 7

    - name: Upload Test Results
      uses: actions/upload-artifact@v3
      if: steps.optimizer.outputs.optimizer-tests-generated > 0
      with:
        name: generated-tests-results
        path: |
          generated-tests-results.xml
          htmlcov/
        retention-days: 7

    - name: Upload Coverage Reports
      uses: codecov/codecov-action@v3
      if: steps.optimizer.outputs.optimizer-tests-generated > 0
      with:
        files: ./coverage.xml
        flags: ai-generated-tests
        name: AI Generated Tests Coverage
        fail_ci_if_error: false

  # è´¨é‡é—¨ç¦æ£€æŸ¥
  quality-gate:
    name: Quality Gate
    runs-on: ubuntu-latest
    needs: ai-optimization
    if: always() && (needs.ai-optimization.result == 'success' || needs.ai-optimization.result == 'failure')

    outputs:
      quality-pass: ${{ steps.gate.outputs.quality-pass }}

    steps:
    - name: Download optimization report
      uses: actions/download-artifact@v3
      with:
        name: ai-optimization-report

    - name: Quality Gate Evaluation
      id: gate
      run: |
        if [ -f optimization-report.md ]; then
          echo "ğŸ“‹ Analyzing optimization report..."

          # æå–å…³é”®æŒ‡æ ‡
          AVG_COVERAGE=$(grep "å¹³å‡è¦†ç›–ç‡:" optimization-report.md | grep -o "[0-9.]*" || echo "0")
          AVG_QUALITY=$(grep "å¹³å‡è´¨é‡è¯„åˆ†:" optimization-report.md | grep -o "[0-9.]*" || echo "0")
          NEEDS_OPTIMIZATION=$(grep -c "éœ€è¦ä¼˜åŒ–çš„æ¨¡å—:" optimization-report.md | grep -o "[0-9]*" || echo "0")

          echo "Average coverage: ${AVG_COVERAGE}%"
          echo "Average quality: ${AVG_QUALITY}/100"
          echo "Modules needing optimization: ${NEEDS_OPTIMIZATION}"

          # è´¨é‡é—¨ç¦æ ‡å‡†
          MIN_COVERAGE=75
          MIN_QUALITY=70
          MAX_NEEDING_OPTIMIZATION=5

          QUALITY_PASSED=true
          GATE_ISSUES=""

          # æ£€æŸ¥è¦†ç›–ç‡
          if (( $(echo "$AVG_COVERAGE < $MIN_COVERAGE" | bc -l) )); then
            QUALITY_PASSED=false
            GATE_ISSUES="$GATE_ISSUES è¦†ç›–ç‡ä¸è¾¾æ ‡ (${AVG_COVERAGE}% < ${MIN_COVERAGE}%); "
          fi

          # æ£€æŸ¥è´¨é‡è¯„åˆ†
          if (( $(echo "$AVG_QUALITY < $MIN_QUALITY" | bc -l) )); then
            QUALITY_PASSED=false
            GATE_ISSUES="$GATE_ISSUES è´¨é‡è¯„åˆ†ä¸è¾¾æ ‡ (${AVG_QUALITY} < ${MIN_QUALITY}); "
          fi

          # æ£€æŸ¥éœ€è¦ä¼˜åŒ–çš„æ¨¡å—æ•°
          if [ "$NEEDS_OPTIMIZATION" -gt "$MAX_NEEDING_OPTIMIZATION" ]; then
            QUALITY_PASSED=false
            GATE_ISSUES="$GATE_ISSUES éœ€è¦ä¼˜åŒ–çš„æ¨¡å—è¿‡å¤š (${NEEDS_OPTIMIZATION} > ${MAX_NEEDING_OPTIMIZATION}); "
          fi

          echo "quality-pass=$QUALITY_PASSED" >> $GITHUB_OUTPUT
          echo "gate-issues=$GATE_ISSUES" >> $GITHUB_OUTPUT
          echo "avg-coverage=$AVG_COVERAGE" >> $GITHUB_OUTPUT
          echo "avg-quality=$AVG_QUALITY" >> $GITHUB_OUTPUT

          if [ "$QUALITY_PASSED" = "true" ]; then
            echo "âœ… Quality gate passed"
          else
            echo "âŒ Quality gate failed: $GATE_ISSUES"
          fi
        else
          echo "quality-pass=false" >> $GITHUB_OUTPUT
          echo "gate-issues=Optimization report not found" >> $GITHUB_OUTPUT
          echo "âŒ Quality gate failed: Optimization report not found"
        fi

  # PRè¯„è®ºï¼ˆä»…åœ¨PRæ—¶è¿è¡Œï¼‰
  pr-comment:
    name: PR Comment
    runs-on: ubuntu-latest
    needs: [ai-optimization, quality-gate]
    if: github.event_name == 'pull_request' && (needs.ai-optimization.result == 'success' || needs.ai-optimization.result == 'failure')

    steps:
    - name: Download optimization report
      uses: actions/download-artifact@v3
      with:
        name: ai-optimization-report

    - name: Download test results
      uses: actions/download-artifact@v3
      if: needs.ai-optimization.outputs.optimizer-tests-generated > 0
      with:
        name: generated-tests-results

    - name: Comment on PR
      uses: actions/github-script@v6
      with:
        script: |
          const fs = require('fs');

          // è¯»å–ä¼˜åŒ–æŠ¥å‘Š
          let reportContent = "";
          let summary = "";
          let details = "";

          if (fs.existsSync('optimization-report.md')) {
            reportContent = fs.readFileSync('optimization-report.md', 'utf8');

            // æå–æ€»ä½“ç»Ÿè®¡
            const statsMatch = reportContent.match(/## ğŸ“Š æ€»ä½“ç»Ÿè®¡[\s\S]*?(?=##|$)/);
            if (statsMatch) {
              summary += statsMatch[0] + '\n\n';
            }

            // æå–è¯¦ç»†å»ºè®®ï¼ˆé™åˆ¶é•¿åº¦ï¼‰
            const detailsMatch = reportContent.match(/## ğŸ“‹ è¯¦ç»†ä¼˜åŒ–å»ºè®®[\s\S]*?(?=##|$)/);
            if (detailsMatch) {
              // åªæ˜¾ç¤ºå‰3ä¸ªæ¨¡å—çš„å»ºè®®
              const sections = detailsMatch[0].split('### ').slice(1, 4);
              details += '### ' + sections.join('### ');
            }
          }

          // æ„å»ºè¯„è®ºå†…å®¹
          let comment = `## ğŸ¤– AIæµ‹è¯•ä¼˜åŒ–æŠ¥å‘Š\n\n`;

          if (summary) {
            comment += summary;
          }

          // æ·»åŠ è´¨é‡é—¨ç¦ç»“æœ
          const qualityPassed = '${{ needs.quality-gate.outputs.quality-pass }}' === 'true';
          if (qualityPassed) {
            comment += '### âœ… è´¨é‡é—¨ç¦\n\næ‰€æœ‰è´¨é‡æ£€æŸ¥é€šè¿‡ï¼Œä»£ç å¯ä»¥åˆå¹¶ã€‚\n\n';
          } else {
            comment += '### âŒ è´¨é‡é—¨ç¦\n\n';
            comment += 'ä»£ç è´¨é‡æ£€æŸ¥æœªå®Œå…¨é€šè¿‡ï¼Œè¯·æ£€æŸ¥ä»¥ä¸‹é—®é¢˜ï¼š\n';
            comment += '- ${{ needs.quality-gate.outputs.gate-issues }}\n\n';
          }

          if (details) {
            comment += details + '\n';
          }

          // æ·»åŠ æµ‹è¯•ç»“æœ
          if (fs.existsSync('generated-tests-results.xml')) {
            comment += '### ğŸ§ª ç”Ÿæˆçš„æµ‹è¯•\n\n';
            comment += 'âœ… å·²ç”Ÿæˆå¹¶è¿è¡Œæµ‹è¯•ç”¨ä¾‹ï¼Œè¯¦ç»†ç»“æœè¯·æŸ¥çœ‹ActionsæŠ¥å‘Šã€‚\n\n';
          }

          comment += `---\n\n`;
          comment += `**ğŸ“Š è´¨é‡æŒ‡æ ‡**\n`;
          comment += `- å¹³å‡è¦†ç›–ç‡: ${{ needs.quality-gate.outputs.avg-coverage }}%\n`;
          comment += `- å¹³å‡è´¨é‡è¯„åˆ†: ${{ needs.quality-gate.outputs.avg-quality }}/100\n\n`;

          comment += `ğŸ“‹ [æŸ¥çœ‹å®Œæ•´æŠ¥å‘Š](https://github.com/${{ github.repository }}/actions/runs/${{ github.run_id }})\n`;
          comment += `ğŸ¤– [AIæµ‹è¯•ä¼˜åŒ–å™¨æ–‡æ¡£](https://github.com/${{ github.repository }}/blob/main/docs/guides/AI_TEST_OPTIMIZER_USER_GUIDE.md)\n`;

          // æ£€æŸ¥æ˜¯å¦å·²ç»è¯„è®ºè¿‡
          const { data: comments } = await github.rest.issues.listComments({
            issue_number: context.issue.number,
            owner: context.repo.owner,
            repo: context.repo.repo,
          });

          const botComment = comments.find(comment =>
            comment.body.includes('ğŸ¤– AIæµ‹è¯•ä¼˜åŒ–æŠ¥å‘Š') &&
            comment.user.type === 'Bot'
          );

          if (botComment) {
            // æ›´æ–°ç°æœ‰è¯„è®º
            await github.rest.issues.updateComment({
              comment_id: botComment.id,
              owner: context.repo.owner,
              repo: context.repo.repo,
              body: comment
            });
            console.log('Updated existing AI optimization comment');
          } else {
            // åˆ›å»ºæ–°è¯„è®º
            await github.rest.issues.createComment({
              issue_number: context.issue.number,
              owner: context.repo.owner,
              repo: context.repo.name,
              body: comment
            });
            console.log('Created new AI optimization comment');
          }

  # æ€»ç»“æŠ¥å‘Š
  summary:
    name: AI Optimization Summary
    runs-on: ubuntu-latest
    needs: [ai-optimization, quality-gate]
    if: always()

    steps:
    - name: Download reports
      uses: actions/download-artifact@v3
      with:
        name: ai-optimization-report

    - name: Generate Summary
      run: |
        echo "ğŸ“Š AIæµ‹è¯•ä¼˜åŒ–æ‰§è¡Œæ‘˜è¦"
        echo "=========================="
        echo "æ‰§è¡Œæ—¶é—´: $(date)"
        echo "ä»“åº“: ${{ github.repository }}"
        echo "åˆ†æ”¯: ${{ github.ref_name }}"
        echo "äº‹ä»¶: ${{ github.event_name }}"
        echo ""

        if [ -f optimization-report.md ]; then
          echo "âœ… ä¼˜åŒ–æŠ¥å‘Šç”ŸæˆæˆåŠŸ"

          # æå–å…³é”®ä¿¡æ¯
          echo "ğŸ“ˆ å…³é”®æŒ‡æ ‡:"
          grep -E "(å¹³å‡è¦†ç›–ç‡|å¹³å‡è´¨é‡è¯„åˆ†|éœ€è¦ä¼˜åŒ–çš„æ¨¡å—)" optimization-report.md | sed 's/^/- /'

          echo ""
          echo "ğŸ¯ è´¨é‡é—¨ç¦ç»“æœ:"
          if [ "${{ needs.quality-gate.outputs.quality-pass }}" = "true" ]; then
            echo "âœ… è´¨é‡é—¨ç¦é€šè¿‡"
          else
            echo "âŒ è´¨é‡é—¨ç¦å¤±è´¥"
            echo "é—®é¢˜: ${{ needs.quality-gate.outputs.gate-issues }}"
          fi

          echo ""
          echo "ğŸ“‹ ç”Ÿæˆçš„æ–‡ä»¶:"
          if [ "${{ needs.ai-optimization.outputs.optimizer-tests-generated }}" -gt 0 ]; then
            echo "- æµ‹è¯•æ–‡ä»¶: ${{ needs.ai-optimization.outputs.optimizer-tests-generated }} ä¸ª"
          fi
          echo "- ä¼˜åŒ–æŠ¥å‘Š: optimization-report.md"
        else
          echo "âŒ æœªç”Ÿæˆä¼˜åŒ–æŠ¥å‘Š"
        fi

        echo ""
        echo "ğŸ”— è¯¦ç»†æŠ¥å‘Š:"
        echo "- Actionsè¿è¡Œ: https://github.com/${{ github.repository }}/actions/runs/${{ github.run_id }}"
        echo "- ä¼˜åŒ–æŠ¥å‘Š: æŸ¥çœ‹ä¸Šä¼ çš„artifacts"