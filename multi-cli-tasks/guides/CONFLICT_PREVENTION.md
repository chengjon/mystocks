# Git Worktreeåä½œå†²çªé¢„é˜²è§„èŒƒ

**æ–‡æ¡£ç‰ˆæœ¬**: v2.0
**åˆ›å»ºæ—¥æœŸ**: 2025-12-29
**é—®é¢˜æ¥æº**: Worker CLIåé¦ˆçš„å®žé™…é—®é¢˜
**æœ€åŽæ›´æ–°**: 2025-12-30
**ç»´æŠ¤è€…**: Main CLI

---

## ðŸ“‹ æ–‡æ¡£ç›®çš„

æœ¬æ–‡æ¡£è§£å†³4ä¸ªå…³é”®çš„Git Worktreeåä½œé—®é¢˜ï¼š

1. **Pre-commité…ç½®å†²çª**ï¼šä¸»CLIå’ŒWorker CLIåŒæ—¶ä¿®æ”¹pre-commité…ç½®å¯¼è‡´åˆå¹¶å†²çª
2. **ä»»åŠ¡åˆ†é…å†²çª**ï¼šå¤šä¸ªCLIä¿®æ”¹åŒä¸€æ–‡ä»¶å¯¼è‡´åä½œå†²çª
3. **ä¸»CLIå¿˜è®°åŒæ­¥å·²å®Œæˆworktree**ï¼šä¸»CLIåœ¨å¼€å§‹æ–°å·¥ä½œå‰å¿˜è®°åˆå¹¶å·²å®Œæˆçš„worktree
4. **ä»»åŠ¡æ–‡æ¡£æ–¹å¼**ï¼šä½¿ç”¨README.md vs TASK.md + TASK-REPORT.mdå¯¼è‡´å†²çª

**æ ¸å¿ƒåŽŸåˆ™**:
- âœ… **æ˜Žç¡®æ‰€æœ‰æƒ**ï¼šæ¯ä¸ªæ–‡ä»¶æœ‰æ˜Žç¡®çš„æ‹¥æœ‰è€…
- âœ… **èŒè´£åˆ†ç¦»**ï¼šæ¯ä¸ªCLIæœ‰æ¸…æ™°çš„èŒè´£èŒƒå›´
- âœ… **é…ç½®é›†ä¸­ç®¡ç†**ï¼špre-commité…ç½®åœ¨ä¸»ä»“åº“ç»Ÿä¸€ç®¡ç†
- âœ… **æ–‡ä»¶ç»„ç»‡æ ‡å‡†åŒ–**ï¼šé€šè¿‡ç›®å½•ç»“æž„é¿å…å†²çª
- âœ… **ä»»åŠ¡æ–‡æ¡£åˆ†ç¦»**ï¼šTASK.mdï¼ˆä»»åŠ¡è¯´æ˜Žï¼‰â†’ TASK-REPORT.mdï¼ˆè¿›åº¦æŠ¥å‘Šï¼‰â†’ TASK-*-REPORT.mdï¼ˆå®ŒæˆæŠ¥å‘Šï¼‰

---

## ðŸš¨ é—®é¢˜1ï¼šPre-commité…ç½®å†²çª

### **é—®é¢˜æè¿°**

**åœºæ™¯**ï¼š
```
æ—¶é—´çº¿ï¼š
Day 1 10:00 - ä¸»CLIä¿®æ”¹ä¸»ä»“åº“çš„.pre-commit-config.yaml
Day 1 14:00 - Worker CLI-1ä¿®æ”¹è‡ªå·±worktreeçš„.pre-commit-config.yaml
Day 1 18:00 - Worker CLI-2ä¿®æ”¹è‡ªå·±worktreeçš„.pre-commit-config.yaml
Day 2 10:00 - åˆå¹¶æ—¶äº§ç”Ÿå†²çª
```

**æ ¹æœ¬åŽŸå› **:
- `.pre-commit-config.yaml`åœ¨æ‰€æœ‰ä»“åº“ä¸­éƒ½æœ‰
- å„ä¸ªCLIæ ¹æ®è‡ªå·±çš„éœ€æ±‚ä¿®æ”¹é…ç½®
- Gitæ— æ³•è‡ªåŠ¨åˆå¹¶é…ç½®æ–‡ä»¶çš„ä¿®æ”¹

### **è§£å†³æ–¹æ¡ˆ**

#### **æ–¹æ¡ˆAï¼šPre-commité…ç½®åªç”±ä¸»CLIç®¡ç†** âœ… **å¼ºçƒˆæŽ¨è**

**åŽŸåˆ™**:
- âœ… ä¸»ä»“åº“ï¼š`.pre-commit-config.yaml`ç”±ä¸»CLIç»´æŠ¤
- âœ… Worker CLIï¼šç»§æ‰¿ä¸»ä»“åº“çš„pre-commité…ç½®ï¼Œ**ä¸ä¿®æ”¹**
- âœ… çŽ¯å¢ƒå˜é‡ç»•è¿‡ï¼šWorker CLIä½¿ç”¨`DISABLE_DIR_STRUCTURE_CHECK=1`

**å®žæ–½æ­¥éª¤**ï¼š

**1. ä¸»CLIèŒè´£**ï¼ˆåœ¨ä¸»ä»“åº“`/opt/claude/mystocks_spec`ï¼‰:
```bash
# ä¸»CLIå”¯ä¸€è´Ÿè´£ç»´æŠ¤pre-commité…ç½®
cd /opt/claude/mystocks_spec

# ä¿®æ”¹.pre-commit-config.yaml
vim .pre-commit-config.yaml

# æäº¤ä¿®æ”¹
git add .pre-commit-config.yaml
git commit -m "chore(pre-commit): update configuration for all CLIs"
```

**2. Worker CLIèŒè´£**ï¼ˆåœ¨worktreeä¸­ï¼‰:
```bash
# Worker CLIä¸ä¿®æ”¹.pre-commit-config.yaml
# ä½¿ç”¨çŽ¯å¢ƒå˜é‡ç»•è¿‡ä¸é€‚ç”¨çš„æ£€æŸ¥

# æ–¹å¼1: ç»•è¿‡ç›®å½•ç»“æž„æ£€æŸ¥ï¼ˆæŽ¨èï¼‰
DISABLE_DIR_STRUCTURE_CHECK=1 git commit -m "message"

# æ–¹å¼2: å®Œå…¨è·³è¿‡hooksï¼ˆä»…ç´§æ€¥æƒ…å†µï¼‰
git commit --no-verify -m "message"
```

**è§’è‰²è¾¹ç•Œæé†’**:
- **Main CLI**: ç»´æŠ¤ .pre-commit-config.yamlã€.FILE_OWNERSHIPã€å…¨å±€æµç¨‹ä¸Žå†²çªåè°ƒ
- **Worker CLI**: ä»…åœ¨è‡ªå·±çš„worktreeå†…æ‰§è¡Œä»»åŠ¡ä¸Žæäº¤ï¼Œä¸è·¨æ‰€æœ‰æƒä¿®æ”¹æ–‡ä»¶

---

## ðŸš¨ é—®é¢˜2ï¼šä»»åŠ¡åˆ†é…å†²çª

### **é—®é¢˜æè¿°**

**åœºæ™¯**ï¼š
```
æ—¶é—´çº¿ï¼š
Day 1 10:00 - CLI-1ä¿®æ”¹äº†web/frontend/src/components/Chart.vue
Day 1 14:00 - CLI-6ä¹Ÿåœ¨ä»£ç è´¨é‡æ£€æŸ¥ä¸­ä¿®æ”¹äº†åŒä¸€æ–‡ä»¶
Day 2 10:00 - åˆå¹¶æ—¶äº§ç”Ÿå†²çªï¼šBoth modified
```

**æ ¹æœ¬åŽŸå› **:
- æ–‡ä»¶æ‰€æœ‰æƒä¸æ˜Žç¡®
- èŒè´£èŒƒå›´é‡å 
- ç¼ºå°‘åè°ƒæœºåˆ¶

### **è§£å†³æ–¹æ¡ˆ**

#### **æ ¸å¿ƒåŽŸåˆ™ï¼šæ¸…æ™°çš„æ–‡ä»¶æ‰€æœ‰æƒ**

```
æ–‡ä»¶æ‰€æœ‰æƒè§„åˆ™ï¼š
1. æ¯ä¸ªæ–‡ä»¶æœ‰æ˜Žç¡®çš„æ‹¥æœ‰è€…
2. æ‹¥æœ‰è€…è´Ÿè´£ä¿®æ”¹ï¼Œå…¶ä»–äººåªè¯»
3. è·¨CLIä¿®æ”¹éœ€è¦ä¸»CLIåè°ƒ
4. ä½¿ç”¨ç›®å½•ç»“æž„ç‰©ç†éš”ç¦»
```

#### **è§£å†³æ–¹æ¡ˆAï¼šç›®å½•èŒè´£åˆ’åˆ†** âœ… **å¼ºçƒˆæŽ¨è**

**åŽŸåˆ™**ï¼šé€šè¿‡ç›®å½•ç»“æž„ç‰©ç†éš”ç¦»ï¼Œé¿å…å†²çª

**å®Œæ•´ç›®å½•æ‰€æœ‰æƒè¡¨**ï¼š

| ç›®å½• | æ‹¥æœ‰è€…CLI | è¯´æ˜Ž | å…¶ä»–CLI |
|------|----------|------|---------|
| `src/` | ä¸»CLIï¼ˆä¸»ä»“åº“ï¼‰ | æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ | âŒ ä¸å¯ä¿®æ”¹ |
| `web/frontend/src/components/Charts/` | CLI-1 | Kçº¿å›¾ç»„ä»¶ | âŒ åªè¯» |
| `web/frontend/src/api/klineApi.ts` | CLI-1 | Kçº¿å›¾API | âŒ åªè¯» |
| `web/frontend/src/api/indicatorApi.ts` | CLI-1 | æŒ‡æ ‡API | âŒ åªè¯» |
| `docs/api/contracts/` | CLI-2 | APIå¥‘çº¦æ–‡æ¡£ | âŒ åªè¯» |
| `src/gpu/` | CLI-5 | GPUç›¸å…³ä»£ç  | âŒ åªè¯» |
| `scripts/maintenance/` | CLI-6 | è´¨é‡ä¿è¯è„šæœ¬ | âŒ åªè¯» |
| `tests/` | CLI-6 | æµ‹è¯•æ–‡ä»¶ | âŒ åªè¯» |
| `web/backend/app/schemas/` | CLI-2 | æ•°æ®æ¨¡å¼å®šä¹‰ | âŒ åªè¯» |
| `.pre-commit-config.yaml` | ä¸»CLI | Pre-commité…ç½® | âŒ åªè¯» |
| `pyproject.toml` | ä¸»CLI | é¡¹ç›®é…ç½® | âŒ åªè¯» |

**å…±äº«æ–‡ä»¶ï¼ˆåè°ƒä¿®æ”¹ï¼‰**ï¼š
- `README.md` - ä¸»CLIå’ŒWorker CLIåè°ƒ
- `CLAUDE.md` - ä¸»CLIç»´æŠ¤ï¼ŒWorker CLIå»ºè®®
- `.env.example` - ä¸»CLIç»´æŠ¤

---

## ðŸš¨ é—®é¢˜3ï¼šä¸»CLIå¿˜è®°åŒæ­¥å·²å®Œæˆworktree (2025-12-30å®žæˆ˜æ¡ˆä¾‹)

### **é—®é¢˜æè¿°**

**åœºæ™¯**ï¼š
```
æ—¶é—´çº¿ï¼š
2025-12-29 14:00 - CLI-2å®ŒæˆAPIå¥‘çº¦ç®¡ç†å¹³å°ï¼Œæäº¤åˆ°phase6-api-contract-standardizationåˆ†æ”¯
2025-12-29 18:00 - CLI-3å®ŒæˆKçº¿å›¾å¯è§†åŒ–ï¼Œæäº¤åˆ°cli3-kline-chartåˆ†æ”¯
2025-12-29 20:00 - CLI-5å®ŒæˆGPUç›‘æŽ§ï¼Œæäº¤åˆ°cli5-gpu-monitoringåˆ†æ”¯
2025-12-30 00:00 - ä¸»CLIå¼€å§‹API&Webé›†æˆå·¥ä½œï¼Œç›´æŽ¥å°è¯•ä½¿ç”¨å¥‘çº¦ç®¡ç†å·¥å…·
2025-12-30 00:05 - âŒ å¤±è´¥ï¼šå¥‘çº¦ç®¡ç†å·¥å…·ç›®å½•ä¸å­˜åœ¨
2025-12-30 00:10 - âš ï¸  å‘çŽ°é—®é¢˜ï¼šä¸»CLIå¿˜è®°å…ˆpullå·²å®Œæˆçš„worktreeä»£ç 
```

**æ ¹æœ¬åŽŸå› **:
- ä¸»CLIåœ¨å¼€å§‹æ–°å·¥ä½œå‰ï¼Œ**å¿˜è®°**ç³»ç»Ÿæ€§æ£€æŸ¥å¹¶åˆå¹¶æ‰€æœ‰worker CLIçš„å·²å®Œæˆå·¥ä½œ
- ä¸»CLIå·¥ä½œæµç¨‹ç¼ºå°‘æ˜Žç¡®çš„"Pre-flightæ£€æŸ¥æ¸…å•"
- å¯¼è‡´ä¸»CLIå°è¯•ä½¿ç”¨ä¸å­˜åœ¨çš„å·¥å…·/ä»£ç ï¼Œæµªè´¹æ—¶é—´åˆ›å»ºä¸´æ—¶è§£å†³æ–¹æ¡ˆ

### **è§£å†³æ–¹æ¡ˆ**

#### **æ–¹æ¡ˆAï¼šä¸»CLI Pre-flightæ£€æŸ¥æ¸…å•** âœ… **å¼ºåˆ¶æ‰§è¡Œ**

**åŽŸåˆ™**: ä¸»CLIå¼€å§‹ä»»ä½•æ–°å·¥ä½œå‰ï¼Œå¿…é¡»å¼ºåˆ¶æ‰§è¡Œä»¥ä¸‹æ£€æŸ¥æ¸…å•

**åœ¨ä¸»CLIç›®å½•ä¸‹å·¥ä½œå‰å¿…é¡»æ‰§è¡Œ**ï¼š
```bash
#!/bin/bash
# ä¸»CLI Pre-flight æ£€æŸ¥æ¸…å•
# ä½¿ç”¨åœºæ™¯ï¼šä¸»CLIå‡†å¤‡å¼€å§‹æ–°å·¥ä½œï¼Œæˆ–åœ¨worktreeåˆ é™¤å‰

echo "ðŸ” ä¸»CLI Pre-flight æ£€æŸ¥æ¸…å•"
echo "================================"

# 1. æ£€æŸ¥æ‰€æœ‰worktreeçŠ¶æ€
echo "1ï¸âƒ£  æ£€æŸ¥æ‰€æœ‰worktreeçŠ¶æ€..."
git worktree list

# 2. æ£€æŸ¥è¿œç¨‹åˆ†æ”¯æ˜¯å¦æœ‰æ–°æäº¤
echo "2ï¸âƒ£  æ£€æŸ¥è¿œç¨‹åˆ†æ”¯..."
git fetch --all
git log HEAD..origin/main --oneline

# 3. å¦‚æžœæœ‰worktreeï¼Œæ£€æŸ¥å®ƒä»¬çš„åˆ†æ”¯çŠ¶æ€
echo "3ï¸âƒ£  æ£€æŸ¥worktreeåˆ†æ”¯çŠ¶æ€..."
for worktree in $(git worktree list | grep -v '\[main\]' | awk '{print $1}'); do
    branch=$(cd $worktree && git branch --show-current)
    echo "   - $worktree ($branch)"
    (cd $worktree && git status --short)
done

# 4. è¯¢é—®ç”¨æˆ·æ“ä½œ
echo ""
echo "âš ï¸  å‘çŽ°æœªå¤„ç†çš„worktreeæˆ–è¿œç¨‹æ›´æ–°ï¼Œè¯·é€‰æ‹©ï¼š"
echo "1. åˆå¹¶æ‰€æœ‰å·²å®Œæˆåˆ†æ”¯åˆ°mainï¼Œç„¶åŽåˆ é™¤worktree"
echo "2. ä»…æ‹‰å–è¿œç¨‹æ›´æ–°ï¼Œä¸å¤„ç†worktree"
echo "3. å–æ¶ˆï¼Œæ‰‹åŠ¨å¤„ç†"
read -p "é€‰æ‹© [1/2/3]: " choice

case $choice in
    1)
        echo "ðŸ”„ å¼€å§‹åˆå¹¶å·²å®Œæˆåˆ†æ”¯..."
        # å®žçŽ°è§ MAIN_CLI_WORKFLOW_STANDARDS.md
        ;;
    2)
        echo "ðŸ“¥ ä»…æ‹‰å–è¿œç¨‹æ›´æ–°..."
        git pull origin main
        ;;
    3)
        echo "âŒ å–æ¶ˆæ“ä½œ"
        exit 1
        ;;
esac
```

**ä¸»CLIå·¥ä½œæµç¨‹æ›´æ–°**ï¼ˆæ·»åŠ åˆ°å¼€å§‹ä»»ä½•å·¥ä½œå‰ï¼‰ï¼š
```markdown
## Step 0: Pre-flightæ£€æŸ¥ï¼ˆå¼ºåˆ¶æ‰§è¡Œï¼‰

åœ¨å¼€å§‹ä»»ä½•æ–°å·¥ä½œå‰ï¼Œå¿…é¡»æ‰§è¡Œï¼š

1. âœ… æ£€æŸ¥æ‰€æœ‰worktreeçŠ¶æ€
   ```bash
   git worktree list
   ```

2. âœ… æ£€æŸ¥è¿œç¨‹åˆ†æ”¯æ–°æäº¤
   ```bash
   git fetch --all
   git log HEAD..origin/main --oneline
   ```

3. âœ… å¦‚æžœæœ‰å·²å®Œæˆçš„worktreeï¼š
   - ç¡®è®¤worker CLIå·²æäº¤å¹¶æŽ¨é€
   - åˆå¹¶åˆ†æ”¯åˆ°main
   - åˆ é™¤worktree
   - ç„¶åŽæ‰å¼€å§‹æ–°å·¥ä½œ

4. âœ… å¦‚æžœä»…æœ‰è¿œç¨‹æ›´æ–°ï¼š
   - æ‹‰å–æ›´æ–°
   - è§£å†³å†²çª
   - ç„¶åŽæ‰å¼€å§‹æ–°å·¥ä½œ
```

**ä¸ºä»€ä¹ˆè¿™å¾ˆé‡è¦**:
- âŒ **ä¸æ‰§è¡Œ** â†’ ä¸»CLIä½¿ç”¨è¿‡æ—¶ä»£ç /å·¥å…·ï¼Œæµªè´¹æ—¶é—´ï¼Œå¯èƒ½å¼•å…¥bug
- âœ… **æ‰§è¡Œ** â†’ ä¸»CLIå§‹ç»ˆä½¿ç”¨æœ€æ–°ä»£ç ï¼Œé¿å…é‡å¤åŠ³åŠ¨ï¼Œç¡®ä¿åä½œä¸€è‡´æ€§

---

## ðŸš¨ é—®é¢˜4ï¼šä»»åŠ¡æ–‡æ¡£æ–¹å¼ (2025-12-30å®žæˆ˜æ¡ˆä¾‹)

### **é—®é¢˜æè¿°**

**æ—§æ–¹å¼é—®é¢˜**ï¼š
```
æ—¶é—´çº¿ï¼š
2025-12-29 10:00 - CLI-1åˆ›å»ºä»»åŠ¡ï¼Œå†™å…¥README.mdï¼ˆCLI-1 Phase 3 Kçº¿å›¾ä»»åŠ¡ï¼‰
2025-12-29 14:00 - CLI-2åˆ›å»ºä»»åŠ¡ï¼Œå†™å…¥README.mdï¼ˆCLI-2 APIå¥‘çº¦ä»»åŠ¡ï¼‰
2025-12-30 00:00 - ä¸»CLIå°è¯•åˆå¹¶phase6-api-contract-standardizationåˆ†æ”¯
2025-12-30 00:05 - âŒ å†²çªï¼šREADME.md Both modified
2025-12-30 00:10 - âš ï¸  æ ¹æœ¬åŽŸå› ï¼šå¤šä¸ªCLIä½¿ç”¨åŒä¸€æ–‡ä»¶ï¼ˆREADME.mdï¼‰è®°å½•ä»»åŠ¡å’Œè¿›åº¦
```

**æ ¹æœ¬åŽŸå› **:
- README.mdæ˜¯ä¸»ä»“åº“çš„å…±äº«æ–‡æ¡£
- å¤šä¸ªCLIåŒæ—¶ä¿®æ”¹README.mdè®°å½•å„è‡ªçš„ä»»åŠ¡å’Œè¿›åº¦
- Gitæ— æ³•è‡ªåŠ¨åˆå¹¶åŒä¸€æ–‡ä»¶çš„å¤šä¸ªç‰ˆæœ¬
- åˆå¹¶æ—¶å¿…ç„¶äº§ç”Ÿå†²çª

### **è§£å†³æ–¹æ¡ˆ**

#### **æ–¹æ¡ˆAï¼šä½¿ç”¨TASK.md + TASK-REPORT.mdæ–¹å¼** âœ… **å¼ºçƒˆæŽ¨è**

**åŽŸåˆ™**:
- âœ… æ¯ä¸ªworktreeæœ‰ç‹¬ç«‹çš„TASK.mdï¼ˆä»»åŠ¡è¯´æ˜Žï¼‰
- âœ… æ¯ä¸ªworktreeæœ‰ç‹¬ç«‹çš„TASK-REPORT.mdï¼ˆè¿›åº¦æŠ¥å‘Šï¼‰
- âœ… å¤šé˜¶æ®µä»»åŠ¡ç”¨ TASK-1.md, TASK-2.mdï¼ˆä»»åŠ¡ï¼‰ä¸Ž TASK-1-REPORT.md, TASK-2-REPORT.mdï¼ˆå®ŒæˆæŠ¥å‘Šï¼‰
- âœ… README.mdä¿ç•™ç»™é¡¹ç›®çº§ä»‹ç»ï¼Œä¸æ”¾å…¥CLIç‰¹å®šä»»åŠ¡

**ä»»åŠ¡æ–‡æ¡£ç»“æž„**ï¼š

| æ–‡ä»¶ç±»åž‹ | å‘½åè§„èŒƒ | ç”¨é€” | æ‹¥æœ‰è€… | åˆå¹¶æ—¶å½±å“ |
|---------|---------|------|--------|-----------|
| ä»»åŠ¡è¯´æ˜Ž | TASK.md, TASK-1.md, TASK-2.md | ä¸»CLIç”Ÿæˆä»»åŠ¡æ–‡æ¡£ | ä¸»CLI | æ— å†²çªï¼ˆworktreeå†…ï¼‰ |
| è¿›åº¦æŠ¥å‘Š | TASK-REPORT.md | Worker CLIæ›´æ–°è¿›åº¦ | Worker CLI | æ— å†²çªï¼ˆworktreeå†…ï¼‰ |
| å®ŒæˆæŠ¥å‘Š | TASK-*-REPORT.md | Worker CLIæ±‡æŠ¥å®Œæˆ | Worker CLI | æ— å†²çªï¼ˆworktreeå†…ï¼‰ |

**ä½¿ç”¨æµç¨‹**ï¼š

**1. ä¸»CLIåˆ›å»ºä»»åŠ¡**ï¼š
```bash
cd /opt/claude/mystocks_cli_x
cat > TASK.md << 'EOF'
# CLI-X ä»»åŠ¡æ–‡æ¡£

**Worker CLI**: CLI-X (æè¿°)
**Branch**: branch-name
**Worktree**: /path/to/worktree/
**Phase**: æè¿°é˜¶æ®µ
**é¢„è®¡å·¥ä½œé‡**: Xå¤©

---

## ðŸŽ¯ æ ¸å¿ƒèŒè´£

æè¿°è¿™ä¸ªCLIçš„æ ¸å¿ƒèŒè´£å’Œç›®æ ‡

---

## ðŸ“‹ ä»»åŠ¡æ¸…å•

### é˜¶æ®µ1: XXX (T1.1-T1.3, Xå¤©)

#### T1.1: ä»»åŠ¡æ ‡é¢˜ (Xå¤©)

**ç›®æ ‡**: æè¿°ä»»åŠ¡ç›®æ ‡

**éªŒæ”¶æ ‡å‡†**:
- [ ] æ ‡å‡†1
- [ ] æ ‡å‡†2

**é¢„è®¡å®Œæˆ**: YYYY-MM-DD
EOF
```

**2. Worker CLIåˆ›å»ºè¿›åº¦æŠ¥å‘Š**ï¼š
```bash
cd /opt/claude/mystocks_cli_x
cat > TASK-REPORT.md << 'EOF'
# CLI-X ä»»åŠ¡è¿›åº¦æŠ¥å‘Š

**Worker CLI**: CLI-X
**ä»»åŠ¡æ–‡æ¡£**: TASK.md
**å½“å‰é˜¶æ®µ**: T+0h
**æŠ¥å‘Šæ—¶é—´**: YYYY-MM-DD HH:MM

---

## âœ… å·²å®Œæˆ

- [ ] ä»»åŠ¡1: æè¿° - å®Œæˆæ—¶é—´: YYYY-MM-DD HH:MM

---

## ðŸ”„ è¿›è¡Œä¸­

- [ ] ä»»åŠ¡2: æè¿° - å½“å‰è¿›åº¦: 0%

---

## ðŸš§ é˜»å¡žé—®é¢˜

æ— 

---

## ðŸ“ˆ è¿›åº¦ç»Ÿè®¡

- **å·²å®Œæˆä»»åŠ¡**: 0/Y (0%)
- **é¢„è®¡å®Œæˆæ—¶é—´**: YYYY-MM-DD
EOF
```

**3. Worker CLIç”Ÿæˆå®ŒæˆæŠ¥å‘Š**ï¼š
```bash
cd /opt/claude/mystocks_cli_x
cat > TASK-1-REPORT.md << 'EOF'
# ä»»åŠ¡å®ŒæˆæŠ¥å‘Š - ç¬¬ä¸€é˜¶æ®µ

**Worker CLI**: CLI-X
**ä»»åŠ¡æ–‡æ¡£**: TASK-1.md
**æŠ¥å‘Šæ–‡æ¡£**: TASK-1-REPORT.md
**å®Œæˆæ—¶é—´**: YYYY-MM-DD HH:MM

---

## âœ… éªŒæ”¶æ ‡å‡†

- [x] æ ‡å‡†1: æè¿°å®Œæˆæƒ…å†µ
- [x] æ ‡å‡†2: æè¿°å®Œæˆæƒ…å†µ

---

## ðŸ“¦ äº¤ä»˜ç‰©

- ä»£ç : Xä¸ªæ–‡ä»¶ï¼ŒYè¡Œä»£ç 
- æµ‹è¯•: Xä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œé€šè¿‡çŽ‡Y%

---

## âœ… ç­‰å¾…ä¸»CLIéªŒæ”¶

è¯·ä¸»CLIéªŒæ”¶ç¬¬ä¸€é˜¶æ®µäº¤ä»˜ç‰©å¹¶åˆå¹¶åˆ°mainåˆ†æ”¯
EOF
```

**4. ä¸»CLIåˆå¹¶æ—¶**ï¼š
```bash
# ä¸»CLIåˆå¹¶åˆ†æ”¯æ—¶ï¼Œæ— README.mdå†²çª
git merge cli-x-branch

# âœ… TASK.mdåœ¨worktreeç›®å½•ï¼Œä¸å½±å“ä¸»ä»“åº“
# âœ… TASK-REPORT.mdåœ¨worktreeç›®å½•ï¼Œä¸å½±å“ä¸»ä»“åº“
# âœ… ä¸»ä»“åº“çš„README.mdä¿æŒå¹²å‡€ï¼Œä»…åŒ…å«é¡¹ç›®çº§ä»‹ç»
```

**æ–‡ä»¶ç»„ç»‡å¯¹æ¯”**ï¼š

| æ–¹å¼ | ä»»åŠ¡è¯´æ˜Ž | è¿›åº¦æŠ¥å‘Š | åˆå¹¶å†²çª | ä»»åŠ¡åŽ†å² | æŽ¨è |
|------|---------|---------|----------|----------|------|
| âŒ æ—§æ–¹å¼ | README.md | README.md | å¿…ç„¶å†²çª | éš¾ä»¥ä¿ç•™ | âŒ ä¸æŽ¨è |
| âœ… æ–°æ–¹å¼ | TASK.md | TASK-REPORT.md | æ— å†²çª | TASK-1.md, TASK-2.md... | âœ… å¼ºçƒˆæŽ¨è |

**å®žæ–½æ£€æŸ¥æ¸…å•**ï¼š
- [ ] æ›´æ–°ä¸»CLIå·¥ä½œæµç¨‹æ–‡æ¡£ï¼Œä½¿ç”¨TASK.mdæ–¹å¼
- [ ] æ›´æ–°Worker CLIå·¥ä½œæµç¨‹ï¼Œä½¿ç”¨TASK-REPORT.mdæ–¹å¼
- [ ] åˆ›å»ºTASK.mdæ¨¡æ¿
- [ ] åœ¨worktreeåˆ›å»ºæ—¶è‡ªåŠ¨ç”ŸæˆTASK.md
- [ ] åˆå¹¶åˆ†æ”¯æ—¶æ£€æŸ¥æ— README.mdå†²çª

**ç›¸å…³æ–‡æ¡£**ï¼š
- [ä»»åŠ¡æ–‡æ¡£æ¨¡æ¿](./templates/TASK_TEMPLATE.md) - è¯¦ç»†çš„TASK.mdå’ŒTASK-REPORT.mdæ¨¡æ¿
- [ä¸»CLIå·¥ä½œè§„èŒƒ](./MAIN_CLI_WORKFLOW.md) - ä¸»CLIä»»åŠ¡åˆ†é…æ–¹æ³•
- [Worker CLIå·¥ä½œæµç¨‹](./WORKER_CLI_GUIDE.md) - Worker CLIå¦‚ä½•ä½¿ç”¨è¿™äº›æ¨¡æ¿

---

## ðŸš¨ é—®é¢˜5ï¼šä¾èµ–åŒæ­¥é—®é¢˜ (JavaScript/TypeScript)

### **é—®é¢˜æè¿°**

**åœºæ™¯**ï¼š
```
åœ¨å¤šä¸ªworktreeä¸­å·¥ä½œæ—¶ï¼Œnode_moduleså¯èƒ½ä¼šä¸åŒæ­¥ï¼š
- Worktree-1å®‰è£…äº†ä¾èµ–A@1.0.0
- Worktree-2å®‰è£…äº†ä¾èµ–A@1.2.0
- å¯¼è‡´ç‰ˆæœ¬å†²çªï¼Œéš¾ä»¥ç®¡ç†
```

**æ ¹æœ¬åŽŸå› **:
- æ¯ä¸ªworktreeç‹¬ç«‹çš„node_modules
- ä¾èµ–ç‰ˆæœ¬ä¸ä¸€è‡´
- ç£ç›˜ç©ºé—´æµªè´¹

### **è§£å†³æ–¹æ¡ˆ**

#### **æ–¹æ¡ˆAï¼šä½¿ç”¨ç¬¦å·é“¾æŽ¥å…±äº«node_modules** âœ… **å¼ºçƒˆæŽ¨è**

**å®žæ–½æ­¥éª¤**ï¼š

```bash
# 1. åˆ›å»ºå…±äº«çš„node_modulesç›®å½•
mkdir -p ~/shared/node_modules

# 2. åˆ é™¤çŽ°æœ‰worktreeçš„node_moduleså¹¶é“¾æŽ¥åˆ°å…±äº«ç›®å½•
cd ~/projects/project-worktree-1
rm -rf node_modules
ln -s ~/shared/node_modules ./node_modules

# å¯¹å…¶ä»–worktreeæ‰§è¡Œç›¸åŒæ“ä½œ
cd ~/projects/project-worktree-2
rm -rf node_modules
ln -s ~/shared/node_modules ./node_modules

# 3. åœ¨ä¸€ä¸ªä½ç½®å®‰è£…ä¾èµ–
cd ~/shared
npm install
```

**ä¼˜åŠ¿**:
- âœ… æ‰€æœ‰worktreeå…±äº«ç›¸åŒçš„ä¾èµ–ç‰ˆæœ¬
- âœ… èŠ‚çœç£ç›˜ç©ºé—´
- âœ… é¿å…ç‰ˆæœ¬å†²çª
- âœ… ä¾èµ–æ›´æ–°æ›´ç®€å•

**æ³¨æ„äº‹é¡¹**:
- âš ï¸ ç¡®ä¿æ‰€æœ‰worktreeçš„package.jsonå…¼å®¹
- âš ï¸ å®‰è£…æ–°ä¾èµ–æ—¶åœ¨å…±äº«ç›®å½•æ‰§è¡Œ
- âš ï¸ åˆ é™¤worktreeå‰å…ˆå–æ¶ˆé“¾æŽ¥

**ç›¸å…³æ–‡æ¡£**:
- [ä¸»CLIå·¥ä½œè§„èŒƒ](./MAIN_CLI_WORKFLOW.md) - Pre-flightæ£€æŸ¥
- [æ–‡ä»¶æ‰€æœ‰æƒè¯´æ˜Ž](./MAIN_CLI_WORKFLOW.md#phase-05-æ–‡ä»¶æ‰€æœ‰æƒå’ŒèŒè´£èŒƒå›´ç¡®è®¤)

---

## ðŸš¨ é—®é¢˜6ï¼šç‰©ç†è·¯å¾„æ±¡æŸ“å†²çª (Zero-Root-Config)

### **é—®é¢˜æè¿°**
ä¸åŒ CLI åœ¨å„è‡ª Worktree å¼€å‘æ—¶ï¼Œä¹ æƒ¯æ€§åœ°åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»ºå·¥å…·é…ç½®æ–‡ä»¶ï¼ˆå¦‚ `playwright.config.ts`, `vitest.config.ts`ï¼‰ï¼Œå¯¼è‡´åˆå¹¶åŽæ ¹ç›®å½•å‡ºçŽ°å¤§é‡ç¢Žç‰‡æ–‡ä»¶åŠå†²çªã€‚

**è§£å†³æ–¹æ¡ˆï¼šé›¶æ ¹ç›®å½•é…ç½®åŽŸåˆ™ (Zero-Root-Config)** âœ…
- âœ… **é…ç½®æ”¶æ•›**: ä¸¥ç¦åœ¨æ ¹ç›®å½•æ–°å¢žå·¥å…·é…ç½®ã€‚æ‰€æœ‰é…ç½®æ–‡ä»¶å¿…é¡»å­˜æ”¾åœ¨ `config/` ä¸‹çš„å¯¹åº”å­ç›®å½•ï¼ˆå¦‚ `config/playwright/`ï¼‰ã€‚
- âœ… **é€»è¾‘ä¸‹æ²‰**: ä¸šåŠ¡é€»è¾‘ç¦æ­¢åœ¨æ ¹ç›®å½• `.py` æ–‡ä»¶ä¸­ç¼–å†™ï¼Œå¿…é¡»æ”¾å…¥ `src/`ã€‚æ ¹ç›®å½•æ–‡ä»¶ä»…ä½œä¸º Re-export å¤–å£³ã€‚
- âœ… **æ˜¾å¼æŒ‡å®š**: æ‰§è¡Œå·¥å…·æ—¶å¿…é¡»æ˜¾å¼æŒ‡å®šè·¯å¾„ï¼Œå¦‚ `npx playwright test -c config/playwright/playwright.config.ts`ã€‚

---

## ðŸš¨ é—®é¢˜7ï¼šä¾èµ–è†¨èƒ€ä¸ŽåŒæ­¥ (Node.js/Python)

### **é—®é¢˜æè¿°**
æ¯ä¸ª Worktree ç‹¬ç«‹å®‰è£… `node_modules` æˆ– `venv` å¯¼è‡´ç£ç›˜ç©ºé—´è¿…é€Ÿè€—å°½ä¸”ç‰ˆæœ¬ä¸ä¸€è‡´ã€‚

**è§£å†³æ–¹æ¡ˆï¼šå…±äº«ä¾èµ–ç­–ç•¥** âœ…
- **Node.js**: ä½¿ç”¨ `pnpm` è½¯é“¾æŽ¥æœºåˆ¶æˆ–æ‰‹åŠ¨åˆ›å»ºå…±äº« `node_modules` å¹¶ä½¿ç”¨ `ln -s` é“¾æŽ¥åˆ°å„ Worktreeã€‚
- **Python**: æ‰€æœ‰ Worktree å…±äº«åŒä¸€ä¸ªè™šæ‹ŸçŽ¯å¢ƒï¼ˆVENVï¼‰ï¼Œé™¤éžä»»åŠ¡æ¶‰åŠä¾èµ–é¡¹æœ¬èº«çš„å¤§å¹…å˜æ›´ã€‚

---

## ðŸŽ¯ æ€»ç»“ä¸Žæ‰§è¡Œ

### **æ‰§è¡Œä¼˜å…ˆçº§**
1. âœ… **ä¸» CLI Pre-flight æ£€æŸ¥**: å¼€å§‹ä»»ä½•é›†æˆå·¥ä½œå‰å¿…é¡»æ‰§è¡Œã€‚
2. âœ… **Zero-Root-Config**: å¼ºåˆ¶å°†é…ç½®æ”¶æ•›è‡³ `config/` ç›®å½•ã€‚
3. âœ… **TASK.md ä½“ç³»**: æ”¾å¼ƒ README è®°å½•ä»»åŠ¡ï¼Œæ”¹ç”¨ç‹¬ç«‹çš„ TASK æŠ¥å‘Šæ–‡ä»¶ã€‚

---

## ðŸ”— ç›¸å…³æ–‡æ¡£
- [Git Worktree å‘½ä»¤æ‰‹å†Œ (v2.1)](./GIT_WORKTREE_MAIN_CLI_MANUAL.md) - æœ€æ–°å‘½ä»¤ä¸Žä¿®å¤æŠ€å·§
- [å¤š CLI åä½œç®¡ç†æ‰‹å†Œ](../README.md) - è§’è‰²ä¸ŽèŒè´£å®šä¹‰

---

**æ–‡æ¡£ç‰ˆæœ¬**: v2.1
**åˆ›å»ºæ—¥æœŸ**: 2025-12-29
**æœ€åŽæ›´æ–°**: 2026-02-13
**ç»´æŠ¤è€…**: Main CLI
**æ›´æ–°é¢‘çŽ‡**: æŒç»­æ›´æ–°

**æ ¸å¿ƒåŽŸåˆ™**: æ˜Žç¡®æ‰€æœ‰æƒ + èŒè´£åˆ†ç¦» + åè°ƒæœºåˆ¶ + Pre-flightæ£€æŸ¥ + ç‹¬ç«‹ä»»åŠ¡æ–‡æ¡£ + ä¾èµ–åŒæ­¥ + é›¶é…ç½®æ±¡æŸ“ = é›¶å†²çªåä½œ
