# Main CLI å·¥ä½œè§„èŒƒä¸æœ€ä½³å®è·µ

**æ–‡æ¡£ç‰ˆæœ¬**: v2.0
**åˆ›å»ºæ—¥æœŸ**: 2025-12-29
**é€‚ç”¨èŒƒå›´**: æ‰€æœ‰ä½¿ç”¨Git Worktreeè¿›è¡Œå¤šCLIå¹¶è¡Œå¼€å‘çš„é¡¹ç›®
**æœ€åæ›´æ–°**: 2025-12-30
**ç»´æŠ¤è€…**: Main CLI (Manager)

---

## ğŸ“‹ æ–‡æ¡£ç›®çš„

æœ¬æ–‡æ¡£æ€»ç»“äº†åœ¨MyStocksé¡¹ç›®Phase 3-6å¤šCLIå¹¶è¡Œå¼€å‘å®æ–½è¿‡ç¨‹ä¸­ç§¯ç´¯çš„ç»éªŒæ•™è®­ï¼Œåˆ¶å®šäº†æ ‡å‡†åŒ–çš„å·¥ä½œæµç¨‹å’Œæœ€ä½³å®è·µè§„èŒƒï¼Œä¾›ä¸»CLIåœ¨æœªæ¥é¡¹ç›®ä¸­å‚è€ƒå’Œéµå¾ªã€‚

**æ ¸å¿ƒä»·å€¼**:
- âœ… é¿å…é‡å¤è¸©å‘ï¼Œæé«˜å¯åŠ¨æ•ˆç‡
- âœ… æ ‡å‡†åŒ–å·¥ä½œæµç¨‹ï¼Œé™ä½ç®¡ç†æˆæœ¬
- âœ… ç¡®ä¿æ‰€æœ‰CLIå…·å¤‡å®Œæ•´çš„å¼€å‘å’Œæäº¤èƒ½åŠ›
- âœ… å»ºç«‹å¯é‡å¤ã€å¯éªŒè¯çš„å¹¶è¡Œå¼€å‘æ¡†æ¶

---

## ğŸ•¹ï¸ è¿è¥ä¸­å¿ƒï¼š`/multi-cli-tasks/` æŒ‡æŒ¥èˆ±

æœ¬é¡¹ç›®é‡‡ç”¨**é›†ä¸­å¼è¿è¥**æ¨¡å¼ã€‚`/multi-cli-tasks/` æ˜¯ä¸» CLI ç®¡ç†å¹¶è¡Œå¼€å‘ç”Ÿå‘½å‘¨æœŸçš„å”¯ä¸€ç‰©ç†å…¥å£ã€‚

### 1. ç›®å½•ç»“æ„è§„èŒƒ

```text
/multi-cli-tasks/
â”œâ”€â”€ guides/                        # [ç«‹æ³•] æ ¸å¿ƒè§„èŒƒä¸æ¨¡æ¿åº“
â”‚   â”œâ”€â”€ MAIN_CLI_WORKFLOW.md       # ä¸»CLIå·¥ä½œåœ£ç»
â”‚   â”œâ”€â”€ WORKER_CLI_GUIDE.md        # Workeræ‰§è¡Œæ‰‹å†Œ
â”‚   â””â”€â”€ templates/                 # æ ‡å‡†åŒ–æ¨¡æ¿
â”‚
â”œâ”€â”€ mystocks_phase3_frontend/      # [æ´»è·ƒå•å…ƒ] å¯¹åº”ç‰©ç† Worktree
â”‚   â”œâ”€â”€ TASK.md                    # â€”â€” ä»»åŠ¡ä¹¦ (åŒæ­¥æº)
â”‚   â”œâ”€â”€ TASK-REPORT.md             # â€”â€” è¿›åº¦æŠ¥å‘Š (å®šæœŸåŒæ­¥/æ”¶å‰²)
â”‚   â””â”€â”€ FEEDBACK_LOG.md            # â€”â€” åé¦ˆè®°å½•
â”‚
â”œâ”€â”€ mystocks_phase6_gpu/           # [æ´»è·ƒå•å…ƒ] å¦ä¸€ä¸ªå¹¶è¡Œä»»åŠ¡...
â”‚
â””â”€â”€ PHASE_3_SUMMARY.md             # [æ€»ç»“] é˜¶æ®µæ€§èšåˆæŠ¥å‘Š
```

### 2. æ ‡å‡†æ“ä½œæµç¨‹ (SOP)

#### é˜¶æ®µ A: ä»»åŠ¡åˆ†å‘ (Dispatch)
1.  **åˆ›å»ºç®¡ç†å•å…ƒ**: `mkdir -p /multi-cli-tasks/<worktree_name>/`
2.  **å‡†å¤‡è½½è·**: ä» `guides/templates/TASK_TEMPLATE.md` å¤åˆ¶åˆ°è¯¥ç›®å½•ï¼Œå‘½åä¸º `TASK.md` å¹¶å¡«å……å†…å®¹ã€‚
3.  **ç‰©ç†åˆ†å‘**: åˆ›å»º Worktree åï¼Œå°† `TASK.md` å¤åˆ¶åˆ° Worktree æ ¹ç›®å½•ã€‚

#### é˜¶æ®µ B: ç›‘æ§ä¸åé¦ˆ (Monitor & Feedback)
1.  **çŠ¶æ€åŒæ­¥**: å®šæœŸå°† Worktree ä¸­çš„ `TASK-REPORT.md` å¤åˆ¶å› `/multi-cli-tasks/<worktree_name>/` ç›®å½•è¿›è¡ŒæŸ¥çœ‹ã€‚
2.  **åé¦ˆè®°å½•**: æ‰€æœ‰çš„æ²Ÿé€šè®°å½•ã€åè°ƒç»“æœï¼Œè®°å½•åœ¨åŒç›®å½•ä¸‹çš„ `FEEDBACK_LOG.md` ä¸­ï¼Œè€Œä¸æ˜¯æ•£è½åœ¨èŠå¤©è®°å½•é‡Œã€‚

#### é˜¶æ®µ C: æ”¶å‰²ä¸ç»“é¡¹ (Harvest & Archive)
1.  **ç»ˆææ”¶å‰²**: åœ¨åˆ é™¤ Worktree å‰ï¼Œæ‰§è¡Œæœ€åä¸€æ¬¡åŒæ­¥ï¼Œç¡®ä¿ `/multi-cli-tasks/<worktree_name>/` æ‹¥æœ‰æœ€æ–°çš„å…¨å¥—æŠ¥å‘Šã€‚
2.  **ç‰©ç†é”€æ¯**: æŒ‰ç…§ Phase 5 æµç¨‹åˆ é™¤ Worktreeã€‚
3.  **å†å²ç•™å­˜**: `/multi-cli-tasks/<worktree_name>/` ç›®å½•**ä¸åˆ é™¤**ï¼Œç›´æ¥ä½œä¸ºå†å²å½’æ¡£ä¿ç•™ã€‚

---

## ğŸ¯ æ ¸å¿ƒåŸåˆ™

### 1. **å®Œæ•´ä¼˜å…ˆ** (Completeness First)

åœ¨å¯åŠ¨ä»»ä½•Worker CLIä¹‹å‰ï¼Œå¿…é¡»ç¡®ä¿å…¶å…·å¤‡å®Œæ•´çš„å·¥ä½œèƒ½åŠ›ï¼š

- âœ… Git worktreeå·²åˆ›å»ºå¹¶åˆå§‹åŒ–
- âœ… TASK.mdåŒ…å«å®Œæ•´ä»»åŠ¡æ¸…å•å’Œå·¥ä½œæµç¨‹è§„èŒƒ
- âœ… æ‰€æœ‰hookè„šæœ¬å…·æœ‰æ‰§è¡Œæƒé™
- âœ… ç›‘æ§ç³»ç»Ÿå·²é…ç½®å¹¶å¯æ­£å¸¸è¿½è¸ªè¿›åº¦
- âœ… æäº¤æµç¨‹å’ŒéªŒæ”¶æ ‡å‡†å·²æ˜ç¡®

**é”™è¯¯ç¤ºä¾‹**: åªåˆ›å»ºworktreeå’Œå¤åˆ¶ä»»åŠ¡æ–‡æ¡£ï¼Œå¿½ç•¥å·¥ä½œæµç¨‹å’Œhooks

### 2. **æ–‡æ¡£é©±åŠ¨** (Documentation Driven)

æ‰€æœ‰è§„èŒƒã€æµç¨‹ã€æ ‡å‡†å¿…é¡»æ–‡æ¡£åŒ–ï¼Œå¹¶æ”¾åœ¨æ˜¾çœ¼ä½ç½®ï¼š

- âœ… å·¥ä½œæµç¨‹æŒ‡å—å¿…é¡»é“¾æ¥åœ¨TASK.mdä¸­
- âœ… Gitæäº¤è§„èŒƒå¿…é¡»åŒ…å«å…·ä½“ç¤ºä¾‹
- âœ… è¿›åº¦æ›´æ–°æ ¼å¼å¿…é¡»æä¾›æ¨¡æ¿
- âœ… å®Œæˆæ ‡å‡†å¿…é¡»æ˜ç¡®å¯è¡¡é‡

### 3. **éä¾µå…¥å¼ç›‘æ§** (Non-Invasive Monitoring)

ä¸»CLIé€šè¿‡è¢«åŠ¨æ–¹å¼ç›‘æ§è¿›åº¦ï¼Œä¸ä¸»åŠ¨å¹²é¢„Worker CLIå·¥ä½œï¼š

- âœ… é€šè¿‡TASK-REPORT.mdæ›´æ–°æ—¶é—´åˆ¤æ–­æ´»è·ƒçŠ¶æ€
- âœ… é€šè¿‡Gitæäº¤å†å²äº†è§£è¿›å±•
- âœ… é€šè¿‡è‡ªåŠ¨åŒ–è„šæœ¬å®šæœŸæ£€æŸ¥
- âŒ ä¸ç›´æ¥ä¿®æ”¹Worker CLIçš„ä»£ç æˆ–æ–‡ä»¶

### 4. **æ ‡å‡†åŒ–å¤ç”¨** (Standardized Reuse)

æ‰€æœ‰CLIå…±äº«ç›¸åŒçš„å·¥ä½œæµç¨‹ã€æ–‡æ¡£æ ¼å¼ã€æäº¤è§„èŒƒï¼š

- âœ… ç»Ÿä¸€çš„CLIå·¥ä½œæµç¨‹æŒ‡å—
- âœ… ç»Ÿä¸€çš„TASK.mdç« èŠ‚ç»“æ„
- âœ… ç»Ÿä¸€çš„Gitæäº¤æ¶ˆæ¯æ ¼å¼
- âœ… ç»Ÿä¸€çš„è¿›åº¦æ›´æ–°æ¨¡æ¿

### 5. **ç‰©ç†å¸ƒå±€æ²»ç†** (Physical Layout Governance) (2026-02-08 æ–°å¢)

ç¡®ä¿ä»£ç åº“çš„ç‰©ç†å¸ƒå±€ä¿æŒé•¿æ•ˆæ•´æ´ï¼Œé˜²æ­¢å¤š Worktree å¼€å‘å¯¼è‡´çš„æ ¹ç›®å½•æ±¡æŸ“ï¼š

- âœ… **é›¶æ ¹ç›®å½•é…ç½®**: å¼ºåˆ¶è¦æ±‚æ‰€æœ‰å·¥å…·é…ç½®ç§»å…¥ `config/`ï¼ˆå¦‚ `config/playwright/`ï¼‰ã€‚
- âœ… **é€»è¾‘é‡å®šå‘**: ç¡®ä¿æ ¹ç›®å½• `.py` æ–‡ä»¶ä»…ä½œä¸º `src/` çš„ Re-export å¤–å£³ã€‚
- âœ… **å…±äº«ä¾èµ–**: ä¸º Node.js é¡¹ç›®å»ºç«‹å…±äº« `node_modules` è½¯é“¾æ¥ï¼Œé¿å…ç£ç›˜æµªè´¹å’Œç‰ˆæœ¬å†²çªã€‚

---

## ğŸ›¡ï¸ è§’è‰²å“²å­¦ï¼šæŒèˆµäººåŸåˆ™ (The Helmsman Philosophy)

**ä¸» CLI æ˜¯æŒèˆµäººï¼Œä¸æ˜¯æ°´æ‰‹ã€‚**

åœ¨ Worker CLI å¤„äºæ´»è·ƒçŠ¶æ€ï¼ˆActiveï¼‰æœŸé—´ï¼Œä¸» CLI **ä¸¥ç¦**æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š
1.  âŒ **ç›´æ¥ä¿®æ”¹ä¸šåŠ¡ä»£ç **: å³ä½¿å‘ç°å° Bugï¼Œä¹Ÿåº”é€šè¿‡ Issue æˆ– TASK æ›´æ–°é€šçŸ¥ Worker ä¿®å¤ã€‚
2.  âŒ **æ›¿ Worker è·‘æµ‹è¯•**: æµ‹è¯•æ˜¯ Worker äº¤ä»˜å‰çš„ä¹‰åŠ¡ã€‚
3.  âŒ **å¹¶è¡Œå¼€å‘åŠŸèƒ½**: ä¸» CLI çš„ç®—åŠ›åº”ä¿ç•™ç»™ç›‘æ§ã€å®¡æŸ¥å’Œæ¶æ„å†³ç­–ã€‚

**ä¸» CLI çš„å”¯ä¸€èŒè´£**:
- **ç›‘æ§ (Monitor)**: è§‚å¯Ÿ `TASK-REPORT.md` çš„å¢é‡æ›´æ–°ã€‚
- **è°ƒåº¦ (Dispatch)**: åœ¨é˜¶æ®µèŠ‚ç‚¹æ›´æ–° `TASK.md` ä¸‹å‘æ–°æŒ‡ä»¤ã€‚
- **å“åº” (Respond)**: æ¥æ”¶ Worker çš„â€œæ— æ³•è§£å†³â€åé¦ˆï¼Œè¿›è¡Œæ¶æ„çº§ä¿®å¤æˆ–èµ„æºåè°ƒã€‚

---

## ğŸš¨ Step -1: Pre-flightæ£€æŸ¥æ¸…å• â­ **å¼ºåˆ¶æ‰§è¡Œ**

**é‡è¦æ€§**: ğŸ”´ **æé«˜** - ä¸»CLIåœ¨å¼€å§‹ä»»ä½•æ–°å·¥ä½œå‰ï¼Œå¿…é¡»å¼ºåˆ¶æ‰§è¡Œæ­¤æ£€æŸ¥æ¸…å•

**ä¸ºä»€ä¹ˆè¿™å¾ˆé‡è¦**:
- âŒ **ä¸æ‰§è¡Œ** â†’ ä¸»CLIä½¿ç”¨è¿‡æ—¶ä»£ç /å·¥å…·ï¼Œæµªè´¹æ—¶é—´ï¼Œå¯èƒ½å¼•å…¥ä¸¥é‡bug
- âœ… **æ‰§è¡Œ** â†’ ä¸»CLIå§‹ç»ˆä½¿ç”¨æœ€æ–°ä»£ç ï¼Œé¿å…é‡å¤åŠ³åŠ¨ï¼Œç¡®ä¿åä½œä¸€è‡´æ€§

**å®æˆ˜æ•™è®­**: 2025-12-30ä¸»CLIå°è¯•ä½¿ç”¨APIå¥‘çº¦ç®¡ç†å·¥å…·æ—¶ï¼Œå¿˜è®°å…ˆpull CLI-2çš„å·²å®Œæˆä»£ç ï¼Œå¯¼è‡´å·¥å…·ç›®å½•ä¸å­˜åœ¨ï¼Œæµªè´¹30åˆ†é’Ÿæ’æŸ¥é—®é¢˜ã€‚

### å¿«é€Ÿæ£€æŸ¥å‘½ä»¤

åœ¨ä¸»CLIç›®å½•å¼€å§‹ä»»ä½•å·¥ä½œå‰ï¼Œå¿…é¡»æ‰§è¡Œï¼š

```bash
# 1. ç¡®è®¤åœ¨ä¸»CLIç›®å½•
pwd  # åº”è¯¥æ˜¾ç¤º /opt/claude/mystocks_spec

# 2. æ£€æŸ¥æ–‡ä»¶æ‰€æœ‰æƒæ˜ å°„
cat .FILE_OWNERSHIP | head -20

# 3. æ£€æŸ¥æ‰€æœ‰worktree
git worktree list

# 4. æ£€æŸ¥è¿œç¨‹æ–°æäº¤ï¼ˆç»Ÿä¸€ä½¿ç”¨ originï¼‰
git fetch --all
git log HEAD..origin/main --oneline

# 5. ç‰©ç†è·¯å¾„å®¡è®¡ (Zero-Root-Config)
#    æ£€æŸ¥æ˜¯å¦æœ‰æ–°å¢æ–‡ä»¶éæ³•å ç”¨æ ¹ç›®å½•
find . -maxdepth 1 -name "*.js" -o -name "*.ts" -o -name "*.json" | grep -v "package.json" | grep -v "tsconfig.json"

# 6. å¦‚æœæœ‰worktreeæˆ–æ–°æäº¤ï¼Œå¤„ç†å®ƒä»¬
#    ï¼ˆè§ä¸‹æ–¹çš„"åˆå¹¶å·²å®Œæˆåˆ†æ”¯æµç¨‹"ï¼‰
```

### åˆå¹¶å·²å®Œæˆåˆ†æ”¯æµç¨‹

**å½“æ£€æŸ¥å‘ç°å·²å®Œæˆworktreeæ—¶æ‰§è¡Œ**ï¼š

#### è§£å†³ä»»åŠ¡æ–‡ä»¶å†²çªè§„èŒƒ (2026-02-08)
**é—®é¢˜**: `TASK.md` å’Œ `TASK-REPORT.md` åœ¨å¤šåˆ†æ”¯åˆå¹¶æ—¶å‡ ä¹ 100% äº§ç”Ÿå†²çªã€‚
**å¤„ç†è§„åˆ™**:
1. **ä¼˜å…ˆ Worker çŠ¶æ€**: è‹¥å†²çªè¡Œæ¶‰åŠå­ä»»åŠ¡å®Œæˆæƒ…å†µï¼Œä¼˜å…ˆä¿ç•™ `Worker åˆ†æ”¯` çš„æœ€æ–°çŠ¶æ€ã€‚
2. **ä½¿ç”¨å‘½ä»¤**: `git checkout --theirs TASK.md TASK-REPORT.md` (æˆ–åä¹‹ï¼Œå–å†³äºåˆå¹¶æ–¹å‘)ã€‚
3. **æ‰‹åŠ¨åŒæ­¥**: åˆå¹¶åï¼ŒMain CLI å¿…é¡»ç«‹åˆ»æ ¹æ® `TASK-REPORT.md` çš„å†…å®¹æ›´æ–°å…¨å±€çœ‹æ¿ã€‚
4. **å½»åº•æ¸…ç†**: åˆ é™¤åˆå¹¶è¿‡ç¨‹ä¸­å¯èƒ½äº§ç”Ÿçš„ `.bak`, `.backup` æ–‡ä»¶ã€‚

```bash
#!/bin/bash
# å¯¹æ¯ä¸ªworktreeæ‰§è¡Œï¼š
for worktree in $(git worktree list | grep -v '\[main\]' | awk '{print $1}'); do
    branch=$(cd $worktree && git branch --show-current)

    # 1. ç¡®è®¤worker CLIå·²æäº¤å¹¶æ¨é€
    (cd $worktree && git status --short)
    # å¦‚æœæœ‰æœªæäº¤çš„æ›´æ”¹ï¼Œåœæ­¢å¹¶è¦æ±‚å…ˆæäº¤

    # 2. æ‹‰å–è¿œç¨‹æœ€æ–°ä»£ç 
    git fetch origin $branch

    # 3. åˆå¹¶åˆ†æ”¯åˆ°main
    git merge origin/$branch --no-edit

    # 4. å¦‚æœ‰å†²çªï¼Œè§£å†³å†²çª
    #    git statusæŸ¥çœ‹å†²çªæ–‡ä»¶
    #    æ‰‹åŠ¨è§£å†³å: git add . && git commit

    # 5. æ¨é€åˆ°è¿œç¨‹
    git push origin main

    # 6. åˆ é™¤worktree
    git worktree remove $worktree

    # 7. åˆ é™¤è¿œç¨‹åˆ†æ”¯ï¼ˆå¯é€‰ï¼‰
    # git push origin --delete $branch
done
```

### ä»»åŠ¡æ–‡æ¡£ä½¿ç”¨è§„åˆ™ â­ **é‡è¦**

**åŸåˆ™**:
- âœ… ä½¿ç”¨ç‹¬ç«‹çš„TASK.mdä»»åŠ¡æ–‡æ¡£ï¼ˆä½äºworktreeæ ¹ç›®å½•ï¼‰
- âœ… å¤šé˜¶æ®µä»»åŠ¡ç”¨TASK-1.md, TASK-2.mdç­‰é€’å¢å‘½å
- âŒ **ç¦æ­¢**ä½¿ç”¨README.mdè®°å½•CLIç‰¹å®šä»»åŠ¡

**ä¸ºä»€ä¹ˆ**:
- README.mdæ˜¯ä¸»ä»“åº“çš„å…±äº«æ–‡æ¡£ï¼Œå¤šä¸ªCLIåŒæ—¶ä¿®æ”¹å¿…ç„¶å¯¼è‡´åˆå¹¶å†²çª
- TASK.mdåœ¨worktreeæ ¹ç›®å½•ï¼Œä¸åˆå¹¶åˆ°ä¸»ä»“åº“ï¼Œé¿å…å†²çª

**æ¨¡æ¿ä½ç½®**: `docs/guides/multi-cli-tasks/TASK_TEMPLATE.md`

**ä½¿ç”¨ç¤ºä¾‹**:
```bash
# 1. åˆ›å»ºworktreeæ—¶ç”ŸæˆTASK.md
git worktree add -b cli-x-feature /opt/claude/mystocks_cli_x
cp docs/guides/multi-cli-tasks/TASK_TEMPLATE.md /opt/claude/mystocks_cli_x/TASK.md

# 2. Worker CLIå¼€å§‹æ›´æ–°è¿›åº¦ï¼ˆTASK-REPORT.mdï¼‰
cd /opt/claude/mystocks_cli_x
cat > TASK-REPORT.md << 'EOF'
# CLI-X ä»»åŠ¡è¿›åº¦æŠ¥å‘Š
...
EOF

# 3. ç¬¬ä¸€é˜¶æ®µå®Œæˆï¼Œä¸»CLIä¸‹å‘ç¬¬äºŒé˜¶æ®µä»»åŠ¡
mv TASK.md TASK-1.md
cat > TASK-2.md << 'EOF'
# CLI-X ç¬¬äºŒé˜¶æ®µä»»åŠ¡
...
EOF

# 4. ç»§ç»­åç»­é˜¶æ®µ...
mv TASK-2.md TASK-2-completed.md
cat > TASK-3.md << 'EOF'
# CLI-X ç¬¬ä¸‰é˜¶æ®µä»»åŠ¡
...
EOF
```

**ç›¸å…³æ–‡æ¡£**:
- [ä»»åŠ¡æ–‡æ¡£æ¨¡æ¿](./TASK_TEMPLATE.md) - è¯¦ç»†çš„TASK.mdå’ŒTASK-REPORT.mdæ¨¡æ¿
- [åä½œå†²çªé¢„é˜²](./GIT_WORKTREE_COLLABORATION_CONFLICT_PREVENTION.md) - é¿å…README.mdå†²çª

---

## ğŸ“ Phase 0: å‡†å¤‡é˜¶æ®µå·¥ä½œæ¸…å•

åœ¨å¯åŠ¨ä»»ä½•Worker CLIä¹‹å‰ï¼Œä¸»CLIå¿…é¡»å®Œæˆä»¥ä¸‹æ­¥éª¤ï¼š

### 0.1 åˆ›å»ºä»»åŠ¡åˆ†é…æ–‡æ¡£

**è¾“å‡ºæ–‡ä»¶**: `docs/guides/multi-cli-tasks/CLI-N_PHASE_NAME_TASKS.md`

**å¿…é¡»åŒ…å«çš„ç« èŠ‚**:
1. **åŸºæœ¬ä¿¡æ¯**: å·¥ä½œç›®å½•ã€Gitåˆ†æ”¯ã€æŠ€æœ¯æ ˆã€ä»»åŠ¡æ•°é‡ã€é¢„è®¡å·¥æœŸ
2. **æ ¸å¿ƒèŒè´£**: æ˜ç¡®çš„ä»»åŠ¡ç›®æ ‡å’ŒèŒƒå›´
3. **ä¾èµ–å…³ç³»**: è¾“å…¥ä¾èµ–å’Œè¾“å‡ºä¾èµ–
4. **ä»»åŠ¡æ¸…å•**: è¯¦ç»†çš„åˆ†é˜¶æ®µä»»åŠ¡åˆ—è¡¨ï¼ˆè‡³å°‘åŒ…å«ä»»åŠ¡ç¼–å·ã€æè¿°ã€éªŒæ”¶æ ‡å‡†ï¼‰
5. **è¿›åº¦è·Ÿè¸ª**: è¿›åº¦æ›´æ–°ç« èŠ‚æ¨¡æ¿
6. **å·¥ä½œæµç¨‹ä¸Gitæäº¤è§„èŒƒ**: åŒ…å«æ¯æ—¥å·¥ä½œæµç¨‹ã€æäº¤æ¶ˆæ¯æ ¼å¼ã€å®Œæˆæ ‡å‡†æ£€æŸ¥æ¸…å•

**è´¨é‡æ ‡å‡†**:
- âœ… ä»»åŠ¡æè¿°æ¸…æ™°ï¼Œæ— æ­§ä¹‰
- âœ… éªŒæ”¶æ ‡å‡†å¯è¡¡é‡ã€å¯éªŒè¯
- âœ… ä¾èµ–å…³ç³»æ˜ç¡®ï¼Œæ— å¾ªç¯ä¾èµ–
- âœ… å·¥æœŸä¼°ç®—åˆç†ï¼ˆå‚è€ƒç±»ä¼¼ä»»åŠ¡ï¼‰

### 0.2 åˆ›å»ºå·¥ä½œæµç¨‹æŒ‡å—

**è¾“å‡ºæ–‡ä»¶**: `docs/guides/multi-cli-tasks/CLI_WORKFLOW_GUIDE.md`

**å¿…é¡»åŒ…å«çš„ç« èŠ‚**:
1. **ä»»åŠ¡å¯åŠ¨é˜¶æ®µ**: å¦‚ä½•ç¡®è®¤ä»»åŠ¡ç†è§£ã€è®¾ç½®è¿›åº¦è·Ÿè¸ª
2. **å¼€å‘å®ç°é˜¶æ®µ**: å¼€å‘åŸåˆ™ã€TDDå·¥ä½œæµ
3. **è‡ªæµ‹éªŒè¯é˜¶æ®µ**: å¦‚ä½•éªŒè¯éªŒæ”¶æ ‡å‡†
4. **Gitæäº¤é˜¶æ®µ**: æäº¤å‰æ£€æŸ¥æ¸…å•ã€æäº¤é¢‘ç‡å»ºè®®
5. **æ›´æ–°TASK-REPORTé˜¶æ®µ**: å¦‚ä½•ä½¿ç”¨TASK-REPORT.mdè®°å½•è¿›åº¦
6. **å®Œæˆç¡®è®¤é˜¶æ®µ**: ä»»åŠ¡å®Œæˆæ ‡å‡†ã€åˆå¹¶æµç¨‹

**è´¨é‡æ ‡å‡†**:
- âœ… æµç¨‹æ¸…æ™°ï¼Œæ­¥éª¤æ˜ç¡®
- âœ… åŒ…å«å…·ä½“ä»£ç ç¤ºä¾‹
- âœ… æä¾›å¸¸è§é—®é¢˜å¤„ç†æŒ‡å—
- âœ… æ€»é•¿åº¦1000+è¡Œï¼Œè¦†ç›–å®Œæ•´å¼€å‘å‘¨æœŸ

### 0.3 åˆ›å»ºç›‘æ§æœºåˆ¶æ–‡æ¡£

**è¾“å‡ºæ–‡ä»¶**: `docs/guides/multi-cli-tasks/PROGRESS_MONITORING_AND_MILESTONES.md`

**å¿…é¡»åŒ…å«çš„ç« èŠ‚**:
1. **ç›‘æ§åŸç†**: éä¾µå…¥å¼ç›‘æ§çš„æ•°æ®æ¥æº
2. **é¢„è­¦æœºåˆ¶**: é»„è‰²é¢„è­¦ï¼ˆ24hï¼‰ã€çº¢è‰²é¢„è­¦ï¼ˆ48hï¼‰
3. **è‡ªåŠ¨åŒ–ç›‘æ§è„šæœ¬**: å®Œæ•´çš„Bashè„šæœ¬å®ç°
4. **é‡Œç¨‹ç¢‘ç®¡ç†**: 8ä¸ªä¸»è¦é‡Œç¨‹ç¢‘çš„å®šä¹‰å’ŒéªŒæ”¶æ ‡å‡†
5. **é£é™©å¤„ç†**: å¦‚ä½•å¤„ç†é˜»å¡é—®é¢˜

**è´¨é‡æ ‡å‡†**:
- âœ… ç›‘æ§è„šæœ¬å¯ç›´æ¥ä½¿ç”¨ï¼ˆæ— å ä½ç¬¦ï¼‰
- âœ… é¢„è­¦é˜ˆå€¼åˆç†ï¼ˆé¿å…é¢‘ç¹è¯¯æŠ¥ï¼‰
- âœ… é‡Œç¨‹ç¢‘å¯è¡¡é‡ã€å¯éªŒè¯
- âœ… é£é™©å¤„ç†æµç¨‹æ˜ç¡®

### 0.4 åˆ›å»ºå®æ–½æ–¹æ¡ˆæ€»è§ˆ

**è¾“å‡ºæ–‡ä»¶**: `openspec/changes/[change-name]/implementation-plan.md`

**å¿…é¡»åŒ…å«çš„ç« èŠ‚**:
1. **Executive Summary**: é¡¹ç›®èƒŒæ™¯ã€ä»·å€¼ä¸»å¼ ã€æ—¶é—´èŠ‚çœ
2. **æ¶æ„å›¾**: CLIä¾èµ–å…³ç³»å’Œæ•°æ®æµå›¾
3. **èµ„æºåˆ†é…**: è¯¦ç»†çš„ä»»åŠ¡åˆ†é…è¡¨æ ¼ï¼ˆCLIåç§°ã€ä»»åŠ¡æ•°ã€äººå¤©ã€ä¼˜å…ˆçº§ï¼‰
4. **Two-Roundæ‰§è¡Œæ¨¡å‹**: Round 1å’ŒRound 2çš„CLIåˆ’åˆ†
5. **äº¤ä»˜æ¸…å•**: æ¯ä¸ªCLIçš„è¯¦ç»†äº¤ä»˜ç‰©å’ŒéªŒæ”¶æ ‡å‡†
6. **é£é™©è¯„ä¼°**: 5å¤§é£é™©å’Œç¼“è§£æªæ–½
7. **æˆåŠŸæŒ‡æ ‡**: æŠ€æœ¯æŒ‡æ ‡å’Œä¸šåŠ¡æŒ‡æ ‡

**è´¨é‡æ ‡å‡†**:
- âœ… é€»è¾‘æ¸…æ™°ï¼Œè¯´æœåŠ›å¼º
- âœ… æ•°æ®å‡†ç¡®ï¼ˆä»»åŠ¡æ•°ã€äººå¤©ã€æ—¶é—´çº¿ï¼‰
- âœ… é£é™©è¯†åˆ«å…¨é¢ï¼Œç¼“è§£æªæ–½å¯è¡Œ
- âœ… æˆåŠŸæŒ‡æ ‡å¯è¡¡é‡

### 0.5 æ–‡ä»¶æ‰€æœ‰æƒå’ŒèŒè´£èŒƒå›´ç¡®è®¤ âš ï¸ **æ–°å¢å…³é”®æ­¥éª¤**

**ç›®çš„**: é˜²æ­¢å¤šä¸ªCLIä¿®æ”¹åŒä¸€æ–‡ä»¶å¯¼è‡´åä½œå†²çª

**è¾“å‡ºæ–‡ä»¶**: `.FILE_OWNERSHIP` (ä¸»ä»“åº“æ ¹ç›®å½•)

**å¿…é¡»å®Œæˆçš„æ­¥éª¤**:

#### **0.5.1 åˆ›å»ºæ–‡ä»¶æ‰€æœ‰æƒæ˜ å°„**
```bash
cd /opt/claude/mystocks_spec

cat > .FILE_OWNERSHIP << 'EOF'
# Git Worktreeæ–‡ä»¶æ‰€æœ‰æƒæ˜ å°„
# æ ¼å¼ï¼šç›®å½•/æ–‡ä»¶æ¨¡å¼: æ‹¥æœ‰è€…CLI | è¯´æ˜

# ========== ä¸»ä»“åº“ï¼ˆä¸»CLIï¼‰==========
src/                               main      | æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
config/                            main      | é…ç½®æ–‡ä»¶
scripts/dev/                       main      | å¼€å‘å·¥å…·
pyproject.toml                     main      | é¡¹ç›®é…ç½®
.pre-commit-config.yaml            main      | Pre-commité…ç½®ï¼ˆæ‰€æœ‰CLIç»§æ‰¿ï¼‰
requirements.txt                   main      | Pythonä¾èµ–

# ========== CLI-1: Phase 3å‰ç«¯Kçº¿å›¾ ==========
web/frontend/src/components/Charts/  cli-1     | Kçº¿å›¾ç»„ä»¶
web/frontend/src/api/klineApi.ts     cli-1     | Kçº¿å›¾API
web/frontend/src/api/indicatorApi.ts cli-1     | æŠ€æœ¯æŒ‡æ ‡API

# ========== CLI-2: APIå¥‘çº¦æ ‡å‡†åŒ– ==========
docs/api/contracts/                  cli-2     | APIå¥‘çº¦æ–‡æ¡£
web/backend/app/schemas/            cli-2     | æ•°æ®æ¨¡å¼å®šä¹‰
web/backend/openapi/                 cli-2     | OpenAPIè§„èŒƒ

# ========== CLI-5: GPUç›‘æ§ä»ªè¡¨æ¿ ==========
src/gpu/                            cli-5     | GPUç›¸å…³ä»£ç 
src/gpu_monitoring/                  cli-5     | GPUç›‘æ§æœåŠ¡
scripts/start_gpu_monitoring.sh      cli-5     | GPUç›‘æ§è„šæœ¬

# ========== CLI-6: è´¨é‡ä¿è¯ ==========
tests/                              cli-6     | æµ‹è¯•æ–‡ä»¶
scripts/maintenance/                cli-6     | è´¨é‡ä¿è¯è„šæœ¬
docs/guides/CODE_QUALITY*            cli-6     | è´¨é‡æ ‡å‡†æ–‡æ¡£
docs/guides/TESTING*                 cli-6     | æµ‹è¯•æŒ‡å—æ–‡æ¡£

# ========== å…±äº«æ–‡ä»¶ï¼ˆåè°ƒä¿®æ”¹ï¼‰==========
README.md                           main+clis | ä¸»CLIç»´æŠ¤ï¼ŒCLIå¯å»ºè®®
CLAUDE.md                           main      | ä¸»CLIç»´æŠ¤
CHANGELOG.md                        main      | ä¸»CLIç»´æŠ¤

# ========== è§„åˆ™è¯´æ˜ ==========
# 1. æ‹¥æœ‰è€…CLIå¯ä»¥ä¿®æ”¹å…¶æ‹¥æœ‰çš„æ–‡ä»¶
# 2. å…¶ä»–CLIåªè¯»è¿™äº›æ–‡ä»¶ï¼Œä¿®æ”¹éœ€è¦åè°ƒ
# 3. å…±äº«æ–‡ä»¶éœ€è¦ä¸»CLIåè°ƒä¿®æ”¹
# 4. æœªçŸ¥æ‰€æœ‰æƒçš„æ–‡ä»¶é»˜è®¤å±äºä¸»CLI
EOF

git add .FILE_OWNERSHIP
git commit -m "chore: add file ownership mapping for all CLIs"
```

#### **0.5.2 æ˜ç¡®æ¯ä¸ªCLIçš„èŒè´£èŒƒå›´**
- âœ… ä¸ºæ¯ä¸ªCLIå®šä¹‰æ¸…æ™°çš„èŒè´£èŒƒå›´ï¼ˆå‚è€ƒä¸Šé¢çš„æ‰€æœ‰æƒæ˜ å°„ï¼‰
- âœ… ç¡®ä¿èŒè´£ä¸é‡å ï¼ˆé€šè¿‡ç›®å½•ç»“æ„ç‰©ç†éš”ç¦»ï¼‰
- âœ… è®°å½•åœ¨ä»»åŠ¡åˆ†é…æ–‡æ¡£ä¸­
- âœ… åœ¨CLI TASK.mdä¸­è¯´æ˜èŒè´£è¾¹ç•Œ

#### **0.5.3 è¿è¡Œå†²çªæ£€æµ‹è„šæœ¬**
```bash
# é¦–æ¬¡è¿è¡Œï¼ˆæ£€æµ‹æ½œåœ¨å†²çªï¼‰
bash scripts/maintenance/check_file_conflicts.sh

# è¾“å‡ºç¤ºä¾‹ï¼š
# âœ… æœªå‘ç°æ–‡ä»¶å†²çª
# æˆ–
# âš ï¸  å‘ç°Nä¸ªæ½œåœ¨æ–‡ä»¶å†²çª
#    å»ºè®®ä¸æ–‡ä»¶æ‹¥æœ‰è€…CLIåè°ƒ
```

#### **0.5.4 å»ºç«‹åè°ƒæœºåˆ¶**
- âœ… å®šä¹‰è·¨CLIä¿®æ”¹ç”³è¯·æµç¨‹
- âœ… å»ºç«‹å®šæœŸåŒæ­¥ä¼šè®®æœºåˆ¶ï¼ˆæ¯å¤©ä¸€æ¬¡ï¼‰
- âœ… åˆ›å»ºå†²çªæŠ¥å‘Šæµç¨‹
- âœ… è®°å½•åœ¨ä¸»CLIå·¥ä½œè§„èŒƒä¸­

**è·¨CLIä¿®æ”¹ç”³è¯·æµç¨‹**:
```
Worker CLIéœ€è¦ä¿®æ”¹å…¶ä»–CLIæ‹¥æœ‰çš„æ–‡ä»¶æ—¶ï¼š
1. å‘ä¸»CLIæäº¤ç”³è¯·ï¼ˆåŒ…å«ä¿®æ”¹åŸå› å’Œå†…å®¹ï¼‰
2. ä¸»CLIè¯„ä¼°å½±å“èŒƒå›´
3. ä¸»CLIåè°ƒç›¸å…³CLI
4. ä¸»CLIæ‰§è¡Œä¿®æ”¹æˆ–æˆæƒWorker CLIä¿®æ”¹
5. ä¸»CLIé€šçŸ¥æ‰€æœ‰ç›¸å…³CLI
```

**è´¨é‡æ ‡å‡†**:
- âœ… `.FILE_OWNERSHIP`æ–‡ä»¶å·²åˆ›å»ºå¹¶æäº¤
- âœ… æ¯ä¸ªCLIæœ‰æ¸…æ™°çš„ç›®å½•èŒè´£èŒƒå›´
- âœ… å†²çªæ£€æµ‹è„šæœ¬å·²è¿è¡Œå¹¶è®°å½•ç»“æœ
- âœ… åè°ƒæœºåˆ¶å·²å»ºç«‹å¹¶æ–‡æ¡£åŒ–

**é¢„é˜²æªæ–½**:
1. âœ… **åœ¨åˆ†é…ä»»åŠ¡å‰**: æ›´æ–°`.FILE_OWNERSHIP`æ–‡ä»¶
2. âœ… **åœ¨Worktreeåˆ›å»ºæ—¶**: éªŒè¯CLIä¸“å±å·¥ä½œç›®å½•ä¸ä¾µçŠ¯å…¶ä»–CLI
3. âœ… **åœ¨å¼€å‘è¿‡ç¨‹ä¸­**: å®šæœŸè¿è¡Œå†²çªæ£€æµ‹è„šæœ¬ï¼ˆæ¯å¤©ä¸€æ¬¡ï¼‰

**è¯¦ç»†æ–‡æ¡£**: å‚è§ [Git Worktreeåä½œå†²çªé¢„é˜²è§„èŒƒ](./GIT_WORKTREE_COLLABORATION_CONFLICT_PREVENTION.md)

---

## ğŸš€ Phase 1: Git Worktreeåˆ›å»ºæ ‡å‡†æµç¨‹

### 1.1 åˆ›å»ºWorktree

**æ ‡å‡†å‘½ä»¤**:
```bash
git worktree add /opt/claude/mystocks_<phase>_<name> -b <branch-name>

# ç¤ºä¾‹ï¼š
git worktree add /opt/claude/mystocks_phase3_frontend -b phase3-frontend-optimization
```

**é…ç½®å…±äº«ä¾èµ– (Node.js é¡¹ç›®)**:
```bash
# 1. ç¡®ä¿ä¸»å·¥ä½œæ ‘å·²å®‰è£…ä¾èµ–
pnpm install

# 2. ä¸ºæ–° Worktree åˆ›å»ºè½¯é“¾æ¥ (èŠ‚çœç£ç›˜ç©ºé—´ï¼Œä¿è¯ç‰ˆæœ¬ä¸€è‡´)
cd /opt/claude/mystocks_phase3_frontend
ln -s ../mystocks_spec/node_modules ./node_modules
```

**éªŒè¯æ­¥éª¤**:
```bash
git worktree list  # ç¡®è®¤worktreeå·²åˆ›å»º
ls -la /opt/claude/mystocks_phase3_frontend  # ç¡®è®¤ç›®å½•å­˜åœ¨
ls -l /opt/claude/mystocks_phase3_frontend/node_modules  # ç¡®è®¤è½¯é“¾æ¥æŒ‡å‘æ­£ç¡®
```

**è¯¦ç»†å‘½ä»¤å‚è€ƒ**: [Git Worktreeå‘½ä»¤æ‰‹å†Œ](./GIT_WORKTREE_MAIN_CLI_MANUAL.md)

### 1.2 åˆå§‹åŒ–TASK.md

**æ­¥éª¤1**: å¤åˆ¶ä»»åŠ¡åˆ†é…æ–‡æ¡£åˆ°TASK.md
```bash
cp /opt/claude/mystocks_spec/docs/guides/multi-cli-tasks/CLI-1_PHASE3_TASKS.md \
   /opt/claude/mystocks_phase3_frontend/TASK.md
```

**æ­¥éª¤2**: é¦–æ¬¡æäº¤åˆ°Git
```bash
cd /opt/claude/mystocks_phase3_frontend
git add TASK.md
DISABLE_DIR_STRUCTURE_CHECK=1 git commit -m "feat: initialize CLI-1 Phase 3 frontend optimization tasks

- 20 tasks across 4 stages (12-14 working days)
- Enhanced K-line charts with klinecharts 9.6.0
- 161 technical indicators powered by TA-Lib backend
- GPU-accelerated indicator calculation (68.58x speedup)

ğŸ¤– Generated with [Claude Code](https://claude.com/claude-code)

Co-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>"
```

**å…³é”®æ³¨æ„**:
- âœ… å¿…é¡»ä½¿ç”¨ `DISABLE_DIR_STRUCTURE_CHECK=1` ç»•è¿‡ç›®å½•ç»“æ„æ£€æŸ¥ï¼ˆworktreeç¯å¢ƒä¸åŒï¼‰
- âœ… æäº¤æ¶ˆæ¯å¿…é¡»æ¸…æ™°æè¿°ä»»åŠ¡èŒƒå›´å’ŒæŠ€æœ¯æ ˆ
- âœ… Co-Authored-By æ ‡è®°æ‰€æœ‰AIè¾…åŠ©ç”Ÿæˆçš„ä»£ç 

### 1.3 ä¿®å¤Hookè„šæœ¬æƒé™ï¼ˆå…³é”®æ­¥éª¤ï¼ï¼‰âš ï¸

**é—®é¢˜**: Git worktreeåˆ›å»ºåï¼Œ`.claude/hooks/` ç›®å½•ä¸‹çš„è„šæœ¬é»˜è®¤æ²¡æœ‰æ‰§è¡Œæƒé™ï¼ˆ644ï¼‰

**ç—‡çŠ¶**:
```
Stop hook error: Failed with non-blocking status code: /bin/sh: 1:
  /opt/claude/mystocks_phase6_api_contract/.claude/hooks/stop-python-quality-gate.sh: Permission denied
```

**ä¿®å¤å‘½ä»¤**:
```bash
# ä¸ºå•ä¸ªCLIä¿®å¤
chmod +x /opt/claude/mystocks_phase3_frontend/.claude/hooks/*.sh

# æ‰¹é‡ä¿®å¤æ‰€æœ‰CLI
for cli in /opt/claude/mystocks_phase3_frontend \
          /opt/claude/mystocks_phase6_api_contract \
          /opt/claude/mystocks_phase6_monitoring \
          /opt/claude/mystocks_phase6_quality; do
  chmod +x "$cli/.claude/hooks/"*.sh
  echo "âœ… $(basename $cli) hooksæƒé™å·²ä¿®å¤"
done
```

**éªŒè¯ä¿®å¤**:
```bash
# æ£€æŸ¥æƒé™
ls -la /opt/claude/mystocks_phase3_frontend/.claude/hooks/ | grep "\.sh"

# é¢„æœŸè¾“å‡ºï¼ˆåº”è¯¥æ˜¯755æƒé™ï¼‰:
# -rwxr-xr-x 1 root root  7702 Dec 29 14:45 post-tool-use-database-schema-validator.sh
# -rwxr-xr-x 1 root root 14581 Dec 29 14:45 post-tool-use-document-organizer.sh
# ...

# éªŒè¯è¯­æ³•
for hook in /opt/claude/mystocks_phase3_frontend/.claude/hooks/*.sh; do
  bash -n "$hook" && echo "âœ… $(basename $hook)"
done
```

**æ ¹å› åˆ†æ**:
- Hookè„šæœ¬åœ¨worktreeåˆå§‹åŒ–æ—¶ä»ä¸»ä»“åº“å¤åˆ¶
- Gitä¸è·Ÿè¸ªæ–‡ä»¶æƒé™ä½ï¼ˆé™¤éæ˜¾å¼ä½¿ç”¨ `git update-index --chmod=+x`ï¼‰
- `.claude` ç›®å½•é€šå¸¸åœ¨ `.gitignore` ä¸­ï¼Œä¸ä¼šè¢«æäº¤

**é¢„é˜²æªæ–½**:
- âœ… åœ¨Worktreeåˆ›å»ºåç«‹å³æ‰§è¡Œ `chmod +x` ä¿®å¤
- âœ… åœ¨ä¸»CLIå·¥ä½œæµç¨‹ä¸­åˆ—å‡ºæ­¤æ­¥éª¤ä¸ºå¿…éœ€é¡¹
- âœ… åœ¨Worker CLIå¯åŠ¨æ—¶éªŒè¯hookså¯æ‰§è¡Œæ€§

### 1.4 éªŒè¯Gitè¿œç¨‹ä»“åº“åç§° âš ï¸ **å…³é”®æ­¥éª¤**

**é—®é¢˜**: ä¸»ä»“åº“çš„è¿œç¨‹ä»“åº“åç§°å¯èƒ½ä¸æ˜¯Gitæ ‡å‡†çš„ `origin`ï¼Œå¯¼è‡´æ‰€æœ‰æ–‡æ¡£ä¸­çš„ `git push origin` å‘½ä»¤å¤±è´¥

**ç—‡çŠ¶**:
```bash
$ git push origin phase3-frontend-optimization
fatal: 'origin' does not appear to be a git remote
```

**æ£€æŸ¥å‘½ä»¤**:
```bash
# æ£€æŸ¥ä¸»ä»“åº“çš„è¿œç¨‹åç§°
git remote -v

# âŒ å¦‚æœè¾“å‡º:
# mystocks    https://github.com/user/repo.git (fetch)
# mystocks    https://github.com/user/repo.git (push)

# âœ… åº”è¯¥è¾“å‡º:
# origin    https://github.com/user/repo.git (fetch)
# origin    https://github.com/user/repo.git (push)
```

**ä¿®å¤å‘½ä»¤**:
```bash
# ä¿®å¤ä¸»ä»“åº“ï¼ˆæ‰€æœ‰worktreeä¼šè‡ªåŠ¨ç»§æ‰¿ï¼‰
git remote rename mystocks origin

# éªŒè¯ä¿®å¤
git remote -v
# é¢„æœŸè¾“å‡º: origin (è€Œé mystocks)
```

**éªŒè¯ä¿®å¤**:
```bash
# éªŒè¯æ‰€æœ‰worktreeå·²è‡ªåŠ¨ç»§æ‰¿
for cli in /opt/claude/mystocks_phase3_frontend \
          /opt/claude/mystocks_phase6_api_contract \
          /opt/claude/mystocks_phase6_monitoring \
          /opt/claude/mystocks_phase6_quality; do
  echo "## $(basename $cli)"
  cd "$cli" && git remote -v | grep origin && echo "âœ… OK" || echo "âŒ Failed"
  echo ""
done
```

**å®é™…ä¿®å¤æ¡ˆä¾‹**: Commit `0a65718` (2025-12-29 18:29)
- ä¸»ä»“åº“ä» `mystocks` æ”¹ä¸º `origin`
- æ‰€æœ‰4ä¸ªworktreeè‡ªåŠ¨ç»§æ‰¿

**é¢„é˜²æªæ–½**:
- âœ… **åœ¨Phase 1.1åˆ›å»ºworktreeå‰**: ç¡®è®¤ä¸»ä»“åº“ä½¿ç”¨ `origin`
  ```bash
  git remote -v | grep origin || git remote rename <å½“å‰åç§°> origin
  ```

- âœ… **åœ¨Phase 1.4éªŒè¯ä¸­**: æ£€æŸ¥æ‰€æœ‰worktreeçš„è¿œç¨‹é…ç½®
  ```bash
  cd /opt/claude/mystocks_phase3_frontend
  git remote -v | grep origin
  ```

- âœ… **åœ¨æ–‡æ¡£ä¸­**: å§‹ç»ˆä½¿ç”¨æ ‡å‡†çš„ `origin` å‘½ä»¤ç¤ºä¾‹

**è¯¦ç»†æ–‡æ¡£**: å‚è§ [Gitè¿œç¨‹åç§°æ ‡å‡†åŒ–è§„èŒƒ](./GIT_REMOTE_NAME_STANDARD.md)

### 1.5 éªŒè¯Worktreeå®Œæ•´æ€§

**æ£€æŸ¥æ¸…å•**:
```bash
# 1. Worktreeå·²åˆ›å»º
git worktree list | grep phase3-frontend-optimization

# 2. TASK.mdå·²åˆå§‹åŒ–
cat /opt/claude/mystocks_phase3_frontend/TASK.md | head -20

# 3. Hooksæœ‰æ‰§è¡Œæƒé™
ls -la /opt/claude/mystocks_phase3_frontend/.claude/hooks/ | grep "\.sh" | grep "rwx"

# 4. Gitè¿œç¨‹ä»“åº“åç§°ä¸ºorigin âš ï¸
cd /opt/claude/mystocks_phase3_frontend && git remote -v | grep origin

# 5. æ–‡ä»¶æ‰€æœ‰æƒå·²ç¡®è®¤ âš ï¸ **æ–°å¢**
cat /opt/claude/mystocks_spec/.FILE_OWNERSHIP | grep cli-1

# 6. Pre-commité…ç½®å·²è¯´æ˜ âš ï¸ **æ–°å¢**
grep "Pre-commité…ç½®" /opt/claude/mystocks_phase3_frontend/TASK.md

# 7. Gitåˆ†æ”¯æ­£ç¡®
cd /opt/claude/mystocks_phase3_frontend && git branch

# 8. é¦–æ¬¡æäº¤å·²å®Œæˆ
cd /opt/claude/mystocks_phase3_frontend && git log --oneline -1
```

**é¢„æœŸç»“æœ**: æ‰€æœ‰8é¡¹æ£€æŸ¥éƒ½âœ…é€šè¿‡

---

## ğŸ“Š Phase 2: ç›‘æ§ç³»ç»Ÿè®¾ç½®

### 2.1 åˆ›å»ºç›‘æ§è„šæœ¬

**æ–‡ä»¶ä½ç½®**: `scripts/monitoring/check_worker_progress.sh`

**å…³é”®ç‰¹æ€§**:
- âœ… éä¾µå…¥å¼ï¼ˆåªè¯»TASK-REPORT.mdå’ŒGitå†å²ï¼‰
- âœ… è‡ªåŠ¨åŒ–ï¼ˆå¯é…ç½®cronå®šæ—¶æ‰§è¡Œï¼‰
- âœ… é¢„è­¦æœºåˆ¶ï¼ˆé»„/çº¢è‰²é¢„è­¦ï¼‰
- âœ… æŠ¥å‘Šç”Ÿæˆï¼ˆä¿å­˜åˆ° `/tmp/mystocks_progress_*.txt`ï¼‰

**å®Œæ•´å®ç°**: å‚è€ƒå·²åˆ›å»ºçš„ç›‘æ§è„šæœ¬ï¼ˆåŒ…å«400+è¡Œå®Œæ•´å®ç°ï¼‰

### 2.2 è®¾ç½®è‡ªåŠ¨åŒ–ç›‘æ§

**æ‰‹åŠ¨è¿è¡Œ**:
```bash
bash /opt/claude/mystocks_spec/scripts/monitoring/check_worker_progress.sh
```

**è‡ªåŠ¨åŒ–ï¼ˆæ¯2å°æ—¶ï¼‰**:
```bash
(crontab -l 2>/dev/null; echo "0 */2 * * * /opt/claude/mystocks_spec/scripts/monitoring/check_worker_progress.sh >> /tmp/mystocks_progress.log 2>&1") | crontab -
```

**éªŒè¯crontab**:
```bash
crontab -l | grep check_worker
```

### 2.3 ç›‘æ§æŠ¥å‘Šè§£è¯»

**æŠ¥å‘Šæ–‡ä»¶**: `/tmp/mystocks_progress_YYYYMMDD_HHMMSS.txt`

**å…³é”®æŒ‡æ ‡**:
- Active CLIs (< 24h): TASK-REPORT.mdæ›´æ–°æ—¶é—´åœ¨24å°æ—¶å†…
- Warning CLIs (24-48h): TASK-REPORT.mdè¶…è¿‡24å°æ—¶æœªæ›´æ–°
- Alert CLIs (> 48h): TASK-REPORT.mdè¶…è¿‡48å°æ—¶æœªæ›´æ–°

**å“åº”ç­–ç•¥**:
- ğŸŸ¢ æ­£å¸¸: æ— éœ€å¹²é¢„
- ğŸŸ¡ é¢„è­¦: åœ¨TASK-REPORT.mdä¸­è®°å½•ï¼Œä¸»CLIå…³æ³¨
- ğŸ”´ å‘Šè­¦: ä¸»CLIä¸»åŠ¨è”ç³»Worker CLIäº†è§£é˜»å¡åŸå› 

---

## ğŸ“š Phase 3: æ–‡æ¡£ç»„ç»‡è§„èŒƒ

### 3.1 æ–‡ä»¶ç»„ç»‡æ ‡å‡†

**ä¸»ä»“åº“æ–‡æ¡£ç»“æ„**:
```
mystocks_spec/
â”œâ”€â”€ docs/
â”‚   â””â”€â”€ guides/
â”‚       â””â”€â”€ multi-cli-tasks/        # æ‰€æœ‰CLIç›¸å…³æ–‡æ¡£é›†ä¸­å­˜æ”¾
â”‚           â”œâ”€â”€ CLI-1_PHASE3_TASKS.md
â”‚           â”œâ”€â”€ CLI-2_API_CONTRACT_TASKS.md
â”‚           â”œâ”€â”€ CLI-3_PHASE4_COMPLETE_TASKS.md
â”‚           â”œâ”€â”€ CLI-4_PHASE5_AI_SCREENING_TASKS.md
â”‚           â”œâ”€â”€ CLI-5_PHASE6_GPU_MONITORING_TASKS.md
â”‚           â”œâ”€â”€ CLI-6_QUALITY_ASSURANCE_TASKS.md
â”‚           â”œâ”€â”€ PROGRESS_MONITORING_AND_MILESTONES.md
â”‚           â”œâ”€â”€ CLI_WORKFLOW_GUIDE.md
â”‚           â”œâ”€â”€ MAIN_CLI_WORKFLOW_STANDARDS.md  # æœ¬æ–‡æ¡£
â”‚           â”œâ”€â”€ GIT_WORKTREE_MAIN_CLI_MANUAL.md
â”‚           â”œâ”€â”€ GIT_WORKTREE_COLLABORATION_CONFLICT_PREVENTION.md
â”‚           â”œâ”€â”€ GIT_REMOTE_NAME_STANDARD.md
â”‚           â””â”€â”€ TASK_TEMPLATE.md
â”œâ”€â”€ openspec/
â”‚   â””â”€â”€ changes/
â”‚       â””â”€â”€ frontend-optimization-six-phase/
â”‚           â””â”€â”€ implementation-plan.md
â””â”€â”€ scripts/
    â””â”€â”€ monitoring/
        â””â”€â”€ check_worker_progress.sh
```

**å‘½åè§„èŒƒ**:
- ä»»åŠ¡åˆ†é…æ–‡æ¡£: `CLI-N_PHASE_NAME_TASKS.md`
- æµç¨‹æŒ‡å—æ–‡æ¡£: `*_WORKFLOW_GUIDE.md`
- ç›‘æ§ç›¸å…³æ–‡æ¡£: `PROGRESS_MONITORING_AND_MILESTONES.md`
- å·¥ä½œè§„èŒƒæ–‡æ¡£: `MAIN_CLI_WORKFLOW_STANDARDS.md`
- Gitå‘½ä»¤æ–‡æ¡£: `*_MANUAL.md`
- å†²çªé¢„é˜²æ–‡æ¡£: `*_COLLABORATION_CONFLICT_PREVENTION.md`
- è¿œç¨‹åç§°æ–‡æ¡£: `GIT_REMOTE_NAME_STANDARD.md`
- ä»»åŠ¡æ¨¡æ¿æ–‡æ¡£: `TASK_TEMPLATE.md`

### 3.2 TASK.mdç« èŠ‚æ ‡å‡†

**æ‰€æœ‰CLIçš„TASK.mdå¿…é¡»åŒ…å«ä»¥ä¸‹ç« èŠ‚**:

1. **åŸºæœ¬ä¿¡æ¯**: å·¥ä½œç›®å½•ã€Gitåˆ†æ”¯ã€æŠ€æœ¯æ ˆã€ä»»åŠ¡æ•°é‡ã€é¢„è®¡å·¥æœŸ
2. **æ ¸å¿ƒèŒè´£**: æ˜ç¡®çš„ä»»åŠ¡ç›®æ ‡å’ŒèŒƒå›´
3. **ä¾èµ–å…³ç³»**: è¾“å…¥ä¾èµ–å’Œè¾“å‡ºä¾èµ–
4. **ä»»åŠ¡æ¸…å•**: è¯¦ç»†çš„åˆ†é˜¶æ®µä»»åŠ¡åˆ—è¡¨
5. **æ€»ä½“éªŒæ”¶æ ‡å‡†**: åŠŸèƒ½å®Œæ•´æ€§ã€æ€§èƒ½æŒ‡æ ‡ã€æµ‹è¯•è¦†ç›–ã€æ–‡æ¡£å®Œæ•´æ€§
6. **è¿›åº¦è·Ÿè¸ª**: ä»»åŠ¡è¿›åº¦ç»Ÿè®¡å’Œæ›´æ–°æ—¥å¿—ï¼ˆé“¾æ¥åˆ°TASK-REPORT.mdï¼‰

**ç¦æ­¢**:
- âŒ TASK.mdä¸­æ²¡æœ‰"è¿›åº¦è·Ÿè¸ª"ç« èŠ‚
- âŒ æ²¡æœ‰é“¾æ¥åˆ°TASK-REPORT.md
- âŒ æ²¡æœ‰Gitæäº¤è§„èŒƒå’Œç¤ºä¾‹

---

## âœ… Phase 4: éªŒæ”¶ä¸äº¤ä»˜æ ‡å‡†

### 4.1 Worktreeå°±ç»ªæ£€æŸ¥æ¸…å•

ä¸»CLIåœ¨å¯åŠ¨Worker CLIå‰å¿…é¡»ç¡®è®¤:

- [ ] ä»»åŠ¡åˆ†é…æ–‡æ¡£å·²åˆ›å»ºå¹¶å®¡æŸ¥é€šè¿‡
- [ ] **æ–‡ä»¶æ‰€æœ‰æƒæ˜ å°„å·²åˆ›å»ºï¼ˆ.FILE_OWNERSHIPï¼‰** âš ï¸ **æ–°å¢**
- [ ] Git worktreeå·²åˆ›å»ºå¹¶éªŒè¯
- [ ] **Gitè¿œç¨‹ä»“åº“åç§°ä¸º `origin`**
- [ ] TASK.mdå·²åˆå§‹åŒ–å¹¶åŒ…å«æ‰€æœ‰å¿…éœ€ç« èŠ‚
- [ ] å·¥ä½œæµç¨‹æŒ‡å—å·²åˆ›å»ºå¹¶é“¾æ¥åœ¨TASK.mdä¸­
- [ ] Hookè„šæœ¬æƒé™å·²ä¿®å¤ï¼ˆ755ï¼‰
- [ ] Hookè„šæœ¬è¯­æ³•å·²éªŒè¯ï¼ˆbash -nï¼‰
- [ ] **Pre-commité…ç½®å·²è¯´æ˜ï¼ˆç»§æ‰¿ä¸»ä»“åº“ï¼Œä¸ä¿®æ”¹ï¼‰** âš ï¸ **æ–°å¢**
- [ ] **å…±äº«ä¾èµ–å·²é“¾æ¥ (Node.js) âš ï¸ **æ–°å¢**
- [ ] ç›‘æ§è„šæœ¬å·²åˆ›å»ºå¹¶å¯è¿è¡Œ
- [ ] **å†²çªæ£€æµ‹è„šæœ¬å·²åˆ›å»ºå¹¶æµ‹è¯•è¿è¡Œ** âš ï¸ **æ–°å¢**
- [ ] å®æ–½æ–¹æ¡ˆæ–‡æ¡£å·²åˆ›å»ºå¹¶è·å¾—æ‰¹å‡†

### 4.2 Roundå¯åŠ¨æ£€æŸ¥æ¸…å•

**Round 1å¯åŠ¨å‰** (CLI-1, CLI-2, CLI-5, CLI-6):
- [ ] ä¸»CLIå·²å®ŒæˆPhase 0-4æ‰€æœ‰å‡†å¤‡æ­¥éª¤
- [ ] **æ–‡ä»¶æ‰€æœ‰æƒæ˜ å°„å·²åˆ›å»ºå¹¶éªŒè¯** âš ï¸ **æ–°å¢**
- [ ] 4ä¸ªworktreeå·²åˆ›å»ºå¹¶éªŒè¯
- [ ] 4ä¸ªworktreeçš„è¿œç¨‹ä»“åº“åç§°ä¸º `origin`
- [ ] 4ä¸ªTASK.mdå·²åˆå§‹åŒ–å¹¶åŒ…å«å·¥ä½œæµç¨‹è§„èŒƒ
- [ ] 4ä¸ªhooksæƒé™å·²ä¿®å¤å¹¶éªŒè¯
- [ ] **4ä¸ªPre-commité…ç½®å·²è¯´æ˜** âš ï¸ **æ–°å¢**
- [ ] **4ä¸ªå…±äº«ä¾èµ–å·²é“¾æ¥** âš ï¸ **æ–°å¢**
- [ ] **4ä¸ªå†²çªæ£€æµ‹è„šæœ¬å·²è¿è¡Œå¹¶è®°å½•ç»“æœ** âš ï¸ **æ–°å¢**
- [ ] ç›‘æ§è„šæœ¬å·²æµ‹è¯•è¿è¡ŒæˆåŠŸ
- [ ] å®æ–½æ–¹æ¡ˆæ–‡æ¡£å·²è·å¾—é¡¹ç›®ç»„æ‰¹å‡†

**Round 2å¯åŠ¨å‰** (CLI-3, CLI-4):
- [ ] Round 1æ‰€æœ‰CLIå·²å®Œæˆâ‰¥80%ä»»åŠ¡
- [ ] CLI-2ï¼ˆAPIå¥‘çº¦ï¼‰å·²100%å®Œæˆ
- [ ] **æ–‡ä»¶æ‰€æœ‰æƒæ˜ å°„å·²æ›´æ–°ï¼ˆåŒ…å«CLI-3, CLI-4ï¼‰** âš ï¸ **æ–°å¢**
- [ ] 2ä¸ªworktreeå·²åˆ›å»ºå¹¶éªŒè¯
- [ ] 2ä¸ªworktreeçš„è¿œç¨‹ä»“åº“åç§°ä¸º `origin`
- [ ] 2ä¸ªTASK.mdå·²åˆå§‹åŒ–å¹¶åŒ…å«å·¥ä½œæµç¨‹è§„èŒƒ
- [ ] 2ä¸ªhooksæƒé™å·²ä¿®å¤å¹¶éªŒè¯
- [ ] **2ä¸ªPre-commité…ç½®å·²è¯´æ˜** âš ï¸ **æ–°å¢**
- [ ] **2ä¸ªå…±äº«ä¾èµ–å·²é“¾æ¥** âš ï¸ **æ–°å¢**
- [ ] ä¾èµ–éªŒè¯é€šè¿‡ï¼ˆCLI-3å¯è°ƒç”¨CLI-2çš„APIï¼‰

### 4.3 CLIå®ŒæˆéªŒæ”¶æ ‡å‡†

**å•ä¸ªCLIå®Œæˆæ ‡å‡†**:
- [ ] æ‰€æœ‰ä»»åŠ¡å·²å®Œæˆï¼ˆ100%ï¼‰
- [ ] æ‰€æœ‰éªŒæ”¶æ ‡å‡†å·²é€šè¿‡ï¼ˆ100%ï¼‰
- [ ] ä»£ç å·²æ¨é€åˆ°è¿œç¨‹åˆ†æ”¯
- [ ] æµ‹è¯•è¦†ç›–ç‡è¾¾æ ‡ï¼ˆåç«¯>80%, å‰ç«¯>70%ï¼‰
- [ ] ä»£ç è´¨é‡æ£€æŸ¥é€šè¿‡ï¼ˆPylint>8.0, æ— é«˜å±æ¼æ´ï¼‰
- [ ] TASK-REPORT.mdå·²æ›´æ–°ï¼ˆå®Œæ•´è¿›åº¦ï¼‰
- [ ] å®ŒæˆæŠ¥å‘Šå·²ç”Ÿæˆï¼ˆTASK-*-REPORT.mdï¼‰
- [ ] æ–‡æ¡£å®Œæ•´ï¼ˆAPIæ–‡æ¡£ã€ç»„ä»¶è¯´æ˜ç­‰ï¼‰

**Roundå®Œæˆæ ‡å‡†**:
- [ ] Roundå†…æ‰€æœ‰CLIå·²å®Œæˆï¼ˆ100%ï¼‰
- [ ] é›†æˆæµ‹è¯•å·²é€šè¿‡
- [ ] ä¸»CLIå·²éªŒæ”¶æ‰€æœ‰äº¤ä»˜ç‰©
- [ ] æ‰€æœ‰åˆ†æ”¯å·²åˆå¹¶åˆ°mainï¼ˆæˆ–å‡†å¤‡åˆå¹¶ï¼‰

## âœ… Phase 5: ç»“é¡¹ä¸èµ„æºå›æ”¶ (Closure & Cleanup) â­ **å¼ºåˆ¶æ‰§è¡Œ**

**å”¯ä¸€è´Ÿè´£äºº**: ä¸» CLI (Manager)
**æ‰§è¡Œæ—¶æœº**: ä»£ç åˆå¹¶æˆåŠŸä¸”å†²çªè§£å†³åç«‹å³æ‰§è¡Œã€‚

### 5.1 åŸå­åŒ–æ¸…ç†ä¸å½’æ¡£æµç¨‹

ä¸» CLI å¿…é¡»æŒ‰ä»¥ä¸‹é¡ºåºæ‰§è¡Œæ¸…ç†ï¼Œä¸¥ç¦é—æ¼ä»»ä½•ä¸€æ­¥ï¼š

1.  **æ–‡æ¡£æ”¶å‰² (Document Harvesting)**: âš ï¸ **æœ€å…³é”®ä¸€æ­¥**
    *   åœ¨åˆ é™¤ Worktree å‰ï¼Œå¿…é¡»å°† Worker çš„è¿‡ç¨‹æ–‡æ¡£å½’æ¡£åˆ°ä¸»ä»“åº“ï¼Œå¦åˆ™å†å²å°†æ°¸ä¹…ä¸¢å¤±ã€‚
    ```bash
    # åˆ›å»ºå½’æ¡£ç›®å½•
    mkdir -p docs/archive/phase_x_reports/
    
    # æ”¶å‰²æŠ¥å‘Š
    cp /opt/claude/mystocks_cli_x/TASK-REPORT.md docs/archive/phase_x_reports/CLI-X_PROGRESS.md
    cp /opt/claude/mystocks_cli_x/TASK-*-REPORT.md docs/archive/phase_x_reports/ 2>/dev/null
    
    # æäº¤å½’æ¡£
    git add docs/archive/
    git commit -m "docs: archive CLI-X reports before worktree deletion"
    ```

2.  **ç‰©ç†åˆ é™¤ Worktree**:
    ```bash
    # å¼ºåˆ¶æ¸…ç†æœªè·Ÿè¸ªçš„ç¼“å­˜æ–‡ä»¶
    git worktree remove -f /opt/claude/mystocks_cli_x
    ```
    *   **ç›®çš„**: é‡Šæ”¾ç£ç›˜ç©ºé—´ï¼Œé˜²æ­¢ `.pytest_cache` ç­‰åƒåœ¾æ–‡ä»¶å †ç§¯ã€‚

3.  **æ¸…ç†é€»è¾‘å¼•ç”¨ (åˆ†æ”¯)**:
    ```bash
    # åˆ é™¤è¿œç¨‹åˆ†æ”¯ï¼Œå®£å‘Šä»»åŠ¡ç»ˆç»“
    git push origin --delete branch-name
    # åˆ é™¤æœ¬åœ°åˆ†æ”¯ï¼Œä¿æŒå¼•ç”¨æ ‘æ•´æ´
    git branch -d branch-name
    ```

4.  **å…ƒæ•°æ®å…œåº• Prune**:
    ```bash
    # æ¸…ç† .git/worktrees ä¸‹çš„æ— æ•ˆè®°å½•
    git worktree prune
    ```
    *   **ç›®çš„**: ä¿®å¤ä»»ä½•å› æ‰‹åŠ¨ `rm -rf` å¯¼è‡´çš„å…ƒæ•°æ®æŸåã€‚

### 5.2 æˆåŠŸç»“é¡¹å®šä¹‰
ä¸€ä¸ªä»»åŠ¡è¢«è®¤ä¸ºå®Œå…¨â€œç»“é¡¹â€çš„æ ‡å¿—æ˜¯ï¼š
- âœ… åˆ†æ”¯å·²åˆå¹¶è‡³ `main`ã€‚
- âœ… è¿œç¨‹åˆ†æ”¯å·²æ¶ˆå¤±ã€‚
- âœ… `git worktree list` ä¸­ä¸å†æ˜¾ç¤ºè¯¥è·¯å¾„ã€‚
- âœ… æ ¹ç›®å½•æ— æ±¡æŸ“ï¼ˆZero-Root-Config å®¡è®¡é€šè¿‡ï¼‰ã€‚

## ğŸ“š Phase 6: èšåˆæŠ¥å‘Šä¸å½’æ¡£æ€»ç»“ (Final Review)

å½“æ‰€æœ‰ Worker CLI å®Œæˆä½¿å‘½å¹¶æ¸…ç†åï¼Œä¸» CLI éœ€ç”Ÿæˆæœ€ç»ˆçš„â€œé¡¹ç›®ç»“é¡¹ä¹¦â€ã€‚

### 6.1 èšåˆæŠ¥å‘Šç»“æ„
ä¸» CLI åº”åˆ›å»ºä¸€ä¸ª `PHASE_X_COMPLETION_SUMMARY.md`ï¼Œå†…å®¹æ¥æºäºä¹‹å‰æ”¶å‰²çš„ `docs/archive/` æ–‡ä»¶ï¼š

1.  **ä»»åŠ¡æ‰§è¡Œæ¦‚è§ˆ**:
    *   åˆ†é…äº†å¤šå°‘ä»»åŠ¡ï¼Ÿå®Œæˆäº†å¤šå°‘ï¼Ÿ
    *   å®é™…å·¥æ—¶ vs é¢„è®¡å·¥æ—¶ï¼ˆæ•°æ®æ¥è‡ªå„ CLI çš„ `TASK-REPORT`ï¼‰ã€‚
2.  **é…ç½®æ¸…å•å¿«ç…§**:
    *   è®°å½•æœ¬æ¬¡å¼€å‘ä¸­å„ Worktree ä½¿ç”¨çš„ `config/` è·¯å¾„å’Œä¾èµ–ç‰ˆæœ¬ï¼Œä»¥ä¾¿æœªæ¥å›æº¯å¤ç°ã€‚
3.  **é—®é¢˜ä¸åé¦ˆå¤ç›˜**:
    *   æ±‡æ€»æ‰€æœ‰ Worker åœ¨ `ğŸš§ é˜»å¡é—®é¢˜` ç« èŠ‚æäº¤çš„åé¦ˆã€‚
    *   è®°å½•ä¸» CLI çš„å“åº”æªæ–½åŠæ•ˆæœã€‚
4.  **é—ç•™å€ºåŠ¡**:
    *   ä»»ä½•è¢«æ ‡è®°ä¸ºâ€œæœ¬æ¬¡ä¸ä¿®â€çš„é—®é¢˜ï¼Œè½¬å…¥å…¨å±€ `TECHNICAL_DEBT.md`ã€‚

---

## ğŸ’¡ æœ€ä½³å®è·µæ€»ç»“

### ä¼šè¯æ ‡è®°è§„èŒƒ â­ **æ–°å¢ï¼ˆå€Ÿé‰´iflowï¼‰**

åœ¨Claude Codeä¼šè¯ä¸­ï¼Œä½¿ç”¨ä¸€è‡´çš„æ ‡è¯†ç¬¦æ¥ç»´æŠ¤ä¸Šä¸‹æ–‡ã€‚

**ä½¿ç”¨æ–¹æ³•**:
```bash
# å¯åŠ¨ Claude æ—¶ä½¿ç”¨æ¸…æ™°çš„ä¼šè¯æ ‡è¯†ç¬¦
claude

# å§‹ç»ˆåœ¨æç¤ºä¸­ä½¿ç”¨æ¸…æ™°çš„ä¸Šä¸‹æ–‡æ ‡ç­¾
Human: [CLI-1-Phase3] è®©æˆ‘ä»¬ç»§ç»­å¤„ç†Kçº¿å›¾å®ç°...
Human: [CLI-2-API] è®©æˆ‘ä»¬ç»§ç»­å¤„ç†APIå¥‘çº¦å®šä¹‰...
```

**å¥½å¤„**:
- âœ… é¿å…ä¸åŒCLIçš„ä¸Šä¸‹æ–‡æ··æ·†
- âœ… æ¯ä¸ªä¼šè¯æœ‰æ˜ç¡®çš„èº«ä»½æ ‡è¯†
- âœ… ä¾¿äºä¸»CLIåŒºåˆ†å’Œè·Ÿè¸ª

### ç»ˆç«¯æç¤ºç¬¦é…ç½® â­ **æ–°å¢ï¼ˆå€Ÿé‰´iflowï¼‰**

åœ¨shellæç¤ºç¬¦ä¸­æ·»åŠ åˆ†æ”¯ä¿¡æ¯ï¼Œé¿å…å¿˜è®°å½“å‰worktreeã€‚

**Bashé…ç½®**:
```bash
# æ·»åŠ åˆ° ~/.bashrc
parse_git_branch() {
  git branch 2> /dev/null | sed -e '/^[^*]/d' -e 's/* \(.*\)/(\1)/'
}
export PS1="\[\e[36m\]\w\[\e[91m\]\$(parse_git_branch)\[\e[00m\] $ "
```

**Zshé…ç½®**:
```bash
# åœ¨ä¸»é¢˜æˆ– .zshrc ä¸­åŒ…å« git åˆ†æ”¯ä¿¡æ¯
```

**iTermé¢œè‰²åŒºåˆ†**:
```bash
# åœ¨iTermä¸­ä¸ºä¸åŒworktreeä½¿ç”¨ä¸åŒçš„ç»ˆç«¯é¢œè‰²
echo -e "\033]0;Claude: CLI-1 Phase 3\007"
```

### è¿›åº¦è·Ÿè¸ªçš„åè°ƒæ–‡ä»¶ â­ **æ–°å¢ï¼ˆå€Ÿé‰´iflowï¼‰**

åˆ›å»ºé¡¹ç›®åè°ƒç›®å½•æ¥è·Ÿè¸ªæ‰€æœ‰worktreeçš„è¿›åº¦ã€‚

**åˆ›å»ºåè°ƒç›®å½•**:
```bash
# åˆ›å»ºé¡¹ç›®åè°ƒç›®å½•
mkdir -p ~/projects/feature-coordination
cd ~/projects/feature-coordination

# åˆ›å»ºè¿›åº¦è·Ÿè¸ªæ–‡ä»¶
echo "# é¡¹ç›®è¿›åº¦è·Ÿè¸ª" > README.md
echo "- [ ] CLI-1: Kçº¿å›¾ä¼˜åŒ– (../mystocks_phase3_frontend)" >> README.md
echo "- [ ] CLI-2: APIå¥‘çº¦ (../mystocks_phase6_api_contract)" >> README.md
echo "- [ ] CLI-5: GPUç›‘æ§ (../mystocks_phase6_monitoring)" >> README.md

# éšç€å·¥ä½œè¿›å±•æ›´æ–°çŠ¶æ€
sed -i 's/- \[ \] CLI-1/- [x] CLI-1/' README.md
git commit -am "CLI-1å®Œæˆ"
```

### Do'sï¼ˆåº”è¯¥åšçš„ï¼‰

1. âœ… **å®Œæ•´å‡†å¤‡**: åœ¨å¯åŠ¨ä»»ä½•Worker CLIå‰ï¼Œå®Œæˆæ‰€æœ‰å‡†å¤‡é˜¶æ®µå·¥ä½œï¼ˆPhase 0-4ï¼‰
2. âœ… **æ–‡æ¡£é©±åŠ¨**: æ‰€æœ‰æµç¨‹ã€è§„èŒƒã€æ ‡å‡†éƒ½æœ‰æ–‡æ¡£è®°å½•ï¼Œå¹¶åœ¨TASK.mdä¸­é“¾æ¥
3. âœ… **æ ‡å‡†åŒ–**: æ‰€æœ‰CLIä½¿ç”¨ç›¸åŒçš„æ–‡æ¡£æ ¼å¼ã€å·¥ä½œæµç¨‹ã€æäº¤è§„èŒƒ
4. âœ… **éä¾µå…¥å¼**: ç›‘æ§é€šè¿‡TASK-REPORT.mdæ›´æ–°å’ŒGitå†å²ï¼Œä¸ä¸»åŠ¨å¹²é¢„Worker CLI
5. âœ… **åŠæ—¶å“åº”**: é‡åˆ°é¢„è­¦ï¼ˆé»„/çº¢ï¼‰ç«‹å³è”ç³»Worker CLIäº†è§£æƒ…å†µ
6. âœ… **éªŒè¯ä¼˜å…ˆ**: Worktreeåˆ›å»ºåç«‹å³éªŒè¯hooksæƒé™ã€TASK.mdå®Œæ•´æ€§
7. âœ… **å·¥å…·è‡ªåŠ¨åŒ–**: ä½¿ç”¨ç›‘æ§è„šæœ¬è‡ªåŠ¨åŒ–è¿›åº¦æ£€æŸ¥ï¼Œå‡å°‘äººå·¥å¹²é¢„
8. âœ… **ä¼šè¯æ ‡è®°**: ä½¿ç”¨[CLI-X-PhaseY]æ ‡è¯†ä¸åŒä¼šè¯
9. âœ… **ç»ˆç«¯é…ç½®**: é…ç½®shellæç¤ºç¬¦æ˜¾ç¤ºåˆ†æ”¯ä¿¡æ¯
10. âœ… **è¿›åº¦åè°ƒ**: åˆ›å»ºåè°ƒæ–‡ä»¶è·Ÿè¸ªæ‰€æœ‰worktreeè¿›åº¦

### Don'tsï¼ˆä¸åº”è¯¥åšçš„ï¼‰

1. âŒ **ä¸å®Œæ•´å¯åŠ¨**: åªåˆ›å»ºworktreeå’Œå¤åˆ¶ä»»åŠ¡æ–‡æ¡£ï¼Œå¿½ç•¥å·¥ä½œæµç¨‹å’Œhooks
2. âŒ **ä¾µå…¥å¼ç®¡ç†**: ç›´æ¥ä¿®æ”¹Worker CLIçš„ä»£ç æˆ–æ–‡ä»¶ï¼Œé™¤éè¢«è¯·æ±‚
3. âŒ **å¿½è§†æƒé™**: å¿˜è®°ä¿®å¤hookè„šæœ¬æƒé™ï¼Œå¯¼è‡´Worker CLIæ— æ³•æ­£å¸¸å·¥ä½œ
4. âŒ **æ–‡æ¡£ç¼ºå¤±**: TASK.mdä¸­æ²¡æœ‰å·¥ä½œæµç¨‹ã€Gitæäº¤è§„èŒƒã€è¿›åº¦æ›´æ–°æ ¼å¼
5. âŒ **ç¼ºå°‘ç›‘æ§**: æ²¡æœ‰è®¾ç½®è‡ªåŠ¨åŒ–ç›‘æ§ï¼Œæ— æ³•åŠæ—¶å‘ç°åœæ»æˆ–é˜»å¡
6. âŒ **ä¸éªŒæ”¶äº¤ä»˜**: Worker CLIå£°ç§°å®Œæˆä½†ä¸»CLIæœªéªŒæ”¶å°±åˆå¹¶åˆ°main
7. âŒ **é‡å¤é€ è½®**: æ¯æ¬¡é¡¹ç›®éƒ½é‡æ–°è®¾è®¡æµç¨‹ï¼Œè€Œä¸æ˜¯å¤ç”¨å·²éªŒè¯çš„æ¨¡æ¿
8. âŒ **READMEä»»åŠ¡**: ä½¿ç”¨README.mdè®°å½•CLIç‰¹å®šä»»åŠ¡ï¼Œå¯¼è‡´åˆå¹¶å†²çª
9. âŒ **å¿˜è®°Pre-flight**: å¼€å§‹æ–°å·¥ä½œå‰ä¸æ£€æŸ¥worktreeå’Œè¿œç¨‹æ›´æ–°
10. âŒ **å¿½ç•¥æ‰€æœ‰æƒ**: ä¸åˆ›å»ºæ–‡ä»¶æ‰€æœ‰æƒæ˜ å°„ï¼Œå¯¼è‡´åä½œå†²çª

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

### æµç¨‹æ–‡æ¡£
- [Worker CLIå·¥ä½œæµç¨‹æŒ‡å—](./WORKER_CLI_GUIDE.md) - Worker CLIå¿…è¯»
- [Git Worktreeåä½œå†²çªé¢„é˜²](./CONFLICT_PREVENTION.md) - å†²çªå¤„ç†
- [ä»»åŠ¡æ–‡æ¡£æ¨¡æ¿](./templates/TASK_TEMPLATE.md) - TASK.mdå’ŒTASK-REPORT.mdæ¨¡æ¿

### Gitå‘½ä»¤æ–‡æ¡£
- [Git Worktreeæ‰‹å†Œ](./GIT_WORKTREE_MAIN_CLI_MANUAL.md) - Git worktreeå‘½ä»¤å‚è€ƒ
- [Gitè¿œç¨‹åç§°æ ‡å‡†](./GIT_REMOTE_NAME_STANDARD.md) - è¿œç¨‹é…ç½®è§„èŒƒ

### ä»»åŠ¡åˆ†é…æ–‡æ¡£
- [CLI-1: Phase 3å‰ç«¯Kçº¿å›¾ä¼˜åŒ–](../../docs/guides/multi-cli-tasks/CLI-1_PHASE3_TASKS.md)
- [CLI-2: APIå¥‘çº¦æ ‡å‡†åŒ–](../../docs/guides/multi-cli-tasks/CLI-2_API_CONTRACT_TASKS.md)
- [CLI-3: Phase 4å®Œæ•´å®ç°](../../docs/guides/multi-cli-tasks/CLI-3_PHASE4_COMPLETE_TASKS.md)
- [CLI-4: Phase 5 AIæ™ºèƒ½ç­›é€‰](../../docs/guides/multi-cli-tasks/CLI-4_PHASE5_AI_SCREENING_TASKS.md)
- [CLI-5: Phase 6 GPUç›‘æ§](../../docs/guides/multi-cli-tasks/CLI-5_PHASE6_GPU_MONITORING_TASKS.md)
- [CLI-6: è´¨é‡ä¿è¯](../../docs/guides/multi-cli-tasks/CLI-6_QUALITY_ASSURANCE_TASKS.md)

### å®æ–½æ–¹æ¡ˆ
- [Frontend Six-Phaseå®æ–½æ–¹æ¡ˆ](../../openspec/changes/frontend-optimization-six-phase/implementation-plan.md)

---

## ğŸ”„ æ–‡æ¡£ç»´æŠ¤

**ç‰ˆæœ¬å†å²**:
- v1.0 (2025-12-29): åˆå§‹ç‰ˆæœ¬ï¼ŒåŸºäºPhase 3-6å¤šCLIå¹¶è¡Œå¼€å‘ç»éªŒ
- v2.0 (2025-12-30): é‡å¤§æ›´æ–°
  - æ·»åŠ Step -1: Pre-flightæ£€æŸ¥æ¸…å•ï¼ˆå¼ºåˆ¶æ‰§è¡Œï¼‰
  - æ›´æ–°ä»»åŠ¡æ–‡æ¡£æ–¹å¼ä¸ºTASK.md + TASK-REPORT.md
  - æ·»åŠ æ–‡ä»¶æ‰€æœ‰æƒç¡®è®¤æ­¥éª¤
  - æ·»åŠ ä¼šè¯æ ‡è®°è§„èŒƒ
  - æ·»åŠ ç»ˆç«¯æç¤ºç¬¦é…ç½®
  - æ·»åŠ è¿›åº¦è·Ÿè¸ªåè°ƒæ–‡ä»¶
  - å¢å¼ºæ–‡æ¡£é“¾æ¥çŸ©é˜µ
  - å‡å°‘Gitå‘½ä»¤è¯¦è§£ï¼Œé“¾æ¥åˆ°å‘½ä»¤æ‰‹å†Œ

**ç»´æŠ¤è€…**: Main CLI
**æ›´æ–°é¢‘ç‡**: æ¯ä¸ªé¡¹ç›®ç»“æŸåæ€»ç»“ç»éªŒæ•™è®­ï¼Œæ›´æ–°æœ¬æ–‡æ¡£

---

**æœ¬æ–‡æ¡£æ˜¯ä¸»CLIçš„å·¥ä½œåœ£ç»** - ä¸¥æ ¼éµå¾ªå¯é¿å…é‡å¤è¸©å‘ï¼Œæé«˜å¹¶è¡Œå¼€å‘æ•ˆç‡ï¼Œç¡®ä¿é¡¹ç›®æˆåŠŸäº¤ä»˜ï¼
