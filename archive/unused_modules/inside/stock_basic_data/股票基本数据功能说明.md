# 股票基本数据功能说明

## 功能概述

股票基本数据功能是本项目的基础数据功能，用于获取和展示股票的基本行情信息。该功能通过每日自动抓取，获取股票的实时行情数据，并将结果存储在对应的数据库表中。

## 功能实现流程

### 1. 数据获取流程
1. 每日开盘后通过`basic_data_daily_job.py`获取股票实时行情数据
2. 调用`stock_data`单例获取股票列表数据
3. 通过`stockfetch.fetch_stocks`从东方财富网获取数据
4. 将数据存储到`cn_stock_spot`数据表中

### 2. Web展示流程
1. 用户访问Web界面的"股票基本数据"菜单项
2. 系统查询`cn_stock_spot`表获取数据
3. 通过dataTableHandler展示股票基本行情数据

## 关联项目文件

### 核心文件
- `instock/job/basic_data_daily_job.py` - 基本数据获取任务
- `instock/core/singleton_stock.py` - 股票数据单例
- `instock/core/stockfetch.py` - 股票数据获取核心逻辑
- `instock/core/crawling/stock_selection.py` - 股票数据爬取实现
- `instock/core/tablestructure.py` - 数据表结构定义
- `instock/core/singleton_stock_web_module_data.py` - Web模块数据定义

### 子菜单功能文件
- 股票资金流向：`instock/core/crawling/stock_fund_em.py`
- 股票分红配送：`instock/core/crawling/stock_fhps_em.py`
- 股票龙虎榜：`instock/core/crawling/stock_lhb_em.py` 和 `instock/core/crawling/stock_lhb_sina.py`
- 股票大宗交易：`instock/core/crawling/stock_dzjy_em.py`
- 早盘抢筹数据：`instock/core/crawling/stock_chip_race.py`
- 尾盘抢筹数据：`instock/core/crawling/stock_chip_race.py`
- 涨停原因揭密：`instock/core/crawling/stock_limitup_reason.py`
- 每日ETF数据：`instock/core/crawling/fund_etf_em.py`

## 数据表结构

### cn_stock_spot表（每日股票数据）
包含股票的基本行情信息：
- 基础字段：date(日期)、code(代码)、name(名称)
- 价格信息：new_price(最新价)、change_rate(涨跌幅)、ups_downs(涨跌额)、open_price(今开)、high_price(最高)、low_price(最低)、pre_close_price(昨收)
- 成交信息：volume(成交量)、deal_amount(成交额)、amplitude(振幅)、turnoverrate(换手率)、volume_ratio(量比)
- 财务指标：dtsyl(市盈率动)、pe9(市盈率TTM)、pe(市盈率静)、pbnewmrq(市净率)、basic_eps(每股收益)、bvps(每股净资产)等
- 市值信息：total_market_cap(总市值)、free_cap(流通市值)

### 其他相关表
- cn_stock_fund_flow（股票资金流向）
- cn_stock_bonus（股票分红配送）
- cn_stock_top（股票龙虎榜）
- cn_stock_blocktrade（股票大宗交易）
- cn_stock_chip_race_open（早盘抢筹数据）
- cn_stock_chip_race_end（尾盘抢筹数据）
- cn_stock_limitup_reason（涨停原因揭密）
- cn_stock_fund_flow_industry（行业资金流向）
- cn_stock_fund_flow_concept（概念资金流向）
- cn_etf_spot（每日ETF数据）

## 子菜单功能说明

### 1. 每日股票数据
展示股票的基本行情信息，包括价格、成交量、财务指标等。

### 2. 股票资金流向
展示股票的主力资金流入流出情况，包括今日、3日、5日、10日的数据。

### 3. 股票分红配送
展示股票的分红配送信息。

### 4. 股票龙虎榜
展示股票的龙虎榜数据。

### 5. 股票大宗交易
展示股票的大宗交易信息。

### 6. 早盘抢筹数据
展示早盘竞价抢筹的股票数据。

### 7. 尾盘抢筹数据
展示尾盘竞价抢筹的股票数据。

### 8. 涨停原因揭密
展示股票涨停的原因分析。

### 9. 行业资金流向
展示各行业的资金流向情况。

### 10. 概念资金流向
展示各概念板块的资金流向情况。

### 11. 每日ETF数据
展示ETF基金的基本行情信息。