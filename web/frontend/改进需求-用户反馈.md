# MyStocks Web 前端改进需求 - 用户反馈

> **创建日期**: 2025-10-13
> **状态**: 待实施

---

## 📋 核心改进需求

### 1. 仪表盘页面重构 (Dashboard.vue) - 高优先级

#### 1.1 市场分布区域改造 → 市场热度中心
**位置**: 左侧主要区域（原"市场分布"图表位置）

**改造方案**: 使用 Tab 标签页展示多维度市场信息

```
┌─────────────────────────────────────────────────┐
│ [市场热度] [领涨板块] [涨跌分布] [资金流向]      │
├─────────────────────────────────────────────────┤
│                                                 │
│   根据标签切换显示不同的市场信息：               │
│   - 市场热度：行业/概念热度统计                  │
│   - 领涨板块：板块涨幅排行                       │
│   - 涨跌分布：全网股票涨跌幅分布图               │
│   - 资金流向：主力资金净流入统计                 │
│                                                 │
└─────────────────────────────────────────────────┘
```

**具体功能**:

##### Tab 1: 市场热度
- 数据来源：全盘市场行情数据
- 展示内容：
  - 行业热度排行（前10）
  - 概念热度排行（前10）
- 可视化方式：热力图/词云图/柱状图
- 计算方式：
  - 涨幅权重
  - 成交量权重
  - 活跃度指标

##### Tab 2: 领涨板块
- 展示内容：
  - 板块名称
  - 涨幅
  - 成交额
  - 领涨股票
- 可视化方式：排行榜列表

##### Tab 3: 涨跌分布
- 展示内容：全网股票涨跌幅分布
- 可视化方式：
  - 直方图（区间分布）
  - 饼图（涨/平/跌比例）
- 统计维度：
  - 涨停/跌停数量
  - 涨幅区间分布
  - 跌幅区间分布

##### Tab 4: 资金流向
- 展示内容：主力资金流向统计
- 可视化方式：旭日图/桑基图

#### 1.2 行业分布区域改造 → 资金流向
**位置**: 右侧区域（原"行业分布"环形图位置）

**改造方案**:
```
┌─────────────────────────────────────┐
│ 资金流向 - 行业维度                  │
│ 行业分类: [证监会标准▼] [申万标准▼] │
├─────────────────────────────────────┤
│                                     │
│  ████████████ 电子       +123.5亿  │
│  ████████     计算机     +98.2亿   │
│  ██████       医药生物   +76.3亿   │
│  ████         有色金属   +45.1亿   │
│  ██           银行       +23.8亿   │
│  ▌            房地产     -12.3亿   │
│  ▌▌           煤炭       -34.5亿   │
│                                     │
└─────────────────────────────────────┘
```

**具体功能**:
- 柱状图：横向柱状图，由高到低排序
- 行业分类切换：
  - 证监会行业分类标准
  - 申万一级行业分类
  - 申万二级行业分类
- 数据展示：
  - 净流入金额
  - 流入/流出对比
  - 颜色标识：红色（净流入）、绿色（净流出）

#### 1.3 最近股票区域改造 → 板块表现
**位置**: 底部区域（原"最近股票"表格位置）

**改造方案**: 使用 Tab 标签页展示不同维度的股票/板块

```
┌─────────────────────────────────────────────────┐
│ 板块表现                                         │
│ [自选股] [策略选股] [行业选股] [概念选股]        │
├─────────────────────────────────────────────────┤
│ 代码   │名称    │涨跌幅│成交量│换手率│操作      │
│ ────────────────────────────────────────────── │
│ 000001 │平安银行│+2.5%│1.2亿 │3.5% │[查看][分析]│
│ ...                                            │
└─────────────────────────────────────────────────┘
```

**具体功能**:

##### Tab 1: 自选股
- 显示用户添加的自选股票
- 功能：添加/删除自选股

##### Tab 2: 策略选股
- 根据预设策略筛选的股票
- 策略类型：
  - 技术指标突破
  - 量价配合
  - 形态识别
  - 自定义策略

##### Tab 3: 行业选股
- 按行业分类显示龙头股票
- 行业筛选器

##### Tab 4: 概念选股
- 按概念/题材分类显示
- 概念筛选器

---

### 2. 市场行情页面开发 (Market.vue) - 高优先级

#### 2.1 核心功能：K线图/分时图
**技术选型**: klinechart (轻量级专业K线图库)

**页面布局**:
```
┌────────────────────────────────────────────────┐
│ 搜索: [股票代码/名称] [搜索]  [切换图表类型▼]   │
├────────────────────────────────────────────────┤
│ 平安银行 (000001)    最新: 12.35  +0.25 (+2.07%)│
├────────────────────────────────────────────────┤
│                                                │
│          K线图表区域 (klinechart)               │
│          支持：日线、周线、月线、分时            │
│          技术指标：MA、MACD、KDJ、RSI等         │
│                                                │
├────────────────────────────────────────────────┤
│ 成交量                                          │
└────────────────────────────────────────────────┘
```

**功能需求**:
- [x] 股票搜索和选择
- [x] K线图显示（日/周/月/分钟）
- [x] 分时图显示
- [x] 技术指标叠加
  - MA (5/10/20/60日均线)
  - MACD
  - KDJ
  - RSI
  - BOLL
  - 自定义指标
- [x] 成交量柱状图
- [x] 实时更新（WebSocket可选）
- [x] 图表交互：
  - 缩放
  - 平移
  - 十字光标
  - 数据提示

#### 2.2 扩展功能
- 分屏对比（多股票对比）
- 分时竞价图
- 盘口数据
- 分笔成交

---

### 3. 导航菜单重构 - 高优先级

#### 3.1 新的菜单结构

**当前菜单**:
```
📊 仪表盘
📈 市场行情
📋 股票管理
📊 数据分析
⚙️ 系统设置
```

**改进后的菜单**:
```
📊 仪表盘
📈 市场行情
📋 股票管理
📊 数据分析
   ├─ 📈 技术分析      (新增)
   ├─ ⚠️ 风险监控      (新增)
   ├─ 💼 交易管理      (新增)
   ├─ 🎯 策略管理      (新增)
   └─ 🔄 回测分析      (新增)
⚙️ 系统设置
```

#### 3.2 新增页面功能规划

##### 技术分析 (TechnicalAnalysis.vue)
- 多指标综合分析
- 自定义指标组合
- 指标信号提示

##### 风险监控 (RiskMonitor.vue)
- 持仓风险分析
- 市场风险指标
- 预警机制

##### 交易管理 (TradeManagement.vue)
- 交易记录
- 盈亏统计
- 交易日志

##### 策略管理 (StrategyManagement.vue)
- 策略创建
- 策略编辑
- 策略测试

##### 回测分析 (BacktestAnalysis.vue)
- 历史回测
- 绩效分析
- 参数优化

---

## 🎯 实施计划

### Phase 1: 核心功能重构 (优先级最高)
1. ✅ 仪表盘重构
   - 市场热度中心 (Tab页实现)
   - 资金流向图表
   - 板块表现 (Tab页实现)

2. ✅ 市场行情页面
   - klinechart 集成
   - K线图基础功能
   - 技术指标

3. ✅ 导航菜单重构
   - 添加子菜单
   - 创建新页面骨架

### Phase 2: 新功能页面开发
1. 技术分析页面
2. 风险监控页面
3. 交易管理页面
4. 策略管理页面
5. 回测分析页面

### Phase 3: 数据对接与优化
1. 后端API开发
2. 实时数据推送
3. 性能优化
4. 用户体验优化

---

## 📊 数据需求

### 仪表盘所需数据
- ✅ 全市场股票实时行情
- ✅ 行业分类数据（证监会/申万）
- ✅ 概念/题材分类数据
- ✅ 资金流向数据（北向资金、主力资金）
- ✅ 板块指数数据
- ✅ 涨跌停统计数据

### 市场行情所需数据
- ✅ 个股K线历史数据（日/周/月/分钟）
- ✅ 分时数据
- ✅ 成交明细
- ✅ 技术指标计算数据
- ✅ 实时Tick数据（可选）

### 行业分类标准
- 证监会行业分类（2012版）
- 申万一级行业分类
- 申万二级行业分类
- 申万三级行业分类

---

## 🔧 技术选型

### 前端技术
- **K线图库**: klinechart (https://github.com/liihuu/KLineChart)
  - 轻量级、高性能
  - 支持技术指标
  - 高度可定制

- **图表库**: ECharts 5
  - 柱状图（资金流向）
  - 热力图（市场热度）
  - 饼图（涨跌分布）

- **UI组件**: Element Plus
  - Tab标签页
  - 下拉选择器
  - 表格组件

### 后端API
需要新增的API接口:
1. `/api/data/market/heat` - 市场热度数据
2. `/api/data/market/leaders` - 领涨板块
3. `/api/data/market/distribution` - 涨跌分布
4. `/api/data/market/money-flow` - 资金流向
5. `/api/data/stocks/kline` - K线数据
6. `/api/data/stocks/realtime` - 实时数据

---

## 📝 备注

- klinechart需要安装: `npm install klinechart`
- 行业分类数据需要从数据库预加载
- 资金流向数据可能需要外部数据源
- 实时数据推送考虑使用WebSocket

---

**下一步**: 开始Phase 1的实施，从仪表盘重构开始。
