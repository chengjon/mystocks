/**
 * MyStocks Visual Optimization - Unified Component Styles
 * MyStocks 统一视觉优化 - 组件样式规范
 *
 * Purpose: 解决3大核心视觉问题
 *          1. 卡片比例失调 (Card proportion inconsistency)
 *          2. 按钮文字对齐 (Button text misalignment)
 *          3. 组件间距混乱 (Component spacing chaos)
 *
 * Version: 2.0
 * Created: 2026-01-08
 * Priority: P0 - Button Alignment > P1 - Card Proportion > P2 - Spacing
 *
 * Usage: 在 main.js 中导入此文件
 *        import '@/styles/visual-optimization.scss'
 *
 * ============================================
 * 核心原则 (Core Principles)
 * ============================================
 * 1. 8px Grid System - 所有间距必须是8的倍数
 * 2. 文字必须水平居中+垂直居中
 * 3. 卡片圆角、边框、阴影统一
 * 4. 响应式适配 1366x768 / 1920x1080
 */

/* ============================================
   1. 按钮文字对齐规范 (P0 - 最高优先级)
   Button Text Alignment Specification
   ============================================ */

/**
 * 问题: 按钮文字偏移，padding混乱
 * 解决: 强制所有按钮使用统一的padding和对齐方式
 */

// 全局按钮重置 (Global Button Reset)
button,
.el-button,
.btn,
[class*="btn-"],
[class*="button"] {
  // 文字对齐核心 (Core alignment - MUST HAVE)
  display: inline-flex !important;
  align-items: center !important;        // 垂直居中
  justify-content: center !important;    // 水平居中
  text-align: center !important;         // 文字居中
  line-height: 1 !important;             // 消除行高影响

  // 内边距统一 (Unified padding)
  padding: 0 var(--spacing-md) !important;  // 0 16px (标准按钮)

  // 尺寸统一
  height: 40px !important;
  min-width: 100px !important;

  // 字体统一
  font-size: var(--font-size-base) !important;    // 14px
  font-weight: var(--font-weight-normal) !important;  // 400

  // 圆角统一
  border-radius: var(--radius-md) !important;     // 4px

  // 过渡效果
  transition: all var(--transition-base) !important;  // 250ms

  // 禁用默认样式覆盖
  box-sizing: border-box !important;
}

// 小按钮 (Small Button)
.el-button--small,
.btn-small,
[class*="btn-sm"],
[class*="button-small"] {
  height: 32px !important;
  padding: 0 var(--spacing-sm) !important;  // 0 8px
  min-width: 80px !important;
  font-size: var(--font-size-sm) !important;  // 13px
}

// 大按钮 (Large Button)
.el-button--large,
.btn-large,
[class*="btn-lg"],
[class*="button-large"] {
  height: 48px !important;
  padding: 0 var(--spacing-xl) !important;  // 0 32px
  min-width: 140px !important;
  font-size: var(--font-size-md) !important;  // 16px
}

// 图标按钮 (Icon Button)
.el-button.is-circle,
.btn-icon,
[class*="btn-icon"] {
  width: 36px !important;
  height: 36px !important;
  padding: 0 !important;
  min-width: auto !important;
  border-radius: var(--radius-round) !important;  // 50%

  svg {
    width: 18px !important;
    height: 18px !important;
  }
}

// 按钮组内按钮间距 (Button Group Spacing)
.el-button-group {
  display: inline-flex !important;
  gap: var(--spacing-xs) !important;  // 4px

  .el-button {
    margin: 0 !important;
  }
}

// 图标+文字组合 (Icon + Text)
.el-button .el-icon,
.btn .btn-icon {
  margin-right: var(--spacing-sm) !important;  // 8px

  & + span {
    margin-left: var(--spacing-sm) !important;  // 8px
  }
}

/* ============================================
   2. 卡片比例规范 (P1 - 次优先级)
   Card Proportion Specification
   ============================================ */

/**
 * 问题: 卡片padding、圆角、边框不统一
 * 解决: 定义4种标准卡片类型，强制统一样式
 */

// Element Plus卡片全局覆盖 (Element Plus Card Override)
.el-card {
  // 基础样式统一
  background-color: var(--bg-card) !important;
  border: 1px solid var(--border-base) !important;
  border-radius: var(--radius-lg) !important;  // 8px统一
  box-shadow: var(--shadow-1) !important;

  // 卡片头部统一
  .el-card__header {
    background-color: var(--bg-secondary) !important;
    border-bottom: 1px solid var(--border-base) !important;
    padding: var(--spacing-md) !important;  // 16px统一上下左右

    color: var(--text-primary) !important;
    font-weight: var(--font-weight-semibold) !important;
    font-size: var(--font-size-lg) !important;  // 18px
  }

  // 卡片内容区统一
  .el-card__body {
    padding: var(--spacing-md) !important;  // 16px统一
    color: var(--text-secondary) !important;
  }

  // 悬停效果
  &:hover {
    border-color: var(--border-light) !important;
    box-shadow: var(--shadow-2) !important;
  }
}

// 数据展示卡片 (Data Display Card)
.card-data,
.stat-card,
[class*="stat-card"],
[class*="data-card"] {
  // 尺寸比例
  width: 100%;
  min-height: 120px;  // 宽高比约 4:1 到 5:1

  // 内边距
  padding: var(--spacing-md) !important;  // 16px

  // 圆角
  border-radius: var(--radius-lg) !important;  // 8px

  // 边框
  border: 1px solid var(--border-base) !important;

  // 阴影
  box-shadow: var(--shadow-1) !important;

  // 背景
  background: var(--bg-card) !important;

  // 过渡
  transition: all var(--transition-base) !important;

  // 悬停
  &:hover {
    border-color: var(--border-light) !important;
    box-shadow: var(--shadow-2) !important;
  }
}

// 内容容器卡片 (Content Container Card)
.card-content,
[class*="content-card"],
[class*="chart-card"],
[class*="table-card"] {
  // 尺寸
  width: 100%;
  min-height: 300px;

  // 内边距 (宽松)
  padding: var(--spacing-lg) !important;  // 24px

  // 圆角
  border-radius: var(--radius-lg) !important;  // 8px

  // 边框
  border: 1px solid var(--border-base) !important;

  // 阴影
  box-shadow: var(--shadow-1) !important;

  // 背景
  background: var(--bg-card) !important;
}

// 操作卡片 (Action Card)
.card-action,
[class*="action-card"],
[class*="quick-card"] {
  // 尺寸
  width: 100%;
  min-height: 80px;
  aspect-ratio: 6 / 1;

  // 内边距 (紧凑)
  padding: var(--spacing-sm) var(--spacing-md) !important;  // 8px 16px

  // 圆角
  border-radius: var(--radius-md) !important;  // 4px

  // 边框
  border: 1px solid var(--border-base) !important;

  // 阴影
  box-shadow: var(--shadow-1) !important;

  // 背景
  background: var(--bg-card) !important;

  // 交互
  cursor: pointer !important;

  &:hover {
    border-color: var(--color-primary) !important;
    box-shadow: var(--shadow-glow) !important;
  }
}

// 响应式适配 (1366x768)
@media (max-width: 1366px) {
  .card-data,
  .stat-card {
    min-height: 100px !important;
    padding: var(--spacing-sm) !important;  // 12px
  }

  .card-content {
    min-height: 250px !important;
    padding: var(--spacing-md) !important;  // 16px
  }
}

/* ============================================
   3. 组件间距规范 (P2 - 标准优先级)
   Component Spacing Specification
   ============================================ */

/**
 * 问题: 间距混乱，不遵循8px网格系统
 * 解决: 定义间距层级，强制使用8的倍数
 */

// 页面容器间距 (Page Container Spacing)
.page-container,
.dashboard-container,
.market-container,
.analysis-container,
[class*="-container"] {
  // 标准内边距
  padding: var(--spacing-lg) !important;  // 24px

  // 1366x768适配
  @media (max-width: 1366px) {
    padding: var(--spacing-md) !important;  // 16px
  }
}

// 卡片网格间距 (Card Grid Spacing)
.stats-grid,
.cards-grid,
.card-grid,
[class*="grid"] {
  display: grid !important;
  gap: var(--spacing-md) !important;  // 16px (标准卡片间距)

  // 或使用flex布局
  &.flex-grid {
    display: flex !important;
    flex-wrap: wrap !important;

    > * {
      margin-right: var(--spacing-md) !important;  // 16px
      margin-bottom: var(--spacing-md) !important;  // 16px
    }
  }
}

// 页面头部间距 (Page Header Spacing)
.page-header,
.section-header,
[class*="-header"] {
  margin-bottom: var(--spacing-xl) !important;  // 32px

  &.compact {
    margin-bottom: var(--spacing-lg) !important;  // 24px
  }
}

// 模块间距 (Module Spacing)
.module-section,
.content-section,
[class*="-section"] {
  & + & {
    margin-top: var(--spacing-xxl) !important;  // 48px (模块间间距)
  }
}

// 表单间距 (Form Spacing)
.form-group,
.el-form {
  .el-form-item {
    margin-bottom: var(--spacing-md) !important;  // 16px (表单项之间)
  }

  .form-label,
  .el-form-item__label {
    margin-bottom: var(--spacing-sm) !important;  // 8px (标签与输入框)
  }
}

// 表格间距 (Table Spacing)
.el-table {
  margin-bottom: var(--spacing-lg) !important;  // 24px (表格与分页器)

  th,
  td {
    padding: var(--spacing-sm) var(--spacing-md) !important;  // 8px 16px
  }
}

// 分页器间距 (Pagination Spacing)
.el-pagination {
  margin-top: var(--spacing-md) !important;  // 16px
}

// 按钮组间距 (Button Group Spacing)
.card-actions,
.button-group,
[class*="-actions"] {
  display: flex !important;
  gap: var(--spacing-sm) !important;  // 8px (按钮之间)
  margin-top: var(--spacing-md) !important;  // 16px (与上方内容)
}

// Tab内容间距 (Tab Content Spacing)
.tab-content,
.el-tab-pane {
  padding: var(--spacing-md) 0 !important;  // 16px 0
}

/* ============================================
   4. 间距工具类 (Spacing Utilities)
   ============================================ */

// Margin工具类
.m-0 { margin: 0 !important; }
.m-1 { margin: var(--spacing-xs) !important; }  // 4px
.m-2 { margin: var(--spacing-sm) !important; }  // 8px
.m-3 { margin: var(--spacing-md) !important; }  // 16px
.m-4 { margin: var(--spacing-lg) !important; }  // 24px
.m-5 { margin: var(--spacing-xl) !important; }  // 32px
.m-6 { margin: var(--spacing-xxl) !important; } // 48px

// Margin X轴 (左右)
.mx-0 { margin-left: 0 !important; margin-right: 0 !important; }
.mx-1 { margin-left: var(--spacing-xs) !important; margin-right: var(--spacing-xs) !important; }
.mx-2 { margin-left: var(--spacing-sm) !important; margin-right: var(--spacing-sm) !important; }
.mx-3 { margin-left: var(--spacing-md) !important; margin-right: var(--spacing-md) !important; }

// Margin Y轴 (上下)
.my-0 { margin-top: 0 !important; margin-bottom: 0 !important; }
.my-1 { margin-top: var(--spacing-xs) !important; margin-bottom: var(--spacing-xs) !important; }
.my-2 { margin-top: var(--spacing-sm) !important; margin-bottom: var(--spacing-sm) !important; }
.my-3 { margin-top: var(--spacing-md) !important; margin-bottom: var(--spacing-md) !important; }

// Margin Top
.mt-0 { margin-top: 0 !important; }
.mt-1 { margin-top: var(--spacing-xs) !important; }
.mt-2 { margin-top: var(--spacing-sm) !important; }
.mt-3 { margin-top: var(--spacing-md) !important; }
.mt-4 { margin-top: var(--spacing-lg) !important; }
.mt-5 { margin-top: var(--spacing-xl) !important; }

// Margin Bottom
.mb-0 { margin-bottom: 0 !important; }
.mb-1 { margin-bottom: var(--spacing-xs) !important; }
.mb-2 { margin-bottom: var(--spacing-sm) !important; }
.mb-3 { margin-bottom: var(--spacing-md) !important; }
.mb-4 { margin-bottom: var(--spacing-lg) !important; }
.mb-5 { margin-bottom: var(--spacing-xl) !important; }

// Padding工具类
.p-0 { padding: 0 !important; }
.p-1 { padding: var(--spacing-xs) !important; }  // 4px
.p-2 { padding: var(--spacing-sm) !important; }  // 8px
.p-3 { padding: var(--spacing-md) !important; }  // 16px
.p-4 { padding: var(--spacing-lg) !important; }  // 24px
.p-5 { padding: var(--spacing-xl) !important; }  // 32px

// Padding X轴 (左右)
.px-0 { padding-left: 0 !important; padding-right: 0 !important; }
.px-1 { padding-left: var(--spacing-xs) !important; padding-right: var(--spacing-xs) !important; }
.px-2 { padding-left: var(--spacing-sm) !important; padding-right: var(--spacing-sm) !important; }
.px-3 { padding-left: var(--spacing-md) !important; padding-right: var(--spacing-md) !important; }

// Padding Y轴 (上下)
.py-0 { padding-top: 0 !important; padding-bottom: 0 !important; }
.py-1 { padding-top: var(--spacing-xs) !important; padding-bottom: var(--spacing-xs) !important; }
.py-2 { padding-top: var(--spacing-sm) !important; padding-bottom: var(--spacing-sm) !important; }
.py-3 { padding-top: var(--spacing-md) !important; padding-bottom: var(--spacing-md) !important; }

// Padding Top
.pt-0 { padding-top: 0 !important; }
.pt-1 { padding-top: var(--spacing-xs) !important; }
.pt-2 { padding-top: var(--spacing-sm) !important; }
.pt-3 { padding-top: var(--spacing-md) !important; }
.pt-4 { padding-top: var(--spacing-lg) !important; }

// Padding Bottom
.pb-0 { padding-bottom: 0 !important; }
.pb-1 { padding-bottom: var(--spacing-xs) !important; }
.pb-2 { padding-bottom: var(--spacing-sm) !important; }
.pb-3 { padding-bottom: var(--spacing-md) !important; }
.pb-4 { padding-bottom: var(--spacing-lg) !important; }

/* ============================================
   5. 特殊组件样式覆盖 (Specific Component Overrides)
   ============================================ */

// Dashboard统计卡片
.dashboard .stat-card,
.market .stat-card {
  padding: var(--spacing-md) var(--spacing-lg) !important;  // 16px 24px
}

// Analysis页面卡片
.analysis .card,
.analysis .el-card {
  padding: var(--spacing-lg) !important;  // 24px

  .card-header,
  .el-card__header {
    padding: var(--spacing-md) !important;  // 16px
  }

  .card-body,
  .el-card__body {
    padding: var(--spacing-md) 0 !important;  // 16px 0
  }
}

// Settings页面
.settings .el-card {
  padding: var(--spacing-lg) !important;  // 24px
}

// Trade页面
.trade-management .el-card {
  padding: var(--spacing-md) !important;  // 16px
}

/* ============================================
   6. 迁移辅助类 (Migration Helper Classes)
   用于逐步迁移到新规范
   ============================================ */

// 标记需要迁移的组件
.migration-needed {
  outline: 2px dashed var(--color-warning) !important;
  position: relative;

  &::after {
    content: "需迁移到新视觉规范";
    position: absolute;
    top: -20px;
    left: 0;
    background: var(--color-warning);
    color: var(--text-primary);
    font-size: 10px;
    padding: 2px 4px;
    border-radius: 2px;
  }
}

// 调试模式 (开发阶段使用)
.debug-spacing * {
  outline: 1px solid rgba(255, 0, 0, 0.3) !important;
}

.debug-spacing *::before {
  content: attr(class);
  position: absolute;
  top: 0;
  left: 0;
  background: rgba(255, 0, 0, 0.8);
  color: white;
  font-size: 10px;
  padding: 2px;
  z-index: 9999;
}

/* ============================================
   7. 响应式断点 (Responsive Breakpoints)
   ============================================ */

// 小屏幕 (1366x768及以下)
@media (max-width: 1366px) {
  // 减小页面容器padding
  .page-container,
  .dashboard-container,
  .market-container,
  .analysis-container {
    padding: var(--spacing-md) !important;  // 16px
  }

  // 减小卡片padding
  .card-data,
  .stat-card {
    padding: var(--spacing-sm) !important;  // 12px
    min-height: 100px !important;
  }

  .card-content {
    padding: var(--spacing-md) !important;  // 16px
    min-height: 250px !important;
  }

  // 减小模块间距
  .module-section + .module-section {
    margin-top: var(--spacing-xl) !important;  // 32px (而非48px)
  }

  // 调整按钮尺寸
  .btn-primary,
  .btn-secondary,
  .el-button {
    height: 36px !important;
    padding: 0 var(--spacing-md) !important;  // 0 16px
  }
}

// 标准屏幕 (1920x1080)
@media (min-width: 1367px) and (max-width: 1920px) {
  // 使用标准规范（无需调整）
}

// 大屏幕 (2560x1440及以上)
@media (min-width: 1921px) {
  // 增大页面容器padding
  .page-container,
  .dashboard-container,
  .market-container,
  .analysis-container {
    padding: var(--spacing-xl) !important;  // 32px
  }

  // 增大卡片尺寸
  .card-data,
  .stat-card {
    min-height: 140px !important;
  }
}

/* ============================================
   END: Visual Optimization Stylesheet
   ============================================ */
