<template>
  <div class="strategy-management">
    <div class="page-header">
      <h1>ğŸ“ˆ è‚¡ç¥¨ç­–ç•¥ç®¡ç†</h1>
      <p class="subtitle">åŸºäºInStockç»å…¸ç­–ç•¥çš„æ™ºèƒ½é€‰è‚¡ç³»ç»Ÿï¼Œæ”¯æŒ10ä¸ªç»å…¸ç­–ç•¥</p>
    </div>

    <!-- åŠŸèƒ½å¯¼èˆªæ ‡ç­¾ -->
    <el-tabs v-model="activeTab" type="border-card" class="strategy-tabs">
      <!-- 1. ç­–ç•¥åˆ—è¡¨ -->
      <el-tab-pane name="list" label="ç­–ç•¥åˆ—è¡¨">
        <template #label>
          <span><el-icon><List /></el-icon> ç­–ç•¥åˆ—è¡¨</span>
        </template>
        <StrategyList @run-strategy="handleRunStrategy" />
      </el-tab-pane>

      <!-- 2. å•åªè¿è¡Œ -->
      <el-tab-pane name="single" label="å•åªè¿è¡Œ">
        <template #label>
          <span><el-icon><Search /></el-icon> å•åªè¿è¡Œ</span>
        </template>
        <SingleRun :initial-strategy="selectedStrategy" />
      </el-tab-pane>

      <!-- 3. æ‰¹é‡æ‰«æ -->
      <el-tab-pane name="batch" label="æ‰¹é‡æ‰«æ">
        <template #label>
          <span><el-icon><Operation /></el-icon> æ‰¹é‡æ‰«æ</span>
        </template>
        <BatchScan />
      </el-tab-pane>

      <!-- 4. ç»“æœæŸ¥è¯¢ -->
      <el-tab-pane name="results" label="ç»“æœæŸ¥è¯¢">
        <template #label>
          <span><el-icon><Document /></el-icon> ç»“æœæŸ¥è¯¢</span>
        </template>
        <ResultsQuery />
      </el-tab-pane>

      <!-- 5. ç»Ÿè®¡åˆ†æ -->
      <el-tab-pane name="stats" label="ç»Ÿè®¡åˆ†æ">
        <template #label>
          <span><el-icon><DataAnalysis /></el-icon> ç»Ÿè®¡åˆ†æ</span>
        </template>
        <StatsAnalysis />
      </el-tab-pane>
    </el-tabs>
  </div>
</template>

<script setup>
import { ref } from 'vue'
import { List, Search, Operation, Document, DataAnalysis } from '@element-plus/icons-vue'
import StrategyList from './strategy/StrategyList.vue'
import SingleRun from './strategy/SingleRun.vue'
import BatchScan from './strategy/BatchScan.vue'
import ResultsQuery from './strategy/ResultsQuery.vue'
import StatsAnalysis from './strategy/StatsAnalysis.vue'

// å½“å‰æ¿€æ´»çš„æ ‡ç­¾é¡µ
const activeTab = ref('list')

// é€‰ä¸­çš„ç­–ç•¥ï¼ˆç”¨äºä»ç­–ç•¥åˆ—è¡¨è·³è½¬åˆ°å•åªè¿è¡Œï¼‰
const selectedStrategy = ref(null)

// å¤„ç†ä»ç­–ç•¥åˆ—è¡¨è¿è¡Œç­–ç•¥çš„äº‹ä»¶
const handleRunStrategy = (strategy) => {
  selectedStrategy.value = strategy
  activeTab.value = 'single'
}
</script>

<style scoped lang="scss">
.strategy-management {
  padding: 20px;

  .page-header {
    margin-bottom: 20px;

    h1 {
      font-size: 28px;
      font-weight: 600;
      color: #303133;
      margin: 0 0 8px 0;
    }

    .subtitle {
      font-size: 14px;
      color: #909399;
      margin: 0;
    }
  }

  .strategy-tabs {
    background: #fff;
    border-radius: 8px;

    :deep(.el-tabs__header) {
      margin: 0;
    }

    :deep(.el-tabs__item) {
      font-size: 15px;
      padding: 0 20px;

      .el-icon {
        margin-right: 5px;
      }
    }
  }
}
</style>
