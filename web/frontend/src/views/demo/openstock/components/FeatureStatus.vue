<template>
  <div class="card demo-card">
    <div class="card-header">
      <span class="card-title">âœ… åŠŸèƒ½æµ‹è¯•çŠ¶æ€</span>
    </div>

    <div class="status-section">
      <div class="info-grid">
        <div class="info-item">
          <span class="info-label">è‚¡ç¥¨æœç´¢ API</span>
          <span class="badge" :class="apiStatus.search ? 'badge-success' : 'badge-info'">
            {{ apiStatus.search ? 'âœ… å·²æµ‹è¯•' : 'â³ å¾…æµ‹è¯•' }}
          </span>
        </div>
        <div class="info-item">
          <span class="info-label">å®æ—¶è¡Œæƒ… API</span>
          <span class="badge" :class="apiStatus.quote ? 'badge-success' : 'badge-info'">
            {{ apiStatus.quote ? 'âœ… å·²æµ‹è¯•' : 'â³ å¾…æµ‹è¯•' }}
          </span>
        </div>
        <div class="info-item">
          <span class="info-label">è‚¡ç¥¨æ–°é—» API</span>
          <span class="badge" :class="apiStatus.news ? 'badge-success' : 'badge-info'">
            {{ apiStatus.news ? 'âœ… å·²æµ‹è¯•' : 'â³ å¾…æµ‹è¯•' }}
          </span>
        </div>
        <div class="info-item">
          <span class="info-label">è‡ªé€‰è‚¡ç®¡ç† API</span>
          <span class="badge" :class="apiStatus.watchlist ? 'badge-success' : 'badge-info'">
            {{ apiStatus.watchlist ? 'âœ… å·²æµ‹è¯•' : 'â³ å¾…æµ‹è¯•' }}
          </span>
        </div>
        <div class="info-item">
          <span class="info-label">Kçº¿å›¾è¡¨ API</span>
          <span class="badge" :class="apiStatus.klinechart ? 'badge-success' : 'badge-info'">
            {{ apiStatus.klinechart ? 'âœ… å·²æµ‹è¯•' : 'â³ å¾…æµ‹è¯•' }}
          </span>
        </div>
        <div class="info-item">
          <span class="info-label">è‚¡ç¥¨çƒ­åŠ›å›¾</span>
          <span class="badge" :class="apiStatus.heatmap ? 'badge-success' : 'badge-info'">
            {{ apiStatus.heatmap ? 'âœ… å·²é›†æˆ' : 'â³ å¾…é›†æˆ' }}
          </span>
        </div>
      </div>

      <div class="suggestions-section">
        <h3>ğŸ“ é›†æˆå»ºè®®</h3>
        <div class="alert-info">
          <div class="alert-content">
            <div class="alert-title">æµ‹è¯•å®Œæˆåï¼Œå¯ä»¥å°†è¿™äº›åŠŸèƒ½é›†æˆåˆ°ä»¥ä¸‹é¡µé¢ï¼š</div>
            <ul class="suggestion-list">
              <li><strong>è‚¡ç¥¨æœç´¢</strong>: å¯é›†æˆåˆ°é¦–é¡µã€å¸‚åœºé¡µé¢çš„å…¨å±€æœç´¢</li>
              <li><strong>å®æ—¶è¡Œæƒ…</strong>: å¯é›†æˆåˆ°è‚¡ç¥¨è¯¦æƒ…é¡µã€è‡ªé€‰è‚¡é¡µé¢</li>
              <li><strong>è‚¡ç¥¨æ–°é—»</strong>: å¯é›†æˆåˆ°è‚¡ç¥¨è¯¦æƒ…é¡µã€èµ„è®¯é¡µé¢</li>
              <li><strong>è‡ªé€‰è‚¡ç®¡ç†</strong>: å¯ä½œä¸ºç‹¬ç«‹é¡µé¢ï¼Œæ”¯æŒåˆ†ç»„ç®¡ç†å’Œæ‰¹é‡æ“ä½œ</li>
              <li><strong>Kçº¿å›¾è¡¨</strong>: å¯é›†æˆåˆ°è‚¡ç¥¨è¯¦æƒ…é¡µã€æŠ€æœ¯åˆ†æé¡µï¼Œæ”¯æŒå¤šç§æŠ€æœ¯æŒ‡æ ‡</li>
              <li><strong>è‚¡ç¥¨çƒ­åŠ›å›¾</strong>: å¯é›†æˆåˆ°å¸‚åœºæ¦‚è§ˆé¡µã€é¦–é¡µï¼Œå®æ—¶å±•ç¤ºå¸‚åœºæ•´ä½“æ¶¨è·Œæƒ…å†µ</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref } from 'vue'
import type { ApiStatus } from '../config'

const apiStatus = ref<ApiStatus>({
  search: false,
  quote: false,
  news: false,
  watchlist: false,
  klinechart: false,
  heatmap: false
})

const updateStatus = (feature: keyof ApiStatus, tested: boolean) => {
  apiStatus.value[feature] = tested
}

defineExpose({
  updateStatus
})
</script>

<style scoped lang="scss">

.status-section {
  padding: 10px 0;

  h3 {
    margin: 0 0 16px 0;
    font-size: 16px;
    font-weight: 600;
    color: var(--text-primary);
    border-left: 3px solid var(--warning);
    padding-left: 12px;
  }
}

.info-grid {
  display: flex;
  flex-direction: column;
  gap: 0;
  background: var(--bg-secondary);
  border: 1px solid var(--border-light);
  border-radius: var(--radius-md);
  overflow: hidden;
}

.info-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 14px 20px;
  border-bottom: 1px solid var(--border-light);

  &:last-child {
    border-bottom: none;
  }
}

.info-label {
  font-size: 14px;
  color: var(--text-primary);
  font-weight: 500;
}

.suggestions-section {
  margin-top: 24px;
}

.alert-content {
  .alert-title {
    margin-bottom: 12px;
    color: var(--text-primary);
    font-weight: 500;
  }
}

.suggestion-list {
  margin: 0;
  padding-left: 20px;
  line-height: 1.9;
  color: var(--text-secondary);

  li {
    margin: 6px 0;

    strong {
      color: var(--text-primary);
    }
  }
}
</style>
