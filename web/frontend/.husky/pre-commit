#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ” Running pre-commit checks..."

# è¿è¡Œlint-staged
npx lint-staged

# æ£€æŸ¥TypeScriptç±»å‹ï¼ˆå¯é€‰ï¼Œé€Ÿåº¦å¿«ï¼‰
if [ "$SKIP_TYPE_CHECK" != "true" ]; then
  echo "ğŸ“ Running TypeScript type check..."
  npm run type-check || {
    echo "âš ï¸  Type check failed. Commit aborted."
    echo "ğŸ’¡ To skip type check, run: SKIP_TYPE_CHECK=true git commit"
    exit 1
  }
fi

echo "âœ… Pre-commit checks passed!"
