# ğŸ› ï¸ å¼€å‘å·¥å…·é“¾æŒ‡å—

## ğŸ“– æ¦‚è¿°

æœ¬æ–‡æ¡£ä»‹ç»MyStocksé¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­ä½¿ç”¨çš„å„ç§å·¥å…·å’Œå¹³å°ï¼ŒåŒ…æ‹¬å¼€å‘ç¯å¢ƒé…ç½®ã€ä»£ç è´¨é‡å·¥å…·ã€æµ‹è¯•å·¥å…·ã€éƒ¨ç½²å·¥å…·ç­‰ï¼Œå¸®åŠ©å›¢é˜Ÿæˆå‘˜å¿«é€Ÿä¸Šæ‰‹å¹¶æé«˜å¼€å‘æ•ˆç‡ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒå‡†å¤‡

#### å¿…å¤‡å·¥å…·æ¸…å•
- **Python**: 3.12+ (æ¨èä½¿ç”¨Anacondaæˆ–pyenvç®¡ç†ç‰ˆæœ¬)
- **Node.js**: 18+ (æ¨èä½¿ç”¨nvmç®¡ç†ç‰ˆæœ¬)
- **Git**: ç‰ˆæœ¬æ§åˆ¶å·¥å…·
- **Docker**: å®¹å™¨åŒ–éƒ¨ç½²
- **VS Code**: æ¨èçš„IDEï¼ˆå¯é€‰ï¼‰

#### å¼€å‘ç¯å¢ƒå®‰è£…
```bash
# 1. Pythonç¯å¢ƒé…ç½®
# ä½¿ç”¨pyenvç®¡ç†Pythonç‰ˆæœ¬
curl https://pyenv.run | bash
echo 'export PYENV_ROOT="$HOME/.pyenv"' >> ~/.bashrc
echo 'command -v pyenv >/dev/null || export PATH="$PYENV_ROOT/bin:$PATH"' >> ~/.bashrc
echo 'eval "$(pyenv init -)"' >> ~/.bashrc

# å®‰è£…Python 3.12
pyenv install 3.12.11
pyenv global 3.12.11

# 2. Node.jsç¯å¢ƒé…ç½®
# ä½¿ç”¨nvmç®¡ç†Node.jsç‰ˆæœ¬
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash
source ~/.bashrc

# å®‰è£…Node.js 18
nvm install 18
nvm use 18
nvm alias default 18

# 3. é¡¹ç›®ç¯å¢ƒåˆå§‹åŒ–
git clone git@github.com:chengjon/mystocks.git
cd mystocks_spec

# Pythonè™šæ‹Ÿç¯å¢ƒ
python -m venv venv
source venv/bin/activate  # Linux/Mac
# venv\Scripts\activate  # Windows

# å®‰è£…ä¾èµ–
pip install -r requirements.txt
pip install -r web/backend/requirements.txt

# å‰ç«¯ä¾èµ–
cd web/frontend
npm install
```

## ğŸ¤– Claude Code é›†æˆ

### ğŸ“‹ Claude Code Hooks ç³»ç»Ÿæ¦‚è¿°

Claude Code Hooks æ˜¯ MyStocks é¡¹ç›®çš„è‡ªåŠ¨åŒ–å¼€å‘å·¥å…·é“¾ï¼Œæä¾›7ä¸ªç”Ÿäº§å°±ç»ªçš„è‡ªåŠ¨åŒ–è„šæœ¬ï¼Œå®ç°å¼€å‘ã€æµ‹è¯•ã€éƒ¨ç½²å…¨æµç¨‹è‡ªåŠ¨åŒ–ã€‚

### ğŸ”§ Hooks é…ç½®

#### 1. æŠ€èƒ½æ¿€æ´» Hook
```bash
.claude/hooks/user-prompt-submit-skill-activation.sh
```
**åŠŸèƒ½**: æ ¹æ®ç”¨æˆ·è¾“å…¥è‡ªåŠ¨æ¿€æ´»ç›¸åº”çš„å¼€å‘æŠ€èƒ½
**ä½¿ç”¨åœºæ™¯**: è‡ªåŠ¨è¯†åˆ«å¼€å‘ä»»åŠ¡ç±»å‹ï¼Œè°ƒç”¨å¯¹åº”çš„å·¥å…·é“¾

#### 2. æ–‡ä»¶ç¼–è¾‘è¿½è¸ª Hook
```bash
.claude/hooks/post-tool-use-file-edit-tracker.sh
```
**åŠŸèƒ½**: è®°å½•æ‰€æœ‰æ–‡ä»¶ç¼–è¾‘æ“ä½œï¼Œç”Ÿæˆå˜æ›´æ—¥å¿—
**ä½¿ç”¨åœºæ™¯**: è¿½è¸ªä»£ç å˜æ›´ï¼Œç”Ÿæˆæäº¤ä¿¡æ¯

#### 3. æ•°æ®åº“æ¶æ„éªŒè¯ Hook
```bash
.claude/hooks/post-tool-use-database-schema-validator.sh
```
**åŠŸèƒ½**: è‡ªåŠ¨éªŒè¯æ•°æ®åº“æ¶æ„å˜æ›´çš„åˆç†æ€§
**ä½¿ç”¨åœºæ™¯**: æ•°æ®åº“è¡¨ç»“æ„å˜æ›´æ—¶çš„è‡ªåŠ¨éªŒè¯

#### 4. æ–‡æ¡£æ•´ç† Hook
```bash
.claude/hooks/post-tool-use-document-organizer.sh
```
**åŠŸèƒ½**: è‡ªåŠ¨æ•´ç†æ–‡æ¡£ç»“æ„ï¼Œç¡®ä¿æ–‡æ¡£ç»„ç»‡è§„èŒƒ
**ä½¿ç”¨åœºæ™¯**: æ–‡æ¡£åˆ›å»ºå’Œæ›´æ–°æ—¶çš„è‡ªåŠ¨æ•´ç†

#### 5. ä»£ç è´¨é‡é—¨ç¦ Hook
```bash
.claude/hooks/stop-python-quality-gate.sh
```
**åŠŸèƒ½**: åœ¨ä»£ç æäº¤å‰æ‰§è¡Œè´¨é‡æ£€æŸ¥ï¼Œç¡®ä¿ä»£ç è´¨é‡
**ä½¿ç”¨åœºæ™¯**: ä»£ç æäº¤å‰çš„è´¨é‡æŠŠå…³

#### 6. ä»»åŠ¡ç®¡ç† Hook
```bash
.claude/hooks/session-start-task-master-injector.sh
```
**åŠŸèƒ½**: ä¼šè¯å¼€å§‹æ—¶æ³¨å…¥ä»»åŠ¡ä¸Šä¸‹æ–‡ï¼Œæä¾›å¼€å‘æŒ‡å¯¼
**ä½¿ç”¨åœºæ™¯**: æ–°å¼€å‘ä¼šå¼€å§‹æ—¶çš„ä»»åŠ¡åˆå§‹åŒ–

#### 7. ä¼šè¯æ¸…ç† Hook
```bash
.claude/hooks/session-end-cleanup.sh
```
**åŠŸèƒ½**: ä¼šè¯ç»“æŸæ—¶æ¸…ç†ä¸´æ—¶æ–‡ä»¶ï¼Œæ•´ç†å·¥ä½œç¯å¢ƒ
**ä½¿ç”¨åœºæ™¯**: å¼€å‘ä¼šç»“æŸæ—¶çš„ç¯å¢ƒæ¸…ç†

### ğŸ¯ Hooks ä½¿ç”¨æ–¹æ³•

#### åŸºç¡€ä½¿ç”¨
```bash
# æŸ¥çœ‹å¯ç”¨çš„Hooks
ls -la .claude/hooks/

# æµ‹è¯•Hooksç³»ç»Ÿ
.claude/hooks/post-tool-use-file-edit-tracker.sh --test

# è¿è¡Œä»£ç è´¨é‡é—¨ç¦
.claude/hooks/stop-python-quality-gate.sh

# ä¼šè¯å¼€å§‹ä»»åŠ¡æ³¨å…¥
.claude/hooks/session-start-task-master-injector.sh
```

#### è‡ªåŠ¨åŒ–æµç¨‹
```bash
# 1. å¼€å‘ä¼šå¼€å§‹
.claude/hooks/session-start-task-master-injector.sh

# 2. æ­£å¸¸å¼€å‘å·¥ä½œ
# - ç¼–è¾‘æ–‡ä»¶ï¼ˆè‡ªåŠ¨è¿½è¸ªï¼‰
# - æ•°æ®åº“å˜æ›´ï¼ˆè‡ªåŠ¨éªŒè¯ï¼‰
# - æ–‡æ¡£æ›´æ–°ï¼ˆè‡ªåŠ¨æ•´ç†ï¼‰

# 3. ä»£ç æäº¤å‰
.claude/hooks/stop-python-quality-gate.sh

# 4. å¼€å‘ä¼šç»“æŸ
.claude/hooks/session-end-cleanup.sh
```

### ğŸ“Š Hooks çŠ¶æ€ç›‘æ§

#### æˆåŠŸç‡ç»Ÿè®¡
```bash
# è¿è¡ŒHooksæµ‹è¯•å¥—ä»¶
.claude/hooks/test_hooks.sh

# æŸ¥çœ‹Hooksæ‰§è¡Œæ—¥å¿—
tail -f .claude/logs/hooks.log

# æ£€æŸ¥Hookså¥åº·çŠ¶æ€
.claude/hooks/health_check.sh
```

#### é…ç½®ç®¡ç†
```json
// .claude/config.json
{
  "hooks": {
    "enabled": [
      "user-prompt-submit-skill-activation",
      "post-tool-use-file-edit-tracker",
      "post-tool-use-database-schema-validator",
      "post-tool-use-document-organizer",
      "stop-python-quality-gate",
      "session-start-task-master-injector",
      "session-end-cleanup"
    ],
    "settings": {
      "auto_cleanup": true,
      "log_level": "info",
      "quality_gate_strict": true
    }
  }
}
```

## ğŸ” APIFox é›†æˆ

### ğŸ“‹ APIFox æ¦‚è¿°

APIFox æ˜¯ä¸€ä¸ªå¼ºå¤§çš„APIå¼€å‘å’Œæµ‹è¯•å¹³å°ï¼ŒMyStocksé¡¹ç›®ä½¿ç”¨APIFoxè¿›è¡ŒAPIè®¾è®¡ã€æ–‡æ¡£ç”Ÿæˆã€æµ‹è¯•ç”¨ä¾‹ç®¡ç†å’Œå›¢é˜Ÿåä½œã€‚

### ğŸš€ APIFox é…ç½®

#### 1. é¡¹ç›®å¯¼å…¥
```bash
# ä¸‹è½½APIè§„èŒƒæ–‡ä»¶
curl -o mystocks-api.json https://api.example.com/mystocks/openapi.json

# å¯¼å…¥åˆ°APIFox
# 1. ç™»å½•APIFox
# 2. åˆ›å»ºæ–°é¡¹ç›® "MyStocks API"
# 3. å¯¼å…¥OpenAPIæ–‡ä»¶
# 4. é…ç½®é¡¹ç›®è®¾ç½®
```

#### 2. æ¥å£è®¾è®¡
```yaml
# APIè®¾è®¡è§„èŒƒç¤ºä¾‹
paths:
  /api/stocks/{symbol}:
    get:
      summary: è·å–è‚¡ç¥¨ä¿¡æ¯
      parameters:
        - name: symbol
          in: path
          required: true
          schema:
            type: string
            pattern: ^\d{6}$
      responses:
        200:
          description: æˆåŠŸè¿”å›è‚¡ç¥¨ä¿¡æ¯
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StockInfo'
```

#### 3. æµ‹è¯•ç”¨ä¾‹ç®¡ç†
```javascript
// APIFoxæµ‹è¯•è„šæœ¬ç¤ºä¾‹
const response = pm.response.json();

// éªŒè¯å“åº”ç»“æ„
pm.test("è‚¡ç¥¨ä¿¡æ¯ç»“æ„æ­£ç¡®", function() {
    pm.expect(response).to.have.property('success', true);
    pm.expect(response.data).to.have.property('symbol');
    pm.expect(response.data).to.have.property('price');
});

// éªŒè¯æ•°æ®æ ¼å¼
pm.test("è‚¡ç¥¨ä»£ç æ ¼å¼æ­£ç¡®", function() {
    pm.expect(response.data.symbol).to.match(/^\d{6}$/);
});

// æ€§èƒ½æµ‹è¯•
pm.test("å“åº”æ—¶é—´å°äº100ms", function() {
    pm.expect(pm.response.responseTime).to.be.below(100);
});
```

### ğŸ”§ APIFox é«˜çº§åŠŸèƒ½

#### 1. è‡ªåŠ¨åŒ–æµ‹è¯•
```javascript
// å‰ç½®è„šæœ¬ - è®¾ç½®æµ‹è¯•ç¯å¢ƒ
const baseUrl = pm.environment.get("API_BASE_URL");
const authToken = pm.environment.get("AUTH_TOKEN");

// åç½®è„šæœ¬ - ç¯å¢ƒå˜é‡è®¾ç½®
if (pm.response.code === 200) {
    const stockData = pm.response.json();
    pm.environment.set("LAST_STOCK_PRICE", stockData.price);
}
```

#### 2. Mock æœåŠ¡
```json
// Mockæ•°æ®é…ç½®
{
  "mock_data": {
    "stock_600000": {
      "symbol": "600000",
      "name": "æµ¦å‘é“¶è¡Œ",
      "price": 12.50,
      "change": 0.35,
      "change_pct": 2.89
    }
  }
}
```

#### 3. å›¢é˜Ÿåä½œ
- **æ¥å£å…±äº«**: ä¸å›¢é˜Ÿæˆå‘˜å…±äº«APIè®¾è®¡
- **ç‰ˆæœ¬ç®¡ç†**: è·Ÿè¸ªAPIç‰ˆæœ¬å˜æ›´
- **è¯„è®ºç³»ç»Ÿ**: åœ¨æ¥å£ä¸Šæ·»åŠ è¯„è®ºå’Œè®¨è®º
- **æƒé™ç®¡ç†**: è®¾ç½®ä¸åŒè§’è‰²çš„è®¿é—®æƒé™

## ğŸ§ª Playwright æµ‹è¯•æ¡†æ¶

### ğŸ“‹ Playwright æ¦‚è¿°

Playwright æ˜¯ä¸€ä¸ªç°ä»£åŒ–çš„ç«¯åˆ°ç«¯æµ‹è¯•æ¡†æ¶ï¼ŒMyStocksé¡¹ç›®ä½¿ç”¨Playwrightè¿›è¡Œå‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œç¡®ä¿ç”¨æˆ·ç•Œé¢çš„è´¨é‡å’Œç¨³å®šæ€§ã€‚

### ğŸš€ Playwright é…ç½®

#### 1. é¡¹ç›®åˆå§‹åŒ–
```bash
# å®‰è£…Playwright
npm install --save-dev @playwright/test

# å®‰è£…æµè§ˆå™¨
npx playwright install

# é…ç½®playwright.config.ts
```

#### 2. é…ç½®æ–‡ä»¶
```typescript
// playwright.config.ts
import { defineConfig, devices } from '@playwright/test';

export default defineConfig({
  testDir: './tests',
  fullyParallel: true,
  forbidOnly: !!process.env.CI,
  retries: process.env.CI ? 2 : 0,
  workers: process.env.CI ? 1 : undefined,
  reporter: 'html',
  use: {
    baseURL: 'http://localhost:3000',
    trace: 'on-first-retry',
    screenshot: 'only-on-failure',
  },
  projects: [
    {
      name: 'chromium',
      use: { ...devices['Desktop Chrome'] },
    },
    {
      name: 'firefox',
      use: { ...devices['Desktop Firefox'] },
    },
    {
      name: 'webkit',
      use: { ...devices['Desktop Safari'] },
    },
  ],
  webServer: {
    command: 'npm run dev',
    url: 'http://localhost:3000',
    reuseExistingServer: !process.env.CI,
  },
});
```

#### 3. æµ‹è¯•ç”¨ä¾‹ç¤ºä¾‹
```typescript
// tests/stock-dashboard.spec.ts
import { test, expect } from '@playwright/test';

test.describe('è‚¡ç¥¨ä»ªè¡¨ç›˜', () => {
  test.beforeEach(async ({ page }) => {
    await page.goto('/');
  });

  test('ä»ªè¡¨ç›˜é¡µé¢åŠ è½½æ­£å¸¸', async ({ page }) => {
    await expect(page).toHaveTitle(/MyStocks/);
    await expect(page.locator('[data-testid="dashboard"]')).toBeVisible();
  });

  test('è‚¡ç¥¨åˆ—è¡¨æ˜¾ç¤ºæ­£ç¡®', async ({ page }) => {
    await page.locator('[data-testid="stock-list"]').waitFor();
    const stockItems = page.locator('[data-testid="stock-item"]');
    await expect(stockItems.first()).toBeVisible();

    // éªŒè¯è‚¡ç¥¨ä¿¡æ¯æ˜¾ç¤º
    const firstStock = stockItems.first();
    await expect(firstStock.locator('[data-testid="stock-symbol"]')).toBeVisible();
    await expect(firstStock.locator('[data-testid="stock-price"]')).toBeVisible();
  });

  test('è‚¡ç¥¨æœç´¢åŠŸèƒ½æ­£å¸¸', async ({ page }) => {
    const searchInput = page.locator('[data-testid="stock-search"]');
    await searchInput.fill('600000');
    await page.keyboard.press('Enter');

    // éªŒè¯æœç´¢ç»“æœ
    const searchResults = page.locator('[data-testid="search-results"]');
    await expect(searchResults).toBeVisible();

    const resultItem = searchResults.locator('[data-testid="result-item"]').first();
    await expect(resultItem).toContainText('600000');
  });

  test('å®æ—¶æ•°æ®æ›´æ–°æ­£å¸¸', async ({ page }) => {
    // ç­‰å¾…å®æ—¶æ•°æ®åŠ è½½
    await page.locator('[data-testid="real-time-price"]').waitFor();

    const priceElement = page.locator('[data-testid="stock-price-600000"]');
    const initialPrice = await priceElement.textContent();

    // ç­‰å¾…æ•°æ®æ›´æ–°ï¼ˆæ¨¡æ‹Ÿå®æ—¶æ›´æ–°ï¼‰
    await page.waitForTimeout(5000);

    const updatedPrice = await priceElement.textContent();
    // æ³¨æ„ï¼šåœ¨å®é™…ç¯å¢ƒä¸­ï¼Œè¿™é‡Œåº”è¯¥éªŒè¯ä»·æ ¼ç¡®å®å‘ç”Ÿäº†å˜åŒ–
    expect(updatedPrice).toBeTruthy();
  });

  test('å“åº”å¼è®¾è®¡æ­£å¸¸', async ({ page }) => {
    // æµ‹è¯•æ¡Œé¢è§†å›¾
    await page.setViewportSize({ width: 1200, height: 800 });
    await expect(page.locator('[data-testid="desktop-layout"]')).toBeVisible();

    // æµ‹è¯•å¹³æ¿è§†å›¾
    await page.setViewportSize({ width: 768, height: 1024 });
    await expect(page.locator('[data-testid="tablet-layout"]')).toBeVisible();

    // æµ‹è¯•æ‰‹æœºè§†å›¾
    await page.setViewportSize({ width: 375, height: 667 });
    await expect(page.locator('[data-testid="mobile-layout"]')).toBeVisible();
  });
});
```

### ğŸ¯ Playwright é«˜çº§åŠŸèƒ½

#### 1. é¡µé¢å¯¹è±¡æ¨¡å‹
```typescript
// tests/page-objects/StockDashboard.ts
import { Page, Locator } from '@playwright/test';

export class StockDashboard {
  readonly page: Page;
  readonly stockList: Locator;
  readonly searchInput: Locator;
  readonly realTimePrice: Locator;

  constructor(page: Page) {
    this.page = page;
    this.stockList = page.locator('[data-testid="stock-list"]');
    this.searchInput = page.locator('[data-testid="stock-search"]');
    this.realTimePrice = page.locator('[data-testid="real-time-price"]');
  }

  async goto() {
    await this.page.goto('/');
    await this.stockList.waitFor();
  }

  async searchStock(symbol: string) {
    await this.searchInput.fill(symbol);
    await this.page.keyboard.press('Enter');
    await this.page.locator('[data-testid="search-results"]').waitFor();
  }

  async getStockPrice(symbol: string) {
    const priceElement = this.page.locator(`[data-testid="stock-price-${symbol}"]`);
    return await priceElement.textContent();
  }

  async waitForRealTimeUpdate() {
    await this.realTimePrice.waitFor({ state: 'visible' });
  }
}
```

#### 2. æ•°æ®é©±åŠ¨æµ‹è¯•
```typescript
// tests/data/stock-data.json
{
  "stocks": [
    {
      "symbol": "600000",
      "name": "æµ¦å‘é“¶è¡Œ",
      "expectedPrice": "12.50"
    },
    {
      "symbol": "000001",
      "name": "å¹³å®‰é“¶è¡Œ",
      "expectedPrice": "15.80"
    }
  ]
}

// tests/stock-data-driven.spec.ts
import { test, expect } from '@playwright/test';
import { readFileSync } from 'fs';
import { StockDashboard } from './page-objects/StockDashboard';

const testData = JSON.parse(readFileSync('./tests/data/stock-data.json', 'utf8'));

test.describe('è‚¡ç¥¨æ•°æ®é©±åŠ¨æµ‹è¯•', () => {
  test('è‚¡ç¥¨ä¿¡æ¯æ˜¾ç¤ºæ­£ç¡®', async ({ page }) => {
    const dashboard = new StockDashboard(page);
    await dashboard.goto();

    for (const stock of testData.stocks) {
      await dashboard.searchStock(stock.symbol);

      const resultItem = page.locator(`[data-testid="result-item-${stock.symbol}"]`);
      await expect(resultItem).toContainText(stock.symbol);
      await expect(resultItem).toContainText(stock.name);
    }
  });
});
```

#### 3. æ€§èƒ½æµ‹è¯•
```typescript
// tests/performance.spec.ts
import { test, expect } from '@playwright/test';

test.describe('æ€§èƒ½æµ‹è¯•', () => {
  test('é¡µé¢åŠ è½½æ€§èƒ½', async ({ page }) => {
    const startTime = Date.now();
    await page.goto('/');
    const loadTime = Date.now() - startTime;

    // é¡µé¢åŠ è½½æ—¶é—´åº”å°äº3ç§’
    expect(loadTime).toBeLessThan(3000);

    // æ£€æŸ¥Core Web Vitals
    const vitals = await page.evaluate(() => {
      return new Promise((resolve) => {
        new PerformanceObserver((list) => {
          const entries = list.getEntries();
          const navigation = entries.find(entry => entry.entryType === 'navigation');
          resolve(navigation);
        }).observe({ entryTypes: ['navigation'] });
      });
    });

    expect(vitals.loadEventEnd).toBeLessThan(3000);
  });

  test('å¤§æ•°æ®é‡æ¸²æŸ“æ€§èƒ½', async ({ page }) => {
    await page.goto('/');

    // æ¨¡æ‹ŸåŠ è½½1000æ¡è‚¡ç¥¨æ•°æ®
    await page.evaluate(() => {
      window.loadLargeDataset = () => {
        const stockList = document.querySelector('[data-testid="stock-list"]');
        for (let i = 0; i < 1000; i++) {
          const item = document.createElement('div');
          item.setAttribute('data-testid', `stock-item-${i}`);
          item.textContent = `è‚¡ç¥¨${i}`;
          stockList.appendChild(item);
        }
      };
    });

    const startTime = Date.now();
    await page.evaluate(() => window.loadLargeDataset());
    const renderTime = Date.now() - startTime;

    // æ¸²æŸ“æ—¶é—´åº”å°äº1ç§’
    expect(renderTime).toBeLessThan(1000);
  });
});
```

## ğŸ”§ å¼€å‘å·¥å…·é…ç½®

### ğŸ“ ä»£ç ç¼–è¾‘å™¨é…ç½®

#### VS Code æ‰©å±•æ¨è
```json
// .vscode/extensions.json
{
  "recommendations": [
    "ms-python.python",
    "ms-python.black-formatter",
    "ms-python.isort",
    "ms-python.flake8",
    "ms-python.mypy-type-checker",
    "bradlc.vscode-tailwindcss",
    "esbenp.prettier-vscode",
    "dbaeumer.vscode-eslint",
    "ms-vscode.vscode-typescript-next",
    "Vue.volar",
    "ms-playwright.playwright"
  ]
}
```

#### VS Code è®¾ç½®
```json
// .vscode/settings.json
{
  "python.defaultInterpreterPath": "./venv/bin/python",
  "python.linting.enabled": true,
  "python.linting.pylintEnabled": true,
  "python.linting.flake8Enabled": true,
  "python.formatting.provider": "black",
  "python.sortImports.args": ["--profile=black"],
  "editor.formatOnSave": true,
  "editor.codeActionsOnSave": {
    "source.organizeImports": true
  },
  "typescript.preferences.importModuleSpecifier": "relative",
  "typescript.suggest.autoImports": true,
  "[vue]": {
    "editor.defaultFormatter": "Vue.volar"
  },
  "[typescript]": {
    "editor.defaultFormatter": "esbenp.prettier-vscode"
  }
}
```

### ğŸ³ Docker å¼€å‘ç¯å¢ƒ

#### å¼€å‘ç¯å¢ƒå®¹å™¨é…ç½®
```dockerfile
# Dockerfile.dev
FROM python:3.12-slim

WORKDIR /app

# å®‰è£…ç³»ç»Ÿä¾èµ–
RUN apt-get update && apt-get install -y \
    nodejs \
    npm \
    curl \
    git

# å¤åˆ¶ä¾èµ–æ–‡ä»¶
COPY requirements.txt .
COPY web/backend/requirements.txt ./web/backend/
COPY web/frontend/package*.json ./web/frontend/

# å®‰è£…Pythonä¾èµ–
RUN pip install --no-cache-dir -r requirements.txt
RUN pip install --no-cache-dir -r web/backend/requirements.txt

# å®‰è£…Node.jsä¾èµ–
WORKDIR /app/web/frontend
RUN npm install

# å¤åˆ¶åº”ç”¨ä»£ç 
COPY . .

# æš´éœ²ç«¯å£
EXPOSE 3000 8000

# å¯åŠ¨è„šæœ¬
CMD ["./scripts/dev-start.sh"]
```

#### Docker Compose é…ç½®
```yaml
# docker-compose.dev.yml
version: '3.8'

services:
  app:
    build:
      context: .
      dockerfile: Dockerfile.dev
    ports:
      - "3000:3000"
      - "8000:8000"
    volumes:
      - .:/app
      - /app/node_modules
    environment:
      - NODE_ENV=development
      - PYTHONPATH=/app
    command: ./scripts/dev-start.sh

  postgres:
    image: postgres:17
    environment:
      POSTGRES_DB: mystocks
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: password
    ports:
      - "5432:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data

  tdengine:
    image: tdengine/tdengine:3.3.0
    environment:
      TAOS_DATA_DIR: /var/lib/taos
    ports:
      - "6030:6030"
    volumes:
      - tdengine_data:/var/lib/taos

volumes:
  postgres_data:
  tdengine_data:
```

### ğŸ”„ CI/CD é›†æˆ

#### GitHub Actions é…ç½®
```yaml
# .github/workflows/ci.yml
name: CI/CD Pipeline

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main]

jobs:
  test:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v3

    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.12'

    - name: Install dependencies
      run: |
        pip install -r requirements.txt
        pip install -r web/backend/requirements.txt

    - name: Run tests
      run: |
        pytest tests/ -v --cov=src --cov-report=xml

    - name: Upload coverage
      uses: codecov/codecov-action@v3

  frontend-test:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v3

    - name: Set up Node.js
      uses: actions/setup-node@v3
      with:
        node-version: '18'

    - name: Install dependencies
      working-directory: ./web/frontend
      run: npm ci

    - name: Run tests
      working-directory: ./web/frontend
      run: npm test

    - name: Run E2E tests
      working-directory: ./web/frontend
      run: npx playwright test

  quality-check:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v3

    - name: Run quality checks
      run: |
        flake8 src/
        mypy src/
        black --check src/
        isort --check-only src/
```

## ğŸ“Š å·¥å…·æ•ˆç‡ç›‘æ§

### ğŸ“ˆ å¼€å‘æ•ˆç‡æŒ‡æ ‡

| æŒ‡æ ‡ | å·¥å…· | å½“å‰å€¼ | ç›®æ ‡å€¼ | ç›‘æ§æ–¹æ³• |
|------|------|--------|--------|----------|
| ä»£ç è´¨é‡åˆ†æ•° | SonarQube | 8.5 | 9.0 | æ¯æ—¥æŠ¥å‘Š |
| æµ‹è¯•è¦†ç›–ç‡ | Coverage.py | 72% | 85% | æ¯æ¬¡CI |
| æ„å»ºæ—¶é—´ | CI/CD | 5min | 3min | æ¯æ¬¡æ„å»º |
| éƒ¨ç½²æˆåŠŸç‡ | éƒ¨ç½²è„šæœ¬ | 95% | 99% | æ¯æ¬¡éƒ¨ç½² |
| æ–‡æ¡£è¦†ç›–ç‡ | æ–‡æ¡£å·¥å…· | 80% | 90% | æ¯å‘¨æ£€æŸ¥ |

### ğŸ”§ å·¥å…·ä½¿ç”¨ç»Ÿè®¡

```bash
# Claude Code Hook ä½¿ç”¨ç»Ÿè®¡
.claude/hooks/usage_stats.sh

# APIFox APIè°ƒç”¨ç»Ÿè®¡
curl -H "Authorization: Bearer $APIFOX_TOKEN" \
  https://api.apifox.cn/v1/projects/$PROJECT_ID/stats

# Playwright æµ‹è¯•æ‰§è¡Œç»Ÿè®¡
npx playwright test --reporter=json
cat playwright-report/results.json
```

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### ğŸ†˜ å¸¸è§é—®é¢˜è§£å†³

#### 1. Claude Code Hook å¤±è´¥
```bash
# æ£€æŸ¥Hookæƒé™
ls -la .claude/hooks/
chmod +x .claude/hooks/*.sh

# æŸ¥çœ‹Hookæ—¥å¿—
tail -f .claude/logs/hooks.log

# é‡æ–°å®‰è£…Hooks
.claude/hooks/reinstall.sh
```

#### 2. APIFox åŒæ­¥é—®é¢˜
```bash
# æ£€æŸ¥ç½‘ç»œè¿æ¥
ping api.apifox.cn

# é‡æ–°ç”ŸæˆAPI Token
# 1. ç™»å½•APIFox
# 2. è¿›å…¥é¡¹ç›®è®¾ç½®
# 3. é‡æ–°ç”ŸæˆToken
# 4. æ›´æ–°ç¯å¢ƒå˜é‡

# æ‰‹åŠ¨åŒæ­¥æ¥å£
curl -X POST \
  -H "Authorization: Bearer $APIFOX_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"openapi": "$(cat openapi.json)"}' \
  https://api.apifox.cn/v1/projects/$PROJECT_ID/import
```

#### 3. Playwright æµ‹è¯•å¤±è´¥
```bash
# æ›´æ–°æµè§ˆå™¨
npx playwright install

# æ£€æŸ¥æµ‹è¯•ç¯å¢ƒ
npx playwright test --list

# è°ƒè¯•æ¨¡å¼è¿è¡Œ
npx playwright test --debug

# ç”Ÿæˆæµ‹è¯•æŠ¥å‘Š
npx playwright test --reporter=html
```

### ğŸ“š å­¦ä¹ èµ„æº

#### å®˜æ–¹æ–‡æ¡£
- [Claude Code æ–‡æ¡£](https://claude.ai/docs)
- [APIFox æ–‡æ¡£](https://www.apifox.cn/help/)
- [Playwright æ–‡æ¡£](https://playwright.dev/)

#### ç¤¾åŒºèµ„æº
- [MyStocks é¡¹ç›®Wiki](https://github.com/chengjon/mystocks/wiki)
- [å¼€å‘å›¢é˜Ÿåšå®¢](https://blog.example.com)
- [æŠ€æœ¯äº¤æµç¾¤ç»„](https://t.me/mystocks_dev)

---

*æœ€åæ›´æ–°: 2025-12-06*
*ç»´æŠ¤äºº: å¼€å‘å·¥å…·å›¢é˜Ÿ*
