# AkShare æ•°æ®æ¥å£å¿«é€Ÿå‚è€ƒ

ä» `Astock_data_source.md` æå–çš„ akshare æ•°æ®æ¥å£æ˜ å°„

**æ›´æ–°æ—¶é—´**: 2026-01-02
**æ•°æ®æº**: ä¸œæ–¹è´¢å¯Œç½‘ (é€šè¿‡ AkShare)

---

## ğŸ“Š 1. è¡Œä¸šæ¿å—æ•°æ® (stock_industries / industries)

### è·å–è¡Œä¸šæ¿å—åˆ—è¡¨

**å¯¹åº”æ–‡æ¡£ä½ç½®**: Line 97-103
**AkShare æ¥å£**: `ak.stock_board_industry_name_em()`

```python
import akshare as ak

# è·å–æ‰€æœ‰è¡Œä¸šæ¿å—çš„å®æ—¶è¡Œæƒ…
industry_df = ak.stock_board_industry_name_em()

# è¿”å›å­—æ®µ:
# - æ’åã€æ¿å—åç§°ã€æ¿å—ä»£ç ã€æœ€æ–°ä»·
# - æ¶¨è·Œé¢ã€æ¶¨è·Œå¹…ã€æ€»å¸‚å€¼ã€æ¢æ‰‹ç‡
# - ä¸Šæ¶¨å®¶æ•°ã€ä¸‹è·Œå®¶æ•°ã€é¢†æ¶¨è‚¡ç¥¨ã€é¢†æ¶¨è‚¡ç¥¨-æ¶¨è·Œå¹…
```

### è·å–è¡Œä¸šæˆåˆ†è‚¡

**å¯¹åº”æ–‡æ¡£ä½ç½®**: Line 109-116
**AkShare æ¥å£**: `ak.stock_board_industry_cons_em(symbol="æ¿å—åç§°")`

```python
# è·å–æŒ‡å®šè¡Œä¸šçš„æˆåˆ†è‚¡
industry_cons = ak.stock_board_industry_cons_em(symbol="é»‘è‰²é‡‘å±")
# æˆ–ä½¿ç”¨è¡Œä¸šä»£ç 
industry_cons = ak.stock_board_industry_cons_em(symbol="BK0423")

# è¿”å›å­—æ®µ:
# - åºå·ã€ä»£ç ã€åç§°ã€æœ€æ–°ä»·ã€æ¶¨è·Œå¹…ã€æ¶¨è·Œé¢
# - æˆäº¤é‡ã€æˆäº¤é¢ã€æŒ¯å¹…ã€æœ€é«˜ã€æœ€ä½
# - ä»Šå¼€ã€æ˜¨æ”¶ã€æ¢æ‰‹ç‡ã€å¸‚ç›ˆç‡-åŠ¨æ€ã€å¸‚å‡€ç‡
```

### å…¶ä»–æ•°æ®æºå¯¹æ¯”

| æ•°æ®æº | æ¥å£ | ç¼ºç‚¹ |
|--------|------|------|
| **baostock** | `bs.query_stock_industry()` | æœ‰çš„è‚¡ç¥¨æ²¡è¡Œä¸šï¼Œæ•°æ®ä¸å…¨ |
| **efinance** | `ef.stock.get_belong_board(stock_code)` | ä»…è·å–å•åªè‚¡ç¥¨çš„è¡Œä¸šå½’å± |

---

## ğŸ·ï¸ 2. æ¦‚å¿µæ¿å—æ•°æ® (stock_concepts / concepts)

### è·å–æ¦‚å¿µæ¿å—åˆ—è¡¨

**å¯¹åº”æ–‡æ¡£ä½ç½®**: Line 97-103
**AkShare æ¥å£**: `ak.stock_board_concept_name_em()`

```python
# è·å–æ‰€æœ‰æ¦‚å¿µæ¿å—çš„å®æ—¶è¡Œæƒ…
concept_df = ak.stock_board_concept_name_em()

# è¿”å›å­—æ®µ:
# - æ’åã€æ¿å—åç§°ã€æ¿å—ä»£ç ã€æœ€æ–°ä»·
# - æ¶¨è·Œé¢ã€æ¶¨è·Œå¹…ã€æ€»å¸‚å€¼ã€æ¢æ‰‹ç‡
# - ä¸Šæ¶¨å®¶æ•°ã€ä¸‹è·Œå®¶æ•°ã€é¢†æ¶¨è‚¡ç¥¨ã€é¢†æ¶¨è‚¡ç¥¨-æ¶¨è·Œå¹…
```

### è·å–æ¦‚å¿µæˆåˆ†è‚¡

**å¯¹åº”æ–‡æ¡£ä½ç½®**: Line 109-116
**AkShare æ¥å£**: `ak.stock_board_concept_cons_em(symbol="æ¦‚å¿µåç§°")`

```python
# è·å–æŒ‡å®šæ¦‚å¿µçš„æˆåˆ†è‚¡
concept_cons = ak.stock_board_concept_cons_em(symbol="å¯ç‡ƒå†°")
# æˆ–ä½¿ç”¨æ¦‚å¿µä»£ç 
concept_cons = ak.stock_board_concept_cons_em(symbol="BK1051")

# è¿”å›å­—æ®µ:
# - åºå·ã€ä»£ç ã€åç§°ã€æœ€æ–°ä»·ã€æ¶¨è·Œå¹…ã€æ¶¨è·Œé¢
# - æˆäº¤é‡ã€æˆäº¤é¢ã€æŒ¯å¹…ã€æœ€é«˜ã€æœ€ä½
# - ä»Šå¼€ã€æ˜¨æ”¶ã€æ¢æ‰‹ç‡ã€å¸‚ç›ˆç‡-åŠ¨æ€ã€å¸‚å‡€ç‡
```

### è·å–æ¦‚å¿µæ¿å—å†å²èµ°åŠ¿

**å¯¹åº”æ–‡æ¡£ä½ç½®**: Line 134-142
**AkShare æ¥å£**: `ak.stock_board_concept_hist_em()`

```python
# è·å–æ¦‚å¿µæ¿å—å†å²æ•°æ®
concept_hist = ak.stock_board_concept_hist_em(
    symbol="ç»¿è‰²ç”µåŠ›",
    period="daily",
    start_date="20240101",
    end_date="20241231",
    adjust=""  # å¤æƒç±»å‹: ""/"qfq"/"hfq"
)

# è¿”å›å­—æ®µ:
# - æ—¥æœŸã€å¼€ç›˜ã€æ”¶ç›˜ã€æœ€é«˜ã€æœ€ä½
# - æ¶¨è·Œå¹…ã€æ¶¨è·Œé¢ã€æˆäº¤é‡ã€æˆäº¤é¢
# - æŒ¯å¹…ã€æ¢æ‰‹ç‡
```

### è·å–æ¦‚å¿µæ¿å—å®æ—¶è¡Œæƒ…

**å¯¹åº”æ–‡æ¡£ä½ç½®**: Line 148-153
**AkShare æ¥å£**: `ak.stock_board_concept_spot_em()`

```python
# è·å–æ¦‚å¿µæ¿å—å®æ—¶è¡Œæƒ…
concept_spot = ak.stock_board_concept_spot_em(symbol="å¯ç‡ƒå†°")

# è¿”å›å­—æ®µ:
# - æœ€æ–°ã€æœ€é«˜ã€æœ€ä½ã€å¼€ç›˜
# - æˆäº¤é‡ã€æˆäº¤é¢ã€æ¢æ‰‹ç‡
# - æ¶¨è·Œé¢ã€æ¶¨è·Œå¹…ã€æŒ¯å¹…
```

### è·å–æ¦‚å¿µæ¿å—åˆ†æ—¶æ•°æ®

**å¯¹åº”æ–‡æ¡£ä½ç½®**: Line 122-128
**AkShare æ¥å£**: `ak.stock_board_concept_hist_min_em()`

```python
# è·å–æ¦‚å¿µæ¿å—åˆ†é’Ÿçº§èµ°åŠ¿
concept_min = ak.stock_board_concept_hist_min_em(
    symbol="èµ›é©¬æ¦‚å¿µ",
    period="1"  # 1, 5, 15, 30, 60 åˆ†é’Ÿ
)

# è¿”å›å­—æ®µ:
# - æ—¥æœŸæ—¶é—´ã€å¼€ç›˜ã€æ”¶ç›˜ã€æœ€é«˜ã€æœ€ä½
# - æˆäº¤é‡ã€æˆäº¤é¢ã€æœ€æ–°ä»·
```

---

## ğŸ“ˆ 3. è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯ (stocks_basic / symbols_info / stock_info)

### è·å–æ‰€æœ‰è‚¡ç¥¨ä»£ç å’Œåç§°

**AkShare æ¥å£**: `ak.stock_info_a_code_name()`

```python
# è·å– A è‚¡æ‰€æœ‰è‚¡ç¥¨ä»£ç å’Œåç§°
stock_list = ak.stock_info_a_code_name()

# è¿”å›å­—æ®µ:
# - code: è‚¡ç¥¨ä»£ç 
# - name: è‚¡ç¥¨åç§°

# æˆ–åˆ†å¸‚åœºè·å–
# ä¸Šæµ·å¸‚åœº
sh_list = ak.stock_info_sh_name_code(indicator="ä¸»æ¿Aè‚¡")
# æ·±åœ³å¸‚åœº
sz_list = ak.stock_info_sz_name_code(indicator="Aè‚¡åˆ—è¡¨")
```

### è·å–å•åªè‚¡ç¥¨è¯¦ç»†ä¿¡æ¯

**AkShare æ¥å£**: `ak.stock_individual_info_em(symbol="è‚¡ç¥¨ä»£ç ")`

```python
# è·å–å•åªè‚¡ç¥¨çš„è¯¦ç»†ä¿¡æ¯
stock_info = ak.stock_individual_info_em(symbol="000001")

# è¿”å›: DataFrame with item/value åˆ—
# åŒ…å«: è‚¡ç¥¨ä»£ç ã€è‚¡ç¥¨åç§°ã€æ€»å¸‚å€¼ã€æµé€šå¸‚å€¼ã€
#      è¡Œä¸šã€å¸‚ç›ˆç‡(åŠ¨)ã€å¸‚å‡€ç‡ã€æ¯›åˆ©ç‡ã€å‡€åˆ©ç‡ç­‰
```

### å¯¹æ¯”: efinance æ¥å£

**å¯¹åº”æ–‡æ¡£ä½ç½®**: Line 726-748

```python
import efinance as ef

# è·å–å•åª/å¤šåªè‚¡ç¥¨åŸºæœ¬ä¿¡æ¯
stock_base_info = ef.stock.get_base_info(stock_codes=['600519', '300715'])

# è¿”å›å­—æ®µ:
# - è‚¡ç¥¨ä»£ç ã€è‚¡ç¥¨åç§°ã€å‡€åˆ©æ¶¦ã€æ€»å¸‚å€¼ã€æµé€šå¸‚å€¼
# - æ‰€å¤„è¡Œä¸šã€å¸‚ç›ˆç‡(åŠ¨)ã€å¸‚å‡€ç‡ã€ROE
# - æ¯›åˆ©ç‡ã€å‡€åˆ©ç‡ã€æ¿å—ç¼–å·
```

---

## ğŸ“Š 4. è‚¡ç¥¨å†å²è¡Œæƒ…æ•°æ®

### è·å–æ—¥çº¿æ•°æ®

**å¯¹åº”æ–‡æ¡£ä½ç½®**: Line 210-222
**AkShare æ¥å£**: `ak.stock_zh_a_hist()`

```python
# è·å–å•åªè‚¡ç¥¨æ—¥çº¿æ•°æ®
stock_hist = ak.stock_zh_a_hist(
    symbol="000230",
    period="daily",
    start_date="20240101",
    end_date="20241231",
    adjust="hfq"  # å¤æƒ: ""/"qfq"(å‰)/"hfq"(å)
)

# è¿”å›å­—æ®µ:
# - æ—¥æœŸã€è‚¡ç¥¨ä»£ç ã€å¼€ç›˜ã€æ”¶ç›˜ã€æœ€é«˜ã€æœ€ä½
# - æˆäº¤é‡ã€æˆäº¤é¢ã€æŒ¯å¹…ã€æ¶¨è·Œå¹…ã€æ¶¨è·Œé¢ã€æ¢æ‰‹ç‡
```

### è·å–åˆ†é’Ÿæ•°æ®

**å¯¹åº”æ–‡æ¡£ä½ç½®**: Line 258-264
**AkShare æ¥å£**: `ak.stock_zh_a_hist_min_em()`

```python
# è·å–åˆ†é’Ÿçº§æ•°æ®
stock_min = ak.stock_zh_a_hist_min_em(
    symbol="002230",
    start_date="2024-05-01 09:30:00",
    end_date="2024-05-22 15:00:00",
    period="1",  # 1, 5, 15, 30, 60 åˆ†é’Ÿ
    adjust=""
)

# è¿”å›å­—æ®µ:
# - æ—¶é—´ã€å¼€ç›˜ã€æ”¶ç›˜ã€æœ€é«˜ã€æœ€ä½
# - æˆäº¤é‡ã€æˆäº¤é¢ã€å‡ä»·
```

### å¯¹æ¯”: efinance æ¥å£

**å¯¹åº”æ–‡æ¡£ä½ç½®**: Line 224-270

```python
import efinance as ef

# è·å–å¤šåªè‚¡ç¥¨å†å²æ•°æ®
hist_data = ef.stock.get_quote_history(
    stock_codes=['600519', '300750'],
    beg='20200101',
    end='20241231',
    klt=101,  # 1/5/15/30/60/101(æ—¥)/102(å‘¨)/103(æœˆ)
    fqt=1     # 0: ä¸å¤æƒ, 1: å‰å¤æƒ, 2: åå¤æƒ
)
```

---

## ğŸš€ å®Œæ•´è„šæœ¬

å·²ç”Ÿæˆå®Œæ•´çš„æ•°æ®è·å–è„šæœ¬: `scripts/fetch_akshare_data.py`

**åŠŸèƒ½**:
1. âœ… è·å–è¡Œä¸šæ¿å—åˆ—è¡¨ (`stock_industries`)
2. âœ… è·å–è¡Œä¸šæˆåˆ†è‚¡ (`industries` è¯¦ç»†ä¿¡æ¯)
3. âœ… è·å–æ¦‚å¿µæ¿å—åˆ—è¡¨ (`stock_concepts`)
4. âœ… è·å–æ¦‚å¿µæˆåˆ†è‚¡ (`concepts` è¯¦ç»†ä¿¡æ¯)
5. âœ… è·å–è‚¡ç¥¨ä»£ç åˆ—è¡¨ (`stocks_basic` / `symbols_info`)
6. âœ… è·å–è‚¡ç¥¨è¯¦ç»†ä¿¡æ¯ (`stock_info`)
7. âœ… è·å–å†å²è¡Œæƒ…æ•°æ®

**ä½¿ç”¨æ–¹æ³•**:
```bash
cd /opt/claude/mystocks_spec
python scripts/fetch_akshare_data.py
```

**è¾“å‡ºæ–‡ä»¶**:
- `industry_list_YYYYMMDD_HHMMSS.csv` - è¡Œä¸šæ¿å—åˆ—è¡¨
- `industry_cons_example_YYYYMMDD_HHMMSS.csv` - è¡Œä¸šæˆåˆ†è‚¡ç¤ºä¾‹
- `concept_list_YYYYMMDD_HHMMSS.csv` - æ¦‚å¿µæ¿å—åˆ—è¡¨
- `concept_cons_example_YYYYMMDD_HHMMSS.csv` - æ¦‚å¿µæˆåˆ†è‚¡ç¤ºä¾‹
- `stock_list_YYYYMMDD_HHMMSS.csv` - è‚¡ç¥¨ä»£ç åˆ—è¡¨
- `stock_info_example_YYYYMMDD_HHMMSS.csv` - è‚¡ç¥¨è¯¦ç»†ä¿¡æ¯ç¤ºä¾‹
- `stock_history_example_YYYYMMDD_HHMMSS.csv` - è‚¡ç¥¨å†å²è¡Œæƒ…ç¤ºä¾‹

---

## ğŸ“ æ•°æ®å­—æ®µå¯¹ç…§è¡¨

### è¡Œä¸š/æ¦‚å¿µæ¿å—åˆ—è¡¨å­—æ®µ

| æ–‡æ¡£å­—æ®µ | AkShare è¿”å› | è¯´æ˜ |
|---------|-------------|------|
| æ¿å—åç§° | æ¿å—åç§° | è¡Œä¸š/æ¦‚å¿µåç§° |
| æ¿å—ä»£ç  | æ¿å—ä»£ç  | å¦‚ BK0423, BK1051 |
| æœ€æ–°ä»· | æœ€æ–°ä»· | å½“å‰ä»·æ ¼ |
| æ¶¨è·Œå¹… | æ¶¨è·Œå¹… | ç™¾åˆ†æ¯” |
| æ€»å¸‚å€¼ | æ€»å¸‚å€¼ | äº¿å…ƒ |
| æ¢æ‰‹ç‡ | æ¢æ‰‹ç‡ | ç™¾åˆ†æ¯” |
| é¢†æ¶¨è‚¡ç¥¨ | é¢†æ¶¨è‚¡ç¥¨ | æ¶¨å¹…æœ€å¤§çš„è‚¡ç¥¨ |

### æˆåˆ†è‚¡å­—æ®µ

| æ–‡æ¡£å­—æ®µ | AkShare è¿”å› | è¯´æ˜ |
|---------|-------------|------|
| ä»£ç  | ä»£ç  | è‚¡ç¥¨ä»£ç  |
| åç§° | åç§° | è‚¡ç¥¨åç§° |
| æœ€æ–°ä»· | æœ€æ–°ä»· | å½“å‰ä»·æ ¼ |
| æ¶¨è·Œå¹… | æ¶¨è·Œå¹… | ç™¾åˆ†æ¯” |
| æˆäº¤é‡ | æˆäº¤é‡ | æ‰‹ |
| æˆäº¤é¢ | æˆäº¤é¢ | å…ƒ |
| å¸‚ç›ˆç‡-åŠ¨æ€ | å¸‚ç›ˆç‡-åŠ¨æ€ | TTM å¸‚ç›ˆç‡ |
| å¸‚å‡€ç‡ | å¸‚å‡€ç‡ | å¸‚å‡€ç‡ |

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **æ•°æ®æºé™åˆ¶**: AkShare æ•°æ®æ¥è‡ªä¸œæ–¹è´¢å¯Œç½‘ï¼Œå—é™äºç½‘ç«™è®¿é—®é¢‘ç‡
2. **è¯·æ±‚é¢‘ç‡**: å»ºè®®æ¯æ¬¡è¯·æ±‚é—´éš” 1 ç§’ï¼Œé¿å…è¢«é™æµ
3. **æ•°æ®å»¶è¿Ÿ**: å®æ—¶æ•°æ®å¯èƒ½æœ‰ 15-30 ç§’å»¶è¿Ÿ
4. **å¤æƒå¤„ç†**:
   - `""`: ä¸å¤æƒ
   - `"qfq"`: å‰å¤æƒ
   - `"hfq"`: åå¤æƒ
5. **é”™è¯¯å¤„ç†**: æ‰€æœ‰å‡½æ•°éƒ½æœ‰ try-except ä¿æŠ¤ï¼Œå¤±è´¥æ—¶è¿”å›ç©º DataFrame

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

- **AkShare å®˜æ–¹æ–‡æ¡£**: https://akshare.akfamily.xyz/data/stock/stock.html
- **åŸå§‹æ–‡æ¡£**: `/opt/mydoc/mymd/Astock_data_source.md`
- **ç”Ÿæˆè„šæœ¬**: `scripts/fetch_akshare_data.py`

---

**ç»´æŠ¤è€…**: Claude Code
**æœ€åæ›´æ–°**: 2026-01-02
