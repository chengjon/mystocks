# MyStocks 当前系统状态

## 系统概述
MyStocks是一个量化交易数据管理系统，提供股票数据的采集、存储、分析和可视化功能。

## 已实现功能

### 前端页面
1. **首页 (`/`)**: 系统概览页面
2. **仪表板 (`/dashboard`)**: 股票统计数据展示
3. **股票列表 (`/stocks`)**: 股票信息列表，支持分页和搜索
4. **技术分析 (`/technical-analysis`)**: 技术指标分析界面

### 核心API
1. **股票基本信息**: `/api/data/stocks/basic` - 获取股票基本信息列表
2. **市场概览**: `/api/data/markets/overview` - 获取市场统计数据
3. **认证接口**: `/api/auth/login`, `/api/auth/logout` - 用户认证管理

### 数据展示
- 已接入真实股票数据，包括平安银行、万科A、浦发银行、招商银行等4只股票
- 数据字段完整，包括股票代码、名称、行业、地区、市场、上市日期等
- 支持数据分页、搜索和筛选功能

### 数据同步能力
1. **股票基础信息同步**: 每周日凌晨3点自动更新沪深A股基础信息
2. **股票K线数据同步**: 每日凌晨2点自动更新前一日K线数据
3. **分时线数据同步**: 周一到周五17:00自动更新当日分钟K线数据（1m/5m/15m/30m/60m）
4. **行业分类数据同步**: 每周一凌晨4点自动更新行业分类数据
5. **概念分类数据同步**: 每周一凌晨4:30自动更新概念分类数据
6. **个股行业概念关联数据同步**: 每周一凌晨5:00自动更新个股分类关联数据
7. **增量同步机制**: 只同步新增或变更的数据，提升效率
8. **双数据源支持**: 优先使用AkShare（行业/概念数据），TDX（分时线数据），失败时自动切换
9. **重试机制**: 网络异常时自动重试，保障数据同步稳定性

## 技术栈

### 前端
- **框架**: Vue 3 + Element Plus
- **构建工具**: Vite
- **端口**: 3001
- **代理**: 前端代理API请求到后端

### 后端
- **框架**: FastAPI (Python 3.12+)
- **端口**: 8888
- **认证**: JWT Token
- **中间件**: CORS支持、缓存管理、日志记录

### 数据库
- **PostgreSQL**: 主要数据存储（股票信息、市场数据等）
- **TDengine**: 时序数据存储（预留，当前主要使用PostgreSQL）

### 工具链
- **进程管理**: PM2 (支持定时任务)
- **日志查看**: lnav
- **终端复用**: tmux
- **自动化验证**: 自定义验证脚本

## 系统架构
```
┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│   浏览器     │    │   前端服务   │    │   后端服务   │
│ (localhost:3001)│←→│ (Vite Dev)  │←→│ (FastAPI)   │
└─────────────┘    └─────────────┘    └─────────────┘
                                          │
                                          ▼
                                  ┌─────────────┐
                                  │  数据库层    │
                                  │ PostgreSQL  │
                                  └─────────────┘
                                          ▲
                                          │
                               ┌─────────────────────────┐
                               │   数据同步服务         │
                               │ (定时更新股票数据)      │
                               └─────────────────────────┘
```

## 已知限制
1. 技术分析页面的K线图功能尚未完全实现
2. 指标计算功能有待开发
3. 当前只接入了少量测试数据（4只股票）
4. TDengine时序数据库功能尚未启用

## 待开发方向
1. **完善技术分析功能**:
   - 实现K线图绘制功能
   - 开发技术指标计算模块
   - 添加更多图表类型支持

2. **数据扩展**:
   - 接入更多股票数据
   - 实现实时数据更新机制
   - 添加历史数据回填功能

3. **功能增强**:
   - 实现用户自定义指标功能
   - 添加策略回测模块
   - 开发交易信号生成系统

4. **性能优化**:
   - 优化数据库查询性能
   - 实现数据缓存机制
   - 添加数据预加载功能

## 部署信息
- **项目路径**: `/opt/claude/mystocks_spec`
- **前端路径**: `/opt/claude/mystocks_spec/web/frontend`
- **后端路径**: `/opt/claude/mystocks_spec/web/backend`
- **配置文件**: `/opt/claude/mystocks_spec/config/`

## 启动命令
```bash
# 后端服务
cd /opt/claude/mystocks_spec && pm2 start ecosystem.config.js --env dev

# 前端服务
cd /opt/claude/mystocks_spec/web/frontend && npm run dev

# 验证脚本
cd /opt/claude/mystocks_spec && ./verify_data_chain.sh
```
