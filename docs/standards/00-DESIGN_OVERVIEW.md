# MyStocks 设计总览

**版本**: v1.0.0
**最后更新**: 2025-12-25
**上级文档**: [UI_DESIGN_SYSTEM.md](./UI_DESIGN_SYSTEM.md)

---

## 📋 目录

- [项目概述](#项目概述)
- [技术架构](#技术架构)
- [核心功能模块](#核心功能模块)
- [设计理念](#设计理念)
- [信息架构](#信息架构)
- [用户角色](#用户角色)
- [性能指标](#性能指标)

---

## 项目概述

### 项目定位

MyStocks 是一个**企业级量化交易数据管理系统**，为专业投资者和量化交易团队提供：

- 📊 **实时市场数据**: 毫秒级行情推送
- 📈 **技术分析**: 26+ 技术指标实时计算
- 🎯 **策略回测**: GPU 加速，15-20倍性能提升
- ⚠️ **风险管理**: VaR 计算、压力测试
- 💹 **模拟交易**: A股规则完整适配

### 目标用户

| 用户类型 | 需求 | 核心功能 |
|---------|------|---------|
| **个人投资者** | 简单易用的行情和分析工具 | 行情查看、技术分析、自选股管理 |
| **专业交易员** | 快速决策工具和实时数据 | 实时监控、快捷交易、风险控制 |
| **量化研究员** | 强大的策略研发和回测环境 | 策略编辑、历史回测、绩效分析 |
| **基金经理** | 组合管理和风险监控 | 组合分析、风险报告、资产配置 |

---

## 技术架构

### 前端技术栈

```
┌─────────────────────────────────────────────────────────┐
│                   前端技术栈                             │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  ┌─────────────────┐    ┌─────────────────┐            │
│  │   Vue 3.4+     │    │  TypeScript     │            │
│  │  Composition    │    │   5.3+          │            │
│  │     API         │    │                 │            │
│  └─────────────────┘    └─────────────────┘            │
│           │                     │                       │
│           └──────────┬──────────┘                       │
│                      ▼                                  │
│  ┌─────────────────────────────────────────────────┐   │
│  │              Vite 5.4+                           │   │
│  │         (构建工具 & 开发服务器)                   │   │
│  └─────────────────────────────────────────────────┘   │
│                      │                                  │
│                      ▼                                  │
│  ┌─────────────────────────────────────────────────┐   │
│  │           UI 层 (Element Plus)                   │   │
│  │  ┌─────────┐  ┌─────────┐  ┌─────────┐         │   │
│  │  │ Table   │  │ Form    │  │ Chart   │         │   │
│  │  └─────────┘  └─────────┘  └─────────┘         │   │
│  └─────────────────────────────────────────────────┘   │
│                      │                                  │
│                      ▼                                  │
│  ┌─────────────────────────────────────────────────┐   │
│  │          状态管理 (Pinia)                        │   │
│  │   Market │ User │ Strategy │ Trading │ Monitor  │   │
│  └─────────────────────────────────────────────────┘   │
│                      │                                  │
│                      ▼                                  │
│  ┌─────────────────────────────────────────────────┐   │
│  │          可视化 (ECharts + KlineChart)          │   │
│  │   K线图 │ 分时图 │ 热力图 │ 技术指标图          │   │
│  └─────────────────────────────────────────────────┘   │
│                      │                                  │
│                      ▼                                  │
│  ┌─────────────────────────────────────────────────┐   │
│  │      实时通信 (Socket.IO + SSE)                 │   │
│  └─────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────┘
```

### 后端技术栈

```
┌─────────────────────────────────────────────────────────┐
│                   后端技术栈                             │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │              FastAPI 0.114+                     │   │
│  │         (高性能异步 Web 框架)                    │   │
│  └─────────────────────────────────────────────────┘   │
│                      │                                  │
│                      ▼                                  │
│  ┌─────────────────────────────────────────────────┐   │
│  │            API 层 (50+ 端点)                     │   │
│  │  Market │ Strategy │ Trade │ Monitor │ Data     │   │
│  └─────────────────────────────────────────────────┘   │
│                      │                                  │
│                      ▼                                  │
│  ┌─────────────────────────────────────────────────┐   │
│  │           业务逻辑层                             │   │
│  │  技术分析 │ 策略回测 │ 风险计算 │ 交易执行     │   │
│  └─────────────────────────────────────────────────┘   │
│                      │                                  │
│                      ▼                                  │
│  ┌─────────────────────────────────────────────────┐   │
│  │         数据访问层 (Unified Manager)            │   │
│  └─────────────────────────────────────────────────┘   │
│                      │                                  │
│         ┌────────────┴────────────┐                   │
│         ▼                         ▼                   │
│  ┌─────────────┐          ┌─────────────┐            │
│  │  TDengine   │          │ PostgreSQL  │            │
│  │ (高频时序)  │          │  (通用数据) │            │
│  └─────────────┘          └─────────────┘            │
└─────────────────────────────────────────────────────────┘
```

### 系统架构图

```
┌─────────────────────────────────────────────────────────────────┐
│                        用户层 (Browser)                          │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐          │
│  │   桌面端      │  │   平板端      │  │   移动端      │          │
│  │  (1920px+)   │  │  (768-992px) │  │  (<768px)    │          │
│  └──────────────┘  └──────────────┘  └──────────────┘          │
└─────────────────────────────────────────────────────────────────┘
                            │ HTTPS/WSS
                            ▼
┌─────────────────────────────────────────────────────────────────┐
│                     前端应用层 (Vue 3)                          │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐       │
│  │  SPA 路由 │  │ 状态管理  │  │ API 层   │  │ 工具库   │       │
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘       │
└─────────────────────────────────────────────────────────────────┘
                            │ HTTP/WebSocket
                            ▼
┌─────────────────────────────────────────────────────────────────┐
│                  后端服务层 (FastAPI)                           │
│  ┌───────────────┐  ┌───────────────┐  ┌───────────────┐      │
│  │  REST API     │  │  WebSocket    │  │  SSE          │      │
│  │  (50+ 端点)   │  │  (Socket.IO)  │  │  (实时推送)   │      │
│  └───────────────┘  └───────────────┘  └───────────────┘      │
└─────────────────────────────────────────────────────────────────┘
                            │
         ┌──────────────────┼──────────────────┐
         ▼                  ▼                  ▼
┌──────────────┐  ┌──────────────┐  ┌──────────────┐
│ 数据源适配器  │  │ 业务逻辑层   │  │ GPU 加速层  │
│ (7个数据源)  │  │ (策略/分析)  │  │ (RAPIDS)    │
└──────────────┘  └──────────────┘  └──────────────┘
         │                  │
         └──────────────────┼──────────────────┐
                            ▼                  ▼
                   ┌──────────────┐  ┌──────────────┐
                   │  TDengine    │  │ PostgreSQL   │
                   │ (时序数据库)  │  │ (关系数据库)  │
                   └──────────────┘  └──────────────┘
```

---

## 核心功能模块

### 1. 仪表盘 (Dashboard)

**用途**: 系统总览，关键指标一目了然

**核心功能**:
- 📊 市场概况: 三大指数、涨跌统计
- 📈 自选股监控: 实时价格、涨跌幅
- 💰 资金流向: 主力资金净流入
- 🔔 重要告警: 价格突破、异常波动

**数据更新**: WebSocket 实时推送

---

### 2. 市场行情 (Market Quotes)

**用途**: 实时行情浏览和技术分析

**核心功能**:
- 📋 行情列表: 全市场股票实时行情
- 🔍 快速搜索: 股票代码/名称/拼音
- 📊 技术指标: MACD、KDJ、RSI 等
- 📈 分时图: 实时分时走势
- 🕯️ K线图: 多周期 K线图

**性能指标**:
- 数据延迟: < 100ms
- 刷新频率: 3-5秒
- 支持并发: 1000+ 用户

---

### 3. 市场数据 (Market Data)

**用途**: 历史数据和深度分析

**核心功能**:
- 📅 历史行情: 日线、周线、月线
- 📊 财务数据: 财报、财务指标
- 🏢 公司资料: 基本面信息
- 📰 公告资讯: 公司公告、新闻

**数据范围**:
- A 股市场: 沪深全市场
- 时间跨度: 1990年至今
- 数据粒度: Tick 级别

---

### 4. 股票管理 (Stock Management)

**用途**: 自选股管理和股票池维护

**核心功能**:
- ⭐ 自选股: 多分组管理
- 📊 股票对比: 多股票对比分析
- 📈 价格提醒: 到价提醒
- 📝 笔记记录: 交易笔记

**特色功能**:
- 拖拽排序
- 分组标签
- 云端同步

---

### 5. 数据分析 (Data Analysis)

**用途**: 技术指标分析和信号生成

**核心功能**:
- 📊 26+ 技术指标: 趋势、动量、波动率
- 🎯 交易信号: 买卖点提示
- 📈 指标叠加: 多指标联合分析
- 🔧 参数调整: 自定义指标参数

**技术指标列表**:
- **趋势类**: MA、EMA、MACD、BOLL
- **动量类**: RSI、KDJ、CCI、WR
- **成交量类**: OBV、VOL、VR
- **波动率**: ATR、STDDEV

---

### 6. 风险管理 (Risk Management)

**用途**: 组合风险评估和控制

**核心功能**:
- ⚠️ VaR 计算: 风险价值估算
- 📊 压力测试: 极端情景模拟
- 🎯 风险预警: 多维度告警
- 📈 风险报告: PDF 导出

**风险指标**:
- VaR (95%, 99%)
- 最大回撤
- 夏普比率
- 波动率

---

### 7. 策略回测 (Strategy Backtest)

**用途**: 量化策略研发和验证

**核心功能**:
- 🎯 12个内置策略: 动量、均值回归、统计套利等
- ⚡ GPU 加速: 15-20倍性能提升
- 📊 绩效分析: 收益率、回撤、夏普比率
- 📈 参数优化: 网格搜索、遗传算法
- 📝 报告导出: 详细回测报告

**策略类型**:
- 趋势跟随
- 均值回归
- 动量策略
- 统计套利
- 机器学习

---

### 8. 交易管理 (Trading Management)

**用途**: 模拟交易和订单管理

**核心功能**:
- 📝 订单下单: 限价单、市价单、条件单
- 📊 持仓管理: 实时持仓、盈亏统计
- 💹 成交记录: 历史成交查询
- ⚙️ 交易设置: A股规则配置

**交易规则**:
- T+1 制度
- 涨跌停限制
- 最小交易单位
- 手续费计算

---

### 9. 其他页面 (Other Pages)

#### 系统设置
- 个性化配置
- 数据源管理
- 通知设置

#### 数据管理
- 数据导入
- 数据导出
- 数据清理

#### 用户管理
- 用户列表
- 权限管理
- 操作日志

---

## 设计理念

### 1. 专业可信 (Professional)

**视觉风格**:
- 沉稳的蓝灰色调
- 清晰的数据可视化
- 严格的信息层次

**交互设计**:
- 明确的操作反馈
- 预防错误操作
- 数据验证提示

### 2. 高效操作 (Efficient)

**快捷操作**:
- 键盘快捷键
- 批量操作
- 智能搜索

**性能优化**:
- 懒加载
- 虚拟滚动
- 缓存策略

### 3. 实时响应 (Real-time)

**数据推送**:
- WebSocket 长连接
- 增量更新
- 断线重连

**状态同步**:
- 乐观更新
- 错误回滚
- 状态恢复

### 4. 可访问性 (Accessible)

**无障碍设计**:
- 键盘导航
- ARIA 标签
- 色彩对比度

**响应式设计**:
- 移动端适配
- 平板优化
- 桌面增强

---

## 信息架构

### 导航结构

```
MyStocks
├── 📊 仪表盘 (Dashboard)
├── 📈 市场行情 (Market)
│   ├── 实时行情
│   ├── 技术分析
│   └── 市场热度
├── 💾 市场数据 (Data)
│   ├── 历史行情
│   ├── 财务数据
│   └── 公司资料
├── ⭐ 股票管理 (Stocks)
│   ├── 自选股
│   ├── 股票池
│   └── 对比分析
├── 📊 数据分析 (Analysis)
│   ├── 技术指标
│   ├── 交易信号
│   └── 自定义指标
├── ⚠️ 风险管理 (Risk)
│   ├── 风险评估
│   ├── 压力测试
│   └── 风险报告
├── 🎯 策略回测 (Strategy)
│   ├── 策略列表
│   ├── 回测配置
│   └── 回测报告
├── 💹 交易管理 (Trade)
│   ├── 订单管理
│   ├── 持仓查询
│   └── 成交记录
└── ⚙️ 系统设置 (Settings)
    ├── 个性化配置
    ├── 数据管理
    └── 用户管理
```

### 页面层级

```
Level 1: 主导航 (9个模块)
    ↓
Level 2: 页面视图 (每个模块2-4个子页面)
    ↓
Level 3: 功能区域 (页面内的功能区块)
    ↓
Level 4: 组件/元素 (按钮、表单、图表等)
```

---

## 用户角色

### 角色权限矩阵

| 功能模块 | 访客 | 普通用户 | 专业用户 | 管理员 |
|---------|-----|---------|---------|-------|
| 仪表盘 | 👁️ 只读 | ✅ 完整 | ✅ 完整 | ✅ 完整 |
| 市场行情 | 👁️ 只读 | ✅ 完整 | ✅ 完整 | ✅ 完整 |
| 市场数据 | ❌ | ✅ 完整 | ✅ 完整 | ✅ 完整 |
| 股票管理 | ❌ | ⭐ 10个 | ⭐ 100个 | ✅ 无限制 |
| 数据分析 | ❌ | 📊 5个指标 | 📊 所有指标 | ✅ 完整 |
| 风险管理 | ❌ | ❌ | ✅ 完整 | ✅ 完整 |
| 策略回测 | ❌ | 🎯 3个策略 | 🎯 所有策略 | ✅ 完整 |
| 交易管理 | ❌ | 💹 模拟交易 | 💹 模拟交易 | ✅ 完整 |
| 系统设置 | ❌ | ⚙️ 部分 | ⚙️ 部分 | ✅ 完整 |

---

## 性能指标

### 前端性能

| 指标 | 目标值 | 测量方法 |
|-----|-------|---------|
| **首屏加载** | < 2s | Lighthouse |
| **交互延迟** | < 100ms | Performance API |
| **FPS** | ≥ 60 | Chrome DevTools |
| **内存占用** | < 200MB | Chrome Task Manager |
| **包体积** | < 500KB (gzip) | webpack-bundle-analyzer |

### 后端性能

| 指标 | 目标值 | 测量方法 |
|-----|-------|---------|
| **API 响应** | < 200ms (P95) | Prometheus |
| **WebSocket 延迟** | < 50ms | 自定义监控 |
| **并发用户** | 1000+ | 压力测试 |
| **数据库查询** | < 100ms (P95) | 慢查询日志 |
| **缓存命中率** | > 90% | Redis 监控 |

### 数据更新频率

| 数据类型 | 更新频率 | 推送方式 |
|---------|---------|---------|
| **实时行情** | 3-5秒 | WebSocket |
| **分时图** | 1秒 | WebSocket |
| **K线图** | 按需 | HTTP |
| **技术指标** | 按需 | HTTP |
| **财务数据** | 每日 | HTTP |
| **公告资讯** | 实时 | SSE |

---

## 下一步阅读

### 设计师
- [颜色系统](./01-DESIGN_SYSTEM/color-system.md)
- [字体系统](./01-DESIGN_SYSTEM/typography.md)
- [组件库](./02-COMPONENT_LIBRARY/README.md)

### 前端开发者
- [前端开发者指南](../../web/frontend/docs/DEVELOPER_GUIDE.md)
- [布局系统](./01-DESIGN_SYSTEM/layout-system.md)
- [设计 Tokens](./01-DESIGN_SYSTEM/design-tokens.md)

### 产品经理
- [页面设计](./03-PAGE_DESIGNS/README.md)
- [交互流程](./04-INTERACTION_FLOWS/README.md)
- [用户角色](#用户角色)

---

**文档版本**: v1.0.0
**最后更新**: 2025-12-25
**维护者**: UI Design Team
**位置**: `docs/standards/00-DESIGN_OVERVIEW.md`
