â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘              MyStocks API å¿«é€Ÿå‚è€ƒæŒ‡å—                                    â•‘
â•‘              ç”Ÿæˆæ—¥æœŸ: 2025-11-30                                          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“Š API ç»Ÿè®¡
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
æ€»ç«¯ç‚¹æ•°: 6 ä¸ª
â”œâ”€â”€ GET ç«¯ç‚¹: 5 ä¸ª (83%)
â””â”€â”€ POST ç«¯ç‚¹: 1 ä¸ª (17%)

åŸºç¡€ URL: http://localhost:8000
è®¤è¯æ–¹å¼: JWT Bearer Token
æ•°æ®æ ¼å¼: JSON


ğŸ”‘ è®¤è¯ç«¯ç‚¹
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1ï¸âƒ£  è·å– CSRF Token
   æ–¹æ³•: GET
   è·¯å¾„: /api/csrf-token
   æè¿°: è·å– CSRF Token (å¯é€‰)

   ç¤ºä¾‹:
   $ curl -X GET "http://localhost:8000/api/csrf-token"

2ï¸âƒ£  ç”¨æˆ·ç™»å½•
   æ–¹æ³•: POST
   è·¯å¾„: /api/auth/login
   æè¿°: ç”¨æˆ·ç™»å½•ï¼Œè¿”å› JWT Token

   è¯·æ±‚ä½“:
   {
     "username": "admin",
     "password": "admin123"
   }

   ç¤ºä¾‹:
   $ curl -X POST "http://localhost:8000/api/auth/login" \
     -H "Content-Type: application/json" \
     -d '{"username":"admin","password":"admin123"}'

   å“åº”:
   {
     "access_token": "eyJ...",
     "token_type": "bearer",
     "user": {...}
   }

3ï¸âƒ£  è·å–ç”¨æˆ·ä¿¡æ¯
   æ–¹æ³•: GET
   è·¯å¾„: /api/auth/user
   æè¿°: è·å–å½“å‰ç™»å½•ç”¨æˆ·ä¿¡æ¯ (éœ€è¦ Token)

   è¯·æ±‚å¤´:
   Authorization: Bearer <access_token>

   ç¤ºä¾‹:
   $ curl -X GET "http://localhost:8000/api/auth/user" \
     -H "Authorization: Bearer eyJ..."


ğŸ¥ ç³»ç»Ÿç«¯ç‚¹
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1ï¸âƒ£  å¥åº·æ£€æŸ¥
   æ–¹æ³•: GET
   è·¯å¾„: /health
   æè¿°: ç³»ç»Ÿå¥åº·æ£€æŸ¥

   ç¤ºä¾‹:
   $ curl -X GET "http://localhost:8000/health"

2ï¸âƒ£  æ ¹è·¯å¾„
   æ–¹æ³•: GET
   è·¯å¾„: /
   æè¿°: é‡å®šå‘åˆ° Swagger æ–‡æ¡£

   ç¤ºä¾‹:
   $ curl -X GET "http://localhost:8000/"

3ï¸âƒ£  Swagger UI
   æ–¹æ³•: GET
   è·¯å¾„: /docs
   æè¿°: äº¤äº’å¼ API æ–‡æ¡£

   æµè§ˆå™¨è®¿é—®:
   http://localhost:8000/docs


ğŸš€ å®Œæ•´å·¥ä½œæµ
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ç¬¬ä¸€æ­¥: ç™»å½•è·å– Token
--------

$ curl -X POST "http://localhost:8000/api/auth/login" \
  -H "Content-Type: application/json" \
  -d '{"username":"admin","password":"admin123"}'

å“åº”ç¤ºä¾‹:
{
  "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "token_type": "bearer",
  "user": {
    "id": "user_123",
    "username": "admin",
    "email": "admin@example.com",
    "role": "admin"
  }
}


ç¬¬äºŒæ­¥: ä½¿ç”¨ Token è·å–ç”¨æˆ·ä¿¡æ¯
--------

$ curl -X GET "http://localhost:8000/api/auth/user" \
  -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."

å“åº”ç¤ºä¾‹:
{
  "id": "user_123",
  "username": "admin",
  "email": "admin@example.com",
  "role": "admin",
  "created_at": "2025-01-01T00:00:00Z",
  "last_login": "2025-11-30T20:16:00Z"
}


ğŸ“ Python ç¤ºä¾‹
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

import requests

# ç™»å½•
response = requests.post(
    "http://localhost:8000/api/auth/login",
    json={"username": "admin", "password": "admin123"}
)
data = response.json()
token = data["access_token"]

# è·å–ç”¨æˆ·ä¿¡æ¯
headers = {"Authorization": f"Bearer {token}"}
user_response = requests.get(
    "http://localhost:8000/api/auth/user",
    headers=headers
)
print(user_response.json())


ğŸ“‹ JavaScript ç¤ºä¾‹
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

// ç™»å½•
const loginRes = await fetch('http://localhost:8000/api/auth/login', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    username: 'admin',
    password: 'admin123'
  })
});

const { access_token } = await loginRes.json();

// è·å–ç”¨æˆ·ä¿¡æ¯
const userRes = await fetch('http://localhost:8000/api/auth/user', {
  headers: { 'Authorization': `Bearer ${access_token}` }
});

const user = await userRes.json();
console.log(user);


ğŸŒ åœ¨çº¿è®¿é—®
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Swagger UI:  http://localhost:8000/docs
OpenAPI:    http://localhost:8000/openapi.json
Health:     http://localhost:8000/health


ğŸ’¡ å¸¸ç”¨ cURL å‘½ä»¤
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

# å¥åº·æ£€æŸ¥
curl -s http://localhost:8000/health | python3 -m json.tool

# è·å– Token
TOKEN=$(curl -s -X POST "http://localhost:8000/api/auth/login" \
  -H "Content-Type: application/json" \
  -d '{"username":"admin","password":"admin123"}' | grep -o '"access_token":"[^"]*' | cut -d'"' -f4)

# ä½¿ç”¨ Token è¯·æ±‚æ•°æ®
curl -s -H "Authorization: Bearer $TOKEN" \
  http://localhost:8000/api/auth/user | python3 -m json.tool


âŒ é”™è¯¯ä»£ç 
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

200: æˆåŠŸ
201: å·²åˆ›å»º
400: è¯·æ±‚é”™è¯¯
401: æœªæˆæƒ (Token æ— æ•ˆæˆ–è¿‡æœŸ)
403: ç¦æ­¢è®¿é—®
404: èµ„æºä¸å­˜åœ¨
422: éªŒè¯å¤±è´¥
500: æœåŠ¡å™¨é”™è¯¯


ğŸ“š è¯¦ç»†æ–‡æ¡£
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

å®Œæ•´ API æ–‡æ¡£:
/opt/claude/mystocks_spec/docs/api/API_DOCUMENTATION_2025-11-30.md

åŒ…å«å†…å®¹:
- æ‰€æœ‰ API ç«¯ç‚¹çš„è¯¦ç»†æ–‡æ¡£
- è¯·æ±‚/å“åº”ç¤ºä¾‹
- é”™è¯¯å¤„ç†
- å®Œæ•´å·¥ä½œæµ
- å„ç§ç¼–ç¨‹è¯­è¨€çš„ç¤ºä¾‹ä»£ç 

â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
