{
  "metadata": {
    "version": "1.0.0",
    "generation_date": "2025-10-19T10:00:10.599171",
    "total_modules": 214,
    "total_classes": 266,
    "total_functions": 1557,
    "total_lines": 64110,
    "avg_function_complexity": 3.5645472061657033,
    "max_function_complexity": 29,
    "category_stats": {
      "core": {
        "modules": 32,
        "classes": 31,
        "functions": 262,
        "lines": 10461
      },
      "auxiliary": {
        "modules": 57,
        "classes": 70,
        "functions": 500,
        "lines": 20646
      },
      "infrastructure": {
        "modules": 42,
        "classes": 71,
        "functions": 258,
        "lines": 11743
      },
      "monitoring": {
        "modules": 25,
        "classes": 33,
        "functions": 258,
        "lines": 9279
      },
      "utility": {
        "modules": 22,
        "classes": 46,
        "functions": 158,
        "lines": 6698
      },
      "unknown": {
        "modules": 36,
        "classes": 15,
        "functions": 121,
        "lines": 5283
      }
    }
  },
  "modules": [
    {
      "file_path": "test_ths_industry.py",
      "module_name": "test_ths_industry",
      "category": "unknown",
      "docstring": "测试同花顺行业一览表数据获取功能\n\n该脚本用于测试新添加的同花顺行业数据获取功能，包括：\n1. 获取同花顺行业一览表\n2. 获取指定行业的成分股数据",
      "lines_of_code": 166,
      "blank_lines": 38,
      "comment_lines": 18,
      "last_modified": "2025-09-26T22:46:59.822600",
      "imports": [
        "sys",
        "os",
        "pandas",
        "adapters.akshare_adapter"
      ],
      "classes": [],
      "functions": [
        {
          "name": "test_ths_industry_summary",
          "line_number": 21,
          "return_type": null,
          "docstring": "测试获取同花顺行业一览表数据",
          "is_async": false,
          "decorators": [],
          "body_lines": 34,
          "complexity": 3,
          "parameters": []
        },
        {
          "name": "test_ths_industry_names",
          "line_number": 58,
          "return_type": null,
          "docstring": "测试获取同花顺行业名称列表",
          "is_async": false,
          "decorators": [],
          "body_lines": 34,
          "complexity": 3,
          "parameters": []
        },
        {
          "name": "test_ths_industry_stocks",
          "line_number": 95,
          "return_type": null,
          "docstring": "测试获取指定行业的成分股数据",
          "is_async": false,
          "decorators": [],
          "body_lines": 34,
          "complexity": 3,
          "parameters": [
            {
              "name": "industry_name",
              "type_annotation": "str",
              "default_value": "\"银行\"",
              "is_required": false
            }
          ]
        },
        {
          "name": "main",
          "line_number": 132,
          "return_type": null,
          "docstring": "主测试函数",
          "is_async": false,
          "decorators": [],
          "body_lines": 30,
          "complexity": 3,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "check_mysql_tables.py",
      "module_name": "check_mysql_tables",
      "category": "unknown",
      "docstring": null,
      "lines_of_code": 50,
      "blank_lines": 9,
      "comment_lines": 5,
      "last_modified": "2025-10-12T15:14:21.578669",
      "imports": [
        "mysql.connector",
        "os",
        "dotenv"
      ],
      "classes": [],
      "functions": [
        {
          "name": "check_mysql_tables",
          "line_number": 8,
          "return_type": null,
          "docstring": null,
          "is_async": false,
          "decorators": [],
          "body_lines": 39,
          "complexity": 5,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "monitoring.py",
      "module_name": "monitoring",
      "category": "monitoring",
      "docstring": "MyStocks 量化交易数据管理系统 - 监控与自动化模块\n完整的监控体系、自动化运维和数据管理\n\n基于原始设计理念：\n1. 监控数据库与业务数据库完全分离\n2. 完整记录所有数据库操作\n3. 自动化维护和告警机制\n4. 数据质量监控和性能优化\n\n作者: MyStocks项目组\n版本: v2.0 重构版\n日期: 2025-09-21",
      "lines_of_code": 1053,
      "blank_lines": 200,
      "comment_lines": 49,
      "last_modified": "2025-09-24T15:26:45.494617",
      "imports": [
        "os",
        "json",
        "time",
        "schedule",
        "pymysql",
        "datetime",
        "typing",
        "enum",
        "abc",
        "dataclasses",
        "pandas",
        "logging",
        "dotenv",
        "core"
      ],
      "classes": [
        {
          "name": "OperationMetrics",
          "line_number": 42,
          "base_classes": [],
          "docstring": "操作指标数据类",
          "decorators": [
            "dataclass"
          ],
          "is_abstract": false,
          "methods": [
            {
              "name": "mark_completed",
              "line_number": 56,
              "return_type": null,
              "docstring": "标记操作完成",
              "is_async": false,
              "decorators": [],
              "body_lines": 5,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data_count",
                  "type_annotation": "int",
                  "default_value": "0",
                  "is_required": false
                }
              ]
            },
            {
              "name": "mark_failed",
              "line_number": 63,
              "return_type": null,
              "docstring": "标记操作失败",
              "is_async": false,
              "decorators": [],
              "body_lines": 5,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "error_message",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        },
        {
          "name": "AlertLevel",
          "line_number": 70,
          "base_classes": [
            "Enum"
          ],
          "docstring": "告警级别",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "Alert",
          "line_number": 78,
          "base_classes": [],
          "docstring": "告警数据类",
          "decorators": [
            "dataclass"
          ],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "MonitoringDatabase",
          "line_number": 89,
          "base_classes": [],
          "docstring": "监控数据库管理器 - 与业务数据库完全分离",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 92,
              "return_type": null,
              "docstring": "初始化监控数据库\n\nArgs:\n    monitor_db_url: 监控数据库连接URL",
              "is_async": false,
              "decorators": [],
              "body_lines": 28,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "monitor_db_url",
                  "type_annotation": "str",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "_get_monitor_connection",
              "line_number": 122,
              "return_type": null,
              "docstring": "获取监控数据库连接",
              "is_async": false,
              "decorators": [],
              "body_lines": 7,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_ensure_monitoring_tables",
              "line_number": 131,
              "return_type": null,
              "docstring": "确保监控表结构存在",
              "is_async": false,
              "decorators": [],
              "body_lines": 38,
              "complexity": 6,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_init_monitoring_tables",
              "line_number": 171,
              "return_type": null,
              "docstring": "初始化监控表结构",
              "is_async": false,
              "decorators": [],
              "body_lines": 7,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "log_operation_start",
              "line_number": 180,
              "return_type": "str",
              "docstring": "记录操作开始\n\nReturns:\n    str: 操作ID",
              "is_async": false,
              "decorators": [],
              "body_lines": 31,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "database_type",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "database_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "operation_type",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "operation_details",
                  "type_annotation": "Dict",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "log_operation_result",
              "line_number": 215,
              "return_type": null,
              "docstring": "记录操作结果\n\nArgs:\n    operation_id: 操作ID\n    success: 是否成功\n    data_count: 数据条数\n    error_message: 错误信息",
              "is_async": false,
              "decorators": [],
              "body_lines": 25,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "operation_id",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "success",
                  "type_annotation": "bool",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data_count",
                  "type_annotation": "int",
                  "default_value": "0",
                  "is_required": false
                },
                {
                  "name": "error_message",
                  "type_annotation": "str",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "_insert_operation_log",
              "line_number": 243,
              "return_type": null,
              "docstring": "插入操作日志到监控数据库",
              "is_async": false,
              "decorators": [],
              "body_lines": 28,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "log_data",
                  "type_annotation": "Dict",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_update_operation_log",
              "line_number": 273,
              "return_type": null,
              "docstring": "更新操作日志",
              "is_async": false,
              "decorators": [],
              "body_lines": 35,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "operation_id",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "update_data",
                  "type_annotation": "Dict",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_operation_statistics",
              "line_number": 310,
              "return_type": "Dict[(str, Any)]",
              "docstring": "获取操作统计信息\n\nArgs:\n    hours: 统计时间范围（小时）\n\nReturns:\n    Dict: 统计信息",
              "is_async": false,
              "decorators": [],
              "body_lines": 74,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "hours",
                  "type_annotation": "int",
                  "default_value": "24",
                  "is_required": false
                }
              ]
            },
            {
              "name": "get_table_creation_history",
              "line_number": 386,
              "return_type": "List[Dict]",
              "docstring": "获取表创建历史\n\nArgs:\n    limit: 返回记录数限制\n    \nReturns:\n    List[Dict]: 创建历史记录",
              "is_async": false,
              "decorators": [],
              "body_lines": 20,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "limit",
                  "type_annotation": "int",
                  "default_value": "50",
                  "is_required": false
                }
              ]
            }
          ]
        },
        {
          "name": "DataQualityMonitor",
          "line_number": 408,
          "base_classes": [],
          "docstring": "数据质量监控器",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 411,
              "return_type": null,
              "docstring": "初始化数据质量监控器\n\nArgs:\n    config_manager: 配置管理器",
              "is_async": false,
              "decorators": [],
              "body_lines": 8,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "config_manager",
                  "type_annotation": "ConfigDrivenTableManager",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_load_quality_rules",
              "line_number": 422,
              "return_type": "Dict[(str, Any)]",
              "docstring": "加载数据质量规则",
              "is_async": false,
              "decorators": [],
              "body_lines": 19,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "check_data_completeness",
              "line_number": 443,
              "return_type": "Dict[(str, Any)]",
              "docstring": "检查数据完整性\n\nArgs:\n    classification: 数据分类\n    \nReturns:\n    Dict: 完整性检查结果",
              "is_async": false,
              "decorators": [],
              "body_lines": 30,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "classification",
                  "type_annotation": "DataClassification",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_check_daily_kline_completeness",
              "line_number": 475,
              "return_type": "Dict[(str, Any)]",
              "docstring": "检查日线数据完整性",
              "is_async": false,
              "decorators": [],
              "body_lines": 7,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_check_symbols_completeness",
              "line_number": 484,
              "return_type": "Dict[(str, Any)]",
              "docstring": "检查股票信息完整性",
              "is_async": false,
              "decorators": [],
              "body_lines": 7,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "check_data_freshness",
              "line_number": 493,
              "return_type": "Dict[(str, Any)]",
              "docstring": "检查数据新鲜度\n\nReturns:\n    Dict: 新鲜度检查结果",
              "is_async": false,
              "decorators": [],
              "body_lines": 30,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_check_table_freshness",
              "line_number": 525,
              "return_type": "Dict[(str, Any)]",
              "docstring": "检查单个表的数据新鲜度\n\nArgs:\n    table_name: 表名\n    threshold_hours: 阈值（小时）\n    \nReturns:\n    Dict: 新鲜度检查结果",
              "is_async": false,
              "decorators": [],
              "body_lines": 29,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "threshold_hours",
                  "type_annotation": "int",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "check_data_accuracy",
              "line_number": 556,
              "return_type": "Dict[(str, Any)]",
              "docstring": "检查数据准确性\n\nArgs:\n    classification: 数据分类\n    sample_size: 采样大小\n    \nReturns:\n    Dict: 准确性检查结果",
              "is_async": false,
              "decorators": [],
              "body_lines": 30,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "classification",
                  "type_annotation": "DataClassification",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "sample_size",
                  "type_annotation": "int",
                  "default_value": "1000",
                  "is_required": false
                }
              ]
            },
            {
              "name": "_check_price_data_accuracy",
              "line_number": 589,
              "return_type": "Dict[(str, Any)]",
              "docstring": "检查价格数据准确性",
              "is_async": false,
              "decorators": [],
              "body_lines": 7,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "sample_size",
                  "type_annotation": "int",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "generate_quality_report",
              "line_number": 598,
              "return_type": "Dict[(str, Any)]",
              "docstring": "生成数据质量报告\n\nReturns:\n    Dict: 质量报告",
              "is_async": false,
              "decorators": [],
              "body_lines": 58,
              "complexity": 7,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_generate_recommendations",
              "line_number": 658,
              "return_type": "List[str]",
              "docstring": "根据报告生成改进建议\n\nArgs:\n    report: 质量报告\n    \nReturns:\n    List[str]: 改进建议列表",
              "is_async": false,
              "decorators": [],
              "body_lines": 25,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "report",
                  "type_annotation": "Dict[(str, Any)]",
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        },
        {
          "name": "PerformanceMonitor",
          "line_number": 685,
          "base_classes": [],
          "docstring": "性能监控器",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 688,
              "return_type": null,
              "docstring": "初始化性能监控器",
              "is_async": false,
              "decorators": [],
              "body_lines": 3,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "record_operation_metrics",
              "line_number": 694,
              "return_type": null,
              "docstring": "记录操作指标\n\nArgs:\n    metrics: 操作指标",
              "is_async": false,
              "decorators": [],
              "body_lines": 20,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "metrics",
                  "type_annotation": "OperationMetrics",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_alert_slow_operation",
              "line_number": 716,
              "return_type": null,
              "docstring": "告警慢操作",
              "is_async": false,
              "decorators": [],
              "body_lines": 4,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "metrics",
                  "type_annotation": "OperationMetrics",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_performance_summary",
              "line_number": 722,
              "return_type": "Dict[(str, Any)]",
              "docstring": "获取性能摘要\n\nArgs:\n    hours: 统计时间范围（小时）\n    \nReturns:\n    Dict: 性能摘要",
              "is_async": false,
              "decorators": [],
              "body_lines": 50,
              "complexity": 7,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "hours",
                  "type_annotation": "int",
                  "default_value": "24",
                  "is_required": false
                }
              ]
            },
            {
              "name": "get_slow_operations",
              "line_number": 774,
              "return_type": "List[Dict[(str, Any)]]",
              "docstring": "获取慢操作列表\n\nArgs:\n    hours: 时间范围（小时）\n    limit: 返回数量限制\n    \nReturns:\n    List[Dict]: 慢操作列表",
              "is_async": false,
              "decorators": [],
              "body_lines": 36,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "hours",
                  "type_annotation": "int",
                  "default_value": "24",
                  "is_required": false
                },
                {
                  "name": "limit",
                  "type_annotation": "int",
                  "default_value": "10",
                  "is_required": false
                }
              ]
            }
          ]
        },
        {
          "name": "AlertManager",
          "line_number": 812,
          "base_classes": [],
          "docstring": "告警管理器",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 815,
              "return_type": null,
              "docstring": "初始化告警管理器\n\nArgs:\n    config: 告警配置",
              "is_async": false,
              "decorators": [],
              "body_lines": 9,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "config",
                  "type_annotation": "Dict[(str, Any)]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "_get_default_alert_config",
              "line_number": 827,
              "return_type": "Dict[(str, Any)]",
              "docstring": "获取默认告警配置",
              "is_async": false,
              "decorators": [],
              "body_lines": 14,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_init_alert_channels",
              "line_number": 843,
              "return_type": "Dict[(str, Any)]",
              "docstring": "初始化告警渠道",
              "is_async": false,
              "decorators": [],
              "body_lines": 13,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "create_alert",
              "line_number": 858,
              "return_type": "Alert",
              "docstring": "创建告警\n\nArgs:\n    level: 告警级别\n    title: 告警标题\n    message: 告警消息\n    source: 告警源\n    \nReturns:\n    Alert: 告警对象",
              "is_async": false,
              "decorators": [],
              "body_lines": 33,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "level",
                  "type_annotation": "AlertLevel",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "title",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "message",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "source",
                  "type_annotation": "str",
                  "default_value": "\"system\"",
                  "is_required": false
                }
              ]
            },
            {
              "name": "_send_alert",
              "line_number": 894,
              "return_type": null,
              "docstring": "发送告警到各个渠道\n\nArgs:\n    alert: 告警对象",
              "is_async": false,
              "decorators": [],
              "body_lines": 15,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "alert",
                  "type_annotation": "Alert",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "resolve_alert",
              "line_number": 911,
              "return_type": null,
              "docstring": "解决告警\n\nArgs:\n    alert_id: 告警ID",
              "is_async": false,
              "decorators": [],
              "body_lines": 16,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "alert_id",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_active_alerts",
              "line_number": 929,
              "return_type": "List[Alert]",
              "docstring": "获取活跃告警\n\nArgs:\n    level: 过滤告警级别\n    \nReturns:\n    List[Alert]: 活跃告警列表",
              "is_async": false,
              "decorators": [],
              "body_lines": 20,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "level",
                  "type_annotation": "AlertLevel",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "cleanup_old_alerts",
              "line_number": 951,
              "return_type": null,
              "docstring": "清理旧告警\n\nArgs:\n    days: 保留天数",
              "is_async": false,
              "decorators": [],
              "body_lines": 21,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "days",
                  "type_annotation": "int",
                  "default_value": "7",
                  "is_required": false
                }
              ]
            }
          ]
        },
        {
          "name": "AlertChannel",
          "line_number": 974,
          "base_classes": [
            "ABC"
          ],
          "docstring": "告警渠道抽象基类",
          "decorators": [],
          "is_abstract": true,
          "methods": [
            {
              "name": "send_alert",
              "line_number": 978,
              "return_type": null,
              "docstring": "发送告警",
              "is_async": false,
              "decorators": [
                "abstractmethod"
              ],
              "body_lines": 2,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "alert",
                  "type_annotation": "Alert",
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        },
        {
          "name": "LogAlertChannel",
          "line_number": 982,
          "base_classes": [
            "AlertChannel"
          ],
          "docstring": "日志告警渠道",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 985,
              "return_type": null,
              "docstring": null,
              "is_async": false,
              "decorators": [],
              "body_lines": 1,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "config",
                  "type_annotation": "Dict[(str, Any)]",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "send_alert",
              "line_number": 988,
              "return_type": null,
              "docstring": "发送告警到日志",
              "is_async": false,
              "decorators": [],
              "body_lines": 11,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "alert",
                  "type_annotation": "Alert",
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        },
        {
          "name": "EmailAlertChannel",
          "line_number": 1001,
          "base_classes": [
            "AlertChannel"
          ],
          "docstring": "邮件告警渠道",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 1004,
              "return_type": null,
              "docstring": null,
              "is_async": false,
              "decorators": [],
              "body_lines": 5,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "config",
                  "type_annotation": "Dict[(str, Any)]",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "send_alert",
              "line_number": 1011,
              "return_type": null,
              "docstring": "发送告警邮件",
              "is_async": false,
              "decorators": [],
              "body_lines": 11,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "alert",
                  "type_annotation": "Alert",
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        },
        {
          "name": "WebhookAlertChannel",
          "line_number": 1024,
          "base_classes": [
            "AlertChannel"
          ],
          "docstring": "Webhook告警渠道",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 1027,
              "return_type": null,
              "docstring": null,
              "is_async": false,
              "decorators": [],
              "body_lines": 2,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "config",
                  "type_annotation": "Dict[(str, Any)]",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "send_alert",
              "line_number": 1031,
              "return_type": null,
              "docstring": "发送告警到Webhook",
              "is_async": false,
              "decorators": [],
              "body_lines": 20,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "alert",
                  "type_annotation": "Alert",
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": []
    },
    {
      "file_path": "test_unified_manager_financial.py",
      "module_name": "test_unified_manager_financial",
      "category": "core",
      "docstring": null,
      "lines_of_code": 68,
      "blank_lines": 10,
      "comment_lines": 6,
      "last_modified": "2025-09-21T01:29:30.887367",
      "imports": [
        "sys",
        "os",
        "manager.unified_data_manager"
      ],
      "classes": [],
      "functions": [
        {
          "name": "test_unified_manager_with_financial",
          "line_number": 9,
          "return_type": null,
          "docstring": "测试UnifiedDataManager使用FinancialDataSource",
          "is_async": false,
          "decorators": [],
          "body_lines": 56,
          "complexity": 9,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "test_tdx_mvp.py",
      "module_name": "test_tdx_mvp",
      "category": "monitoring",
      "docstring": "TDX数据源适配器 MVP测试脚本\n\n测试User Story 1和2:\n- 实时行情查询\n- 历史K线数据获取(股票+指数)\n\n作者: MyStocks Team\n日期: 2025-10-15",
      "lines_of_code": 245,
      "blank_lines": 61,
      "comment_lines": 7,
      "last_modified": "2025-10-15T19:04:12.305009",
      "imports": [
        "logging",
        "datetime",
        "adapters.tdx_adapter"
      ],
      "classes": [],
      "functions": [
        {
          "name": "test_server_config",
          "line_number": 25,
          "return_type": null,
          "docstring": "测试1: 服务器配置加载",
          "is_async": false,
          "decorators": [],
          "body_lines": 20,
          "complexity": 4,
          "parameters": []
        },
        {
          "name": "test_real_time_quote",
          "line_number": 48,
          "return_type": null,
          "docstring": "测试2: 实时行情查询 (User Story 1)",
          "is_async": false,
          "decorators": [],
          "body_lines": 40,
          "complexity": 4,
          "parameters": []
        },
        {
          "name": "test_stock_daily",
          "line_number": 91,
          "return_type": null,
          "docstring": "测试3: 股票日线数据 (User Story 2)",
          "is_async": false,
          "decorators": [],
          "body_lines": 40,
          "complexity": 4,
          "parameters": []
        },
        {
          "name": "test_index_daily",
          "line_number": 134,
          "return_type": null,
          "docstring": "测试4: 指数日线数据 (User Story 2)",
          "is_async": false,
          "decorators": [],
          "body_lines": 40,
          "complexity": 4,
          "parameters": []
        },
        {
          "name": "test_error_handling",
          "line_number": 177,
          "return_type": null,
          "docstring": "测试5: 错误处理",
          "is_async": false,
          "decorators": [],
          "body_lines": 25,
          "complexity": 3,
          "parameters": []
        },
        {
          "name": "main",
          "line_number": 205,
          "return_type": null,
          "docstring": "运行所有测试",
          "is_async": false,
          "decorators": [],
          "body_lines": 35,
          "complexity": 3,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "test_us2_acceptance.py",
      "module_name": "test_us2_acceptance",
      "category": "core",
      "docstring": "US2验收测试 - 配置驱动表结构管理\n\n验证US2的完整功能:\n- T024: 配置验证测试\n- T025: US2安全模式验收测试\n\n验收标准:\n1. 可通过YAML配置自动创建所有表\n2. 安全模式正确执行（添加列自动，删除/修改需确认）\n3. 配置错误有明确提示\n\n创建日期: 2025-10-12",
      "lines_of_code": 325,
      "blank_lines": 57,
      "comment_lines": 22,
      "last_modified": "2025-10-12T02:29:02.632526",
      "imports": [
        "logging",
        "sys",
        "pathlib",
        "tempfile",
        "os",
        "core.config_driven_table_manager"
      ],
      "classes": [],
      "functions": [
        {
          "name": "test_config_validation",
          "line_number": 35,
          "return_type": null,
          "docstring": "T024: 配置验证测试",
          "is_async": false,
          "decorators": [],
          "body_lines": 121,
          "complexity": 14,
          "parameters": []
        },
        {
          "name": "test_safe_mode",
          "line_number": 159,
          "return_type": null,
          "docstring": "T025: US2安全模式验收测试",
          "is_async": false,
          "decorators": [],
          "body_lines": 111,
          "complexity": 10,
          "parameters": []
        },
        {
          "name": "main",
          "line_number": 273,
          "return_type": null,
          "docstring": "主测试函数",
          "is_async": false,
          "decorators": [],
          "body_lines": 46,
          "complexity": 3,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "test_save_realtime_data.py",
      "module_name": "test_save_realtime_data",
      "category": "auxiliary",
      "docstring": "测试和验证 save_realtime_data.py 程序\n展示完整的数据库保存工作流程",
      "lines_of_code": 221,
      "blank_lines": 44,
      "comment_lines": 20,
      "last_modified": "2025-09-21T19:52:00.828301",
      "imports": [
        "sys",
        "os",
        "pandas",
        "datetime",
        "save_realtime_data",
        "db_manager.database_manager"
      ],
      "classes": [],
      "functions": [
        {
          "name": "test_basic_save",
          "line_number": 20,
          "return_type": null,
          "docstring": "测试基本的数据保存功能",
          "is_async": false,
          "decorators": [],
          "body_lines": 18,
          "complexity": 2,
          "parameters": []
        },
        {
          "name": "test_saver_class",
          "line_number": 40,
          "return_type": null,
          "docstring": "测试 RealtimeDataSaver 类的功能",
          "is_async": false,
          "decorators": [],
          "body_lines": 25,
          "complexity": 2,
          "parameters": []
        },
        {
          "name": "test_dataframe_preparation",
          "line_number": 67,
          "return_type": null,
          "docstring": "测试数据准备和处理功能",
          "is_async": false,
          "decorators": [],
          "body_lines": 37,
          "complexity": 2,
          "parameters": []
        },
        {
          "name": "test_different_modes",
          "line_number": 106,
          "return_type": null,
          "docstring": "测试不同的数据更新模式",
          "is_async": false,
          "decorators": [],
          "body_lines": 24,
          "complexity": 3,
          "parameters": []
        },
        {
          "name": "test_error_handling",
          "line_number": 132,
          "return_type": null,
          "docstring": "测试错误处理机制",
          "is_async": false,
          "decorators": [],
          "body_lines": 30,
          "complexity": 3,
          "parameters": []
        },
        {
          "name": "run_comprehensive_test",
          "line_number": 164,
          "return_type": null,
          "docstring": "运行综合测试",
          "is_async": false,
          "decorators": [],
          "body_lines": 54,
          "complexity": 7,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "test_tdx_multiperiod.py",
      "module_name": "test_tdx_multiperiod",
      "category": "monitoring",
      "docstring": "TDX多周期K线功能测试\n\n测试新增功能:\n- 分钟K线 (1m, 5m, 15m, 30m)\n- 小时K线 (1h)\n- 日线 (1d) - 使用新的通用接口\n\n作者: MyStocks Team\n日期: 2025-10-15",
      "lines_of_code": 149,
      "blank_lines": 35,
      "comment_lines": 6,
      "last_modified": "2025-10-15T19:24:05.707335",
      "imports": [
        "logging",
        "datetime",
        "adapters.tdx_adapter"
      ],
      "classes": [],
      "functions": [
        {
          "name": "test_multiperiod_klines",
          "line_number": 19,
          "return_type": null,
          "docstring": "测试多周期K线获取",
          "is_async": false,
          "decorators": [],
          "body_lines": 80,
          "complexity": 7,
          "parameters": []
        },
        {
          "name": "test_index_multiperiod",
          "line_number": 102,
          "return_type": null,
          "docstring": "测试指数多周期K线",
          "is_async": false,
          "decorators": [],
          "body_lines": 29,
          "complexity": 3,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "test_tdx_api.py",
      "module_name": "test_tdx_api",
      "category": "unknown",
      "docstring": "测试TDX API接口",
      "lines_of_code": 156,
      "blank_lines": 29,
      "comment_lines": 10,
      "last_modified": "2025-10-15T21:54:16.729809",
      "imports": [
        "sys",
        "os",
        "fastapi.testclient",
        "app.main",
        "json"
      ],
      "classes": [],
      "functions": [
        {
          "name": "test_health_check",
          "line_number": 17,
          "return_type": null,
          "docstring": "测试健康检查接口(不需要认证)",
          "is_async": false,
          "decorators": [],
          "body_lines": 6,
          "complexity": 1,
          "parameters": []
        },
        {
          "name": "get_auth_token",
          "line_number": 26,
          "return_type": null,
          "docstring": "获取认证令牌",
          "is_async": false,
          "decorators": [],
          "body_lines": 14,
          "complexity": 2,
          "parameters": []
        },
        {
          "name": "test_stock_quote",
          "line_number": 43,
          "return_type": null,
          "docstring": "测试股票实时行情接口",
          "is_async": false,
          "decorators": [],
          "body_lines": 14,
          "complexity": 2,
          "parameters": [
            {
              "name": "token",
              "type_annotation": null,
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "test_index_quote",
          "line_number": 60,
          "return_type": null,
          "docstring": "测试指数实时行情接口",
          "is_async": false,
          "decorators": [],
          "body_lines": 13,
          "complexity": 2,
          "parameters": [
            {
              "name": "token",
              "type_annotation": null,
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "test_stock_kline",
          "line_number": 76,
          "return_type": null,
          "docstring": "测试股票K线接口",
          "is_async": false,
          "decorators": [],
          "body_lines": 17,
          "complexity": 3,
          "parameters": [
            {
              "name": "token",
              "type_annotation": null,
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "test_invalid_requests",
          "line_number": 96,
          "return_type": null,
          "docstring": "测试无效请求",
          "is_async": false,
          "decorators": [],
          "body_lines": 21,
          "complexity": 1,
          "parameters": [
            {
              "name": "token",
              "type_annotation": null,
              "default_value": null,
              "is_required": true
            }
          ]
        }
      ]
    },
    {
      "file_path": "unified_manager.py",
      "module_name": "unified_manager",
      "category": "core",
      "docstring": "MyStocks统一数据管理器 - 集成监控版本 (US1 + US3)\n\n这是系统的核心入口,提供统一的数据保存和加载接口。\n用户只需调用save_data_by_classification()和load_data_by_classification(),\n系统自动根据数据分类路由到最优数据库。\n\n新增功能 (US3):\n- 所有操作自动记录到监控数据库\n- 性能指标自动收集\n- 慢查询自动告警\n- 数据质量自动检查\n\n创建日期: 2025-10-11\n版本: 2.0.0 (MVP US1 + US3监控集成)",
      "lines_of_code": 742,
      "blank_lines": 114,
      "comment_lines": 47,
      "last_modified": "2025-10-11T22:12:41.703004",
      "imports": [
        "pandas",
        "time",
        "logging",
        "typing",
        "datetime",
        "core.data_classification",
        "core.data_storage_strategy",
        "core.batch_failure_strategy",
        "data_access",
        "utils.failure_recovery_queue",
        "monitoring.monitoring_database",
        "monitoring.performance_monitor",
        "monitoring.data_quality_monitor",
        "monitoring.alert_manager"
      ],
      "classes": [
        {
          "name": "MyStocksUnifiedManager",
          "line_number": 48,
          "base_classes": [],
          "docstring": "MyStocks统一数据管理器\n\n**核心功能** (MVP US1):\n1. 自动路由: 根据数据分类自动选择最优数据库\n2. 统一接口: 2行代码完成保存/加载操作\n3. 故障恢复: 数据库不可用时自动排队,数据不丢失\n4. 批量操作: 支持10万条记录的高性能批量保存\n\n**使用示例**:\n    ```python\n    manager = MyStocksUnifiedManager()\n\n    # 保存Tick数据 → 自动路由到TDengine\n    manager.save_data_by_classification(\n        DataClassification.TICK_DATA,\n        tick_df,\n        table_name='tick_600000'\n    )\n\n    # 加载日线数据 → 自动路由到PostgreSQL\n    kline_df = manager.load_data_by_classification(\n        DataClassification.DAILY_KLINE,\n        table_name='daily_kline',\n        filters={'symbol': '600000.SH'}\n    )\n    ```",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 78,
              "return_type": null,
              "docstring": "初始化统一管理器\n\nArgs:\n    enable_monitoring: 是否启用监控功能 (默认True)",
              "is_async": false,
              "decorators": [],
              "body_lines": 41,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "enable_monitoring",
                  "type_annotation": "bool",
                  "default_value": "True",
                  "is_required": false
                }
              ]
            },
            {
              "name": "save_data_by_classification",
              "line_number": 121,
              "return_type": "bool",
              "docstring": "按分类保存数据 (核心方法 #1)\n\n根据数据分类自动选择最优数据库并保存数据。\n如果目标数据库不可用,数据自动加入故障恢复队列。\n\nArgs:\n    classification: 数据分类枚举\n    data: 数据DataFrame\n    table_name: 目标表名\n    **kwargs: 额外参数 (如ttl, timestamp_col等)\n\nReturns:\n    bool: 保存是否成功\n\nRaises:\n    ValueError: 未知的数据分类\n\nExample:\n    # 保存分钟线数据\n    success = manager.save_data_by_classification(\n        DataClassification.MINUTE_KLINE,\n        kline_df,\n        table_name='minute_kline_600000',\n        timestamp_col='ts'\n    )",
              "is_async": false,
              "decorators": [],
              "body_lines": 120,
              "complexity": 15,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "classification",
                  "type_annotation": "DataClassification",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "**kwargs",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": false
                }
              ]
            },
            {
              "name": "load_data_by_classification",
              "line_number": 249,
              "return_type": "pd.DataFrame",
              "docstring": "按分类加载数据 (核心方法 #2)\n\n根据数据分类自动选择最优数据库并查询数据。\n\nArgs:\n    classification: 数据分类枚举\n    table_name: 表名\n    filters: 过滤条件 {'symbol': '600000.SH', 'date >= ': '2025-01-01'}\n    columns: 查询字段列表\n    limit: 返回行数限制\n    **kwargs: 额外参数 (如start_time, end_time等)\n\nReturns:\n    查询结果DataFrame\n\nExample:\n    # 加载日线数据\n    df = manager.load_data_by_classification(\n        DataClassification.DAILY_KLINE,\n        table_name='daily_kline',\n        filters={'symbol': '600000.SH'},\n        start_time=datetime(2025, 1, 1),\n        end_time=datetime(2025, 12, 31)\n    )",
              "is_async": false,
              "decorators": [],
              "body_lines": 125,
              "complexity": 18,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "classification",
                  "type_annotation": "DataClassification",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "filters",
                  "type_annotation": "Optional[Dict[(str, Any)]]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "columns",
                  "type_annotation": "Optional[List[str]]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "limit",
                  "type_annotation": "Optional[int]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "**kwargs",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": false
                }
              ]
            },
            {
              "name": "_save_to_redis",
              "line_number": 384,
              "return_type": null,
              "docstring": "保存数据到Redis\n\n根据数据结构选择最优Redis数据类型:\n- 单条记录 → String\n- 多条记录 → Hash (key-value pairs)",
              "is_async": false,
              "decorators": [],
              "body_lines": 18,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "key",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "ttl",
                  "type_annotation": "Optional[int]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "_load_from_redis",
              "line_number": 404,
              "return_type": "pd.DataFrame",
              "docstring": "从Redis加载数据\n\n自动检测数据类型并返回DataFrame",
              "is_async": false,
              "decorators": [],
              "body_lines": 24,
              "complexity": 6,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "key",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "filters",
                  "type_annotation": "Optional[Dict[(str, Any)]]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "_build_where_clause",
              "line_number": 430,
              "return_type": "str",
              "docstring": "构建WHERE子句\n\nArgs:\n    filters: 过滤条件字典\n\nReturns:\n    WHERE子句字符串\n\nExample:\n    {'symbol': '600000.SH', 'date >= ': '2025-01-01'}\n    → \"symbol = '600000.SH' AND date >= '2025-01-01'\"",
              "is_async": false,
              "decorators": [],
              "body_lines": 32,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "filters",
                  "type_annotation": "Dict[(str, Any)]",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_routing_info",
              "line_number": 464,
              "return_type": "Dict[(str, Any)]",
              "docstring": "获取数据分类的路由信息\n\nArgs:\n    classification: 数据分类\n\nReturns:\n    路由信息字典\n\nExample:\n    info = manager.get_routing_info(DataClassification.TICK_DATA)\n    # {'target_db': 'tdengine', 'retention_days': 30, 'ttl': None}",
              "is_async": false,
              "decorators": [],
              "body_lines": 22,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "classification",
                  "type_annotation": "DataClassification",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "save_data_batch_with_strategy",
              "line_number": 488,
              "return_type": "BatchOperationResult",
              "docstring": "使用指定失败策略保存批量数据 (核心方法 #3)\n\n提供三种失败处理策略:\n- ROLLBACK: 任何失败都回滚整个批次\n- CONTINUE: 跳过失败记录,继续处理\n- RETRY: 自动重试失败记录\n\nArgs:\n    classification: 数据分类枚举\n    data: 数据DataFrame\n    table_name: 目标表名\n    strategy: 失败策略 (默认CONTINUE)\n    **kwargs: 额外参数\n\nReturns:\n    BatchOperationResult: 批量操作结果\n\nExample:\n    # 使用RETRY策略保存10万条Tick数据\n    result = manager.save_data_batch_with_strategy(\n        DataClassification.TICK_DATA,\n        tick_df,\n        table_name='tick_600000',\n        strategy=BatchFailureStrategy.RETRY\n    )\n    print(f\"成功率: {result.success_rate:.2%}\")\n    print(f\"失败记录: {result.failed_records}\")",
              "is_async": false,
              "decorators": [],
              "body_lines": 90,
              "complexity": 10,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "classification",
                  "type_annotation": "DataClassification",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "strategy",
                  "type_annotation": "BatchFailureStrategy",
                  "default_value": "...",
                  "is_required": false
                },
                {
                  "name": "**kwargs",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": false
                }
              ]
            },
            {
              "name": "get_monitoring_statistics",
              "line_number": 587,
              "return_type": "Dict[(str, Any)]",
              "docstring": "获取监控统计信息 (US3)\n\nReturns:\n    dict: 监控统计信息 {\n        'performance': {...},\n        'alerts': {...},\n        'enabled': bool\n    }",
              "is_async": false,
              "decorators": [],
              "body_lines": 26,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "check_data_quality",
              "line_number": 615,
              "return_type": "Dict[(str, Any)]",
              "docstring": "执行数据质量检查 (US3)\n\n支持的检查维度:\n- completeness: 完整性检查 (需要 total_records, null_records)\n- freshness: 新鲜度检查 (需要 latest_timestamp)\n- accuracy: 准确性检查 (需要 total_records, invalid_records)\n\nArgs:\n    classification: 数据分类\n    table_name: 表名\n    **kwargs: 检查参数\n\nReturns:\n    dict: 质量检查结果\n\nExample:\n    # 检查完整性\n    result = manager.check_data_quality(\n        DataClassification.DAILY_KLINE,\n        'daily_kline',\n        check_type='completeness',\n        total_records=10000,\n        null_records=50\n    )",
              "is_async": false,
              "decorators": [],
              "body_lines": 69,
              "complexity": 6,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "classification",
                  "type_annotation": "DataClassification",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "**kwargs",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": false
                }
              ]
            },
            {
              "name": "close_all_connections",
              "line_number": 691,
              "return_type": null,
              "docstring": "关闭所有数据库连接",
              "is_async": false,
              "decorators": [],
              "body_lines": 7,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": []
    },
    {
      "file_path": "test_unified_manager.py",
      "module_name": "test_unified_manager",
      "category": "core",
      "docstring": "统一数据管理器测试脚本\n测试UnifiedDataManager使用Customer数据源的功能",
      "lines_of_code": 86,
      "blank_lines": 10,
      "comment_lines": 9,
      "last_modified": "2025-09-21T01:24:58.491980",
      "imports": [
        "sys",
        "os",
        "pandas",
        "manager.unified_data_manager"
      ],
      "classes": [],
      "functions": [
        {
          "name": "test_unified_data_manager_with_customer_source",
          "line_number": 16,
          "return_type": null,
          "docstring": "测试UnifiedDataManager使用Customer数据源",
          "is_async": false,
          "decorators": [],
          "body_lines": 65,
          "complexity": 11,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "check_tdengine_tables.py",
      "module_name": "check_tdengine_tables",
      "category": "unknown",
      "docstring": "检查TDengine中的表",
      "lines_of_code": 128,
      "blank_lines": 24,
      "comment_lines": 15,
      "last_modified": "2025-09-23T02:52:53.494375",
      "imports": [
        "os",
        "sys",
        "db_manager.database_manager"
      ],
      "classes": [],
      "functions": [
        {
          "name": "create_tdengine_database",
          "line_number": 15,
          "return_type": null,
          "docstring": "创建TDengine数据库",
          "is_async": false,
          "decorators": [],
          "body_lines": 26,
          "complexity": 2,
          "parameters": []
        },
        {
          "name": "main",
          "line_number": 43,
          "return_type": null,
          "docstring": "主函数",
          "is_async": false,
          "decorators": [],
          "body_lines": 81,
          "complexity": 10,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "system_demo.py",
      "module_name": "system_demo",
      "category": "monitoring",
      "docstring": "MyStocks 量化交易数据管理系统 - 完整示例和使用指南\n展示如何使用重构后的v2.0系统\n\n完全基于原始设计理念：\n1. 配置驱动 - 一个YAML文件管理所有表结构\n2. 自动化管理 - 避免人工干预数据库操作\n3. 5大数据分类 - 基于数据特性的科学分类\n4. TDengine核心 - 高频数据的专用处理\n5. 监控分离 - 监控数据库与业务数据库完全分离\n\n作者: MyStocks项目组\n版本: v2.0 重构版 - 完整实现\n日期: 2025-09-21",
      "lines_of_code": 608,
      "blank_lines": 102,
      "comment_lines": 41,
      "last_modified": "2025-09-21T21:53:04.893080",
      "imports": [
        "pandas",
        "numpy",
        "datetime",
        "logging",
        "core",
        "unified_manager",
        "monitoring"
      ],
      "classes": [
        {
          "name": "MyStocksV2Demo",
          "line_number": 33,
          "base_classes": [],
          "docstring": "MyStocks v2.0 完整演示",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 36,
              "return_type": null,
              "docstring": "初始化演示系统",
              "is_async": false,
              "decorators": [],
              "body_lines": 15,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "run_complete_demo",
              "line_number": 53,
              "return_type": null,
              "docstring": "运行完整演示",
              "is_async": false,
              "decorators": [],
              "body_lines": 37,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_demo_system_initialization",
              "line_number": 92,
              "return_type": null,
              "docstring": "演示系统初始化",
              "is_async": false,
              "decorators": [],
              "body_lines": 27,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_demo_data_classification",
              "line_number": 121,
              "return_type": null,
              "docstring": "演示5大数据分类体系",
              "is_async": false,
              "decorators": [],
              "body_lines": 21,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_demo_data_storage",
              "line_number": 144,
              "return_type": null,
              "docstring": "演示数据存储功能",
              "is_async": false,
              "decorators": [],
              "body_lines": 39,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_demo_data_retrieval",
              "line_number": 185,
              "return_type": null,
              "docstring": "演示数据查询功能",
              "is_async": false,
              "decorators": [],
              "body_lines": 43,
              "complexity": 6,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_demo_high_frequency_data",
              "line_number": 230,
              "return_type": null,
              "docstring": "演示高频数据处理 (TDengine核心功能)",
              "is_async": false,
              "decorators": [],
              "body_lines": 44,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_demo_realtime_data",
              "line_number": 276,
              "return_type": null,
              "docstring": "演示实时数据处理 (Redis核心功能)",
              "is_async": false,
              "decorators": [],
              "body_lines": 42,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_demo_monitoring_system",
              "line_number": 320,
              "return_type": null,
              "docstring": "演示监控系统功能",
              "is_async": false,
              "decorators": [],
              "body_lines": 36,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_demo_automated_maintenance",
              "line_number": 358,
              "return_type": null,
              "docstring": "演示自动化维护功能",
              "is_async": false,
              "decorators": [],
              "body_lines": 45,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_demo_system_status",
              "line_number": 405,
              "return_type": null,
              "docstring": "演示系统状态检查",
              "is_async": false,
              "decorators": [],
              "body_lines": 36,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_show_summary",
              "line_number": 443,
              "return_type": null,
              "docstring": "显示演示总结",
              "is_async": false,
              "decorators": [],
              "body_lines": 45,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_cleanup_demo",
              "line_number": 490,
              "return_type": null,
              "docstring": "清理演示资源",
              "is_async": false,
              "decorators": [],
              "body_lines": 7,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_generate_sample_daily_data",
              "line_number": 500,
              "return_type": "pd.DataFrame",
              "docstring": "生成示例日线数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 22,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_generate_sample_indicators",
              "line_number": 524,
              "return_type": "pd.DataFrame",
              "docstring": "生成示例技术指标数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 18,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_generate_sample_tick_data",
              "line_number": 544,
              "return_type": "pd.DataFrame",
              "docstring": "生成示例Tick数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 20,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_generate_sample_minute_kline",
              "line_number": 566,
              "return_type": "pd.DataFrame",
              "docstring": "生成示例分钟K线数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 23,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": [
        {
          "name": "main",
          "line_number": 591,
          "return_type": null,
          "docstring": "主程序入口",
          "is_async": false,
          "decorators": [],
          "body_lines": 14,
          "complexity": 3,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "test_import.py",
      "module_name": "test_import",
      "category": "unknown",
      "docstring": null,
      "lines_of_code": 29,
      "blank_lines": 7,
      "comment_lines": 1,
      "last_modified": "2025-09-21T00:50:39.464333",
      "imports": [
        "sys",
        "os"
      ],
      "classes": [],
      "functions": []
    },
    {
      "file_path": "main.py",
      "module_name": "main",
      "category": "core",
      "docstring": "主程序入口\n演示统一数据接口的使用",
      "lines_of_code": 119,
      "blank_lines": 22,
      "comment_lines": 13,
      "last_modified": "2025-09-16T08:59:04.143245",
      "imports": [
        "datetime",
        "sys",
        "os",
        "mystocks.manager.unified_data_manager"
      ],
      "classes": [],
      "functions": [
        {
          "name": "main",
          "line_number": 15,
          "return_type": null,
          "docstring": "主函数：演示统一数据接口的使用",
          "is_async": false,
          "decorators": [],
          "body_lines": 100,
          "complexity": 9,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "run_realtime_market_saver.py",
      "module_name": "run_realtime_market_saver",
      "category": "auxiliary",
      "docstring": "MyStocks 沪深市场A股实时数据保存系统 - 使用efinance和自动路由\n通过customer_adapter统一管理efinance数据获取，按自动路由保存到PostgreSQL\n\n执行说明：\npython run_realtime_market_saver.py [--interval 60] [--count 1]\n\n作者: MyStocks项目组\n日期: 2025-09-24",
      "lines_of_code": 232,
      "blank_lines": 48,
      "comment_lines": 16,
      "last_modified": "2025-10-12T12:37:17.645450",
      "imports": [
        "os",
        "sys",
        "time",
        "argparse",
        "logging",
        "pandas",
        "datetime",
        "core",
        "unified_manager",
        "adapters.customer_adapter"
      ],
      "classes": [],
      "functions": [
        {
          "name": "setup_logging",
          "line_number": 29,
          "return_type": null,
          "docstring": "设置日志",
          "is_async": false,
          "decorators": [],
          "body_lines": 10,
          "complexity": 1,
          "parameters": []
        },
        {
          "name": "get_realtime_market_data_via_adapter",
          "line_number": 41,
          "return_type": null,
          "docstring": "使用customer_adapter获取沪深A股实时行情数据",
          "is_async": false,
          "decorators": [],
          "body_lines": 26,
          "complexity": 4,
          "parameters": []
        },
        {
          "name": "save_to_auto_routing",
          "line_number": 69,
          "return_type": null,
          "docstring": "使用自动路由保存数据到合适的数据库",
          "is_async": false,
          "decorators": [],
          "body_lines": 30,
          "complexity": 3,
          "parameters": [
            {
              "name": "data",
              "type_annotation": null,
              "default_value": null,
              "is_required": true
            },
            {
              "name": "manager",
              "type_annotation": null,
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "run_single_fetch_and_save",
          "line_number": 101,
          "return_type": null,
          "docstring": "执行单次数据获取和保存",
          "is_async": false,
          "decorators": [],
          "body_lines": 22,
          "complexity": 3,
          "parameters": []
        },
        {
          "name": "main",
          "line_number": 125,
          "return_type": null,
          "docstring": "主启动函数",
          "is_async": false,
          "decorators": [],
          "body_lines": 103,
          "complexity": 10,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "__init__.py",
      "module_name": "__init__",
      "category": "unknown",
      "docstring": "MyStocks - 股票数据管理系统\n基于适配器模式和工厂模式实现的多数据源统一接口",
      "lines_of_code": 6,
      "blank_lines": 1,
      "comment_lines": 0,
      "last_modified": "2025-09-16T00:30:38.752130",
      "imports": [],
      "classes": [],
      "functions": []
    },
    {
      "file_path": "test_config_driven_table_manager.py",
      "module_name": "test_config_driven_table_manager",
      "category": "infrastructure",
      "docstring": "测试ConfigDrivenTableManager\n\n验证US2 (T020) 的核心功能:\n1. 配置文件加载正确\n2. 表结构统计准确\n3. 分类映射完整\n4. 安全模式工作正常\n\n创建日期: 2025-10-12",
      "lines_of_code": 250,
      "blank_lines": 58,
      "comment_lines": 16,
      "last_modified": "2025-10-12T02:26:47.289080",
      "imports": [
        "logging",
        "sys",
        "pathlib",
        "core.config_driven_table_manager"
      ],
      "classes": [],
      "functions": [
        {
          "name": "test_config_loading",
          "line_number": 30,
          "return_type": null,
          "docstring": "测试1: 配置文件加载",
          "is_async": false,
          "decorators": [],
          "body_lines": 15,
          "complexity": 2,
          "parameters": []
        },
        {
          "name": "test_table_statistics",
          "line_number": 48,
          "return_type": null,
          "docstring": "测试2: 表统计功能",
          "is_async": false,
          "decorators": [],
          "body_lines": 28,
          "complexity": 4,
          "parameters": [
            {
              "name": "manager",
              "type_annotation": null,
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "test_classification_mapping",
          "line_number": 79,
          "return_type": null,
          "docstring": "测试3: 数据分类映射",
          "is_async": false,
          "decorators": [],
          "body_lines": 42,
          "complexity": 7,
          "parameters": [
            {
              "name": "manager",
              "type_annotation": null,
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "test_safe_mode",
          "line_number": 124,
          "return_type": null,
          "docstring": "测试4: 安全模式功能",
          "is_async": false,
          "decorators": [],
          "body_lines": 26,
          "complexity": 3,
          "parameters": [
            {
              "name": "manager",
              "type_annotation": null,
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "test_config_validation",
          "line_number": 153,
          "return_type": null,
          "docstring": "测试5: 配置内容验证",
          "is_async": false,
          "decorators": [],
          "body_lines": 29,
          "complexity": 3,
          "parameters": [
            {
              "name": "manager",
              "type_annotation": null,
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "main",
          "line_number": 185,
          "return_type": null,
          "docstring": "主测试函数",
          "is_async": false,
          "decorators": [],
          "body_lines": 59,
          "complexity": 4,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "test_financial_data.py",
      "module_name": "test_financial_data",
      "category": "unknown",
      "docstring": "财务数据功能测试脚本\n测试UnifiedDataManager使用Customer数据源获取财务数据的功能",
      "lines_of_code": 74,
      "blank_lines": 9,
      "comment_lines": 8,
      "last_modified": "2025-09-21T01:26:38.247218",
      "imports": [
        "sys",
        "os",
        "pandas",
        "manager.unified_data_manager"
      ],
      "classes": [],
      "functions": [
        {
          "name": "test_financial_data_with_customer_source",
          "line_number": 16,
          "return_type": null,
          "docstring": "测试UnifiedDataManager使用Customer数据源获取财务数据",
          "is_async": false,
          "decorators": [],
          "body_lines": 53,
          "complexity": 8,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "save_realtime_data.py",
      "module_name": "save_realtime_data",
      "category": "auxiliary",
      "docstring": "将通过customer接口获取的股票实时行情数据保存到本地数据库中\n完整的数据库保存工作流程，遵循db_manager的工作原理",
      "lines_of_code": 383,
      "blank_lines": 71,
      "comment_lines": 29,
      "last_modified": "2025-09-21T19:51:13.272823",
      "imports": [
        "sys",
        "os",
        "pandas",
        "logging",
        "time",
        "datetime",
        "typing",
        "dotenv",
        "adapters.customer_adapter",
        "db_manager.database_manager",
        "db_manager.df2sql"
      ],
      "classes": [
        {
          "name": "RealtimeDataSaver",
          "line_number": 49,
          "base_classes": [],
          "docstring": "实时数据保存器 - 完整的数据库保存工作流程",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 52,
              "return_type": null,
              "docstring": "初始化数据保存器",
              "is_async": false,
              "decorators": [],
              "body_lines": 11,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "database_type",
                  "type_annotation": null,
                  "default_value": "DATABASE_TYPE",
                  "is_required": false
                },
                {
                  "name": "database_name",
                  "type_annotation": null,
                  "default_value": "DATABASE_NAME",
                  "is_required": false
                },
                {
                  "name": "table_name",
                  "type_annotation": null,
                  "default_value": "TABLE_NAME",
                  "is_required": false
                },
                {
                  "name": "update_mode",
                  "type_annotation": null,
                  "default_value": "UPDATE_MODE",
                  "is_required": false
                }
              ]
            },
            {
              "name": "_validate_dataframe",
              "line_number": 66,
              "return_type": "bool",
              "docstring": "验证DataFrame数据的有效性",
              "is_async": false,
              "decorators": [],
              "body_lines": 15,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "df",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_prepare_dataframe",
              "line_number": 83,
              "return_type": "pd.DataFrame",
              "docstring": "准备和清理DataFrame数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 16,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "df",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_generate_table_columns",
              "line_number": 101,
              "return_type": "List[Dict]",
              "docstring": "根据DataFrame生成表列定义",
              "is_async": false,
              "decorators": [],
              "body_lines": 45,
              "complexity": 10,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "df",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_create_table_if_not_exists",
              "line_number": 148,
              "return_type": "bool",
              "docstring": "如果表不存在则创建表",
              "is_async": false,
              "decorators": [],
              "body_lines": 29,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "df",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_table_exists",
              "line_number": 179,
              "return_type": "bool",
              "docstring": "检查表是否存在",
              "is_async": false,
              "decorators": [],
              "body_lines": 24,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_insert_data_batch",
              "line_number": 205,
              "return_type": "bool",
              "docstring": "批量插入数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 32,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "df",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "save_realtime_data",
              "line_number": 239,
              "return_type": "bool",
              "docstring": "完整的实时数据保存流程",
              "is_async": false,
              "decorators": [],
              "body_lines": 40,
              "complexity": 8,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "market_symbol",
                  "type_annotation": "str",
                  "default_value": "MARKET_SYMBOL",
                  "is_required": false
                }
              ]
            },
            {
              "name": "cleanup",
              "line_number": 281,
              "return_type": null,
              "docstring": "清理资源",
              "is_async": false,
              "decorators": [],
              "body_lines": 6,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": [
        {
          "name": "save_realtime_data_to_db",
          "line_number": 290,
          "return_type": null,
          "docstring": "将股票实时行情数据保存到数据库 - 向后兼容的函数接口",
          "is_async": false,
          "decorators": [],
          "body_lines": 12,
          "complexity": 1,
          "parameters": [
            {
              "name": "market_symbol",
              "type_annotation": null,
              "default_value": "MARKET_SYMBOL",
              "is_required": false
            },
            {
              "name": "database_type",
              "type_annotation": null,
              "default_value": "DATABASE_TYPE",
              "is_required": false
            },
            {
              "name": "database_name",
              "type_annotation": null,
              "default_value": "DATABASE_NAME",
              "is_required": false
            },
            {
              "name": "table_name",
              "type_annotation": null,
              "default_value": "TABLE_NAME",
              "is_required": false
            },
            {
              "name": "update_mode",
              "type_annotation": null,
              "default_value": "UPDATE_MODE",
              "is_required": false
            }
          ]
        },
        {
          "name": "save_realtime_data_continuous",
          "line_number": 307,
          "return_type": null,
          "docstring": "连续保存实时数据 - 定时任务模式",
          "is_async": false,
          "decorators": [],
          "body_lines": 23,
          "complexity": 5,
          "parameters": [
            {
              "name": "market_symbol",
              "type_annotation": null,
              "default_value": "MARKET_SYMBOL",
              "is_required": false
            },
            {
              "name": "interval_minutes",
              "type_annotation": null,
              "default_value": "5",
              "is_required": false
            },
            {
              "name": "database_type",
              "type_annotation": null,
              "default_value": "DATABASE_TYPE",
              "is_required": false
            },
            {
              "name": "database_name",
              "type_annotation": null,
              "default_value": "DATABASE_NAME",
              "is_required": false
            },
            {
              "name": "table_name",
              "type_annotation": null,
              "default_value": "TABLE_NAME",
              "is_required": false
            }
          ]
        }
      ]
    },
    {
      "file_path": "test_ml_demo.py",
      "module_name": "test_ml_demo",
      "category": "unknown",
      "docstring": "机器学习模块集成演示\n\n完整演示数据流: 数据读取 -> 特征工程 -> 模型训练 -> 预测",
      "lines_of_code": 127,
      "blank_lines": 22,
      "comment_lines": 11,
      "last_modified": "2025-10-19T08:40:07.045627",
      "imports": [
        "sys",
        "os",
        "pandas",
        "numpy",
        "adapters.tdx_adapter",
        "ml_strategy.feature_engineering",
        "ml_strategy.price_predictor"
      ],
      "classes": [],
      "functions": []
    },
    {
      "file_path": "test_financial_adapter.py",
      "module_name": "test_financial_adapter",
      "category": "auxiliary",
      "docstring": "财务数据适配器测试脚本\n测试FinancialDataSource的功能",
      "lines_of_code": 75,
      "blank_lines": 9,
      "comment_lines": 6,
      "last_modified": "2025-09-21T01:27:41.793308",
      "imports": [
        "sys",
        "os",
        "pandas",
        "adapters.financial_adapter"
      ],
      "classes": [],
      "functions": [
        {
          "name": "test_financial_adapter",
          "line_number": 16,
          "return_type": null,
          "docstring": "测试FinancialDataSource的功能",
          "is_async": false,
          "decorators": [],
          "body_lines": 54,
          "complexity": 10,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "core.py",
      "module_name": "core",
      "category": "core",
      "docstring": "MyStocks 量化交易数据管理系统 - 重构版\n完全基于原始设计理念实现的配置驱动、自动化管理系统\n\n设计理念：\n1. 配置驱动 - 通过YAML配置文件管理所有表结构\n2. 自动化管理 - 避免人工手工管理数据库和表\n3. 完整监控 - 专门的监控数据库记录所有操作\n4. 数据分类 - 基于数据特性的5大分类体系\n5. 业务分离 - 监控数据库与业务数据库完全分离\n\n作者: MyStocks项目组\n版本: v2.0 重构版\n日期: 2025-09-21",
      "lines_of_code": 719,
      "blank_lines": 101,
      "comment_lines": 39,
      "last_modified": "2025-09-24T15:30:14.743704",
      "imports": [
        "os",
        "yaml",
        "logging",
        "pandas",
        "datetime",
        "typing",
        "enum",
        "traceback",
        "db_manager.database_manager",
        "db_manager.database_manager"
      ],
      "classes": [
        {
          "name": "DataClassification",
          "line_number": 43,
          "base_classes": [
            "Enum"
          ],
          "docstring": "数据分类体系 - 基于原始设计的5大分类",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "DatabaseTarget",
          "line_number": 79,
          "base_classes": [
            "Enum"
          ],
          "docstring": "目标数据库类型 - 基于数据特性选择",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "DeduplicationStrategy",
          "line_number": 87,
          "base_classes": [
            "Enum"
          ],
          "docstring": "数据去重策略 - 智能去重决策体系",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "DataStorageStrategy",
          "line_number": 94,
          "base_classes": [],
          "docstring": "数据存储策略映射 - 实现自动路由",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "get_target_database",
              "line_number": 134,
              "return_type": "DatabaseTarget",
              "docstring": "根据数据分类获取目标数据库",
              "is_async": false,
              "decorators": [
                "classmethod"
              ],
              "body_lines": 2,
              "complexity": 1,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "classification",
                  "type_annotation": "DataClassification",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_database_name",
              "line_number": 139,
              "return_type": "str",
              "docstring": "根据数据分类获取数据库名称",
              "is_async": false,
              "decorators": [
                "classmethod"
              ],
              "body_lines": 16,
              "complexity": 6,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "classification",
                  "type_annotation": "DataClassification",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_smart_deduplication_strategy",
              "line_number": 158,
              "return_type": "DeduplicationStrategy",
              "docstring": "智能决策去重策略 - 基于用户提供的判断标准\n\nArgs:\n    classification: 数据分类\n    data_characteristics: 数据特征字典，包含以下可选键：\n        - is_full_and_accurate: 新数据是否全量且准确\n        - is_final_state_only: 业务是否只需要最终状态\n        - high_frequency: 数据写入是否高频（每秒百条以上）\n        - multi_source: 数据是否来自多个源头\n        - partial_fields: 新数据是否仅更新部分字段\n        - different_field_priority: 是否存在不同字段有不同新旧优先级\n\nReturns:\n    DeduplicationStrategy: 推荐的去重策略",
              "is_async": false,
              "decorators": [
                "classmethod"
              ],
              "body_lines": 56,
              "complexity": 8,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "classification",
                  "type_annotation": "DataClassification",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data_characteristics",
                  "type_annotation": "Dict",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            }
          ]
        },
        {
          "name": "ConfigDrivenTableManager",
          "line_number": 217,
          "base_classes": [],
          "docstring": "配置驱动的表管理器 - 核心自动化管理组件",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 220,
              "return_type": null,
              "docstring": "初始化配置驱动的表管理器\n\nArgs:\n    config_file: 表配置文件路径",
              "is_async": false,
              "decorators": [],
              "body_lines": 12,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "config_file",
                  "type_annotation": "str",
                  "default_value": "\"table_config.yaml\"",
                  "is_required": false
                }
              ]
            },
            {
              "name": "load_configuration",
              "line_number": 234,
              "return_type": "Dict",
              "docstring": "加载YAML配置文件",
              "is_async": false,
              "decorators": [],
              "body_lines": 15,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "create_default_config",
              "line_number": 251,
              "return_type": null,
              "docstring": "创建默认配置文件",
              "is_async": false,
              "decorators": [],
              "body_lines": 8,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_generate_default_config",
              "line_number": 261,
              "return_type": "Dict",
              "docstring": "生成默认配置结构",
              "is_async": false,
              "decorators": [],
              "body_lines": 65,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_generate_default_tables",
              "line_number": 328,
              "return_type": "List[Dict]",
              "docstring": "生成默认表配置",
              "is_async": false,
              "decorators": [],
              "body_lines": 140,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "auto_create_all_tables",
              "line_number": 470,
              "return_type": "Dict[(str, bool)]",
              "docstring": "根据配置文件自动创建所有表\n\nReturns:\n    Dict[str, bool]: 创建结果 {table_key: success}",
              "is_async": false,
              "decorators": [],
              "body_lines": 36,
              "complexity": 6,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_create_table_from_config",
              "line_number": 508,
              "return_type": "bool",
              "docstring": "根据配置创建单个表\n\nArgs:\n    table_config: 表配置字典\n    \nReturns:\n    bool: 创建是否成功",
              "is_async": false,
              "decorators": [],
              "body_lines": 56,
              "complexity": 11,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_config",
                  "type_annotation": "Dict",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_convert_column_config",
              "line_number": 566,
              "return_type": "List[Dict]",
              "docstring": "转换列配置格式\n\nArgs:\n    column_configs: 配置文件中的列定义\n    \nReturns:\n    List[Dict]: 转换后的列定义",
              "is_async": false,
              "decorators": [],
              "body_lines": 30,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "column_configs",
                  "type_annotation": "List[Dict]",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_create_indexes",
              "line_number": 598,
              "return_type": null,
              "docstring": "创建表索引\n\nArgs:\n    table_config: 表配置\n    db_type: 数据库类型",
              "is_async": false,
              "decorators": [],
              "body_lines": 14,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_config",
                  "type_annotation": "Dict",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "db_type",
                  "type_annotation": "DatabaseType",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "validate_all_table_structures",
              "line_number": 614,
              "return_type": "Dict[(str, Any)]",
              "docstring": "验证所有表结构\n\nReturns:\n    Dict[str, Any]: 验证结果",
              "is_async": false,
              "decorators": [],
              "body_lines": 43,
              "complexity": 6,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_validate_single_table_structure",
              "line_number": 659,
              "return_type": "bool",
              "docstring": "验证单个表结构\n\nArgs:\n    table_config: 表配置\n    \nReturns:\n    bool: 是否有效",
              "is_async": false,
              "decorators": [],
              "body_lines": 30,
              "complexity": 6,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_config",
                  "type_annotation": "Dict",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_table_config_by_classification",
              "line_number": 691,
              "return_type": "Optional[Dict]",
              "docstring": "根据数据分类获取表配置\n\nArgs:\n    classification: 数据分类\n    \nReturns:\n    Optional[Dict]: 表配置，如果未找到返回None",
              "is_async": false,
              "decorators": [],
              "body_lines": 17,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "classification",
                  "type_annotation": "DataClassification",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "cleanup",
              "line_number": 710,
              "return_type": null,
              "docstring": "清理资源",
              "is_async": false,
              "decorators": [],
              "body_lines": 7,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": []
    },
    {
      "file_path": "create_realtime_quotes_table.py",
      "module_name": "create_realtime_quotes_table",
      "category": "auxiliary",
      "docstring": "创建实时行情数据表",
      "lines_of_code": 97,
      "blank_lines": 14,
      "comment_lines": 6,
      "last_modified": "2025-09-24T14:32:39.227650",
      "imports": [
        "psycopg2",
        "psycopg2",
        "os",
        "dotenv"
      ],
      "classes": [],
      "functions": [
        {
          "name": "create_realtime_quotes_table",
          "line_number": 15,
          "return_type": null,
          "docstring": "创建实时行情数据表",
          "is_async": false,
          "decorators": [],
          "body_lines": 79,
          "complexity": 2,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "test_customer_realtime_data.py",
      "module_name": "test_customer_realtime_data",
      "category": "auxiliary",
      "docstring": "测试Customer适配器获取实时数据的脚本\n用于了解stock.get_realtime_quotes()返回的数据结构",
      "lines_of_code": 44,
      "blank_lines": 9,
      "comment_lines": 4,
      "last_modified": "2025-09-21T22:39:36.289849",
      "imports": [
        "adapters.customer_adapter",
        "pandas"
      ],
      "classes": [],
      "functions": [
        {
          "name": "test_realtime_data_structure",
          "line_number": 11,
          "return_type": null,
          "docstring": "测试获取实时数据的结构",
          "is_async": false,
          "decorators": [],
          "body_lines": 30,
          "complexity": 5,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "test_comprehensive.py",
      "module_name": "test_comprehensive",
      "category": "unknown",
      "docstring": null,
      "lines_of_code": 93,
      "blank_lines": 13,
      "comment_lines": 11,
      "last_modified": "2025-09-21T01:33:10.007601",
      "imports": [
        "sys",
        "os",
        "manager.unified_data_manager"
      ],
      "classes": [],
      "functions": [
        {
          "name": "test_comprehensive",
          "line_number": 9,
          "return_type": null,
          "docstring": "全面测试UnifiedDataManager的功能",
          "is_async": false,
          "decorators": [],
          "body_lines": 81,
          "complexity": 15,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "data_access.py",
      "module_name": "data_access",
      "category": "core",
      "docstring": "MyStocks 量化交易数据管理系统 - 统一数据访问层\n完全按照原始设计理念实现的5大数据分类体系和自动化路由\n\n设计理念：\n1. 5大数据分类：市场数据、参考数据、衍生数据、交易数据、元数据\n2. 自动路由：根据数据特性自动选择最适合的数据库\n3. TDengine为高频数据核心：专门处理Tick和分钟级数据\n4. 监控集成：所有操作自动记录到监控数据库\n5. 配置驱动：表结构和访问模式完全由配置文件管理\n\n作者: MyStocks项目组\n版本: v2.0 重构版\n日期: 2025-09-21",
      "lines_of_code": 1379,
      "blank_lines": 241,
      "comment_lines": 98,
      "last_modified": "2025-09-24T15:52:08.443444",
      "imports": [
        "os",
        "pandas",
        "datetime",
        "typing",
        "abc",
        "logging",
        "uuid",
        "core",
        "monitoring",
        "db_manager.database_manager"
      ],
      "classes": [
        {
          "name": "IDataAccessLayer",
          "line_number": 42,
          "base_classes": [
            "ABC"
          ],
          "docstring": "数据访问层接口",
          "decorators": [],
          "is_abstract": true,
          "methods": [
            {
              "name": "save_data",
              "line_number": 46,
              "return_type": "bool",
              "docstring": "保存数据",
              "is_async": false,
              "decorators": [
                "abstractmethod"
              ],
              "body_lines": 2,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "classification",
                  "type_annotation": "DataClassification",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "**kwargs",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": false
                }
              ]
            },
            {
              "name": "load_data",
              "line_number": 52,
              "return_type": "pd.DataFrame",
              "docstring": "加载数据",
              "is_async": false,
              "decorators": [
                "abstractmethod"
              ],
              "body_lines": 2,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "classification",
                  "type_annotation": "DataClassification",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "filters",
                  "type_annotation": "Dict",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "**kwargs",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": false
                }
              ]
            },
            {
              "name": "update_data",
              "line_number": 58,
              "return_type": "bool",
              "docstring": "更新数据",
              "is_async": false,
              "decorators": [
                "abstractmethod"
              ],
              "body_lines": 2,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "classification",
                  "type_annotation": "DataClassification",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "key_columns",
                  "type_annotation": "List[str]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "**kwargs",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": false
                }
              ]
            },
            {
              "name": "delete_data",
              "line_number": 64,
              "return_type": "bool",
              "docstring": "删除数据",
              "is_async": false,
              "decorators": [
                "abstractmethod"
              ],
              "body_lines": 2,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "classification",
                  "type_annotation": "DataClassification",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "filters",
                  "type_annotation": "Dict",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "**kwargs",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": false
                }
              ]
            }
          ]
        },
        {
          "name": "TDengineDataAccess",
          "line_number": 69,
          "base_classes": [
            "IDataAccessLayer"
          ],
          "docstring": "TDengine数据访问器 - 高频时序数据专用",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 72,
              "return_type": null,
              "docstring": "初始化TDengine数据访问器\n\nArgs:\n    monitoring_db: 监控数据库",
              "is_async": false,
              "decorators": [],
              "body_lines": 9,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "monitoring_db",
                  "type_annotation": "MonitoringDatabase",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "save_data",
              "line_number": 84,
              "return_type": "bool",
              "docstring": "保存时序数据到TDengine，支持去重策略\n\nArgs:\n    data: 数据DataFrame\n    classification: 数据分类\n    table_name: 表名（可选，默认根据分类确定）\n    **kwargs: 其他参数，支持 dedup_strategy 参数\n\nReturns:\n    bool: 保存是否成功",
              "is_async": false,
              "decorators": [],
              "body_lines": 71,
              "complexity": 10,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "classification",
                  "type_annotation": "DataClassification",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "**kwargs",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": false
                }
              ]
            },
            {
              "name": "load_data",
              "line_number": 158,
              "return_type": "pd.DataFrame",
              "docstring": "从TDengine加载时序数据\n\nArgs:\n    classification: 数据分类\n    table_name: 表名（可选）\n    filters: 过滤条件\n    **kwargs: 其他参数\n    \nReturns:\n    pd.DataFrame: 加载的数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 44,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "classification",
                  "type_annotation": "DataClassification",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "filters",
                  "type_annotation": "Dict",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "**kwargs",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": false
                }
              ]
            },
            {
              "name": "update_data",
              "line_number": 205,
              "return_type": "bool",
              "docstring": "TDengine通常不支持更新操作，使用插入替代",
              "is_async": false,
              "decorators": [],
              "body_lines": 3,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "classification",
                  "type_annotation": "DataClassification",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "key_columns",
                  "type_annotation": "List[str]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "**kwargs",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": false
                }
              ]
            },
            {
              "name": "delete_data",
              "line_number": 211,
              "return_type": "bool",
              "docstring": "TDengine删除数据（谨慎使用）",
              "is_async": false,
              "decorators": [],
              "body_lines": 3,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "classification",
                  "type_annotation": "DataClassification",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "filters",
                  "type_annotation": "Dict",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "**kwargs",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": false
                }
              ]
            },
            {
              "name": "_get_default_table_name",
              "line_number": 217,
              "return_type": "str",
              "docstring": "根据数据分类获取默认表名",
              "is_async": false,
              "decorators": [],
              "body_lines": 7,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "classification",
                  "type_annotation": "DataClassification",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_apply_tdengine_deduplication",
              "line_number": 226,
              "return_type": "Optional[pd.DataFrame]",
              "docstring": "应用TDengine特定的去重策略\n\nArgs:\n    data: 原始数据\n    table_name: 表名\n    strategy: 去重策略\n    classification: 数据分类\n\nReturns:\n    处理后的数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 30,
              "complexity": 6,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "strategy",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "classification",
                  "type_annotation": "DataClassification",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_handle_tdengine_latest_wins",
              "line_number": 259,
              "return_type": "pd.DataFrame",
              "docstring": "TDengine最新覆盖策略：基于时间戳去重，保留最新记录",
              "is_async": false,
              "decorators": [],
              "body_lines": 30,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "classification",
                  "type_annotation": "DataClassification",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_handle_tdengine_first_wins",
              "line_number": 292,
              "return_type": "pd.DataFrame",
              "docstring": "TDengine首次保留策略：查询已存在的数据，过滤重复",
              "is_async": false,
              "decorators": [],
              "body_lines": 54,
              "complexity": 7,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "classification",
                  "type_annotation": "DataClassification",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_handle_tdengine_merge",
              "line_number": 349,
              "return_type": "pd.DataFrame",
              "docstring": "TDengine合并策略：时序数据通常使用最新覆盖",
              "is_async": false,
              "decorators": [],
              "body_lines": 3,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "classification",
                  "type_annotation": "DataClassification",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_handle_tdengine_reject",
              "line_number": 355,
              "return_type": "Optional[pd.DataFrame]",
              "docstring": "TDengine拒绝重复策略：检查重复并拒绝",
              "is_async": false,
              "decorators": [],
              "body_lines": 24,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "classification",
                  "type_annotation": "DataClassification",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_preprocess_timeseries_data",
              "line_number": 382,
              "return_type": "pd.DataFrame",
              "docstring": "预处理时序数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 24,
              "complexity": 7,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "classification",
                  "type_annotation": "DataClassification",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_postprocess_timeseries_data",
              "line_number": 409,
              "return_type": "pd.DataFrame",
              "docstring": "后处理时序数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 10,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "classification",
                  "type_annotation": "DataClassification",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_insert_tick_data",
              "line_number": 422,
              "return_type": "bool",
              "docstring": "插入Tick数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 27,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "cursor",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_insert_minute_kline",
              "line_number": 451,
              "return_type": "bool",
              "docstring": "插入分钟K线数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 30,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "cursor",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_insert_generic_timeseries",
              "line_number": 483,
              "return_type": "bool",
              "docstring": "插入通用时序数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 17,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "cursor",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_build_timeseries_query",
              "line_number": 502,
              "return_type": "str",
              "docstring": "构建时序数据查询语句",
              "is_async": false,
              "decorators": [],
              "body_lines": 42,
              "complexity": 16,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "classification",
                  "type_annotation": "DataClassification",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "filters",
                  "type_annotation": "Dict",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "**kwargs",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": false
                }
              ]
            }
          ]
        },
        {
          "name": "PostgreSQLDataAccess",
          "line_number": 547,
          "base_classes": [
            "IDataAccessLayer"
          ],
          "docstring": "PostgreSQL数据访问器 - 历史数据仓库和分析",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 550,
              "return_type": null,
              "docstring": "初始化PostgreSQL数据访问器\n\nArgs:\n    monitoring_db: 监控数据库",
              "is_async": false,
              "decorators": [],
              "body_lines": 9,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "monitoring_db",
                  "type_annotation": "MonitoringDatabase",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "save_data",
              "line_number": 562,
              "return_type": "bool",
              "docstring": "保存数据到PostgreSQL\n\nArgs:\n    data: 数据DataFrame\n    classification: 数据分类\n    table_name: 表名（可选）\n    **kwargs: 其他参数\n    \nReturns:\n    bool: 保存是否成功",
              "is_async": false,
              "decorators": [],
              "body_lines": 53,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "classification",
                  "type_annotation": "DataClassification",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "**kwargs",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": false
                }
              ]
            },
            {
              "name": "load_data",
              "line_number": 618,
              "return_type": "pd.DataFrame",
              "docstring": "从PostgreSQL加载数据\n\nArgs:\n    classification: 数据分类\n    table_name: 表名（可选）\n    filters: 过滤条件\n    **kwargs: 其他参数\n    \nReturns:\n    pd.DataFrame: 加载的数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 44,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "classification",
                  "type_annotation": "DataClassification",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "filters",
                  "type_annotation": "Dict",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "**kwargs",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": false
                }
              ]
            },
            {
              "name": "update_data",
              "line_number": 665,
              "return_type": "bool",
              "docstring": "更新PostgreSQL数据\n\nArgs:\n    data: 数据DataFrame\n    classification: 数据分类\n    table_name: 表名（可选）\n    key_columns: 主键列\n    **kwargs: 其他参数\n    \nReturns:\n    bool: 更新是否成功",
              "is_async": false,
              "decorators": [],
              "body_lines": 48,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "classification",
                  "type_annotation": "DataClassification",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "key_columns",
                  "type_annotation": "List[str]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "**kwargs",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": false
                }
              ]
            },
            {
              "name": "delete_data",
              "line_number": 716,
              "return_type": "bool",
              "docstring": "删除PostgreSQL数据\n\nArgs:\n    classification: 数据分类\n    table_name: 表名（可选）\n    filters: 过滤条件\n    **kwargs: 其他参数\n    \nReturns:\n    bool: 删除是否成功",
              "is_async": false,
              "decorators": [],
              "body_lines": 50,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "classification",
                  "type_annotation": "DataClassification",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "filters",
                  "type_annotation": "Dict",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "**kwargs",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": false
                }
              ]
            },
            {
              "name": "_get_default_table_name",
              "line_number": 769,
              "return_type": "str",
              "docstring": "根据数据分类获取默认表名",
              "is_async": false,
              "decorators": [],
              "body_lines": 13,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "classification",
                  "type_annotation": "DataClassification",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_get_default_key_columns",
              "line_number": 784,
              "return_type": "List[str]",
              "docstring": "根据数据分类获取默认主键列",
              "is_async": false,
              "decorators": [],
              "body_lines": 14,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "classification",
                  "type_annotation": "DataClassification",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_preprocess_analytical_data",
              "line_number": 800,
              "return_type": "pd.DataFrame",
              "docstring": "预处理分析数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 25,
              "complexity": 9,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "classification",
                  "type_annotation": "DataClassification",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_get_postgresql_engine",
              "line_number": 828,
              "return_type": null,
              "docstring": "获取PostgreSQL SQLAlchemy引擎",
              "is_async": false,
              "decorators": [],
              "body_lines": 15,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "database_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_upsert_data_with_engine",
              "line_number": 845,
              "return_type": null,
              "docstring": "使用SQLAlchemy引擎执行UPSERT操作",
              "is_async": false,
              "decorators": [],
              "body_lines": 20,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "engine",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "classification",
                  "type_annotation": "DataClassification",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_postprocess_analytical_data",
              "line_number": 868,
              "return_type": "pd.DataFrame",
              "docstring": "后处理分析数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 11,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "classification",
                  "type_annotation": "DataClassification",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_upsert_data",
              "line_number": 882,
              "return_type": null,
              "docstring": "PostgreSQL Upsert操作 - 使用ON CONFLICT实现",
              "is_async": false,
              "decorators": [],
              "body_lines": 53,
              "complexity": 6,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "conn",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "classification",
                  "type_annotation": "DataClassification",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_execute_update",
              "line_number": 938,
              "return_type": "bool",
              "docstring": "执行更新操作",
              "is_async": false,
              "decorators": [],
              "body_lines": 33,
              "complexity": 6,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "cursor",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "key_columns",
                  "type_annotation": "List[str]",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_build_analytical_query",
              "line_number": 974,
              "return_type": "str",
              "docstring": "构建分析数据查询语句",
              "is_async": false,
              "decorators": [],
              "body_lines": 55,
              "complexity": 15,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "classification",
                  "type_annotation": "DataClassification",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "filters",
                  "type_annotation": "Dict",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "**kwargs",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": false
                }
              ]
            },
            {
              "name": "_build_delete_query",
              "line_number": 1032,
              "return_type": "str",
              "docstring": "构建删除查询语句",
              "is_async": false,
              "decorators": [],
              "body_lines": 14,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "filters",
                  "type_annotation": "Dict",
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        },
        {
          "name": "MySQLDataAccess",
          "line_number": 1048,
          "base_classes": [
            "IDataAccessLayer"
          ],
          "docstring": "MySQL数据访问器 - 元数据与参考数据仓库",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 1051,
              "return_type": null,
              "docstring": "初始化MySQL数据访问器\n\nArgs:\n    monitoring_db: 监控数据库",
              "is_async": false,
              "decorators": [],
              "body_lines": 9,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "monitoring_db",
                  "type_annotation": "MonitoringDatabase",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "save_data",
              "line_number": 1063,
              "return_type": "bool",
              "docstring": "保存数据到MySQL，支持UPSERT操作",
              "is_async": false,
              "decorators": [],
              "body_lines": 36,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "classification",
                  "type_annotation": "DataClassification",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "**kwargs",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": false
                }
              ]
            },
            {
              "name": "load_data",
              "line_number": 1102,
              "return_type": "pd.DataFrame",
              "docstring": "从MySQL加载数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 22,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "classification",
                  "type_annotation": "DataClassification",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "filters",
                  "type_annotation": "Dict",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "**kwargs",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": false
                }
              ]
            },
            {
              "name": "update_data",
              "line_number": 1127,
              "return_type": "bool",
              "docstring": "更新MySQL数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 2,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "classification",
                  "type_annotation": "DataClassification",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "key_columns",
                  "type_annotation": "List[str]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "**kwargs",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": false
                }
              ]
            },
            {
              "name": "delete_data",
              "line_number": 1132,
              "return_type": "bool",
              "docstring": "删除MySQL数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 3,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "classification",
                  "type_annotation": "DataClassification",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "filters",
                  "type_annotation": "Dict",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "**kwargs",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": false
                }
              ]
            },
            {
              "name": "_get_default_table_name",
              "line_number": 1138,
              "return_type": "str",
              "docstring": "根据数据分类获取默认表名",
              "is_async": false,
              "decorators": [],
              "body_lines": 12,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "classification",
                  "type_annotation": "DataClassification",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_mysql_upsert_data",
              "line_number": 1152,
              "return_type": "int",
              "docstring": "MySQL UPSERT操作 - 使用ON DUPLICATE KEY UPDATE实现\n\nArgs:\n    data: 要保存的数据\n    table_name: 表名\n    conn: MySQL连接\n    classification: 数据分类\n\nReturns:\n    int: 影响的行数",
              "is_async": false,
              "decorators": [],
              "body_lines": 73,
              "complexity": 7,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "conn",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "classification",
                  "type_annotation": "DataClassification",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_get_mysql_key_columns",
              "line_number": 1228,
              "return_type": "List[str]",
              "docstring": "根据数据分类获取MySQL主键列",
              "is_async": false,
              "decorators": [],
              "body_lines": 12,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "classification",
                  "type_annotation": "DataClassification",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_preprocess_reference_data",
              "line_number": 1242,
              "return_type": "pd.DataFrame",
              "docstring": "预处理参考数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 9,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "classification",
                  "type_annotation": "DataClassification",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_build_reference_query",
              "line_number": 1254,
              "return_type": "str",
              "docstring": "构建参考数据查询语句",
              "is_async": false,
              "decorators": [],
              "body_lines": 28,
              "complexity": 9,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "classification",
                  "type_annotation": "DataClassification",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "filters",
                  "type_annotation": "Dict",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "**kwargs",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": false
                }
              ]
            }
          ]
        },
        {
          "name": "RedisDataAccess",
          "line_number": 1285,
          "base_classes": [],
          "docstring": "Redis数据访问器 - 实时状态中心",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 1288,
              "return_type": null,
              "docstring": "初始化Redis数据访问器\n\nArgs:\n    monitoring_db: 监控数据库",
              "is_async": false,
              "decorators": [],
              "body_lines": 9,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "monitoring_db",
                  "type_annotation": "MonitoringDatabase",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_init_redis_connection",
              "line_number": 1300,
              "return_type": null,
              "docstring": "初始化Redis连接",
              "is_async": false,
              "decorators": [],
              "body_lines": 17,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "save_realtime_data",
              "line_number": 1319,
              "return_type": "bool",
              "docstring": "保存实时数据到Redis",
              "is_async": false,
              "decorators": [],
              "body_lines": 23,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "classification",
                  "type_annotation": "DataClassification",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "key",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data",
                  "type_annotation": "Union[(Dict, pd.DataFrame)]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "expire",
                  "type_annotation": "int",
                  "default_value": "300",
                  "is_required": false
                }
              ]
            },
            {
              "name": "load_realtime_data",
              "line_number": 1345,
              "return_type": "Optional[Any]",
              "docstring": "从Redis加载实时数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 30,
              "complexity": 6,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "classification",
                  "type_annotation": "DataClassification",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "key",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "cache_dataframe",
              "line_number": 1377,
              "return_type": "bool",
              "docstring": "缓存DataFrame到Redis",
              "is_async": false,
              "decorators": [],
              "body_lines": 2,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "key",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "df",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "expire",
                  "type_annotation": "int",
                  "default_value": "3600",
                  "is_required": false
                }
              ]
            }
          ]
        }
      ],
      "functions": []
    },
    {
      "file_path": "factory/data_source_factory.py",
      "module_name": "factory.data_source_factory",
      "category": "auxiliary",
      "docstring": "# 功能：数据源工厂类，负责创建和管理数据源适配器实例\n# 作者：JohnC (ninjas@sina.com) & Claude\n# 创建日期：2025-10-16\n# 版本：2.1.0\n# 依赖：详见requirements.txt或文件导入部分\n# 注意事项：\n#   本文件是MyStocks v2.1核心组件，遵循5-tier数据分类架构\n# 版权：MyStocks Project © 2025",
      "lines_of_code": 136,
      "blank_lines": 26,
      "comment_lines": 12,
      "last_modified": "2025-10-16T08:26:29.087207",
      "imports": [
        "typing",
        "sys",
        "os",
        "interfaces.data_source"
      ],
      "classes": [
        {
          "name": "DataSourceFactory",
          "line_number": 56,
          "base_classes": [],
          "docstring": "数据源工厂：负责创建具体的数据源对象",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "register_source",
              "line_number": 63,
              "return_type": "None",
              "docstring": "注册新的数据源类型\n\nArgs:\n    source_type: 数据源类型名称\n    source_class: 数据源类",
              "is_async": false,
              "decorators": [
                "classmethod"
              ],
              "body_lines": 9,
              "complexity": 1,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "source_type",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "source_class",
                  "type_annotation": "Type[IDataSource]",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "register_multiple_sources",
              "line_number": 75,
              "return_type": "None",
              "docstring": "批量注册多个数据源\n\nArgs:\n    sources: 数据源字典，{source_type: source_class}",
              "is_async": false,
              "decorators": [
                "classmethod"
              ],
              "body_lines": 8,
              "complexity": 2,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "sources",
                  "type_annotation": "Dict[(str, Type[IDataSource])]",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_available_sources",
              "line_number": 86,
              "return_type": "List[str]",
              "docstring": "获取所有可用的数据源类型\n\nReturns:\n    List[str]: 数据源类型列表",
              "is_async": false,
              "decorators": [
                "classmethod"
              ],
              "body_lines": 7,
              "complexity": 1,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "unregister_source",
              "line_number": 96,
              "return_type": "bool",
              "docstring": "取消注册数据源\n\nArgs:\n    source_type: 数据源类型名称\n    \nReturns:\n    bool: 是否成功取消注册",
              "is_async": false,
              "decorators": [
                "classmethod"
              ],
              "body_lines": 15,
              "complexity": 2,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "source_type",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "create_source",
              "line_number": 114,
              "return_type": "IDataSource",
              "docstring": "根据类型创建数据源\n\nArgs:\n    source_type: 数据源类型名称，如 'akshare' 或 'baostock'\n    \nReturns:\n    IDataSource: 实现了IDataSource接口的对象\n    \nRaises:\n    ValueError: 如果指定的数据源类型不存在",
              "is_async": false,
              "decorators": [
                "classmethod"
              ],
              "body_lines": 22,
              "complexity": 3,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "source_type",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": []
    },
    {
      "file_path": "factory/__init__.py",
      "module_name": "factory.__init__",
      "category": "auxiliary",
      "docstring": "数据源工厂模块\n负责创建具体的数据源对象",
      "lines_of_code": 4,
      "blank_lines": 0,
      "comment_lines": 0,
      "last_modified": "2025-10-12T15:25:29.911880",
      "imports": [],
      "classes": [],
      "functions": []
    },
    {
      "file_path": "ml_strategy/price_predictor.py",
      "module_name": "ml_strategy.price_predictor",
      "category": "auxiliary",
      "docstring": "价格预测策略模块 - LightGBM 股票价格预测\n\n基于 PyProf 项目的价格预测模型，扩展为完整的预测策略系统。\n使用 LightGBM 梯度提升决策树进行回归预测。\n\n主要功能:\n- LightGBM 模型训练\n- 价格预测\n- 超参数调优\n- 模型持久化\n- 完整的评估指标\n\n作者: MyStocks Development Team\n创建日期: 2025-10-19\n版本: 1.0.0",
      "lines_of_code": 587,
      "blank_lines": 117,
      "comment_lines": 38,
      "last_modified": "2025-10-19T08:27:30.470769",
      "imports": [
        "sys",
        "os",
        "typing",
        "pandas",
        "numpy",
        "logging",
        "datetime",
        "sklearn.model_selection",
        "sklearn.metrics",
        "joblib"
      ],
      "classes": [
        {
          "name": "PricePredictorStrategy",
          "line_number": 43,
          "base_classes": [],
          "docstring": "股票价格预测策略\n\n基于 LightGBM 的价格回归预测模型。\n\n示例:\n    >>> predictor = PricePredictorStrategy()\n    >>> metrics = predictor.train(X_train, y_train)\n    >>> predictions = predictor.predict(X_test)\n    >>> predictor.save_model('models/sh000001.pkl')",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 56,
              "return_type": null,
              "docstring": "初始化预测器\n\nArgs:\n    config: 模型配置参数（可选）\n        如果不提供，使用默认配置",
              "is_async": false,
              "decorators": [],
              "body_lines": 15,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "config",
                  "type_annotation": "Optional[Dict[(str, Any)]]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "_default_config",
              "line_number": 74,
              "return_type": "Dict[(str, Any)]",
              "docstring": "默认 LightGBM 配置（基于 PyProf 项目的优化参数）\n\nReturns:\n    配置字典",
              "is_async": false,
              "decorators": [
                "staticmethod"
              ],
              "body_lines": 20,
              "complexity": 1,
              "parameters": []
            },
            {
              "name": "train",
              "line_number": 96,
              "return_type": "Dict[(str, float)]",
              "docstring": "训练模型\n\nArgs:\n    X: 特征矩阵\n    y: 目标变量\n    test_size: 测试集比例（默认 0.2）\n    random_state: 随机种子（默认 42）\n    validation_split: 是否分割验证集（默认 True）\n\nReturns:\n    评估指标字典\n        - rmse: 均方根误差\n        - mae: 平均绝对误差\n        - r2_score: 决定系数\n        - mape: 平均绝对百分比误差\n\nRaises:\n    ValueError: 输入数据无效",
              "is_async": false,
              "decorators": [],
              "body_lines": 76,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "X",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "y",
                  "type_annotation": "pd.Series",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "test_size",
                  "type_annotation": "float",
                  "default_value": "0.2",
                  "is_required": false
                },
                {
                  "name": "random_state",
                  "type_annotation": "int",
                  "default_value": "42",
                  "is_required": false
                },
                {
                  "name": "validation_split",
                  "type_annotation": "bool",
                  "default_value": "True",
                  "is_required": false
                }
              ]
            },
            {
              "name": "predict",
              "line_number": 181,
              "return_type": "np.ndarray",
              "docstring": "预测价格\n\nArgs:\n    X: 特征矩阵\n\nReturns:\n    预测结果数组\n\nRaises:\n    ValueError: 模型未训练",
              "is_async": false,
              "decorators": [],
              "body_lines": 25,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "X",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "predict_with_confidence",
              "line_number": 208,
              "return_type": "Tuple[(np.ndarray, np.ndarray, np.ndarray)]",
              "docstring": "预测价格并返回置信区间（简化版本）\n\nArgs:\n    X: 特征矩阵\n    confidence_level: 置信水平（默认 0.95）\n\nReturns:\n    (预测值, 下界, 上界)",
              "is_async": false,
              "decorators": [],
              "body_lines": 24,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "X",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "confidence_level",
                  "type_annotation": "float",
                  "default_value": "0.95",
                  "is_required": false
                }
              ]
            },
            {
              "name": "hyperparameter_tuning",
              "line_number": 238,
              "return_type": "Dict[(str, Any)]",
              "docstring": "超参数调优（网格搜索）\n\nArgs:\n    X: 特征矩阵\n    y: 目标变量\n    param_grid: 参数网格（可选）\n    cv: 交叉验证折数（默认 5）\n    scoring: 评分指标（默认 neg_mean_squared_error）\n\nReturns:\n    调优结果字典\n        - best_params: 最佳参数\n        - best_score: 最佳得分\n        - cv_results: 交叉验证结果\n\nExample:\n    >>> param_grid = {\n    ...     'num_leaves': [15, 25, 35],\n    ...     'n_estimators': [50, 70, 100],\n    ...     'learning_rate': [0.1, 0.2, 0.3]\n    ... }\n    >>> results = predictor.hyperparameter_tuning(X, y, param_grid)",
              "is_async": false,
              "decorators": [],
              "body_lines": 68,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "X",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "y",
                  "type_annotation": "pd.Series",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "param_grid",
                  "type_annotation": "Optional[Dict[(str, list)]]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "cv",
                  "type_annotation": "int",
                  "default_value": "5",
                  "is_required": false
                },
                {
                  "name": "scoring",
                  "type_annotation": "str",
                  "default_value": "\"neg_mean_squared_error\"",
                  "is_required": false
                }
              ]
            },
            {
              "name": "evaluate",
              "line_number": 315,
              "return_type": "Dict[(str, float)]",
              "docstring": "评估模型性能\n\nArgs:\n    X: 特征矩阵\n    y: 真实值\n\nReturns:\n    评估指标字典",
              "is_async": false,
              "decorators": [],
              "body_lines": 19,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "X",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "y",
                  "type_annotation": "pd.Series",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_calculate_metrics",
              "line_number": 341,
              "return_type": "Dict[(str, float)]",
              "docstring": "计算评估指标\n\nArgs:\n    y_true: 真实值\n    y_pred: 预测值\n\nReturns:\n    指标字典",
              "is_async": false,
              "decorators": [
                "staticmethod"
              ],
              "body_lines": 32,
              "complexity": 4,
              "parameters": [
                {
                  "name": "y_true",
                  "type_annotation": "np.ndarray",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "y_pred",
                  "type_annotation": "np.ndarray",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "save_model",
              "line_number": 375,
              "return_type": "None",
              "docstring": "保存模型\n\nArgs:\n    file_path: 保存路径（.pkl 文件）\n\nRaises:\n    ValueError: 模型未训练",
              "is_async": false,
              "decorators": [],
              "body_lines": 27,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "file_path",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "load_model",
              "line_number": 404,
              "return_type": "None",
              "docstring": "加载模型\n\nArgs:\n    file_path: 模型文件路径\n\nRaises:\n    FileNotFoundError: 文件不存在",
              "is_async": false,
              "decorators": [],
              "body_lines": 22,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "file_path",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_feature_importance",
              "line_number": 428,
              "return_type": "pd.DataFrame",
              "docstring": "获取特征重要性\n\nArgs:\n    feature_names: 特征名称列表（可选）\n    top_k: 返回前 K 个重要特征（默认 10）\n\nReturns:\n    特征重要性 DataFrame",
              "is_async": false,
              "decorators": [],
              "body_lines": 27,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "feature_names",
                  "type_annotation": "Optional[list]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "top_k",
                  "type_annotation": "int",
                  "default_value": "10",
                  "is_required": false
                }
              ]
            },
            {
              "name": "plot_predictions",
              "line_number": 461,
              "return_type": "None",
              "docstring": "绘制预测结果对比图\n\nArgs:\n    y_true: 真实值\n    y_pred: 预测值\n    save_path: 保存路径（可选）",
              "is_async": false,
              "decorators": [],
              "body_lines": 42,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "y_true",
                  "type_annotation": "np.ndarray",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "y_pred",
                  "type_annotation": "np.ndarray",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "save_path",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            }
          ]
        }
      ],
      "functions": []
    },
    {
      "file_path": "ml_strategy/feature_engineering.py",
      "module_name": "ml_strategy.feature_engineering",
      "category": "auxiliary",
      "docstring": "特征工程模块 - 滚动窗口特征生成\n\n基于 PyProf 项目的特征工程方法，扩展为更完整的特征生成系统。\n支持滚动窗口特征、技术指标特征和自定义特征。\n\n作者: MyStocks Development Team\n创建日期: 2025-10-19\n版本: 1.0.0",
      "lines_of_code": 358,
      "blank_lines": 77,
      "comment_lines": 31,
      "last_modified": "2025-10-19T06:30:30.276133",
      "imports": [
        "sys",
        "os",
        "typing",
        "pandas",
        "numpy",
        "logging",
        "queue"
      ],
      "classes": [
        {
          "name": "RollingFeatureGenerator",
          "line_number": 23,
          "base_classes": [],
          "docstring": "滚动窗口特征生成器\n\n生成基于历史数据的滚动窗口特征,用于机器学习预测。\n\n主要功能:\n- 滚动窗口特征提取\n- 技术指标计算\n- 特征矩阵构建\n\n示例:\n    >>> generator = RollingFeatureGenerator(window_size=10)\n    >>> X, y = generator.prepare_ml_data(df, target_col='close', forecast_horizon=1)",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 39,
              "return_type": null,
              "docstring": "初始化特征生成器\n\nArgs:\n    window_size: 滚动窗口大小（天数）",
              "is_async": false,
              "decorators": [],
              "body_lines": 8,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "window_size",
                  "type_annotation": "int",
                  "default_value": "10",
                  "is_required": false
                }
              ]
            },
            {
              "name": "generate_features",
              "line_number": 49,
              "return_type": "pd.DataFrame",
              "docstring": "生成滚动窗口特征\n\nArgs:\n    df: 包含 OHLCV 数据的 DataFrame\n        必需列: open, high, low, close, vol\n\nReturns:\n    DataFrame: 包含滚动窗口特征的数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 37,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "df",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_extract_window_features",
              "line_number": 88,
              "return_type": "Dict[(str, float)]",
              "docstring": "从单个窗口提取特征\n\nArgs:\n    window: 窗口数据\n\nReturns:\n    特征字典",
              "is_async": false,
              "decorators": [],
              "body_lines": 65,
              "complexity": 7,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "window",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "generate_rolling_raw_features",
              "line_number": 155,
              "return_type": "pd.DataFrame",
              "docstring": "生成滚动原始特征（PyProf 原始方法）\n\n将过去 N 天的原始数据展平为特征向量。\n例如: window_size=3 时, 生成 3×feature_num 个特征列\n\nArgs:\n    df: 原始数据\n    feature_cols: 要使用的特征列（默认: open, high, low, close, vol, amount）\n\nReturns:\n    DataFrame: 包含展平特征的数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 54,
              "complexity": 8,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "df",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "feature_cols",
                  "type_annotation": "List[str]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "prepare_ml_data",
              "line_number": 215,
              "return_type": "Tuple[(pd.DataFrame, pd.Series)]",
              "docstring": "准备机器学习数据\n\nArgs:\n    df: 原始数据\n    target_col: 目标列名\n    forecast_horizon: 预测步长（天数）\n    feature_type: 特征类型\n        - 'aggregate': 聚合特征（均值、标准差等）\n        - 'raw': 原始滚动特征（展平）\n\nReturns:\n    (X, y): 特征矩阵和目标变量",
              "is_async": false,
              "decorators": [],
              "body_lines": 61,
              "complexity": 8,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "df",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "target_col",
                  "type_annotation": "str",
                  "default_value": "\"close\"",
                  "is_required": false
                },
                {
                  "name": "forecast_horizon",
                  "type_annotation": "int",
                  "default_value": "1",
                  "is_required": false
                },
                {
                  "name": "feature_type",
                  "type_annotation": "str",
                  "default_value": "\"aggregate\"",
                  "is_required": false
                }
              ]
            },
            {
              "name": "add_technical_indicators",
              "line_number": 284,
              "return_type": "pd.DataFrame",
              "docstring": "添加技术指标特征\n\nArgs:\n    df: 原始OHLCV数据\n\nReturns:\n    DataFrame: 添加技术指标后的数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 40,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "df",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": []
    },
    {
      "file_path": "ml_strategy/ml_strategy.py",
      "module_name": "ml_strategy.ml_strategy",
      "category": "auxiliary",
      "docstring": "机器学习策略 (Machine Learning Strategy)\n\n功能说明:\n- 基于机器学习的量化策略\n- 自动特征工程\n- 多种ML模型支持\n- 模型训练和预测\n\n支持的模型:\n- Random Forest\n- Gradient Boosting\n- XGBoost / LightGBM\n- Neural Networks\n\n作者: MyStocks量化交易团队\n创建时间: 2025-10-18\n版本: 1.0.0",
      "lines_of_code": 497,
      "blank_lines": 104,
      "comment_lines": 41,
      "last_modified": "2025-10-18T23:58:33.031403",
      "imports": [
        "sys",
        "os",
        "typing",
        "pandas",
        "numpy",
        "datetime",
        "logging",
        "pickle"
      ],
      "classes": [
        {
          "name": "FeatureEngineering",
          "line_number": 55,
          "base_classes": [],
          "docstring": "特征工程\n\n自动生成技术指标特征",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "create_features",
              "line_number": 63,
              "return_type": "pd.DataFrame",
              "docstring": "创建特征\n\n参数:\n    data: 价格数据（OHLCV）\n\n返回:\n    DataFrame: 包含特征的数据",
              "is_async": false,
              "decorators": [
                "staticmethod"
              ],
              "body_lines": 54,
              "complexity": 4,
              "parameters": [
                {
                  "name": "data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "create_target",
              "line_number": 120,
              "return_type": "pd.Series",
              "docstring": "创建目标变量（分类）\n\n参数:\n    data: 价格数据\n    forward_days: 前瞻天数\n    threshold: 涨跌阈值\n\n返回:\n    Series: 目标变量 (1=涨, 0=跌)",
              "is_async": false,
              "decorators": [
                "staticmethod"
              ],
              "body_lines": 14,
              "complexity": 1,
              "parameters": [
                {
                  "name": "data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "forward_days",
                  "type_annotation": "int",
                  "default_value": "1",
                  "is_required": false
                },
                {
                  "name": "threshold",
                  "type_annotation": "float",
                  "default_value": "0.0",
                  "is_required": false
                }
              ]
            }
          ]
        },
        {
          "name": "MLStrategy",
          "line_number": 139,
          "base_classes": [],
          "docstring": "机器学习策略\n\n使用机器学习模型预测股票涨跌",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 146,
              "return_type": null,
              "docstring": "初始化ML策略\n\n参数:\n    model_type: 模型类型 ('random_forest', 'gradient_boosting')\n    forward_days: 预测天数\n    threshold: 涨跌阈值（默认1%）\n    kwargs: 其他参数",
              "is_async": false,
              "decorators": [],
              "body_lines": 37,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "model_type",
                  "type_annotation": "str",
                  "default_value": "\"random_forest\"",
                  "is_required": false
                },
                {
                  "name": "forward_days",
                  "type_annotation": "int",
                  "default_value": "1",
                  "is_required": false
                },
                {
                  "name": "threshold",
                  "type_annotation": "float",
                  "default_value": "0.01",
                  "is_required": false
                },
                {
                  "name": "**kwargs",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": false
                }
              ]
            },
            {
              "name": "_create_model",
              "line_number": 189,
              "return_type": null,
              "docstring": "创建ML模型",
              "is_async": false,
              "decorators": [],
              "body_lines": 18,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "train",
              "line_number": 209,
              "return_type": "Dict",
              "docstring": "训练模型\n\n参数:\n    data: 训练数据（OHLCV）\n    test_size: 测试集比例\n    cross_validate: 是否交叉验证\n\n返回:\n    Dict: 训练结果",
              "is_async": false,
              "decorators": [],
              "body_lines": 112,
              "complexity": 6,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "test_size",
                  "type_annotation": "float",
                  "default_value": "0.2",
                  "is_required": false
                },
                {
                  "name": "cross_validate",
                  "type_annotation": "bool",
                  "default_value": "True",
                  "is_required": false
                }
              ]
            },
            {
              "name": "predict",
              "line_number": 326,
              "return_type": "pd.DataFrame",
              "docstring": "预测\n\n参数:\n    data: 预测数据\n\n返回:\n    DataFrame: 预测结果",
              "is_async": false,
              "decorators": [],
              "body_lines": 31,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "generate_signals",
              "line_number": 359,
              "return_type": "pd.DataFrame",
              "docstring": "生成交易信号\n\n参数:\n    data: 价格数据\n\n返回:\n    DataFrame: 信号数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 29,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "save_model",
              "line_number": 390,
              "return_type": null,
              "docstring": "保存模型",
              "is_async": false,
              "decorators": [],
              "body_lines": 17,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "path",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "load_model",
              "line_number": 409,
              "return_type": null,
              "docstring": "加载模型",
              "is_async": false,
              "decorators": [],
              "body_lines": 14,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "path",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_calculate_metrics",
              "line_number": 425,
              "return_type": "Dict",
              "docstring": "计算评估指标",
              "is_async": false,
              "decorators": [],
              "body_lines": 7,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "y_true",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "y_pred",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": []
    },
    {
      "file_path": "ml_strategy/__init__.py",
      "module_name": "ml_strategy.__init__",
      "category": "auxiliary",
      "docstring": "Machine Learning Strategy Module for MyStocks\n\nThis module provides machine learning capabilities for stock price prediction,\nfeature engineering, and feature selection.\n\nModules:\n    - feature_engineering: Rolling window feature generation\n    - price_predictor: LightGBM-based price prediction\n    - feature_selector: Multiple feature selection algorithms\n\nAuthor: MyStocks Development Team\nCreated: 2025-10-19",
      "lines_of_code": 38,
      "blank_lines": 8,
      "comment_lines": 1,
      "last_modified": "2025-10-19T06:14:58.659917",
      "imports": [],
      "classes": [],
      "functions": []
    },
    {
      "file_path": "reporting/pdf_generator.py",
      "module_name": "reporting.pdf_generator",
      "category": "monitoring",
      "docstring": "PDF报告生成器 (PDF Report Generator)\n\n功能说明:\n- 自动生成专业的策略回测报告\n- 包含性能指标、风险指标、图表\n- 支持中文字体\n- 自定义模板和样式\n\n使用ReportLab库生成PDF报告\n\n作者: MyStocks量化交易团队\n创建时间: 2025-10-18\n版本: 1.0.0",
      "lines_of_code": 523,
      "blank_lines": 102,
      "comment_lines": 30,
      "last_modified": "2025-10-18T23:54:53.603419",
      "imports": [
        "sys",
        "os",
        "typing",
        "datetime",
        "io",
        "logging"
      ],
      "classes": [
        {
          "name": "PDFReportGenerator",
          "line_number": 46,
          "base_classes": [],
          "docstring": "PDF报告生成器\n\n功能:\n- 策略回测报告\n- 性能分析报告\n- 月度/季度报告\n- 自定义模板",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 57,
              "return_type": null,
              "docstring": "初始化PDF生成器\n\n参数:\n    font_path: 中文字体路径（可选）\n    page_size: 页面大小（默认A4）",
              "is_async": false,
              "decorators": [],
              "body_lines": 22,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "font_path",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "page_size",
                  "type_annotation": null,
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "_register_chinese_font",
              "line_number": 83,
              "return_type": null,
              "docstring": "注册中文字体",
              "is_async": false,
              "decorators": [],
              "body_lines": 14,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "font_path",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "_setup_styles",
              "line_number": 99,
              "return_type": null,
              "docstring": "设置样式",
              "is_async": false,
              "decorators": [],
              "body_lines": 31,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "generate_backtest_report",
              "line_number": 132,
              "return_type": "str",
              "docstring": "生成回测报告PDF\n\n参数:\n    result: 回测结果字典\n    strategy_name: 策略名称\n    output_path: 输出路径\n    chart_paths: 图表路径字典\n\n返回:\n    str: 生成的PDF路径",
              "is_async": false,
              "decorators": [],
              "body_lines": 63,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "result",
                  "type_annotation": "Dict",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "strategy_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "output_path",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "chart_paths",
                  "type_annotation": "Optional[Dict[(str, str)]]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "_build_cover",
              "line_number": 201,
              "return_type": "List",
              "docstring": "构建封面",
              "is_async": false,
              "decorators": [],
              "body_lines": 45,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "strategy_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "result",
                  "type_annotation": "Dict",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_build_executive_summary",
              "line_number": 248,
              "return_type": "List",
              "docstring": "构建执行摘要",
              "is_async": false,
              "decorators": [],
              "body_lines": 22,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "result",
                  "type_annotation": "Dict",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_build_performance_section",
              "line_number": 272,
              "return_type": "List",
              "docstring": "构建性能指标部分",
              "is_async": false,
              "decorators": [],
              "body_lines": 24,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "result",
                  "type_annotation": "Dict",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_build_risk_section",
              "line_number": 298,
              "return_type": "List",
              "docstring": "构建风险指标部分",
              "is_async": false,
              "decorators": [],
              "body_lines": 22,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "result",
                  "type_annotation": "Dict",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_build_trading_section",
              "line_number": 322,
              "return_type": "List",
              "docstring": "构建交易统计部分",
              "is_async": false,
              "decorators": [],
              "body_lines": 24,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "result",
                  "type_annotation": "Dict",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_build_charts_section",
              "line_number": 348,
              "return_type": "List",
              "docstring": "构建图表部分",
              "is_async": false,
              "decorators": [],
              "body_lines": 22,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "chart_paths",
                  "type_annotation": "Dict[(str, str)]",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_build_footer",
              "line_number": 372,
              "return_type": "List",
              "docstring": "构建页脚",
              "is_async": false,
              "decorators": [],
              "body_lines": 15,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_get_table_style",
              "line_number": 389,
              "return_type": "TableStyle",
              "docstring": "获取表格样式",
              "is_async": false,
              "decorators": [],
              "body_lines": 12,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_assess_risk",
              "line_number": 403,
              "return_type": "str",
              "docstring": "评估风险等级",
              "is_async": false,
              "decorators": [],
              "body_lines": 9,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "max_drawdown",
                  "type_annotation": "float",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "generate_monthly_report",
              "line_number": 414,
              "return_type": "str",
              "docstring": "生成月度报告\n\n参数:\n    data: 月度数据\n    output_path: 输出路径\n\n返回:\n    str: PDF路径",
              "is_async": false,
              "decorators": [],
              "body_lines": 33,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data",
                  "type_annotation": "Dict",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "output_path",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": []
    },
    {
      "file_path": "reporting/__init__.py",
      "module_name": "reporting.__init__",
      "category": "unknown",
      "docstring": "报告生成模块 (Reporting Module)\n\n提供专业的PDF报告生成功能:\n- 策略回测报告\n- 月度/季度报告\n- 性能分析报告\n\n作者: MyStocks量化交易团队\n创建时间: 2025-10-18\n版本: 1.0.0",
      "lines_of_code": 19,
      "blank_lines": 6,
      "comment_lines": 0,
      "last_modified": "2025-10-18T23:55:28.220521",
      "imports": [
        "pdf_generator"
      ],
      "classes": [],
      "functions": []
    },
    {
      "file_path": "manager/__init__.py",
      "module_name": "manager.__init__",
      "category": "unknown",
      "docstring": "统一数据管理器模块\n作为系统的门户，提供简洁的API",
      "lines_of_code": 4,
      "blank_lines": 0,
      "comment_lines": 0,
      "last_modified": "2025-09-16T00:31:17.321851",
      "imports": [],
      "classes": [],
      "functions": []
    },
    {
      "file_path": "manager/unified_data_manager.py",
      "module_name": "manager.unified_data_manager",
      "category": "core",
      "docstring": "统一数据管理器\n作为系统的门户，提供简洁的API\n\n作用：\n- 统一数据管理器，系统的核心组件\n- 作为系统的门户，提供简洁的API\n- 协调不同数据源的使用\n- 管理数据源实例的生命周期\n\n功能：\n- 提供数据源切换和比较功能\n- 处理日期和股票代码的标准化\n- 简化数据获取的过程\n- 提供额外的功能，如数据源比较、代码和日期格式化等",
      "lines_of_code": 214,
      "blank_lines": 43,
      "comment_lines": 19,
      "last_modified": "2025-09-21T01:31:18.298397",
      "imports": [
        "pandas",
        "typing",
        "sys",
        "os",
        "datetime",
        "mystocks.interfaces.data_source",
        "mystocks.factory.data_source_factory",
        "mystocks.utils.date_utils",
        "mystocks.utils.symbol_utils"
      ],
      "classes": [
        {
          "name": "UnifiedDataManager",
          "line_number": 32,
          "base_classes": [],
          "docstring": "统一数据管理器：协调数据获取，提供高级功能",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 35,
              "return_type": null,
              "docstring": "初始化统一数据管理器",
              "is_async": false,
              "decorators": [],
              "body_lines": 3,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "set_default_source",
              "line_number": 40,
              "return_type": "None",
              "docstring": "设置默认数据源\n\nArgs:\n    source_type: 数据源类型名称",
              "is_async": false,
              "decorators": [],
              "body_lines": 8,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "source_type",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_source",
              "line_number": 50,
              "return_type": "IDataSource",
              "docstring": "获取数据源实例\n\nArgs:\n    source_type: 数据源类型，如果为None则使用默认数据源\n    \nReturns:\n    IDataSource: 数据源实例",
              "is_async": false,
              "decorators": [],
              "body_lines": 17,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "source_type",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "get_stock_daily",
              "line_number": 69,
              "return_type": "pd.DataFrame",
              "docstring": "获取股票日线数据（统一接口）\n\nArgs:\n    symbol: 股票代码 (支持多种格式)\n    start_date: 开始日期 (支持多种格式)\n    end_date: 结束日期 (支持多种格式)，如果为None且提供了days，则自动计算\n    days: 从开始日期算起的天数 (可选)\n    source_type: 数据源类型，如果为None则使用默认数据源\n    \nReturns:\n    DataFrame: 包含股票日线数据的DataFrame",
              "is_async": false,
              "decorators": [],
              "body_lines": 22,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "start_date",
                  "type_annotation": "Union[(str, datetime.date)]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "end_date",
                  "type_annotation": "Union[(str, datetime.date, None)]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "days",
                  "type_annotation": "Optional[int]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "source_type",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "get_index_daily",
              "line_number": 96,
              "return_type": "pd.DataFrame",
              "docstring": "获取指数日线数据（统一接口）\n\nArgs:\n    symbol: 指数代码 (支持多种格式)\n    start_date: 开始日期 (支持多种格式)\n    end_date: 结束日期 (支持多种格式)，如果为None且提供了days，则自动计算\n    days: 从开始日期算起的天数 (可选)\n    source_type: 数据源类型，如果为None则使用默认数据源\n    \nReturns:\n    DataFrame: 包含指数日线数据的DataFrame",
              "is_async": false,
              "decorators": [],
              "body_lines": 22,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "start_date",
                  "type_annotation": "Union[(str, datetime.date)]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "end_date",
                  "type_annotation": "Union[(str, datetime.date, None)]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "days",
                  "type_annotation": "Optional[int]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "source_type",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "get_stock_basic",
              "line_number": 123,
              "return_type": "Dict",
              "docstring": "获取股票基本信息（统一接口）\n\nArgs:\n    symbol: 股票代码 (支持多种格式)\n    source_type: 数据源类型，如果为None则使用默认数据源\n    \nReturns:\n    Dict: 包含股票基本信息的字典",
              "is_async": false,
              "decorators": [],
              "body_lines": 16,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "source_type",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "get_index_components",
              "line_number": 141,
              "return_type": "List[str]",
              "docstring": "获取指数成分股（统一接口）\n\nArgs:\n    symbol: 指数代码 (支持多种格式)\n    source_type: 数据源类型，如果为None则使用默认数据源\n    \nReturns:\n    List[str]: 包含指数成分股代码的列表",
              "is_async": false,
              "decorators": [],
              "body_lines": 16,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "source_type",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "compare_data_sources",
              "line_number": 159,
              "return_type": null,
              "docstring": "比较两个数据源的数据\n\nArgs:\n    symbol: 股票代码 (支持多种格式)\n    start_date: 开始日期 (支持多种格式)\n    end_date: 结束日期 (支持多种格式)",
              "is_async": false,
              "decorators": [],
              "body_lines": 31,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "start_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "end_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_financial_data",
              "line_number": 192,
              "return_type": "pd.DataFrame",
              "docstring": "获取股票财务数据（统一接口）\n\nArgs:\n    symbol: 股票代码 (支持多种格式)\n    period: 报告期类型 (\"annual\" 或 \"quarterly\")\n    source_type: 数据源类型，如果为None则使用默认数据源\n    \nReturns:\n    DataFrame: 包含股票财务数据的DataFrame",
              "is_async": false,
              "decorators": [],
              "body_lines": 22,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "period",
                  "type_annotation": "str",
                  "default_value": "\"annual\"",
                  "is_required": false
                },
                {
                  "name": "source_type",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            }
          ]
        }
      ],
      "functions": []
    },
    {
      "file_path": "examples/tdx_import_example.py",
      "module_name": "examples.tdx_import_example",
      "category": "unknown",
      "docstring": "TDX数据导入完整示例 (TDX Data Import Complete Example)\n\n功能说明:\n- 演示如何从通达信本地文件导入数据到MyStocks数据库\n- 展示数据自动路由到正确的数据库（TDengine）\n- 增量导入和全量导入示例\n\n使用场景:\n1. 初次搭建系统，全量导入历史数据\n2. 每日定时任务，增量导入最新数据\n3. 特定股票池数据导入\n\n作者: MyStocks量化交易团队\n创建时间: 2025-10-18\n版本: 1.0.0",
      "lines_of_code": 246,
      "blank_lines": 56,
      "comment_lines": 18,
      "last_modified": "2025-10-18T20:43:47.370552",
      "imports": [
        "sys",
        "os",
        "datetime",
        "data_sources.tdx_binary_parser",
        "data_sources.tdx_importer"
      ],
      "classes": [],
      "functions": [
        {
          "name": "example_1_check_tdx_data",
          "line_number": 28,
          "return_type": null,
          "docstring": "示例1: 检查TDX本地数据状态",
          "is_async": false,
          "decorators": [],
          "body_lines": 36,
          "complexity": 5,
          "parameters": []
        },
        {
          "name": "example_2_parse_local_data",
          "line_number": 67,
          "return_type": null,
          "docstring": "示例2: 解析本地数据（不保存到数据库）",
          "is_async": false,
          "decorators": [],
          "body_lines": 37,
          "complexity": 5,
          "parameters": []
        },
        {
          "name": "example_3_import_without_database",
          "line_number": 107,
          "return_type": null,
          "docstring": "示例3: 模拟导入（不连接数据库）",
          "is_async": false,
          "decorators": [],
          "body_lines": 29,
          "complexity": 1,
          "parameters": []
        },
        {
          "name": "example_4_import_to_database",
          "line_number": 139,
          "return_type": null,
          "docstring": "示例4: 导入到数据库（需要UnifiedDataManager）",
          "is_async": false,
          "decorators": [],
          "body_lines": 50,
          "complexity": 3,
          "parameters": []
        },
        {
          "name": "example_5_incremental_import",
          "line_number": 192,
          "return_type": null,
          "docstring": "示例5: 增量导入（每日更新场景）",
          "is_async": false,
          "decorators": [],
          "body_lines": 23,
          "complexity": 1,
          "parameters": []
        },
        {
          "name": "main",
          "line_number": 218,
          "return_type": null,
          "docstring": "主函数 - 运行所有示例",
          "is_async": false,
          "decorators": [],
          "body_lines": 23,
          "complexity": 1,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "examples/tdx_usage_examples.py",
      "module_name": "examples.tdx_usage_examples",
      "category": "monitoring",
      "docstring": "TDX数据源适配器使用示例\n\n展示TDX适配器的常见使用场景和最佳实践\n\n作者: MyStocks Team\n日期: 2025-10-15",
      "lines_of_code": 309,
      "blank_lines": 76,
      "comment_lines": 21,
      "last_modified": "2025-10-15T19:26:39.336995",
      "imports": [
        "logging",
        "datetime",
        "adapters.tdx_adapter",
        "adapters.data_source_manager"
      ],
      "classes": [],
      "functions": [
        {
          "name": "example_1_basic_quote",
          "line_number": 19,
          "return_type": null,
          "docstring": "示例1: 获取实时行情",
          "is_async": false,
          "decorators": [],
          "body_lines": 23,
          "complexity": 2,
          "parameters": []
        },
        {
          "name": "example_2_multiple_quotes",
          "line_number": 45,
          "return_type": null,
          "docstring": "示例2: 批量获取多只股票行情",
          "is_async": false,
          "decorators": [],
          "body_lines": 28,
          "complexity": 3,
          "parameters": []
        },
        {
          "name": "example_3_daily_kline",
          "line_number": 76,
          "return_type": null,
          "docstring": "示例3: 获取日线数据并分析",
          "is_async": false,
          "decorators": [],
          "body_lines": 28,
          "complexity": 2,
          "parameters": []
        },
        {
          "name": "example_4_intraday_kline",
          "line_number": 107,
          "return_type": null,
          "docstring": "示例4: 盘中分钟线监控",
          "is_async": false,
          "decorators": [],
          "body_lines": 25,
          "complexity": 3,
          "parameters": []
        },
        {
          "name": "example_5_multiperiod_comparison",
          "line_number": 135,
          "return_type": null,
          "docstring": "示例5: 多周期K线对比",
          "is_async": false,
          "decorators": [],
          "body_lines": 32,
          "complexity": 3,
          "parameters": []
        },
        {
          "name": "example_6_index_data",
          "line_number": 170,
          "return_type": null,
          "docstring": "示例6: 指数数据获取",
          "is_async": false,
          "decorators": [],
          "body_lines": 30,
          "complexity": 3,
          "parameters": []
        },
        {
          "name": "example_7_data_source_manager",
          "line_number": 203,
          "return_type": null,
          "docstring": "示例7: 使用数据源管理器",
          "is_async": false,
          "decorators": [],
          "body_lines": 30,
          "complexity": 4,
          "parameters": []
        },
        {
          "name": "example_8_error_handling",
          "line_number": 236,
          "return_type": null,
          "docstring": "示例8: 错误处理最佳实践",
          "is_async": false,
          "decorators": [],
          "body_lines": 40,
          "complexity": 6,
          "parameters": []
        },
        {
          "name": "main",
          "line_number": 279,
          "return_type": null,
          "docstring": "运行所有示例",
          "is_async": false,
          "decorators": [],
          "body_lines": 25,
          "complexity": 3,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "examples/automation_example.py",
      "module_name": "examples.automation_example",
      "category": "auxiliary",
      "docstring": "自动化调度系统完整示例 (Automation System Complete Example)\n\n功能说明:\n- 演示如何使用TaskScheduler进行任务调度\n- 展示NotificationManager的多渠道通知\n- 使用预定义任务进行常见操作\n- 监控任务执行和性能\n\n使用场景:\n1. 每日自动数据更新\n2. 定时策略执行和信号生成\n3. 系统健康检查和维护\n4. 任务失败通知和重试\n\n作者: MyStocks量化交易团队\n创建时间: 2025-10-18\n版本: 1.0.0",
      "lines_of_code": 399,
      "blank_lines": 74,
      "comment_lines": 39,
      "last_modified": "2025-10-18T23:25:01.628763",
      "imports": [
        "sys",
        "os",
        "logging",
        "time",
        "datetime",
        "automation",
        "automation.predefined_tasks"
      ],
      "classes": [],
      "functions": [
        {
          "name": "example_1_basic_scheduling",
          "line_number": 47,
          "return_type": null,
          "docstring": "示例1: 基本任务调度",
          "is_async": false,
          "decorators": [],
          "body_lines": 39,
          "complexity": 2,
          "parameters": []
        },
        {
          "name": "example_2_notification_system",
          "line_number": 89,
          "return_type": null,
          "docstring": "示例2: 通知系统",
          "is_async": false,
          "decorators": [],
          "body_lines": 58,
          "complexity": 2,
          "parameters": []
        },
        {
          "name": "example_3_predefined_tasks",
          "line_number": 150,
          "return_type": null,
          "docstring": "示例3: 使用预定义任务",
          "is_async": false,
          "decorators": [],
          "body_lines": 39,
          "complexity": 2,
          "parameters": []
        },
        {
          "name": "example_4_integrated_system",
          "line_number": 192,
          "return_type": null,
          "docstring": "示例4: 完整集成系统",
          "is_async": false,
          "decorators": [],
          "body_lines": 78,
          "complexity": 2,
          "parameters": []
        },
        {
          "name": "example_5_monitoring_and_stats",
          "line_number": 273,
          "return_type": null,
          "docstring": "示例5: 监控和统计",
          "is_async": false,
          "decorators": [],
          "body_lines": 59,
          "complexity": 7,
          "parameters": []
        },
        {
          "name": "main",
          "line_number": 335,
          "return_type": null,
          "docstring": "主函数 - 运行所有示例",
          "is_async": false,
          "decorators": [],
          "body_lines": 59,
          "complexity": 1,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "monitoring/monitoring_database.py",
      "module_name": "monitoring.monitoring_database",
      "category": "monitoring",
      "docstring": "# 功能：监控数据库模块，独立记录所有操作日志和指标\n# 作者：JohnC (ninjas@sina.com) & Claude\n# 创建日期：2025-10-16\n# 版本：2.1.0\n# 依赖：详见requirements.txt或文件导入部分\n# 注意事项：\n#   本文件是MyStocks v2.1核心组件，遵循5-tier数据分类架构\n# 版权：MyStocks Project © 2025",
      "lines_of_code": 539,
      "blank_lines": 87,
      "comment_lines": 15,
      "last_modified": "2025-10-16T08:26:29.095203",
      "imports": [
        "uuid",
        "time",
        "logging",
        "typing",
        "datetime",
        "contextlib",
        "db_manager.connection_manager"
      ],
      "classes": [
        {
          "name": "MonitoringDatabase",
          "line_number": 25,
          "base_classes": [],
          "docstring": "监控数据库访问类\n\n负责将所有监控数据写入独立的监控数据库。",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 32,
              "return_type": null,
              "docstring": "初始化监控数据库\n\nArgs:\n    enable_monitoring: 是否启用监控 (默认True)",
              "is_async": false,
              "decorators": [],
              "body_lines": 12,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "enable_monitoring",
                  "type_annotation": "bool",
                  "default_value": "True",
                  "is_required": false
                }
              ]
            },
            {
              "name": "_get_connection",
              "line_number": 47,
              "return_type": null,
              "docstring": "获取监控数据库连接的上下文管理器",
              "is_async": false,
              "decorators": [
                "contextmanager"
              ],
              "body_lines": 16,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "log_operation",
              "line_number": 65,
              "return_type": "bool",
              "docstring": "记录操作日志\n\nArgs:\n    operation_type: 操作类型 (SAVE/LOAD/DELETE/UPDATE)\n    classification: 数据分类\n    target_database: 目标数据库 (TDengine/PostgreSQL/MySQL/Redis)\n    table_name: 目标表名\n    record_count: 影响记录数\n    operation_status: 状态 (SUCCESS/FAILED/PARTIAL)\n    error_message: 错误信息 (失败时)\n    execution_time_ms: 执行时间(毫秒)\n    user_agent: 调用来源\n    client_ip: 客户端IP\n    additional_info: 额外信息 (字典,会转为JSONB)\n\nReturns:\n    bool: 记录是否成功",
              "is_async": false,
              "decorators": [],
              "body_lines": 56,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "operation_type",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "classification",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "target_database",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "record_count",
                  "type_annotation": "int",
                  "default_value": "0",
                  "is_required": false
                },
                {
                  "name": "operation_status",
                  "type_annotation": "str",
                  "default_value": "\"SUCCESS\"",
                  "is_required": false
                },
                {
                  "name": "error_message",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "execution_time_ms",
                  "type_annotation": "Optional[int]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "user_agent",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "client_ip",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "additional_info",
                  "type_annotation": "Optional[Dict]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "record_performance_metric",
              "line_number": 134,
              "return_type": "bool",
              "docstring": "记录性能指标\n\nArgs:\n    metric_name: 指标名称\n    metric_value: 指标值\n    metric_type: 指标类型 (QUERY_TIME/CONNECTION_TIME/BATCH_SIZE)\n    metric_unit: 单位 (ms/seconds/count)\n    classification: 关联数据分类\n    database_type: 关联数据库类型\n    table_name: 关联表名\n    is_slow_query: 是否慢查询 (>5秒)\n    query_sql: SQL语句 (慢查询时记录)\n    execution_plan: 执行计划\n    tags: 标签 (字典)\n\nReturns:\n    bool: 记录是否成功",
              "is_async": false,
              "decorators": [],
              "body_lines": 47,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "metric_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "metric_value",
                  "type_annotation": "float",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "metric_type",
                  "type_annotation": "str",
                  "default_value": "\"QUERY_TIME\"",
                  "is_required": false
                },
                {
                  "name": "metric_unit",
                  "type_annotation": "str",
                  "default_value": "\"ms\"",
                  "is_required": false
                },
                {
                  "name": "classification",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "database_type",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "table_name",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "is_slow_query",
                  "type_annotation": "bool",
                  "default_value": "False",
                  "is_required": false
                },
                {
                  "name": "query_sql",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "execution_plan",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "tags",
                  "type_annotation": "Optional[Dict]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "log_quality_check",
              "line_number": 194,
              "return_type": "bool",
              "docstring": "记录数据质量检查\n\nArgs:\n    check_type: 检查类型 (COMPLETENESS/FRESHNESS/ACCURACY)\n    classification: 数据分类\n    database_type: 数据库类型\n    table_name: 表名\n    check_status: 检查状态 (PASS/FAIL/WARNING)\n    total_records: 总记录数\n    null_records: 空值记录数\n    missing_rate: 缺失率 (%)\n    latest_timestamp: 最新时间戳\n    data_delay_seconds: 数据延迟(秒)\n    invalid_records: 无效记录数\n    validation_rules: 验证规则\n    check_message: 检查信息\n    threshold_config: 阈值配置\n    check_duration_ms: 检查耗时(毫秒)\n\nReturns:\n    bool: 记录是否成功",
              "is_async": false,
              "decorators": [],
              "body_lines": 57,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "check_type",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "classification",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "database_type",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "check_status",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "total_records",
                  "type_annotation": "Optional[int]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "null_records",
                  "type_annotation": "Optional[int]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "missing_rate",
                  "type_annotation": "Optional[float]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "latest_timestamp",
                  "type_annotation": "Optional[datetime]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "data_delay_seconds",
                  "type_annotation": "Optional[int]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "invalid_records",
                  "type_annotation": "Optional[int]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "validation_rules",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "check_message",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "threshold_config",
                  "type_annotation": "Optional[Dict]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "check_duration_ms",
                  "type_annotation": "Optional[int]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "create_alert",
              "line_number": 268,
              "return_type": "Optional[str]",
              "docstring": "创建告警\n\nArgs:\n    alert_level: 告警级别 (CRITICAL/WARNING/INFO)\n    alert_type: 告警类型 (SLOW_QUERY/DATA_QUALITY/SYSTEM_ERROR)\n    alert_title: 告警标题\n    alert_message: 告警详细信息\n    source: 告警来源 (模块名称)\n    classification: 关联数据分类\n    database_type: 关联数据库类型\n    table_name: 关联表名\n    additional_data: 额外数据\n    notification_channels: 通知渠道 ['email', 'webhook', 'log']\n\nReturns:\n    str: 告警ID (失败返回None)",
              "is_async": false,
              "decorators": [],
              "body_lines": 52,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "alert_level",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "alert_type",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "alert_title",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "alert_message",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "source",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "classification",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "database_type",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "table_name",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "additional_data",
                  "type_annotation": "Optional[Dict]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "notification_channels",
                  "type_annotation": "Optional[List[str]]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "update_alert_status",
              "line_number": 332,
              "return_type": "bool",
              "docstring": "更新告警状态\n\nArgs:\n    alert_id: 告警ID\n    alert_status: 新状态 (ACKNOWLEDGED/RESOLVED)\n    operator: 操作人\n    resolution_notes: 解决说明\n\nReturns:\n    bool: 更新是否成功",
              "is_async": false,
              "decorators": [],
              "body_lines": 47,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "alert_id",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "alert_status",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "operator",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "resolution_notes",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "get_statistics",
              "line_number": 385,
              "return_type": "Dict[(str, Any)]",
              "docstring": "获取监控统计信息\n\nReturns:\n    dict: 统计信息",
              "is_async": false,
              "decorators": [],
              "body_lines": 18,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "cleanup_old_records",
              "line_number": 405,
              "return_type": "Dict[(str, int)]",
              "docstring": "清理过期记录\n\nArgs:\n    days_to_keep: 各表保留天数配置 {\n        'operation_logs': 30,\n        'performance_metrics': 90,\n        'data_quality_checks': 7,\n        'alert_records': 90\n    }\n\nReturns:\n    dict: 各表删除的记录数",
              "is_async": false,
              "decorators": [],
              "body_lines": 49,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "days_to_keep",
                  "type_annotation": "Optional[Dict[(str, int)]]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            }
          ]
        }
      ],
      "functions": [
        {
          "name": "get_monitoring_database",
          "line_number": 461,
          "return_type": "MonitoringDatabase",
          "docstring": "获取全局监控数据库实例 (单例模式)",
          "is_async": false,
          "decorators": [],
          "body_lines": 5,
          "complexity": 2,
          "parameters": [
            {
              "name": "enable_monitoring",
              "type_annotation": "bool",
              "default_value": "True",
              "is_required": false
            }
          ]
        }
      ]
    },
    {
      "file_path": "monitoring/alert_manager.py",
      "module_name": "monitoring.alert_manager",
      "category": "monitoring",
      "docstring": "# 功能：告警管理模块，支持多渠道告警和告警升级策略\n# 作者：JohnC (ninjas@sina.com) & Claude\n# 创建日期：2025-10-16\n# 版本：2.1.0\n# 依赖：详见requirements.txt或文件导入部分\n# 注意事项：\n#   本文件是MyStocks v2.1核心组件，遵循5-tier数据分类架构\n# 版权：MyStocks Project © 2025",
      "lines_of_code": 472,
      "blank_lines": 84,
      "comment_lines": 40,
      "last_modified": "2025-10-16T08:26:29.099201",
      "imports": [
        "logging",
        "json",
        "typing",
        "datetime",
        "enum",
        "monitoring.monitoring_database"
      ],
      "classes": [
        {
          "name": "AlertLevel",
          "line_number": 24,
          "base_classes": [
            "str",
            "Enum"
          ],
          "docstring": "告警级别",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "AlertType",
          "line_number": 31,
          "base_classes": [
            "str",
            "Enum"
          ],
          "docstring": "告警类型",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "AlertManager",
          "line_number": 42,
          "base_classes": [],
          "docstring": "告警管理器\n\n负责接收告警请求,通过配置的渠道发送告警通知,\n并记录到监控数据库。",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 50,
              "return_type": null,
              "docstring": "初始化告警管理器\n\nArgs:\n    monitoring_db: 监控数据库实例 (可选)\n    enabled_channels: 启用的告警渠道 ['log', 'email', 'webhook']",
              "is_async": false,
              "decorators": [],
              "body_lines": 22,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "monitoring_db",
                  "type_annotation": "Optional[MonitoringDatabase]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "enabled_channels",
                  "type_annotation": "Optional[List[str]]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "send_alert",
              "line_number": 76,
              "return_type": "Optional[str]",
              "docstring": "发送告警\n\nArgs:\n    alert_level: 告警级别 (CRITICAL/WARNING/INFO)\n    alert_type: 告警类型\n    alert_title: 告警标题\n    alert_message: 告警详细信息\n    source: 告警来源 (模块名称)\n    classification: 关联数据分类\n    database_type: 关联数据库类型\n    table_name: 关联表名\n    additional_data: 额外数据\n    channels: 指定通知渠道 (None则使用默认渠道)\n\nReturns:\n    str: 告警ID (失败返回None)",
              "is_async": false,
              "decorators": [],
              "body_lines": 60,
              "complexity": 7,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "alert_level",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "alert_type",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "alert_title",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "alert_message",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "source",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "classification",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "database_type",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "table_name",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "additional_data",
                  "type_annotation": "Optional[Dict]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "channels",
                  "type_annotation": "Optional[List[str]]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "_should_suppress_alert",
              "line_number": 148,
              "return_type": "bool",
              "docstring": "检查是否应该抑制告警 (冷却期内)",
              "is_async": false,
              "decorators": [],
              "body_lines": 8,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "alert_key",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_send_to_channel",
              "line_number": 158,
              "return_type": "bool",
              "docstring": "发送告警到指定渠道\n\nArgs:\n    channel: 渠道名称 (log/email/webhook)\n    alert_level: 告警级别\n    alert_title: 告警标题\n    alert_message: 告警信息\n    additional_data: 额外数据\n\nReturns:\n    bool: 发送是否成功",
              "is_async": false,
              "decorators": [],
              "body_lines": 27,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "channel",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "alert_level",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "alert_title",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "alert_message",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "additional_data",
                  "type_annotation": "Optional[Dict]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "_send_to_log",
              "line_number": 192,
              "return_type": "bool",
              "docstring": "发送告警到日志",
              "is_async": false,
              "decorators": [],
              "body_lines": 10,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "alert_level",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "alert_title",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "alert_message",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_send_to_email",
              "line_number": 207,
              "return_type": "bool",
              "docstring": "发送告警邮件\n\n注: 需要配置SMTP服务器信息",
              "is_async": false,
              "decorators": [],
              "body_lines": 17,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "alert_level",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "alert_title",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "alert_message",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "additional_data",
                  "type_annotation": "Optional[Dict]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "_send_to_webhook",
              "line_number": 230,
              "return_type": "bool",
              "docstring": "发送告警到Webhook\n\n注: 需要配置Webhook URL",
              "is_async": false,
              "decorators": [],
              "body_lines": 23,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "alert_level",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "alert_title",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "alert_message",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "additional_data",
                  "type_annotation": "Optional[Dict]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "acknowledge_alert",
              "line_number": 259,
              "return_type": "bool",
              "docstring": "确认告警\n\nArgs:\n    alert_id: 告警ID\n    operator: 操作人\n\nReturns:\n    bool: 确认是否成功",
              "is_async": false,
              "decorators": [],
              "body_lines": 20,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "alert_id",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "operator",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "resolve_alert",
              "line_number": 281,
              "return_type": "bool",
              "docstring": "解决告警\n\nArgs:\n    alert_id: 告警ID\n    operator: 操作人\n    resolution_notes: 解决说明\n\nReturns:\n    bool: 解决是否成功",
              "is_async": false,
              "decorators": [],
              "body_lines": 22,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "alert_id",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "operator",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "resolution_notes",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "get_statistics",
              "line_number": 308,
              "return_type": "Dict[(str, Any)]",
              "docstring": "获取告警统计信息\n\nReturns:\n    dict: 统计信息",
              "is_async": false,
              "decorators": [],
              "body_lines": 17,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "set_cooldown",
              "line_number": 327,
              "return_type": null,
              "docstring": "设置告警冷却期\n\nArgs:\n    seconds: 冷却时间(秒)",
              "is_async": false,
              "decorators": [],
              "body_lines": 8,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "seconds",
                  "type_annotation": "int",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "configure_email",
              "line_number": 337,
              "return_type": null,
              "docstring": "配置邮件告警\n\nArgs:\n    smtp_host: SMTP服务器地址\n    smtp_port: SMTP端口\n    smtp_user: SMTP用户名\n    smtp_password: SMTP密码\n    from_addr: 发件人地址\n    to_addrs: 收件人地址列表",
              "is_async": false,
              "decorators": [],
              "body_lines": 13,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "smtp_host",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "smtp_port",
                  "type_annotation": "int",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "smtp_user",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "smtp_password",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "from_addr",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "to_addrs",
                  "type_annotation": "List[str]",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "configure_webhook",
              "line_number": 358,
              "return_type": null,
              "docstring": "配置Webhook告警\n\nArgs:\n    webhook_url: Webhook URL\n    webhook_secret: Webhook密钥 (可选)",
              "is_async": false,
              "decorators": [],
              "body_lines": 9,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "webhook_url",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "webhook_secret",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            }
          ]
        }
      ],
      "functions": [
        {
          "name": "get_alert_manager",
          "line_number": 374,
          "return_type": "AlertManager",
          "docstring": "获取全局告警管理器实例 (单例模式)",
          "is_async": false,
          "decorators": [],
          "body_lines": 5,
          "complexity": 2,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "monitoring/performance_monitor.py",
      "module_name": "monitoring.performance_monitor",
      "category": "monitoring",
      "docstring": "# 功能：性能监控模块，跟踪查询时间、慢查询和性能指标\n# 作者：JohnC (ninjas@sina.com) & Claude\n# 创建日期：2025-10-16\n# 版本：2.1.0\n# 依赖：详见requirements.txt或文件导入部分\n# 注意事项：\n#   本文件是MyStocks v2.1核心组件，遵循5-tier数据分类架构\n# 版权：MyStocks Project © 2025",
      "lines_of_code": 401,
      "blank_lines": 56,
      "comment_lines": 32,
      "last_modified": "2025-10-16T08:26:29.095203",
      "imports": [
        "time",
        "logging",
        "typing",
        "functools",
        "contextlib",
        "datetime",
        "monitoring.monitoring_database"
      ],
      "classes": [
        {
          "name": "PerformanceMonitor",
          "line_number": 25,
          "base_classes": [],
          "docstring": "性能监控器\n\n负责跟踪和记录所有数据库操作的性能指标,\n自动检测慢查询并生成告警。",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 39,
              "return_type": null,
              "docstring": "初始化性能监控器\n\nArgs:\n    monitoring_db: 监控数据库实例 (可选)",
              "is_async": false,
              "decorators": [],
              "body_lines": 11,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "monitoring_db",
                  "type_annotation": "Optional[MonitoringDatabase]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "track_operation",
              "line_number": 53,
              "return_type": null,
              "docstring": "跟踪操作性能的上下文管理器\n\n用法:\n```python\nwith monitor.track_operation('query_daily_kline', 'DAILY_KLINE', 'PostgreSQL'):\n    # 执行数据库操作\n    result = execute_query()\n```\n\nArgs:\n    operation_name: 操作名称\n    classification: 数据分类\n    database_type: 数据库类型\n    table_name: 表名\n    query_sql: SQL语句\n    auto_alert: 是否自动告警慢查询",
              "is_async": false,
              "decorators": [
                "contextmanager"
              ],
              "body_lines": 60,
              "complexity": 6,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "operation_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "classification",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "database_type",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "table_name",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "query_sql",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "auto_alert",
                  "type_annotation": "bool",
                  "default_value": "True",
                  "is_required": false
                }
              ]
            },
            {
              "name": "_record_metric",
              "line_number": 121,
              "return_type": null,
              "docstring": "记录性能指标",
              "is_async": false,
              "decorators": [],
              "body_lines": 19,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "metric_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "metric_value",
                  "type_annotation": "float",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "metric_type",
                  "type_annotation": "str",
                  "default_value": "\"QUERY_TIME\"",
                  "is_required": false
                },
                {
                  "name": "classification",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "database_type",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "table_name",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "query_sql",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "error_occurred",
                  "type_annotation": "bool",
                  "default_value": "False",
                  "is_required": false
                }
              ]
            },
            {
              "name": "_alert_slow_query",
              "line_number": 150,
              "return_type": null,
              "docstring": "告警慢查询",
              "is_async": false,
              "decorators": [],
              "body_lines": 29,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "operation_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "execution_time_ms",
                  "type_annotation": "int",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "classification",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "database_type",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "table_name",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "query_sql",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "record_connection_time",
              "line_number": 187,
              "return_type": null,
              "docstring": "记录数据库连接时间\n\nArgs:\n    database_type: 数据库类型\n    connection_time_ms: 连接时间(毫秒)\n    connection_status: 连接状态 (SUCCESS/FAILED)",
              "is_async": false,
              "decorators": [],
              "body_lines": 22,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "database_type",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "connection_time_ms",
                  "type_annotation": "float",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "connection_status",
                  "type_annotation": "str",
                  "default_value": "\"SUCCESS\"",
                  "is_required": false
                }
              ]
            },
            {
              "name": "record_batch_operation",
              "line_number": 214,
              "return_type": null,
              "docstring": "记录批量操作性能\n\nArgs:\n    operation_name: 操作名称\n    batch_size: 批量大小\n    execution_time_ms: 执行时间(毫秒)\n    classification: 数据分类\n    database_type: 数据库类型\n    table_name: 表名",
              "is_async": false,
              "decorators": [],
              "body_lines": 40,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "operation_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "batch_size",
                  "type_annotation": "int",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "execution_time_ms",
                  "type_annotation": "float",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "classification",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "database_type",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "table_name",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "get_performance_summary",
              "line_number": 262,
              "return_type": "Dict[(str, Any)]",
              "docstring": "获取性能摘要\n\nArgs:\n    hours: 统计时间范围(小时)\n\nReturns:\n    dict: 性能摘要",
              "is_async": false,
              "decorators": [],
              "body_lines": 18,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "hours",
                  "type_annotation": "int",
                  "default_value": "24",
                  "is_required": false
                }
              ]
            }
          ]
        }
      ],
      "functions": [
        {
          "name": "performance_tracked",
          "line_number": 284,
          "return_type": null,
          "docstring": "性能跟踪装饰器\n\n用法:\n```python\n@performance_tracked('query_daily_kline', 'DAILY_KLINE', 'PostgreSQL', 'daily_kline')\ndef query_data():\n    # 执行查询\n    pass\n```",
          "is_async": false,
          "decorators": [],
          "body_lines": 24,
          "complexity": 1,
          "parameters": [
            {
              "name": "operation_name",
              "type_annotation": "str",
              "default_value": null,
              "is_required": true
            },
            {
              "name": "classification",
              "type_annotation": "Optional[str]",
              "default_value": "None",
              "is_required": false
            },
            {
              "name": "database_type",
              "type_annotation": "Optional[str]",
              "default_value": "None",
              "is_required": false
            },
            {
              "name": "table_name",
              "type_annotation": "Optional[str]",
              "default_value": "None",
              "is_required": false
            }
          ]
        },
        {
          "name": "get_performance_monitor",
          "line_number": 318,
          "return_type": "PerformanceMonitor",
          "docstring": "获取全局性能监控器实例 (单例模式)",
          "is_async": false,
          "decorators": [],
          "body_lines": 5,
          "complexity": 2,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "monitoring/__init__.py",
      "module_name": "monitoring.__init__",
      "category": "monitoring",
      "docstring": null,
      "lines_of_code": 12,
      "blank_lines": 1,
      "comment_lines": 0,
      "last_modified": "2025-10-12T15:25:29.892025",
      "imports": [
        "monitoring_database",
        "data_quality_monitor",
        "performance_monitor",
        "alert_manager"
      ],
      "classes": [],
      "functions": []
    },
    {
      "file_path": "monitoring/data_quality_monitor.py",
      "module_name": "monitoring.data_quality_monitor",
      "category": "monitoring",
      "docstring": "# 功能：数据质量监控模块，检查完整性、新鲜度和准确性\n# 作者：JohnC (ninjas@sina.com) & Claude\n# 创建日期：2025-10-16\n# 版本：2.1.0\n# 依赖：详见requirements.txt或文件导入部分\n# 注意事项：\n#   本文件是MyStocks v2.1核心组件，遵循5-tier数据分类架构\n# 版权：MyStocks Project © 2025",
      "lines_of_code": 466,
      "blank_lines": 66,
      "comment_lines": 31,
      "last_modified": "2025-10-16T08:26:29.099201",
      "imports": [
        "logging",
        "typing",
        "datetime",
        "monitoring.monitoring_database"
      ],
      "classes": [
        {
          "name": "DataQualityMonitor",
          "line_number": 22,
          "base_classes": [],
          "docstring": "数据质量监控器\n\n负责检查数据完整性、新鲜度和准确性,\n自动生成质量报告和告警。",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 35,
              "return_type": null,
              "docstring": "初始化数据质量监控器\n\nArgs:\n    monitoring_db: 监控数据库实例 (可选)",
              "is_async": false,
              "decorators": [],
              "body_lines": 10,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "monitoring_db",
                  "type_annotation": "Optional[MonitoringDatabase]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "check_completeness",
              "line_number": 47,
              "return_type": "Dict[(str, Any)]",
              "docstring": "检查数据完整性\n\nArgs:\n    classification: 数据分类\n    database_type: 数据库类型\n    table_name: 表名\n    total_records: 总记录数\n    null_records: 空值记录数\n    required_columns: 必需列列表\n    threshold: 缺失率阈值 (%)\n\nReturns:\n    dict: 检查结果 {\n        'check_status': 'PASS/FAIL/WARNING',\n        'missing_rate': float,\n        'message': str\n    }",
              "is_async": false,
              "decorators": [],
              "body_lines": 70,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "classification",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "database_type",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "total_records",
                  "type_annotation": "int",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "null_records",
                  "type_annotation": "int",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "required_columns",
                  "type_annotation": "Optional[List[str]]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "threshold",
                  "type_annotation": "Optional[float]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "check_freshness",
              "line_number": 126,
              "return_type": "Dict[(str, Any)]",
              "docstring": "检查数据新鲜度\n\nArgs:\n    classification: 数据分类\n    database_type: 数据库类型\n    table_name: 表名\n    latest_timestamp: 最新数据时间戳\n    expected_update_interval: 预期更新间隔\n    threshold_seconds: 延迟阈值(秒)\n\nReturns:\n    dict: 检查结果",
              "is_async": false,
              "decorators": [],
              "body_lines": 66,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "classification",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "database_type",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "latest_timestamp",
                  "type_annotation": "datetime",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "expected_update_interval",
                  "type_annotation": "Optional[timedelta]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "threshold_seconds",
                  "type_annotation": "Optional[int]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "check_accuracy",
              "line_number": 200,
              "return_type": "Dict[(str, Any)]",
              "docstring": "检查数据准确性\n\nArgs:\n    classification: 数据分类\n    database_type: 数据库类型\n    table_name: 表名\n    total_records: 总记录数\n    invalid_records: 无效记录数\n    validation_rules: 验证规则描述\n    threshold: 无效率阈值 (%)\n\nReturns:\n    dict: 检查结果",
              "is_async": false,
              "decorators": [],
              "body_lines": 66,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "classification",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "database_type",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "total_records",
                  "type_annotation": "int",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "invalid_records",
                  "type_annotation": "int",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "validation_rules",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "threshold",
                  "type_annotation": "Optional[float]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "generate_quality_report",
              "line_number": 275,
              "return_type": "Dict[(str, Any)]",
              "docstring": "生成数据质量报告\n\nArgs:\n    classification: 数据分类\n    database_type: 数据库类型\n    table_name: 表名\n\nReturns:\n    dict: 质量报告 {\n        'overall_status': 'PASS/WARNING/FAIL',\n        'completeness': {...},\n        'freshness': {...},\n        'accuracy': {...},\n        'timestamp': datetime\n    }",
              "is_async": false,
              "decorators": [],
              "body_lines": 36,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "classification",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "database_type",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_create_quality_alert",
              "line_number": 316,
              "return_type": null,
              "docstring": "创建质量告警",
              "is_async": false,
              "decorators": [],
              "body_lines": 18,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "alert_level",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "alert_title",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "alert_message",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "classification",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "database_type",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "check_type",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "metrics",
                  "type_annotation": "Dict[(str, Any)]",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "set_thresholds",
              "line_number": 344,
              "return_type": null,
              "docstring": "设置质量检查阈值\n\nArgs:\n    missing_rate_threshold: 缺失率阈值 (%)\n    delay_threshold_seconds: 延迟阈值 (秒)\n    invalid_rate_threshold: 无效率阈值 (%)",
              "is_async": false,
              "decorators": [],
              "body_lines": 20,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "missing_rate_threshold",
                  "type_annotation": "Optional[float]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "delay_threshold_seconds",
                  "type_annotation": "Optional[int]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "invalid_rate_threshold",
                  "type_annotation": "Optional[float]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            }
          ]
        }
      ],
      "functions": [
        {
          "name": "get_quality_monitor",
          "line_number": 374,
          "return_type": "DataQualityMonitor",
          "docstring": "获取全局数据质量监控器实例 (单例模式)",
          "is_async": false,
          "decorators": [],
          "body_lines": 5,
          "complexity": 2,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "automation/__init__.py",
      "module_name": "automation.__init__",
      "category": "auxiliary",
      "docstring": "自动化调度系统 (Automation and Scheduling System)\n\n提供量化交易系统的自动化任务调度功能:\n- 定时数据更新\n- 策略自动执行\n- 交易信号通知\n- 任务监控和日志\n\n主要组件:\n- TaskScheduler: 任务调度器\n- NotificationManager: 通知管理器\n- PredefinedTasks: 预定义任务\n\n作者: MyStocks量化交易团队\n创建时间: 2025-10-18\n版本: 1.0.0",
      "lines_of_code": 55,
      "blank_lines": 9,
      "comment_lines": 2,
      "last_modified": "2025-10-18T23:22:02.983899",
      "imports": [
        "scheduler",
        "notification_manager"
      ],
      "classes": [],
      "functions": []
    },
    {
      "file_path": "automation/notification_manager.py",
      "module_name": "automation.notification_manager",
      "category": "auxiliary",
      "docstring": "通知管理器 (Notification Manager)\n\n功能说明:\n- 多渠道通知发送（邮件、Webhook、日志）\n- 通知模板管理\n- 通知历史记录\n- 通知过滤和频率限制\n\n支持的通知渠道:\n- Email: SMTP邮件通知\n- Webhook: HTTP POST到指定URL\n- Log: 记录到日志文件\n- Console: 控制台输出（开发调试）\n\n作者: MyStocks量化交易团队\n创建时间: 2025-10-18\n版本: 1.0.0",
      "lines_of_code": 549,
      "blank_lines": 96,
      "comment_lines": 28,
      "last_modified": "2025-10-18T23:21:52.443804",
      "imports": [
        "sys",
        "os",
        "typing",
        "datetime",
        "dataclasses",
        "enum",
        "logging",
        "json"
      ],
      "classes": [
        {
          "name": "NotificationChannel",
          "line_number": 49,
          "base_classes": [
            "Enum"
          ],
          "docstring": "通知渠道",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "NotificationLevel",
          "line_number": 57,
          "base_classes": [
            "Enum"
          ],
          "docstring": "通知级别",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "NotificationConfig",
          "line_number": 66,
          "base_classes": [],
          "docstring": "通知配置",
          "decorators": [
            "dataclass"
          ],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "Notification",
          "line_number": 90,
          "base_classes": [],
          "docstring": "通知记录",
          "decorators": [
            "dataclass"
          ],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "NotificationManager",
          "line_number": 103,
          "base_classes": [],
          "docstring": "通知管理器\n\n功能:\n- 多渠道通知发送\n- 通知模板\n- 频率限制\n- 发送历史",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 114,
              "return_type": null,
              "docstring": "初始化通知管理器\n\n参数:\n    config: 通知配置",
              "is_async": false,
              "decorators": [],
              "body_lines": 27,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "config",
                  "type_annotation": "Optional[NotificationConfig]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "send_notification",
              "line_number": 143,
              "return_type": "bool",
              "docstring": "发送通知\n\n参数:\n    title: 通知标题\n    message: 通知内容\n    level: 通知级别\n    context: 上下文数据\n    channels: 发送渠道（可选，默认使用配置的渠道）\n\n返回:\n    bool: 是否成功发送",
              "is_async": false,
              "decorators": [],
              "body_lines": 68,
              "complexity": 11,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "title",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "message",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "level",
                  "type_annotation": "NotificationLevel",
                  "default_value": "...",
                  "is_required": false
                },
                {
                  "name": "context",
                  "type_annotation": "Optional[Dict]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "channels",
                  "type_annotation": "Optional[List[NotificationChannel]]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "send_success_notification",
              "line_number": 218,
              "return_type": null,
              "docstring": "发送任务成功通知",
              "is_async": false,
              "decorators": [],
              "body_lines": 13,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "task_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "execution_time",
                  "type_annotation": "float",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "result",
                  "type_annotation": "Any",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "send_failure_notification",
              "line_number": 236,
              "return_type": null,
              "docstring": "发送任务失败通知",
              "is_async": false,
              "decorators": [],
              "body_lines": 18,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "task_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "error_message",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "retry_count",
                  "type_annotation": "int",
                  "default_value": "0",
                  "is_required": false
                }
              ]
            },
            {
              "name": "send_signal_notification",
              "line_number": 259,
              "return_type": null,
              "docstring": "发送交易信号通知",
              "is_async": false,
              "decorators": [],
              "body_lines": 30,
              "complexity": 6,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "strategy_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "signal",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "price",
                  "type_annotation": "float",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "context",
                  "type_annotation": "Optional[Dict]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "_send_email",
              "line_number": 296,
              "return_type": null,
              "docstring": "发送邮件通知",
              "is_async": false,
              "decorators": [],
              "body_lines": 31,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "notification",
                  "type_annotation": "Notification",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_send_webhook",
              "line_number": 329,
              "return_type": null,
              "docstring": "发送Webhook通知",
              "is_async": false,
              "decorators": [],
              "body_lines": 27,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "notification",
                  "type_annotation": "Notification",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_send_log",
              "line_number": 358,
              "return_type": null,
              "docstring": "发送日志通知",
              "is_async": false,
              "decorators": [],
              "body_lines": 12,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "notification",
                  "type_annotation": "Notification",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_send_console",
              "line_number": 372,
              "return_type": null,
              "docstring": "发送控制台通知",
              "is_async": false,
              "decorators": [],
              "body_lines": 12,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "notification",
                  "type_annotation": "Notification",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_format_html_email",
              "line_number": 386,
              "return_type": "str",
              "docstring": "格式化HTML邮件",
              "is_async": false,
              "decorators": [],
              "body_lines": 34,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "notification",
                  "type_annotation": "Notification",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_is_rate_limited",
              "line_number": 422,
              "return_type": "bool",
              "docstring": "检查是否达到频率限制",
              "is_async": false,
              "decorators": [],
              "body_lines": 9,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "title",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "message",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_update_rate_limit",
              "line_number": 433,
              "return_type": null,
              "docstring": "更新频率限制追踪",
              "is_async": false,
              "decorators": [],
              "body_lines": 3,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "title",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "message",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_notification_history",
              "line_number": 438,
              "return_type": "List[Notification]",
              "docstring": "获取通知历史\n\n参数:\n    level: 通知级别过滤\n    limit: 返回数量\n\n返回:\n    List[Notification]: 通知列表",
              "is_async": false,
              "decorators": [],
              "body_lines": 16,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "level",
                  "type_annotation": "Optional[NotificationLevel]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "limit",
                  "type_annotation": "int",
                  "default_value": "100",
                  "is_required": false
                }
              ]
            },
            {
              "name": "get_statistics",
              "line_number": 458,
              "return_type": "Dict",
              "docstring": "获取统计信息",
              "is_async": false,
              "decorators": [],
              "body_lines": 6,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "clear_history",
              "line_number": 466,
              "return_type": null,
              "docstring": "清除旧通知历史",
              "is_async": false,
              "decorators": [],
              "body_lines": 4,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "days",
                  "type_annotation": "int",
                  "default_value": "30",
                  "is_required": false
                }
              ]
            }
          ]
        }
      ],
      "functions": []
    },
    {
      "file_path": "automation/scheduler.py",
      "module_name": "automation.scheduler",
      "category": "auxiliary",
      "docstring": "自动化调度系统 (Automated Scheduling System)\n\n功能说明:\n- 定时数据更新和策略执行\n- 多任务调度管理\n- 任务监控和日志\n- 故障重试和通知\n\n使用APScheduler实现灵活的任务调度，支持:\n- Cron表达式定时\n- 间隔时间调度\n- 一次性任务\n- 任务链和依赖\n\n作者: MyStocks量化交易团队\n创建时间: 2025-10-18\n版本: 1.0.0",
      "lines_of_code": 569,
      "blank_lines": 103,
      "comment_lines": 38,
      "last_modified": "2025-10-18T23:20:44.161597",
      "imports": [
        "sys",
        "os",
        "typing",
        "datetime",
        "dataclasses",
        "logging",
        "traceback",
        "time",
        "enum"
      ],
      "classes": [
        {
          "name": "TaskStatus",
          "line_number": 45,
          "base_classes": [
            "Enum"
          ],
          "docstring": "任务状态",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "TaskPriority",
          "line_number": 55,
          "base_classes": [
            "Enum"
          ],
          "docstring": "任务优先级",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "TaskConfig",
          "line_number": 64,
          "base_classes": [],
          "docstring": "任务配置",
          "decorators": [
            "dataclass"
          ],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "TaskExecution",
          "line_number": 91,
          "base_classes": [],
          "docstring": "任务执行记录",
          "decorators": [
            "dataclass"
          ],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "JobLock",
          "line_number": 104,
          "base_classes": [],
          "docstring": "任务锁 - 防止重叠执行",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 107,
              "return_type": null,
              "docstring": null,
              "is_async": false,
              "decorators": [],
              "body_lines": 2,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "acquire",
              "line_number": 111,
              "return_type": "bool",
              "docstring": "获取任务锁\n\n参数:\n    job_id: 任务ID\n    timeout: 锁超时时间（秒）\n\n返回:\n    bool: 是否成功获取锁",
              "is_async": false,
              "decorators": [],
              "body_lines": 27,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "job_id",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "timeout",
                  "type_annotation": "int",
                  "default_value": "3600",
                  "is_required": false
                }
              ]
            },
            {
              "name": "release",
              "line_number": 140,
              "return_type": null,
              "docstring": "释放任务锁",
              "is_async": false,
              "decorators": [],
              "body_lines": 4,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "job_id",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "is_locked",
              "line_number": 146,
              "return_type": "bool",
              "docstring": "检查任务是否已锁定",
              "is_async": false,
              "decorators": [],
              "body_lines": 2,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "job_id",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        },
        {
          "name": "TaskScheduler",
          "line_number": 151,
          "base_classes": [],
          "docstring": "自动化任务调度器\n\n功能:\n- 定时任务调度\n- 任务重试逻辑\n- 执行监控和日志\n- 防止重叠执行",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 162,
              "return_type": null,
              "docstring": "初始化调度器\n\n参数:\n    notification_manager: 通知管理器\n    monitoring_db: 监控数据库",
              "is_async": false,
              "decorators": [],
              "body_lines": 37,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "notification_manager",
                  "type_annotation": null,
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "monitoring_db",
                  "type_annotation": null,
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "add_task",
              "line_number": 203,
              "return_type": "str",
              "docstring": "添加定时任务\n\n参数:\n    task_config: 任务配置\n\n返回:\n    str: 任务ID",
              "is_async": false,
              "decorators": [],
              "body_lines": 44,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "task_config",
                  "type_annotation": "TaskConfig",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_create_trigger",
              "line_number": 249,
              "return_type": null,
              "docstring": "创建触发器",
              "is_async": false,
              "decorators": [],
              "body_lines": 7,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "trigger_type",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "trigger_args",
                  "type_annotation": "Dict",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_wrap_task_function",
              "line_number": 258,
              "return_type": "Callable",
              "docstring": "包装任务函数，添加锁、重试、监控逻辑",
              "is_async": false,
              "decorators": [],
              "body_lines": 84,
              "complexity": 8,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "task_config",
                  "type_annotation": "TaskConfig",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_execute_with_retry",
              "line_number": 344,
              "return_type": "Any",
              "docstring": "执行任务，失败时重试（指数退避）",
              "is_async": false,
              "decorators": [],
              "body_lines": 33,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "func",
                  "type_annotation": "Callable",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "kwargs",
                  "type_annotation": "Dict",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "max_retries",
                  "type_annotation": "int",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "retry_delay",
                  "type_annotation": "int",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "execution",
                  "type_annotation": "TaskExecution",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_trigger_next_tasks",
              "line_number": 384,
              "return_type": null,
              "docstring": "触发后续任务",
              "is_async": false,
              "decorators": [],
              "body_lines": 13,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "next_task_names",
                  "type_annotation": "List[str]",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_job_listener",
              "line_number": 399,
              "return_type": null,
              "docstring": "APScheduler事件监听器",
              "is_async": false,
              "decorators": [],
              "body_lines": 5,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "event",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_log_to_monitoring",
              "line_number": 406,
              "return_type": null,
              "docstring": "记录到监控数据库",
              "is_async": false,
              "decorators": [],
              "body_lines": 15,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "execution",
                  "type_annotation": "TaskExecution",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "start",
              "line_number": 423,
              "return_type": null,
              "docstring": "启动调度器",
              "is_async": false,
              "decorators": [],
              "body_lines": 9,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "stop",
              "line_number": 434,
              "return_type": null,
              "docstring": "停止调度器",
              "is_async": false,
              "decorators": [],
              "body_lines": 4,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_task_status",
              "line_number": 440,
              "return_type": "Optional[TaskStatus]",
              "docstring": "获取任务状态",
              "is_async": false,
              "decorators": [],
              "body_lines": 6,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "task_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_execution_history",
              "line_number": 448,
              "return_type": "List[TaskExecution]",
              "docstring": "获取执行历史\n\n参数:\n    task_name: 任务名称（可选）\n    limit: 返回记录数\n\n返回:\n    List[TaskExecution]: 执行记录列表",
              "is_async": false,
              "decorators": [],
              "body_lines": 16,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "task_name",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "limit",
                  "type_annotation": "int",
                  "default_value": "100",
                  "is_required": false
                }
              ]
            },
            {
              "name": "get_statistics",
              "line_number": 468,
              "return_type": "Dict",
              "docstring": "获取调度器统计信息",
              "is_async": false,
              "decorators": [],
              "body_lines": 7,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "pause_task",
              "line_number": 477,
              "return_type": null,
              "docstring": "暂停任务",
              "is_async": false,
              "decorators": [],
              "body_lines": 4,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "task_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "resume_task",
              "line_number": 483,
              "return_type": null,
              "docstring": "恢复任务",
              "is_async": false,
              "decorators": [],
              "body_lines": 4,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "task_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "remove_task",
              "line_number": 489,
              "return_type": null,
              "docstring": "移除任务",
              "is_async": false,
              "decorators": [],
              "body_lines": 7,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "task_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "list_tasks",
              "line_number": 498,
              "return_type": "List[Dict]",
              "docstring": "列出所有任务",
              "is_async": false,
              "decorators": [],
              "body_lines": 20,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": []
    },
    {
      "file_path": "automation/predefined_tasks.py",
      "module_name": "automation.predefined_tasks",
      "category": "auxiliary",
      "docstring": "预定义任务 (Predefined Tasks)\n\n功能说明:\n- 常用自动化任务的预定义实现\n- 数据更新任务\n- 策略执行任务\n- 信号生成任务\n- 系统维护任务\n\n所有任务都遵循统一接口，可直接用于TaskScheduler调度\n\n作者: MyStocks量化交易团队\n创建时间: 2025-10-18\n版本: 1.0.0",
      "lines_of_code": 487,
      "blank_lines": 103,
      "comment_lines": 28,
      "last_modified": "2025-10-18T23:23:05.175970",
      "imports": [
        "sys",
        "os",
        "typing",
        "datetime",
        "logging",
        "pandas"
      ],
      "classes": [
        {
          "name": "PredefinedTasks",
          "line_number": 31,
          "base_classes": [],
          "docstring": "预定义任务集合\n\n提供常用的自动化任务函数，可直接用于调度器",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "daily_data_update",
              "line_number": 39,
              "return_type": "Dict",
              "docstring": "每日数据更新任务\n\n参数:\n    market: 市场代码 ('sh', 'sz')\n    lookback_days: 回溯天数\n    unified_manager: 数据管理器实例\n\n返回:\n    Dict: 更新结果",
              "is_async": false,
              "decorators": [
                "staticmethod"
              ],
              "body_lines": 43,
              "complexity": 2,
              "parameters": [
                {
                  "name": "market",
                  "type_annotation": "str",
                  "default_value": "\"sh\"",
                  "is_required": false
                },
                {
                  "name": "lookback_days",
                  "type_annotation": "int",
                  "default_value": "3",
                  "is_required": false
                },
                {
                  "name": "unified_manager",
                  "type_annotation": null,
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "execute_strategy",
              "line_number": 87,
              "return_type": "Dict",
              "docstring": "执行策略任务\n\n参数:\n    strategy_name: 策略名称\n    universe: 股票池\n    strategy_executor: 策略执行器实例\n    notification_manager: 通知管理器\n\n返回:\n    Dict: 执行结果",
              "is_async": false,
              "decorators": [
                "staticmethod"
              ],
              "body_lines": 58,
              "complexity": 5,
              "parameters": [
                {
                  "name": "strategy_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "universe",
                  "type_annotation": "List[str]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "strategy_executor",
                  "type_annotation": null,
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "notification_manager",
                  "type_annotation": null,
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "screen_stocks",
              "line_number": 151,
              "return_type": "Dict",
              "docstring": "股票筛选任务\n\n参数:\n    screener_config: 筛选器配置\n    universe: 股票池（可选）\n    unified_manager: 数据管理器\n\n返回:\n    Dict: 筛选结果",
              "is_async": false,
              "decorators": [
                "staticmethod"
              ],
              "body_lines": 43,
              "complexity": 3,
              "parameters": [
                {
                  "name": "screener_config",
                  "type_annotation": "Dict",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "universe",
                  "type_annotation": "Optional[List[str]]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "unified_manager",
                  "type_annotation": null,
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "database_maintenance",
              "line_number": 199,
              "return_type": "Dict",
              "docstring": "数据库维护任务\n\n参数:\n    unified_manager: 数据管理器\n\n返回:\n    Dict: 维护结果",
              "is_async": false,
              "decorators": [
                "staticmethod"
              ],
              "body_lines": 41,
              "complexity": 2,
              "parameters": [
                {
                  "name": "unified_manager",
                  "type_annotation": null,
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "generate_daily_report",
              "line_number": 243,
              "return_type": "Dict",
              "docstring": "生成每日报告任务\n\n参数:\n    date: 报告日期（默认今天）\n    unified_manager: 数据管理器\n    notification_manager: 通知管理器\n\n返回:\n    Dict: 报告信息",
              "is_async": false,
              "decorators": [
                "staticmethod"
              ],
              "body_lines": 72,
              "complexity": 4,
              "parameters": [
                {
                  "name": "date",
                  "type_annotation": "Optional[date]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "unified_manager",
                  "type_annotation": null,
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "notification_manager",
                  "type_annotation": null,
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "health_check",
              "line_number": 320,
              "return_type": "Dict",
              "docstring": "系统健康检查任务\n\n参数:\n    services: 需要检查的服务列表\n\n返回:\n    Dict: 健康状态",
              "is_async": false,
              "decorators": [
                "staticmethod"
              ],
              "body_lines": 47,
              "complexity": 7,
              "parameters": [
                {
                  "name": "services",
                  "type_annotation": "Optional[List[str]]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            }
          ]
        }
      ],
      "functions": [
        {
          "name": "create_daily_update_task",
          "line_number": 371,
          "return_type": "TaskConfig",
          "docstring": "创建每日数据更新任务配置\n\n参数:\n    market: 市场代码\n    hour: 执行小时（默认16:00，收盘后）\n    minute: 执行分钟\n\n返回:\n    TaskConfig: 任务配置",
          "is_async": false,
          "decorators": [],
          "body_lines": 23,
          "complexity": 1,
          "parameters": [
            {
              "name": "market",
              "type_annotation": "str",
              "default_value": "\"sh\"",
              "is_required": false
            },
            {
              "name": "hour",
              "type_annotation": "int",
              "default_value": "16",
              "is_required": false
            },
            {
              "name": "minute",
              "type_annotation": "int",
              "default_value": "0",
              "is_required": false
            }
          ]
        },
        {
          "name": "create_strategy_execution_task",
          "line_number": 399,
          "return_type": "TaskConfig",
          "docstring": "创建策略执行任务配置\n\n参数:\n    strategy_name: 策略名称\n    hour: 执行小时（默认9:30，开盘后）\n    minute: 执行分钟\n\n返回:\n    TaskConfig: 任务配置",
          "is_async": false,
          "decorators": [],
          "body_lines": 24,
          "complexity": 1,
          "parameters": [
            {
              "name": "strategy_name",
              "type_annotation": "str",
              "default_value": null,
              "is_required": true
            },
            {
              "name": "hour",
              "type_annotation": "int",
              "default_value": "9",
              "is_required": false
            },
            {
              "name": "minute",
              "type_annotation": "int",
              "default_value": "30",
              "is_required": false
            }
          ]
        },
        {
          "name": "create_health_check_task",
          "line_number": 428,
          "return_type": "TaskConfig",
          "docstring": "创建健康检查任务配置\n\n参数:\n    interval_minutes: 检查间隔（分钟）\n\n返回:\n    TaskConfig: 任务配置",
          "is_async": false,
          "decorators": [],
          "body_lines": 21,
          "complexity": 1,
          "parameters": [
            {
              "name": "interval_minutes",
              "type_annotation": "int",
              "default_value": "30",
              "is_required": false
            }
          ]
        }
      ]
    },
    {
      "file_path": "adapters/test_customer_adapter.py",
      "module_name": "adapters.test_customer_adapter",
      "category": "auxiliary",
      "docstring": "Customer 数据源适配器测试脚本\n测试 efinance 和 easyquotation 数据源的功能\n\n示例用法：\n    >>> python test_customer_adapter.py",
      "lines_of_code": 117,
      "blank_lines": 13,
      "comment_lines": 11,
      "last_modified": "2025-09-21T11:47:43.346719",
      "imports": [
        "sys",
        "os",
        "pandas",
        "adapters.customer_adapter"
      ],
      "classes": [],
      "functions": [
        {
          "name": "test_customer_data_source",
          "line_number": 20,
          "return_type": null,
          "docstring": "测试Customer数据源",
          "is_async": false,
          "decorators": [],
          "body_lines": 92,
          "complexity": 20,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "adapters/data_source_manager.py",
      "module_name": "adapters.data_source_manager",
      "category": "auxiliary",
      "docstring": "# 功能：数据源管理器，统一管理多个数据源适配器的生命周期\n# 作者：JohnC (ninjas@sina.com) & Claude\n# 创建日期：2025-10-16\n# 版本：2.1.0\n# 依赖：详见requirements.txt或文件导入部分\n# 注意事项：\n#   本文件是MyStocks v2.1核心组件，遵循5-tier数据分类架构\n# 版权：MyStocks Project © 2025",
      "lines_of_code": 372,
      "blank_lines": 75,
      "comment_lines": 27,
      "last_modified": "2025-10-16T08:26:29.095203",
      "imports": [
        "logging",
        "typing",
        "datetime",
        "pandas",
        "interfaces.data_source",
        "adapters.tdx_adapter",
        "adapters.akshare_adapter"
      ],
      "classes": [
        {
          "name": "DataSourceManager",
          "line_number": 23,
          "base_classes": [],
          "docstring": "数据源管理器\n\n功能:\n1. 统一管理多个数据源适配器\n2. 数据源优先级和故障转移\n3. 数据验证和质量检查\n4. 缓存和性能优化\n\n使用示例:\n    >>> manager = DataSourceManager()\n    >>> manager.register_source('tdx', TdxDataSource())\n    >>> manager.register_source('akshare', AkshareDataSource())\n    >>>\n    >>> # 获取实时行情(优先使用TDX)\n    >>> quote = manager.get_real_time_data('600519', source='tdx')\n    >>>\n    >>> # 获取历史数据(自动故障转移)\n    >>> df = manager.get_stock_daily('600519', '2024-01-01', '2024-12-31')",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 45,
              "return_type": null,
              "docstring": "初始化数据源管理器",
              "is_async": false,
              "decorators": [],
              "body_lines": 14,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "register_source",
              "line_number": 61,
              "return_type": null,
              "docstring": "注册数据源适配器\n\nArgs:\n    name: 数据源名称(如'tdx', 'akshare')\n    source: IDataSource实例",
              "is_async": false,
              "decorators": [],
              "body_lines": 12,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "source",
                  "type_annotation": "IDataSource",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_source",
              "line_number": 75,
              "return_type": "Optional[IDataSource]",
              "docstring": "获取指定数据源\n\nArgs:\n    name: 数据源名称\n\nReturns:\n    IDataSource实例,不存在返回None",
              "is_async": false,
              "decorators": [],
              "body_lines": 10,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "list_sources",
              "line_number": 87,
              "return_type": "List[str]",
              "docstring": "获取所有已注册的数据源名称",
              "is_async": false,
              "decorators": [],
              "body_lines": 2,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_real_time_data",
              "line_number": 93,
              "return_type": "Union[(Dict, str)]",
              "docstring": "获取实时行情数据\n\nArgs:\n    symbol: 股票代码\n    source: 指定数据源,None表示按优先级自动选择\n\nReturns:\n    Dict: 成功时返回行情字典\n    str: 失败时返回错误消息",
              "is_async": false,
              "decorators": [],
              "body_lines": 35,
              "complexity": 6,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "source",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "get_stock_daily",
              "line_number": 136,
              "return_type": "pd.DataFrame",
              "docstring": "获取股票日线数据\n\nArgs:\n    symbol: 股票代码\n    start_date: 开始日期\n    end_date: 结束日期\n    source: 指定数据源,None表示按优先级自动选择\n\nReturns:\n    pd.DataFrame: 日线数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 38,
              "complexity": 6,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "start_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "end_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "source",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "get_index_daily",
              "line_number": 182,
              "return_type": "pd.DataFrame",
              "docstring": "获取指数日线数据\n\nArgs:\n    symbol: 指数代码\n    start_date: 开始日期\n    end_date: 结束日期\n    source: 指定数据源,None表示按优先级自动选择\n\nReturns:\n    pd.DataFrame: 指数日线数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 38,
              "complexity": 6,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "start_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "end_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "source",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "get_stock_basic",
              "line_number": 230,
              "return_type": "Dict",
              "docstring": "获取股票基本信息",
              "is_async": false,
              "decorators": [],
              "body_lines": 13,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "source",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "get_financial_data",
              "line_number": 249,
              "return_type": "pd.DataFrame",
              "docstring": "获取财务数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 17,
              "complexity": 6,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "period",
                  "type_annotation": "str",
                  "default_value": "\"quarter\"",
                  "is_required": false
                },
                {
                  "name": "source",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "get_index_components",
              "line_number": 273,
              "return_type": "List[str]",
              "docstring": "获取指数成分股",
              "is_async": false,
              "decorators": [],
              "body_lines": 13,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "source",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "set_priority",
              "line_number": 292,
              "return_type": null,
              "docstring": "设置数据源优先级\n\nArgs:\n    data_type: 数据类型('real_time', 'daily', 'financial')\n    priority_list: 优先级列表(从高到低)",
              "is_async": false,
              "decorators": [],
              "body_lines": 12,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data_type",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "priority_list",
                  "type_annotation": "List[str]",
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": [
        {
          "name": "get_default_manager",
          "line_number": 307,
          "return_type": "DataSourceManager",
          "docstring": "获取默认配置的数据源管理器\n\n自动注册TDX和AKShare数据源\n\nReturns:\n    DataSourceManager实例",
          "is_async": false,
          "decorators": [],
          "body_lines": 25,
          "complexity": 3,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "adapters/test_simple.py",
      "module_name": "adapters.test_simple",
      "category": "auxiliary",
      "docstring": "简化测试脚本，用于检查Customer适配器是否能正常导入和初始化",
      "lines_of_code": 52,
      "blank_lines": 8,
      "comment_lines": 1,
      "last_modified": "2025-09-21T00:49:57.380995",
      "imports": [
        "sys",
        "os"
      ],
      "classes": [],
      "functions": []
    },
    {
      "file_path": "adapters/baostock_adapter.py",
      "module_name": "adapters.baostock_adapter",
      "category": "auxiliary",
      "docstring": "# 功能：BaoStock数据源适配器，提供历史行情和财务数据\n# 作者：JohnC (ninjas@sina.com) & Claude\n# 创建日期：2025-10-16\n# 版本：2.1.0\n# 依赖：详见requirements.txt或文件导入部分\n# 注意事项：\n#   本文件是MyStocks v2.1核心组件，遵循5-tier数据分类架构\n# 版权：MyStocks Project © 2025",
      "lines_of_code": 258,
      "blank_lines": 42,
      "comment_lines": 37,
      "last_modified": "2025-10-16T08:26:29.091205",
      "imports": [
        "pandas",
        "typing",
        "baostock",
        "datetime",
        "sys",
        "os",
        "mystocks.interfaces.data_source",
        "mystocks.utils.symbol_utils",
        "mystocks.utils.column_mapper",
        "mystocks.utils.date_utils"
      ],
      "classes": [
        {
          "name": "BaostockDataSource",
          "line_number": 28,
          "base_classes": [
            "IDataSource"
          ],
          "docstring": "Baostock数据源实现",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 31,
              "return_type": null,
              "docstring": null,
              "is_async": false,
              "decorators": [],
              "body_lines": 17,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "__del__",
              "line_number": 51,
              "return_type": null,
              "docstring": null,
              "is_async": false,
              "decorators": [],
              "body_lines": 2,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_stock_daily",
              "line_number": 56,
              "return_type": "pd.DataFrame",
              "docstring": "获取股票日线数据-Baostock实现",
              "is_async": false,
              "decorators": [],
              "body_lines": 35,
              "complexity": 6,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "start_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "end_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_index_daily",
              "line_number": 93,
              "return_type": "pd.DataFrame",
              "docstring": "获取指数日线数据-Baostock实现",
              "is_async": false,
              "decorators": [],
              "body_lines": 45,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "start_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "end_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_stock_basic",
              "line_number": 140,
              "return_type": "Dict",
              "docstring": "获取股票基本信息-Baostock实现",
              "is_async": false,
              "decorators": [],
              "body_lines": 28,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_index_components",
              "line_number": 170,
              "return_type": "List[str]",
              "docstring": "获取指数成分股-Baostock实现",
              "is_async": false,
              "decorators": [],
              "body_lines": 20,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_real_time_data",
              "line_number": 192,
              "return_type": null,
              "docstring": "获取实时数据-Baostock实现",
              "is_async": false,
              "decorators": [],
              "body_lines": 26,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_market_calendar",
              "line_number": 220,
              "return_type": null,
              "docstring": "获取交易日历-Baostock实现",
              "is_async": false,
              "decorators": [],
              "body_lines": 8,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "start_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "end_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_financial_data",
              "line_number": 230,
              "return_type": null,
              "docstring": "获取财务数据-Baostock实现",
              "is_async": false,
              "decorators": [],
              "body_lines": 18,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "period",
                  "type_annotation": "str",
                  "default_value": "\"annual\"",
                  "is_required": false
                }
              ]
            },
            {
              "name": "get_news_data",
              "line_number": 250,
              "return_type": null,
              "docstring": "获取新闻数据-Baostock实现",
              "is_async": false,
              "decorators": [],
              "body_lines": 8,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "limit",
                  "type_annotation": "int",
                  "default_value": "10",
                  "is_required": false
                }
              ]
            }
          ]
        }
      ],
      "functions": []
    },
    {
      "file_path": "adapters/tushare_adapter.py",
      "module_name": "adapters.tushare_adapter",
      "category": "auxiliary",
      "docstring": "Tushare 数据源适配器\n实现了统一数据接口，提供 Tushare 数据访问\n\n使用前需要：\n1. 安装 tushare: pip install tushare\n2. 申请 Tushare Token\n3. 设置环境变量: TUSHARE_TOKEN=your_token",
      "lines_of_code": 200,
      "blank_lines": 34,
      "comment_lines": 12,
      "last_modified": "2025-09-16T12:07:42.452452",
      "imports": [
        "pandas",
        "typing",
        "sys",
        "os",
        "mystocks.interfaces.data_source",
        "mystocks.utils.symbol_utils"
      ],
      "classes": [
        {
          "name": "TushareDataSource",
          "line_number": 22,
          "base_classes": [
            "IDataSource"
          ],
          "docstring": "Tushare数据源实现",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 25,
              "return_type": null,
              "docstring": null,
              "is_async": false,
              "decorators": [],
              "body_lines": 15,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_stock_daily",
              "line_number": 43,
              "return_type": "pd.DataFrame",
              "docstring": "获取股票日线数据-Tushare实现",
              "is_async": false,
              "decorators": [],
              "body_lines": 31,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "start_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "end_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_index_daily",
              "line_number": 76,
              "return_type": "pd.DataFrame",
              "docstring": "获取指数日线数据-Tushare实现",
              "is_async": false,
              "decorators": [],
              "body_lines": 30,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "start_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "end_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_stock_basic",
              "line_number": 108,
              "return_type": "Dict",
              "docstring": "获取股票基本信息-Tushare实现",
              "is_async": false,
              "decorators": [],
              "body_lines": 16,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_index_components",
              "line_number": 126,
              "return_type": "List[str]",
              "docstring": "获取指数成分股-Tushare实现",
              "is_async": false,
              "decorators": [],
              "body_lines": 15,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_real_time_data",
              "line_number": 143,
              "return_type": "Union[(Dict, str)]",
              "docstring": "获取实时数据-Tushare实现",
              "is_async": false,
              "decorators": [],
              "body_lines": 3,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_market_calendar",
              "line_number": 148,
              "return_type": "Union[(pd.DataFrame, str)]",
              "docstring": "获取交易日历-Tushare实现",
              "is_async": false,
              "decorators": [],
              "body_lines": 11,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "start_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "end_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_financial_data",
              "line_number": 161,
              "return_type": "Union[(pd.DataFrame, str)]",
              "docstring": "获取财务数据-Tushare实现",
              "is_async": false,
              "decorators": [],
              "body_lines": 14,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "period",
                  "type_annotation": "str",
                  "default_value": "\"annual\"",
                  "is_required": false
                }
              ]
            },
            {
              "name": "get_news_data",
              "line_number": 177,
              "return_type": "Union[(List[Dict], str)]",
              "docstring": "获取新闻数据-Tushare实现",
              "is_async": false,
              "decorators": [],
              "body_lines": 3,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "limit",
                  "type_annotation": "int",
                  "default_value": "10",
                  "is_required": false
                }
              ]
            },
            {
              "name": "_format_symbol_for_tushare",
              "line_number": 182,
              "return_type": "str",
              "docstring": "格式化股票代码为Tushare格式",
              "is_async": false,
              "decorators": [],
              "body_lines": 8,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_format_index_for_tushare",
              "line_number": 192,
              "return_type": "str",
              "docstring": "格式化指数代码为Tushare格式",
              "is_async": false,
              "decorators": [],
              "body_lines": 8,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": []
    },
    {
      "file_path": "adapters/financial_adapter.py",
      "module_name": "adapters.financial_adapter",
      "category": "auxiliary",
      "docstring": "# 功能：财务数据适配器，整合多源财务报表和指标数据\n# 作者：JohnC (ninjas@sina.com) & Claude\n# 创建日期：2025-10-16\n# 版本：2.1.0\n# 依赖：详见requirements.txt或文件导入部分\n# 注意事项：\n#   本文件是MyStocks v2.1核心组件，遵循5-tier数据分类架构\n# 版权：MyStocks Project © 2025",
      "lines_of_code": 1079,
      "blank_lines": 128,
      "comment_lines": 170,
      "last_modified": "2025-10-16T08:26:29.095203",
      "imports": [
        "pandas",
        "typing",
        "sys",
        "os",
        "traceback",
        "datetime",
        "loguru",
        "mystocks.interfaces.data_source",
        "mystocks.utils"
      ],
      "classes": [
        {
          "name": "FinancialDataSource",
          "line_number": 69,
          "base_classes": [
            "IDataSource"
          ],
          "docstring": "财务数据适配器 - 参考数据/基本面数据统一门户\n\n数据分类: DataClassification.FUNDAMENTAL_METRICS (第2类-参考数据-基本面数据)\n存储目标: MySQL/MariaDB\n数据特性: 低频、结构化、关系型\n\n多数据源整合:\n- 当前实现: efinance(主要) + easyquotation(备用)\n- 计划扩展: akshare、tushare、byapi、新浪财经爬虫\n\n核心能力:\n- 统一的财务数据获取接口\n- 多数据源自动降级切换\n- 数据验证和清洗\n- 智能缓存机制",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 88,
              "return_type": null,
              "docstring": "初始化财务数据适配器\n\n当前支持: efinance + easyquotation\n扩展计划: akshare、tushare、byapi、新浪财经爬虫",
              "is_async": false,
              "decorators": [],
              "body_lines": 19,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_get_cache_key",
              "line_number": 109,
              "return_type": "str",
              "docstring": "生成缓存键\n\nArgs:\n    symbol: 股票代码\n    data_type: 数据类型\n    **kwargs: 其他参数\n    \nReturns:\n    str: 缓存键",
              "is_async": false,
              "decorators": [],
              "body_lines": 17,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data_type",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "**kwargs",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": false
                }
              ]
            },
            {
              "name": "_get_from_cache",
              "line_number": 128,
              "return_type": null,
              "docstring": "从缓存中获取数据\n\nArgs:\n    cache_key: 缓存键\n    \nReturns:\n    缓存的数据，如果不存在或过期则返回None",
              "is_async": false,
              "decorators": [],
              "body_lines": 19,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "cache_key",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_save_to_cache",
              "line_number": 149,
              "return_type": null,
              "docstring": "保存数据到缓存\n\nArgs:\n    cache_key: 缓存键\n    data: 要缓存的数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 12,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "cache_key",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_init_data_sources",
              "line_number": 163,
              "return_type": null,
              "docstring": "初始化多数据源\n\n当前实现: efinance + easyquotation\n扩展计划: akshare、tushare、byapi、新浪财经爬虫",
              "is_async": false,
              "decorators": [],
              "body_lines": 25,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_stock_daily",
              "line_number": 196,
              "return_type": "pd.DataFrame",
              "docstring": "获取股票日线数据\n\nArgs:\n    symbol: 股票代码\n    start_date: 开始日期\n    end_date: 结束日期\n    \nReturns:\n    DataFrame: 包含股票日线数据的DataFrame",
              "is_async": false,
              "decorators": [],
              "body_lines": 141,
              "complexity": 22,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "start_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "end_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_rename_columns",
              "line_number": 339,
              "return_type": "pd.DataFrame",
              "docstring": "重命名列名以匹配预期格式\n\nArgs:\n    data: 原始数据\n    \nReturns:\n    DataFrame: 重命名后的数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 24,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_index_daily",
              "line_number": 365,
              "return_type": null,
              "docstring": "获取指数日线数据\n\nArgs:\n    index_code (str): 指数代码\n    start_date (str, optional): 开始日期，格式为'YYYY-MM-DD'\n    end_date (str, optional): 结束日期，格式为'YYYY-MM-DD'\n    \nReturns:\n    pd.DataFrame: 指数日线数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 84,
              "complexity": 25,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "index_code",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "start_date",
                  "type_annotation": null,
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "end_date",
                  "type_annotation": null,
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "get_stock_basic",
              "line_number": 451,
              "return_type": "Dict",
              "docstring": "获取股票基本信息\n\nArgs:\n    symbol: 股票代码\n    \nReturns:\n    Dict: 包含股票基本信息的字典",
              "is_async": false,
              "decorators": [],
              "body_lines": 86,
              "complexity": 14,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_index_components",
              "line_number": 539,
              "return_type": null,
              "docstring": "获取指数的成分股数据\n\nArgs:\n    index_code (str): 指数代码或名称\n    \nReturns:\n    pd.DataFrame: 指数成分股数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 46,
              "complexity": 8,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "index_code",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_real_time_data",
              "line_number": 587,
              "return_type": "pd.DataFrame",
              "docstring": "获取实时数据（仅支持A股市场）\n\nArgs:\n    symbol: 股票代码（可选）\n    \nReturns:\n    DataFrame: 包含实时数据的DataFrame",
              "is_async": false,
              "decorators": [],
              "body_lines": 136,
              "complexity": 22,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "get_financial_data",
              "line_number": 725,
              "return_type": "pd.DataFrame",
              "docstring": "获取股票财务数据\n\nArgs:\n    symbol: 股票代码\n    period: 报告期类型 (\"annual\" 年报或 \"quarterly\" 季报)\n    \nReturns:\n    DataFrame: 包含股票财务数据的DataFrame",
              "is_async": false,
              "decorators": [],
              "body_lines": 119,
              "complexity": 14,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "period",
                  "type_annotation": "str",
                  "default_value": "\"annual\"",
                  "is_required": false
                }
              ]
            },
            {
              "name": "get_market_calendar",
              "line_number": 846,
              "return_type": "pd.DataFrame",
              "docstring": "获取交易日历\n\nReturns:\n    DataFrame: 包含交易日历的DataFrame",
              "is_async": false,
              "decorators": [],
              "body_lines": 43,
              "complexity": 6,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_news_data",
              "line_number": 891,
              "return_type": "pd.DataFrame",
              "docstring": "获取股票新闻数据\n\nArgs:\n    symbol: 股票代码\n    \nReturns:\n    DataFrame: 包含股票新闻数据的DataFrame",
              "is_async": false,
              "decorators": [],
              "body_lines": 47,
              "complexity": 6,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_validate_and_clean_data",
              "line_number": 940,
              "return_type": "pd.DataFrame",
              "docstring": "验证和清洗数据\n\nArgs:\n    data: 原始数据\n    data_type: 数据类型 (\"stock\", \"index\", \"financial\")\n    \nReturns:\n    DataFrame: 清洗后的数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 139,
              "complexity": 28,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data_type",
                  "type_annotation": "str",
                  "default_value": "\"stock\"",
                  "is_required": false
                }
              ]
            }
          ]
        }
      ],
      "functions": []
    },
    {
      "file_path": "adapters/__init__.py",
      "module_name": "adapters.__init__",
      "category": "auxiliary",
      "docstring": "数据源适配器模块\n包含各种数据源的具体实现",
      "lines_of_code": 4,
      "blank_lines": 0,
      "comment_lines": 0,
      "last_modified": "2025-10-12T15:25:29.864228",
      "imports": [],
      "classes": [],
      "functions": []
    },
    {
      "file_path": "adapters/customer_adapter.py",
      "module_name": "adapters.customer_adapter",
      "category": "auxiliary",
      "docstring": "# 功能：自定义数据源适配器，支持用户扩展数据源\n# 作者：JohnC (ninjas@sina.com) & Claude\n# 创建日期：2025-10-16\n# 版本：2.1.0\n# 依赖：详见requirements.txt或文件导入部分\n# 注意事项：\n#   本文件是MyStocks v2.1核心组件，遵循5-tier数据分类架构\n# 版权：MyStocks Project © 2025",
      "lines_of_code": 379,
      "blank_lines": 61,
      "comment_lines": 55,
      "last_modified": "2025-10-16T08:26:29.095203",
      "imports": [
        "pandas",
        "typing",
        "sys",
        "os",
        "datetime",
        "interfaces.data_source"
      ],
      "classes": [
        {
          "name": "CustomerDataSource",
          "line_number": 33,
          "base_classes": [
            "IDataSource"
          ],
          "docstring": "Customer数据源实现（统一管理efinance和easyquotation）\n\n属性:\n    efinance_available (bool): efinance库是否可用\n    easyquotation_available (bool): easyquotation库是否可用\n    use_column_mapping (bool): 是否使用列名映射标准化",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 42,
              "return_type": null,
              "docstring": "初始化Customer数据源\n\nArgs:\n    use_column_mapping: 是否启用列名映射标准化",
              "is_async": false,
              "decorators": [],
              "body_lines": 35,
              "complexity": 6,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "use_column_mapping",
                  "type_annotation": "bool",
                  "default_value": "True",
                  "is_required": false
                }
              ]
            },
            {
              "name": "_standardize_dataframe",
              "line_number": 79,
              "return_type": "pd.DataFrame",
              "docstring": "标准化DataFrame列名",
              "is_async": false,
              "decorators": [],
              "body_lines": 12,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "df",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data_type",
                  "type_annotation": "str",
                  "default_value": "\"stock_daily\"",
                  "is_required": false
                }
              ]
            },
            {
              "name": "get_stock_daily",
              "line_number": 93,
              "return_type": "pd.DataFrame",
              "docstring": "获取股票日线数据-Customer实现",
              "is_async": false,
              "decorators": [],
              "body_lines": 34,
              "complexity": 8,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "start_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "end_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_index_daily",
              "line_number": 129,
              "return_type": "pd.DataFrame",
              "docstring": "获取指数日线数据-Customer实现",
              "is_async": false,
              "decorators": [],
              "body_lines": 17,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "start_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "end_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_stock_basic",
              "line_number": 148,
              "return_type": "Dict",
              "docstring": "获取股票基本信息-Customer实现",
              "is_async": false,
              "decorators": [],
              "body_lines": 18,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_index_components",
              "line_number": 168,
              "return_type": "List[str]",
              "docstring": "获取指数成分股-Customer实现",
              "is_async": false,
              "decorators": [],
              "body_lines": 17,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_real_time_data",
              "line_number": 187,
              "return_type": "Union[(pd.DataFrame, Dict, str)]",
              "docstring": "获取实时数据-Customer实现（重点实现efinance的沪深市场A股最新状况功能）",
              "is_async": false,
              "decorators": [],
              "body_lines": 143,
              "complexity": 25,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_market_realtime_quotes",
              "line_number": 332,
              "return_type": "pd.DataFrame",
              "docstring": "专门获取沪深市场A股最新状况的方法",
              "is_async": false,
              "decorators": [],
              "body_lines": 7,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_market_calendar",
              "line_number": 341,
              "return_type": "Union[(pd.DataFrame, str)]",
              "docstring": "获取交易日历-Customer实现",
              "is_async": false,
              "decorators": [],
              "body_lines": 6,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "start_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "end_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_financial_data",
              "line_number": 349,
              "return_type": "Union[(pd.DataFrame, str)]",
              "docstring": "获取财务数据-Customer实现",
              "is_async": false,
              "decorators": [],
              "body_lines": 22,
              "complexity": 6,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "period",
                  "type_annotation": "str",
                  "default_value": "\"annual\"",
                  "is_required": false
                }
              ]
            },
            {
              "name": "get_news_data",
              "line_number": 373,
              "return_type": "Union[(List[Dict], str)]",
              "docstring": "获取新闻数据-Customer实现",
              "is_async": false,
              "decorators": [],
              "body_lines": 6,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "limit",
                  "type_annotation": "int",
                  "default_value": "10",
                  "is_required": false
                }
              ]
            }
          ]
        }
      ],
      "functions": []
    },
    {
      "file_path": "adapters/financial_adapter_example.py",
      "module_name": "adapters.financial_adapter_example",
      "category": "auxiliary",
      "docstring": "Financial适配器使用示例\n展示如何使用FinancialDataSource类获取各种金融数据",
      "lines_of_code": 109,
      "blank_lines": 17,
      "comment_lines": 12,
      "last_modified": "2025-09-21T01:56:14.443197",
      "imports": [
        "sys",
        "os",
        "adapters.financial_adapter",
        "pandas"
      ],
      "classes": [],
      "functions": [
        {
          "name": "main",
          "line_number": 18,
          "return_type": null,
          "docstring": "主函数：演示Financial适配器的使用方法",
          "is_async": false,
          "decorators": [],
          "body_lines": 87,
          "complexity": 11,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "adapters/test_financial_adapter.py",
      "module_name": "adapters.test_financial_adapter",
      "category": "auxiliary",
      "docstring": "Financial适配器测试文件\n用于测试FinancialDataSource类的功能",
      "lines_of_code": 74,
      "blank_lines": 13,
      "comment_lines": 9,
      "last_modified": "2025-09-21T01:46:03.545435",
      "imports": [
        "sys",
        "os",
        "adapters.financial_adapter",
        "pandas"
      ],
      "classes": [],
      "functions": [
        {
          "name": "test_financial_adapter",
          "line_number": 18,
          "return_type": null,
          "docstring": "测试Financial适配器",
          "is_async": false,
          "decorators": [],
          "body_lines": 52,
          "complexity": 8,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "adapters/akshare_proxy_adapter.py",
      "module_name": "adapters.akshare_proxy_adapter",
      "category": "auxiliary",
      "docstring": "AkShare通用接口代理适配器\n\n功能：\n- 动态调用任何akshare接口，无需提前定义\n- 提供统一的错误处理和重试机制\n- 支持参数验证和类型转换\n- 自动添加时间戳和数据标准化\n\n使用场景：\n- 快速接入新的akshare接口\n- 测试和验证akshare功能\n- 临时数据获取需求\n\n注意：此适配器适合快速原型开发，生产环境建议使用专门的适配器",
      "lines_of_code": 319,
      "blank_lines": 58,
      "comment_lines": 18,
      "last_modified": "2025-09-26T23:26:07.564611",
      "imports": [
        "pandas",
        "akshare",
        "sys",
        "os",
        "datetime",
        "time",
        "inspect",
        "typing",
        "functools",
        "mystocks.interfaces.data_source",
        "mystocks.utils.date_utils",
        "mystocks.utils.column_mapper"
      ],
      "classes": [
        {
          "name": "AkshareProxyAdapter",
          "line_number": 43,
          "base_classes": [
            "IDataSource"
          ],
          "docstring": "AkShare通用接口代理适配器\n\n可以动态调用任何akshare接口，提供统一的错误处理和数据标准化",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 49,
              "return_type": null,
              "docstring": "初始化AkShare代理适配器\n\nArgs:\n    api_timeout: API请求超时时间(秒)\n    max_retries: 最大重试次数",
              "is_async": false,
              "decorators": [],
              "body_lines": 11,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "api_timeout",
                  "type_annotation": "int",
                  "default_value": "REQUEST_TIMEOUT",
                  "is_required": false
                },
                {
                  "name": "max_retries",
                  "type_annotation": "int",
                  "default_value": "MAX_RETRIES",
                  "is_required": false
                }
              ]
            },
            {
              "name": "_discover_akshare_functions",
              "line_number": 62,
              "return_type": "Dict[(str, callable)]",
              "docstring": "发现所有可用的akshare函数",
              "is_async": false,
              "decorators": [],
              "body_lines": 13,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_retry_api_call",
              "line_number": 77,
              "return_type": null,
              "docstring": "API调用重试装饰器",
              "is_async": false,
              "decorators": [],
              "body_lines": 14,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "func",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "call_akshare_function",
              "line_number": 93,
              "return_type": "Union[(pd.DataFrame, Dict, List, Any)]",
              "docstring": "动态调用akshare函数\n\nArgs:\n    function_name: akshare函数名称\n    **kwargs: 函数参数\n    \nReturns:\n    函数执行结果",
              "is_async": false,
              "decorators": [],
              "body_lines": 50,
              "complexity": 6,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "function_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "**kwargs",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": false
                }
              ]
            },
            {
              "name": "get_function_info",
              "line_number": 145,
              "return_type": "Dict",
              "docstring": "获取akshare函数的信息\n\nArgs:\n    function_name: 函数名称\n    \nReturns:\n    包含函数信息的字典",
              "is_async": false,
              "decorators": [],
              "body_lines": 24,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "function_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "search_functions",
              "line_number": 171,
              "return_type": "List[str]",
              "docstring": "搜索包含关键词的akshare函数\n\nArgs:\n    keyword: 搜索关键词\n    \nReturns:\n    匹配的函数名列表",
              "is_async": false,
              "decorators": [],
              "body_lines": 19,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "keyword",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "list_stock_functions",
              "line_number": 192,
              "return_type": "List[str]",
              "docstring": "列出所有股票相关的函数",
              "is_async": false,
              "decorators": [],
              "body_lines": 10,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "list_industry_functions",
              "line_number": 204,
              "return_type": "List[str]",
              "docstring": "列出所有行业板块相关的函数",
              "is_async": false,
              "decorators": [],
              "body_lines": 10,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_stock_daily",
              "line_number": 217,
              "return_type": "pd.DataFrame",
              "docstring": "获取股票日线数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 9,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "start_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "end_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_index_daily",
              "line_number": 228,
              "return_type": "pd.DataFrame",
              "docstring": "获取指数日线数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 2,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "start_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "end_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_stock_basic",
              "line_number": 232,
              "return_type": "Dict",
              "docstring": "获取股票基本信息",
              "is_async": false,
              "decorators": [],
              "body_lines": 5,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_index_components",
              "line_number": 239,
              "return_type": "List[str]",
              "docstring": "获取指数成分股",
              "is_async": false,
              "decorators": [],
              "body_lines": 8,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_real_time_data",
              "line_number": 249,
              "return_type": "Dict",
              "docstring": "获取实时数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 7,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_market_calendar",
              "line_number": 258,
              "return_type": "pd.DataFrame",
              "docstring": "获取交易日历",
              "is_async": false,
              "decorators": [],
              "body_lines": 5,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "start_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "end_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_financial_data",
              "line_number": 265,
              "return_type": "pd.DataFrame",
              "docstring": "获取财务数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 5,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "period",
                  "type_annotation": "str",
                  "default_value": "\"annual\"",
                  "is_required": false
                }
              ]
            },
            {
              "name": "get_news_data",
              "line_number": 272,
              "return_type": "List[Dict]",
              "docstring": "获取新闻数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 9,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "limit",
                  "type_annotation": "int",
                  "default_value": "10",
                  "is_required": false
                }
              ]
            }
          ]
        }
      ],
      "functions": [
        {
          "name": "demo_akshare_proxy",
          "line_number": 284,
          "return_type": null,
          "docstring": "演示AkShare代理适配器的使用",
          "is_async": false,
          "decorators": [],
          "body_lines": 31,
          "complexity": 3,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "adapters/byapi_adapter.py",
      "module_name": "adapters.byapi_adapter",
      "category": "auxiliary",
      "docstring": "# 功能：Byapi (biyingapi.com) 数据源适配器，提供A股实时行情、K线和财务数据\n# 作者：JohnC (ninjas@sina.com) & Claude\n# 创建日期：2024-08-29\n# 版本：2.1.0\n# 依赖：requests, pandas (详见requirements.txt)\n# 注意事项：\n#   - API License: 04C01BF1-7F2F-41A3-B470-1F81F14B1FC8\n#   - 内置频率控制: 300请求/分钟 (0.2s间隔)\n#   - 支持A股市场，实时行情+历史K线+财务报表+涨跌停股池\n#   - 辅助文件位于adapters/byapi/目录 (API文档和映射表)\n# 版权：MyStocks Project © 2025",
      "lines_of_code": 626,
      "blank_lines": 130,
      "comment_lines": 39,
      "last_modified": "2025-10-16T08:56:31.221714",
      "imports": [
        "time",
        "requests",
        "pandas",
        "abc",
        "typing",
        "datetime"
      ],
      "classes": [
        {
          "name": "DataSourceError",
          "line_number": 23,
          "base_classes": [
            "Exception"
          ],
          "docstring": "数据源异常",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "IDataSource",
          "line_number": 28,
          "base_classes": [
            "ABC"
          ],
          "docstring": "数据源统一接口",
          "decorators": [],
          "is_abstract": true,
          "methods": [
            {
              "name": "source_name",
              "line_number": 33,
              "return_type": "str",
              "docstring": "数据源名称",
              "is_async": false,
              "decorators": [
                "property",
                "abstractmethod"
              ],
              "body_lines": 2,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "supported_markets",
              "line_number": 39,
              "return_type": "List[str]",
              "docstring": "支持的市场列表",
              "is_async": false,
              "decorators": [
                "property",
                "abstractmethod"
              ],
              "body_lines": 2,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_kline_data",
              "line_number": 44,
              "return_type": "pd.DataFrame",
              "docstring": "获取K线数据",
              "is_async": false,
              "decorators": [
                "abstractmethod"
              ],
              "body_lines": 2,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "start_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "end_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "frequency",
                  "type_annotation": "str",
                  "default_value": "\"daily\"",
                  "is_required": false
                }
              ]
            },
            {
              "name": "get_realtime_quotes",
              "line_number": 55,
              "return_type": "pd.DataFrame",
              "docstring": "获取实时行情",
              "is_async": false,
              "decorators": [
                "abstractmethod"
              ],
              "body_lines": 2,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbols",
                  "type_annotation": "List[str]",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_fundamental_data",
              "line_number": 60,
              "return_type": "pd.DataFrame",
              "docstring": "获取财务数据",
              "is_async": false,
              "decorators": [
                "abstractmethod"
              ],
              "body_lines": 2,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "report_period",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data_type",
                  "type_annotation": "str",
                  "default_value": "\"income\"",
                  "is_required": false
                }
              ]
            },
            {
              "name": "get_stock_list",
              "line_number": 70,
              "return_type": "pd.DataFrame",
              "docstring": "获取股票列表",
              "is_async": false,
              "decorators": [
                "abstractmethod"
              ],
              "body_lines": 2,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        },
        {
          "name": "ByapiAdapter",
          "line_number": 75,
          "base_classes": [
            "IDataSource"
          ],
          "docstring": "Byapi (biyingapi.com) 数据源适配器\n\n特点:\n- 支持A股市场全量数据\n- 提供实时行情和历史K线\n- 包含完整的财务报表数据\n- 内置频率控制 (300请求/分钟)\n\nArgs:\n    licence: biyingapi.com API许可证\n    base_url: API基础URL (默认: http://api.biyingapi.com)\n    min_interval: 最小请求间隔秒数 (默认: 0.2s, 对应300次/分钟)",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 91,
              "return_type": null,
              "docstring": null,
              "is_async": false,
              "decorators": [],
              "body_lines": 25,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "licence",
                  "type_annotation": "str",
                  "default_value": "\"04C01BF1-7F2F-41A3-B470-1F81F14B1FC8\"",
                  "is_required": false
                },
                {
                  "name": "base_url",
                  "type_annotation": "str",
                  "default_value": "\"http://api.biyingapi.com\"",
                  "is_required": false
                },
                {
                  "name": "min_interval",
                  "type_annotation": "float",
                  "default_value": "0.2",
                  "is_required": false
                }
              ]
            },
            {
              "name": "source_name",
              "line_number": 124,
              "return_type": "str",
              "docstring": null,
              "is_async": false,
              "decorators": [
                "property"
              ],
              "body_lines": 1,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "supported_markets",
              "line_number": 128,
              "return_type": "List[str]",
              "docstring": null,
              "is_async": false,
              "decorators": [
                "property"
              ],
              "body_lines": 1,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_standardize_symbol",
              "line_number": 131,
              "return_type": "str",
              "docstring": "标准化股票代码格式\n\nArgs:\n    symbol: 原始代码 (如 '600000.SH' 或 '600000')\n\nReturns:\n    byapi格式代码 (如 '600000.SH')",
              "is_async": false,
              "decorators": [],
              "body_lines": 19,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_rate_limit",
              "line_number": 152,
              "return_type": null,
              "docstring": "控制API请求频率",
              "is_async": false,
              "decorators": [],
              "body_lines": 8,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_request",
              "line_number": 162,
              "return_type": "Dict[(Any, Any)]",
              "docstring": "发送HTTP请求并返回JSON数据\n\nArgs:\n    url: 完整的API URL\n    timeout: 超时时间(秒)\n\nReturns:\n    解析后的JSON对象\n\nRaises:\n    DataSourceError: API请求失败",
              "is_async": false,
              "decorators": [],
              "body_lines": 23,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "url",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "timeout",
                  "type_annotation": "int",
                  "default_value": "30",
                  "is_required": false
                }
              ]
            },
            {
              "name": "get_stock_list",
              "line_number": 187,
              "return_type": "pd.DataFrame",
              "docstring": "获取股票列表\n\nAPI: http://api.biyingapi.com/hslt/list/licence\n\nReturns:\n    DataFrame包含:\n    - symbol: 股票代码 (如 '600000.SH')\n    - name: 股票名称\n    - exchange: 交易所 (SSE/SZSE)\n    - list_date: 上市日期\n    - status: 状态 (固定为 'ACTIVE')",
              "is_async": false,
              "decorators": [],
              "body_lines": 46,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_kline_data",
              "line_number": 235,
              "return_type": "pd.DataFrame",
              "docstring": "获取K线数据\n\nAPI: https://api.biyingapi.com/hsstock/history/{symbol}/{level}/n/{licence}?st={start}&et={end}\n\nArgs:\n    symbol: 股票代码 (如 '600000.SH')\n    start_date: 开始日期 (YYYY-MM-DD)\n    end_date: 结束日期 (YYYY-MM-DD)\n    frequency: 频率 (daily/5min/15min/30min/60min/weekly/monthly)\n\nReturns:\n    DataFrame包含:\n    - symbol, timestamp/date, open, high, low, close, volume, amount",
              "is_async": false,
              "decorators": [],
              "body_lines": 63,
              "complexity": 6,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "start_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "end_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "frequency",
                  "type_annotation": "str",
                  "default_value": "\"daily\"",
                  "is_required": false
                }
              ]
            },
            {
              "name": "get_realtime_quotes",
              "line_number": 306,
              "return_type": "pd.DataFrame",
              "docstring": "获取实时行情\n\nAPI (旧): http://api.biyingapi.com/hsrl/ssjy/{code}/{licence}\nAPI (新): https://api.biyingapi.com/hsstock/real/time/{symbol}/{licence}\n\n优先使用旧接口(更稳定),新接口作为备选\n\nArgs:\n    symbols: 股票代码列表 (如 ['600000.SH', '000001.SZ'])\n\nReturns:\n    DataFrame包含:\n    - symbol, name, current_price, change, change_pct, open, high, low,\n      pre_close, volume, amount, timestamp",
              "is_async": false,
              "decorators": [],
              "body_lines": 63,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbols",
                  "type_annotation": "List[str]",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_fundamental_data",
              "line_number": 371,
              "return_type": "pd.DataFrame",
              "docstring": "获取财务数据\n\nAPI: http://api.biyingapi.com/hsstock/financial/{type}/{symbol}/{licence}?st={start}&et={end}\n\nArgs:\n    symbol: 股票代码 (如 '600000.SH')\n    report_period: 报告期 (YYYY-MM-DD 或 'latest' 获取最新一期)\n    data_type: 数据类型\n        - \"income\": 利润表\n        - \"balance\": 资产负债表\n        - \"cashflow\": 现金流量表\n        - \"metrics\": 财务指标\n\nReturns:\n    DataFrame包含财务数据 (列名根据data_type不同而不同)",
              "is_async": false,
              "decorators": [],
              "body_lines": 55,
              "complexity": 7,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "report_period",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data_type",
                  "type_annotation": "str",
                  "default_value": "\"income\"",
                  "is_required": false
                }
              ]
            },
            {
              "name": "get_limit_up_stocks",
              "line_number": 433,
              "return_type": "pd.DataFrame",
              "docstring": "获取涨停股池 (byapi特有功能)\n\nAPI: http://api.biyingapi.com/hslt/ztgc/{date}/{licence}\n\nArgs:\n    trade_date: 交易日期 (YYYY-MM-DD)\n\nReturns:\n    DataFrame包含涨停股票列表",
              "is_async": false,
              "decorators": [],
              "body_lines": 26,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "trade_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_limit_down_stocks",
              "line_number": 461,
              "return_type": "pd.DataFrame",
              "docstring": "获取跌停股池 (byapi特有功能)\n\nAPI: http://api.biyingapi.com/hslt/dtgc/{date}/{licence}\n\nArgs:\n    trade_date: 交易日期 (YYYY-MM-DD)\n\nReturns:\n    DataFrame包含跌停股票列表",
              "is_async": false,
              "decorators": [],
              "body_lines": 26,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "trade_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_technical_indicator",
              "line_number": 489,
              "return_type": "pd.DataFrame",
              "docstring": "获取技术指标 (byapi特有功能)\n\nAPI: http://api.biyingapi.com/hsstock/history/{indicator}/{symbol}/{level}/n/{licence}?st={start}&et={end}&lt={limit}\n\nArgs:\n    symbol: 股票代码\n    indicator: 指标类型 (macd/ma/boll/kdj)\n    frequency: 频率\n    start_date: 开始日期 (可选)\n    end_date: 结束日期 (可选)\n    limit: 最大返回条数\n\nReturns:\n    DataFrame包含技术指标数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 49,
              "complexity": 7,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "indicator",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "frequency",
                  "type_annotation": "str",
                  "default_value": "\"daily\"",
                  "is_required": false
                },
                {
                  "name": "start_date",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "end_date",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "limit",
                  "type_annotation": "int",
                  "default_value": "100",
                  "is_required": false
                }
              ]
            }
          ]
        }
      ],
      "functions": []
    },
    {
      "file_path": "adapters/akshare_adapter.py",
      "module_name": "adapters.akshare_adapter",
      "category": "auxiliary",
      "docstring": "# 功能：AkShare数据源适配器，提供A股行情和基本面数据\n# 作者：JohnC (ninjas@sina.com) & Claude\n# 创建日期：2025-10-16\n# 版本：2.1.0\n# 依赖：详见requirements.txt或文件导入部分\n# 注意事项：\n#   本文件是MyStocks v2.1核心组件，遵循5-tier数据分类架构\n# 版权：MyStocks Project © 2025",
      "lines_of_code": 511,
      "blank_lines": 94,
      "comment_lines": 59,
      "last_modified": "2025-10-16T08:26:29.091205",
      "imports": [
        "pandas",
        "typing",
        "akshare",
        "sys",
        "os",
        "datetime",
        "time",
        "functools",
        "interfaces.data_source",
        "utils.date_utils",
        "utils.symbol_utils",
        "utils.column_mapper"
      ],
      "classes": [
        {
          "name": "AkshareDataSource",
          "line_number": 35,
          "base_classes": [
            "IDataSource"
          ],
          "docstring": "Akshare数据源实现\n\n属性:\n    api_timeout (int): API请求超时时间(秒)\n    max_retries (int): 最大重试次数",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 43,
              "return_type": null,
              "docstring": "初始化Akshare数据源\n\nArgs:\n    api_timeout: API请求超时时间(秒)\n    max_retries: 最大重试次数",
              "is_async": false,
              "decorators": [],
              "body_lines": 9,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "api_timeout",
                  "type_annotation": "int",
                  "default_value": "REQUEST_TIMEOUT",
                  "is_required": false
                },
                {
                  "name": "max_retries",
                  "type_annotation": "int",
                  "default_value": "MAX_RETRIES",
                  "is_required": false
                }
              ]
            },
            {
              "name": "_retry_api_call",
              "line_number": 54,
              "return_type": null,
              "docstring": "API调用重试装饰器",
              "is_async": false,
              "decorators": [],
              "body_lines": 14,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "func",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_stock_daily",
              "line_number": 70,
              "return_type": "pd.DataFrame",
              "docstring": "获取股票日线数据-Akshare实现",
              "is_async": false,
              "decorators": [],
              "body_lines": 70,
              "complexity": 11,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "start_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "end_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_index_daily",
              "line_number": 142,
              "return_type": "pd.DataFrame",
              "docstring": "获取指数日线数据-Akshare实现\n使用优先级：\n1. 新浪接口(stock_zh_index_daily)\n2. 东方财富接口(stock_zh_index_daily_em)\n3. 通用接口(index_zh_a_hist)",
              "is_async": false,
              "decorators": [],
              "body_lines": 80,
              "complexity": 13,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "start_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "end_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_process_index_data",
              "line_number": 224,
              "return_type": "pd.DataFrame",
              "docstring": "处理指数数据统一格式",
              "is_async": false,
              "decorators": [],
              "body_lines": 3,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "df",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_stock_basic",
              "line_number": 229,
              "return_type": "Dict",
              "docstring": "获取股票基本信息-Akshare实现",
              "is_async": false,
              "decorators": [],
              "body_lines": 22,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_index_components",
              "line_number": 253,
              "return_type": "List[str]",
              "docstring": "获取指数成分股-Akshare实现",
              "is_async": false,
              "decorators": [],
              "body_lines": 21,
              "complexity": 6,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_real_time_data",
              "line_number": 276,
              "return_type": null,
              "docstring": "获取实时数据-Akshare实现",
              "is_async": false,
              "decorators": [],
              "body_lines": 20,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_market_calendar",
              "line_number": 298,
              "return_type": null,
              "docstring": "获取交易日历-Akshare实现",
              "is_async": false,
              "decorators": [],
              "body_lines": 21,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "start_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "end_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_financial_data",
              "line_number": 321,
              "return_type": null,
              "docstring": "获取财务数据-Akshare实现",
              "is_async": false,
              "decorators": [],
              "body_lines": 14,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "period",
                  "type_annotation": "str",
                  "default_value": "\"annual\"",
                  "is_required": false
                }
              ]
            },
            {
              "name": "get_news_data",
              "line_number": 337,
              "return_type": null,
              "docstring": "获取新闻数据-Akshare实现",
              "is_async": false,
              "decorators": [],
              "body_lines": 20,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "limit",
                  "type_annotation": "int",
                  "default_value": "10",
                  "is_required": false
                }
              ]
            },
            {
              "name": "get_ths_industry_summary",
              "line_number": 359,
              "return_type": "pd.DataFrame",
              "docstring": "获取同花顺行业一览表数据-Akshare实现\n\n该接口获取同花顺网站的行业板块数据，包含行业名称、最新价、涨跌幅、\n涨跌额、成交量、成交额、领涨股等信息。\n\nReturns:\n    pd.DataFrame: 同花顺行业一览表数据\n        - 行业: 行业名称\n        - 最新价: 行业指数最新价格\n        - 涨跌幅: 涨跌幅百分比\n        - 涨跌额: 涨跌绝对值\n        - 成交量: 成交量\n        - 成交额: 成交金额\n        - 领涨股: 该行业领涨股票\n        - 涨跌家数: 上涨/下跌股票家数\n\n示例用法:\n    >>> adapter = AkshareDataSource()\n    >>> industry_data = adapter.get_ths_industry_summary()\n    >>> print(industry_data.head())",
              "is_async": false,
              "decorators": [],
              "body_lines": 53,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_ths_industry_stocks",
              "line_number": 414,
              "return_type": "pd.DataFrame",
              "docstring": "获取同花顺指定行业的成分股数据-Akshare实现\n\n该接口获取同花顺指定行业下的所有成分股信息。\n注意：由于akshare的接口限制，此方法将使用东方财富的行业成分股接口。\n\nArgs:\n    industry_name (str): 行业名称，例如：\"房地产开发\", \"银行\", \"白酒\" 等\n\nReturns:\n    pd.DataFrame: 指定行业的成分股数据\n        - 代码: 股票代码\n        - 名称: 股票名称  \n        - 最新价: 最新价格\n        - 涨跌幅: 涨跌幅百分比\n        - 涨跌额: 涨跌绝对值\n        - 成交量: 成交量\n        - 成交额: 成交金额\n        - 市盈率: 市盈率\n        - 流通市值: 流通市值\n\n示例用法:\n    >>> adapter = AkshareDataSource()\n    >>> bank_stocks = adapter.get_ths_industry_stocks(\"银行\")\n    >>> print(bank_stocks.head())",
              "is_async": false,
              "decorators": [],
              "body_lines": 54,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "industry_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_ths_industry_names",
              "line_number": 470,
              "return_type": "pd.DataFrame",
              "docstring": "获取同花顺行业名称列表-Akshare实现\n\n该接口获取同花顺的所有行业名称和代码。\n\nReturns:\n    pd.DataFrame: 同花顺行业名称列表\n        - name: 行业名称\n        - code: 行业代码\n\n示例用法:\n    >>> adapter = AkshareDataSource()\n    >>> industry_names = adapter.get_ths_industry_names()\n    >>> print(industry_names.head())",
              "is_async": false,
              "decorators": [],
              "body_lines": 41,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": []
    },
    {
      "file_path": "adapters/tdx_adapter.py",
      "module_name": "adapters.tdx_adapter",
      "category": "auxiliary",
      "docstring": "# 功能：通达信(TDX)数据源适配器，提供实时行情和多周期K线数据\n# 作者：JohnC (ninjas@sina.com) & Claude\n# 创建日期：2025-10-16\n# 版本：2.1.0\n# 依赖：详见requirements.txt或文件导入部分\n# 注意事项：\n#   本文件是MyStocks v2.1核心组件，遵循5-tier数据分类架构\n# 版权：MyStocks Project © 2025",
      "lines_of_code": 1059,
      "blank_lines": 217,
      "comment_lines": 111,
      "last_modified": "2025-10-19T06:19:16.742368",
      "imports": [
        "sys",
        "os",
        "logging",
        "time",
        "typing",
        "datetime",
        "functools",
        "pandas",
        "pytdx.hq",
        "interfaces.data_source",
        "utils.column_mapper",
        "utils.date_utils",
        "utils.tdx_server_config"
      ],
      "classes": [
        {
          "name": "TdxDataSource",
          "line_number": 35,
          "base_classes": [
            "IDataSource"
          ],
          "docstring": "TDX(通达信)数据源适配器\n\n实现IDataSource接口,提供A股市场数据访问:\n- 实时行情 (get_real_time_data)\n- 历史日线 (get_stock_daily, get_index_daily)\n- 财务数据 (get_financial_data - 有限支持)\n- 板块信息 (get_index_components - 有限支持)\n\n特点:\n- 直连通达信服务器,无API限流\n- 使用本地pytdx代码(temp/pytdx/),可二次开发\n- 自动重试、连接管理、数据验证\n- 完整日志记录\n\n限制:\n- 仅支持A股(深交所+上交所),不含期货/期权\n- 部分IDataSource方法为stub实现(get_market_calendar, get_news_data)",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 56,
              "return_type": null,
              "docstring": "初始化TDX数据源适配器\n\nArgs:\n    tdx_host: TDX服务器地址 (默认从环境变量TDX_SERVER_HOST读取)\n    tdx_port: TDX服务器端口 (默认从环境变量TDX_SERVER_PORT读取)\n    max_retries: 最大重试次数 (默认从环境变量TDX_MAX_RETRIES读取,默认3)\n    retry_delay: 重试延迟秒数 (默认从环境变量TDX_RETRY_DELAY读取,默认1)\n    api_timeout: API超时时间 (默认从环境变量TDX_API_TIMEOUT读取,默认10)\n    use_server_config: 是否使用connect.cfg配置的服务器列表(默认True)",
              "is_async": false,
              "decorators": [],
              "body_lines": 41,
              "complexity": 10,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "tdx_host",
                  "type_annotation": "str",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "tdx_port",
                  "type_annotation": "int",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "max_retries",
                  "type_annotation": "int",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "retry_delay",
                  "type_annotation": "int",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "api_timeout",
                  "type_annotation": "int",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "use_server_config",
                  "type_annotation": "bool",
                  "default_value": "True",
                  "is_required": false
                }
              ]
            },
            {
              "name": "_get_tdx_connection",
              "line_number": 107,
              "return_type": null,
              "docstring": "获取TDX连接(上下文管理器)\n\nReturns:\n    TdxHq_API实例的上下文管理器\n\nExample:\n    with self._get_tdx_connection() as api:\n        data = api.get_security_quotes([...])",
              "is_async": false,
              "decorators": [],
              "body_lines": 11,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_get_market_code",
              "line_number": 122,
              "return_type": "int",
              "docstring": "识别股票代码对应的市场类型\n\nArgs:\n    symbol: 6位数字股票代码 (如'600519', '000001')\n\nReturns:\n    0 = 深圳证券交易所 (深市主板/中小板/创业板)\n    1 = 上海证券交易所 (沪市主板/科创板)\n\nRaises:\n    ValueError: 如果股票代码格式无效或无法识别市场\n\n市场识别规则:\n    - 000xxx, 002xxx, 300xxx → 深圳 (主板/中小板/创业板)\n    - 600xxx, 601xxx, 603xxx, 688xxx → 上海 (主板/科创板)",
              "is_async": false,
              "decorators": [],
              "body_lines": 31,
              "complexity": 6,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_retry_api_call",
              "line_number": 157,
              "return_type": null,
              "docstring": "API调用重试装饰器(带指数退避和服务器故障转移)\n\nArgs:\n    func: 要包装的函数\n\nReturns:\n    包装后的函数(自动重试)\n\n行为:\n    - 失败时自动重试max_retries次\n    - 每次重试延迟逐渐增加(指数退避)\n    - 如果启用server_config,在重试时切换到备用服务器\n    - 最后一次失败时抛出原始异常",
              "is_async": false,
              "decorators": [],
              "body_lines": 46,
              "complexity": 7,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "func",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_validate_kline_data",
              "line_number": 207,
              "return_type": "pd.DataFrame",
              "docstring": "验证K线数据完整性和合法性\n\nArgs:\n    df: K线DataFrame\n\nReturns:\n    验证并清理后的DataFrame\n\n验证项:\n    1. 检查必需列是否存在\n    2. 价格列非负\n    3. 成交量非负\n    4. OHLC逻辑 (high >= max(open, close, low))",
              "is_async": false,
              "decorators": [],
              "body_lines": 43,
              "complexity": 7,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "df",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_stock_daily",
              "line_number": 255,
              "return_type": "pd.DataFrame",
              "docstring": "获取股票日线数据\n\nArgs:\n    symbol: 6位数字股票代码 (如'600519')\n    start_date: 开始日期 (格式: 'YYYY-MM-DD')\n    end_date: 结束日期 (格式: 'YYYY-MM-DD')\n\nReturns:\n    pd.DataFrame: 日线数据,包含以下列:\n        - date: 日期\n        - open: 开盘价\n        - high: 最高价\n        - low: 最低价\n        - close: 收盘价\n        - volume: 成交量\n        - amount: 成交额\n\nNote:\n    - pytdx单次最多返回800条数据,需要分页获取\n    - 数据从最新日期开始向前获取\n    - 返回的数据按日期升序排列\n\nExample:\n    >>> tdx = TdxDataSource()\n    >>> df = tdx.get_stock_daily('600519', '2024-01-01', '2024-12-31')\n    >>> print(df.head())",
              "is_async": false,
              "decorators": [],
              "body_lines": 147,
              "complexity": 19,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "start_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "end_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_index_daily",
              "line_number": 404,
              "return_type": "pd.DataFrame",
              "docstring": "获取指数日线数据\n\nArgs:\n    symbol: 6位数字指数代码 (如'000001'=上证指数, '399001'=深证成指)\n    start_date: 开始日期 (格式: 'YYYY-MM-DD')\n    end_date: 结束日期 (格式: 'YYYY-MM-DD')\n\nReturns:\n    pd.DataFrame: 指数日线数据,包含以下列:\n        - date: 日期\n        - open: 开盘点位\n        - high: 最高点位\n        - low: 最低点位\n        - close: 收盘点位\n        - volume: 成交量\n        - amount: 成交额\n\nNote:\n    - 指数代码识别: 000xxx/399xxx=深圳, 其他=上海\n    - 实现逻辑与get_stock_daily类似,但使用指数API\n\nExample:\n    >>> tdx = TdxDataSource()\n    >>> df = tdx.get_index_daily('000001', '2024-01-01', '2024-12-31')\n    >>> print(df.head())",
              "is_async": false,
              "decorators": [],
              "body_lines": 150,
              "complexity": 21,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "start_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "end_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_stock_basic",
              "line_number": 556,
              "return_type": "Dict",
              "docstring": "获取股票基本信息 - Phase 6实现(有限支持)",
              "is_async": false,
              "decorators": [],
              "body_lines": 3,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_index_components",
              "line_number": 561,
              "return_type": "List[str]",
              "docstring": "获取指数成分股 - Phase 7实现(有限支持)",
              "is_async": false,
              "decorators": [],
              "body_lines": 3,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_real_time_data",
              "line_number": 566,
              "return_type": "Union[(Dict, str)]",
              "docstring": "获取实时行情数据\n\nArgs:\n    symbol: 6位数字股票代码 (如'600519')\n\nReturns:\n    Dict: 成功时返回包含实时行情的字典\n        {\n            'code': str,          # 股票代码\n            'name': str,          # 股票名称\n            'price': float,       # 最新价\n            'pre_close': float,   # 昨收价\n            'open': float,        # 今开价\n            'high': float,        # 最高价\n            'low': float,         # 最低价\n            'volume': int,        # 成交量(手)\n            'amount': float,      # 成交额(元)\n            'bid1': float,        # 买一价\n            'bid1_volume': int,   # 买一量\n            'ask1': float,        # 卖一价\n            'ask1_volume': int,   # 卖一量\n            'timestamp': str      # 查询时间戳\n        }\n    str: 失败时返回错误消息字符串\n\nExample:\n    >>> tdx = TdxDataSource()\n    >>> quote = tdx.get_real_time_data('600519')\n    >>> if isinstance(quote, dict):\n    >>>     print(f\"当前价: {quote['price']}\")",
              "is_async": false,
              "decorators": [],
              "body_lines": 115,
              "complexity": 11,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_market_calendar",
              "line_number": 683,
              "return_type": "pd.DataFrame",
              "docstring": "获取交易日历 - Phase 8 stub实现(TDX不支持)",
              "is_async": false,
              "decorators": [],
              "body_lines": 3,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "start_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "end_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_financial_data",
              "line_number": 688,
              "return_type": "pd.DataFrame",
              "docstring": "获取财务数据 - Phase 6实现(有限支持)",
              "is_async": false,
              "decorators": [],
              "body_lines": 3,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "period",
                  "type_annotation": "str",
                  "default_value": "\"quarter\"",
                  "is_required": false
                }
              ]
            },
            {
              "name": "get_news_data",
              "line_number": 693,
              "return_type": "List[Dict]",
              "docstring": "获取新闻数据 - Phase 8 stub实现(TDX不支持)",
              "is_async": false,
              "decorators": [],
              "body_lines": 3,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "limit",
                  "type_annotation": "int",
                  "default_value": "20",
                  "is_required": false
                }
              ]
            },
            {
              "name": "get_stock_kline",
              "line_number": 700,
              "return_type": "pd.DataFrame",
              "docstring": "获取股票K线数据(支持多种周期)\n\nArgs:\n    symbol: 6位数字股票代码\n    start_date: 开始日期\n    end_date: 结束日期\n    period: K线周期\n        - '1m':  1分钟\n        - '5m':  5分钟\n        - '15m': 15分钟\n        - '30m': 30分钟\n        - '1h':  1小时\n        - '1d':  日线 (默认)\n\nReturns:\n    pd.DataFrame: K线数据\n\nExample:\n    >>> tdx = TdxDataSource()\n    >>> # 获取5分钟K线\n    >>> df = tdx.get_stock_kline('600519', '2024-01-01', '2024-01-31', period='5m')",
              "is_async": false,
              "decorators": [],
              "body_lines": 133,
              "complexity": 19,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "start_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "end_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "period",
                  "type_annotation": "str",
                  "default_value": "\"1d\"",
                  "is_required": false
                }
              ]
            },
            {
              "name": "get_index_kline",
              "line_number": 841,
              "return_type": "pd.DataFrame",
              "docstring": "获取指数K线数据(支持多种周期)\n\nArgs:\n    symbol: 6位数字指数代码\n    start_date: 开始日期\n    end_date: 结束日期\n    period: K线周期 ('1m', '5m', '15m', '30m', '1h', '1d')\n\nReturns:\n    pd.DataFrame: 指数K线数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 104,
              "complexity": 16,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "start_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "end_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "period",
                  "type_annotation": "str",
                  "default_value": "\"1d\"",
                  "is_required": false
                }
              ]
            },
            {
              "name": "read_day_file",
              "line_number": 955,
              "return_type": "pd.DataFrame",
              "docstring": "读取通达信二进制 .day 文件\n\n通达信 .day 文件格式:\n- 每条记录32字节\n- 格式: struct.unpack('IIIIIfII', ...)\n- 字段: [日期, 开盘价*100, 最高价*100, 最低价*100,\n        收盘价*100, 成交额, 成交量, 保留字段]\n\nArgs:\n    file_path: .day 文件的绝对路径\n\nReturns:\n    pd.DataFrame: 包含OHLCV数据\n        - code: 股票代码\n        - tradeDate: 交易日期\n        - open: 开盘价\n        - high: 最高价\n        - low: 最低价\n        - close: 收盘价\n        - amount: 成交额\n        - vol: 成交量\n\nRaises:\n    FileNotFoundError: 文件不存在\n    ValueError: 文件格式错误\n\nExample:\n    >>> tdx = TdxDataSource()\n    >>> df = tdx.read_day_file('/path/to/sh000001.day')\n    >>> print(df.head())",
              "is_async": false,
              "decorators": [],
              "body_lines": 103,
              "complexity": 8,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "file_path",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": []
    },
    {
      "file_path": "data_sources/tdx_importer.py",
      "module_name": "data_sources.tdx_importer",
      "category": "core",
      "docstring": "TDX数据增量导入器 (TDX Incremental Importer)\n\n功能说明:\n- 从TDX本地文件增量导入数据到MyStocks数据库\n- 通过5-tier数据分类自动路由到对应数据库\n- 支持断点续传和增量更新\n- 批量处理优化性能\n\n数据路由策略:\n- 日线/分钟线数据 → TDengine (时序数据库)\n- 导入记录元数据 → MySQL (元数据库)\n\n作者: MyStocks量化交易团队\n创建时间: 2025-10-18\n版本: 1.0.0",
      "lines_of_code": 339,
      "blank_lines": 65,
      "comment_lines": 17,
      "last_modified": "2025-10-18T20:42:45.627511",
      "imports": [
        "sys",
        "os",
        "pandas",
        "numpy",
        "typing",
        "datetime",
        "dataclasses",
        "logging",
        "tqdm",
        "data_sources.tdx_binary_parser",
        "core"
      ],
      "classes": [
        {
          "name": "ImportJob",
          "line_number": 36,
          "base_classes": [],
          "docstring": "导入任务配置",
          "decorators": [
            "dataclass"
          ],
          "is_abstract": false,
          "methods": [
            {
              "name": "__post_init__",
              "line_number": 48,
              "return_type": null,
              "docstring": null,
              "is_async": false,
              "decorators": [],
              "body_lines": 2,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        },
        {
          "name": "TdxImporter",
          "line_number": 53,
          "base_classes": [],
          "docstring": "TDX数据增量导入器\n\n功能:\n- 自动扫描TDX数据文件\n- 增量导入到数据库\n- 支持断点续传\n- 进度跟踪和日志",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 64,
              "return_type": null,
              "docstring": "初始化TDX导入器\n\n参数:\n    unified_manager: MyStocksUnifiedManager实例（如果为None则不保存到数据库）\n    data_path: TDX数据路径",
              "is_async": false,
              "decorators": [],
              "body_lines": 25,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "unified_manager",
                  "type_annotation": null,
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "data_path",
                  "type_annotation": "str",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "import_market_daily",
              "line_number": 93,
              "return_type": "Dict",
              "docstring": "导入指定市场的日线数据\n\n参数:\n    market: 市场代码 ('sh' 或 'sz')\n    start_date: 开始日期（可选，默认全部）\n    end_date: 结束日期（可选，默认到最新）\n    symbols: 指定股票列表（可选，默认全部）\n    batch_size: 批量处理大小\n\n返回:\n    dict: 导入统计信息\n\n示例:\n    >>> from unified_manager import MyStocksUnifiedManager\n    >>> manager = MyStocksUnifiedManager()\n    >>> importer = TdxImporter(unified_manager=manager)\n    >>> result = importer.import_market_daily('sh', start_date=date(2024, 1, 1))\n    >>> print(f\"成功导入 {result['success_count']} 只股票\")",
              "is_async": false,
              "decorators": [],
              "body_lines": 72,
              "complexity": 7,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "market",
                  "type_annotation": "str",
                  "default_value": "\"sh\"",
                  "is_required": false
                },
                {
                  "name": "start_date",
                  "type_annotation": "Optional[date]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "end_date",
                  "type_annotation": "Optional[date]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "symbols",
                  "type_annotation": "Optional[List[str]]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "batch_size",
                  "type_annotation": "int",
                  "default_value": "100",
                  "is_required": false
                }
              ]
            },
            {
              "name": "import_incremental",
              "line_number": 172,
              "return_type": "Dict",
              "docstring": "增量导入（只导入最近N天的数据）\n\n参数:\n    market: 市场代码\n    lookback_days: 回溯天数（默认7天）\n\n返回:\n    dict: 导入统计",
              "is_async": false,
              "decorators": [],
              "body_lines": 20,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "market",
                  "type_annotation": "str",
                  "default_value": "\"sh\"",
                  "is_required": false
                },
                {
                  "name": "lookback_days",
                  "type_annotation": "int",
                  "default_value": "7",
                  "is_required": false
                }
              ]
            },
            {
              "name": "_save_to_database",
              "line_number": 196,
              "return_type": null,
              "docstring": "保存数据到数据库（通过5-tier数据分类路由）\n\n参数:\n    symbol: 股票代码\n    data: 数据DataFrame\n    data_type: 数据类型 ('daily', '5min', '1min')\n    market: 市场",
              "is_async": false,
              "decorators": [],
              "body_lines": 41,
              "complexity": 6,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data_type",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "market",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_import_progress",
              "line_number": 243,
              "return_type": "Dict",
              "docstring": "获取导入进度\n\n参数:\n    market: 市场代码\n\n返回:\n    dict: 进度信息\n        - total_symbols: 总股票数\n        - imported_symbols: 已导入数\n        - latest_date: 最新数据日期",
              "is_async": false,
              "decorators": [],
              "body_lines": 35,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "market",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_print_summary",
              "line_number": 280,
              "return_type": null,
              "docstring": "打印导入统计摘要",
              "is_async": false,
              "decorators": [],
              "body_lines": 17,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": []
    },
    {
      "file_path": "data_sources/tdx_binary_parser.py",
      "module_name": "data_sources.tdx_binary_parser",
      "category": "monitoring",
      "docstring": "TDX二进制文件解析器 (TDX Binary File Parser)\n\n功能说明:\n- 解析通达信本地二进制数据文件\n- 支持日线(.day)、5分钟(.lc5)、1分钟(.lc1)数据\n- 自动处理前后复权\n- 增量读取和缓存优化\n\n文件格式说明:\n- 日线数据(.day): 每条记录32字节\n  - date (4字节): YYYYMMDD格式\n  - open, high, low, close (各4字节): 价格×1000\n  - amount (4字节): 成交金额\n  - volume (4字节): 成交量\n  - reserved (4字节): 保留字段\n\n- 分钟数据(.lc5/.lc1): 每条记录32字节\n  - date (2字节): 年份-1900\n  - minute (2字节): 分钟偏移\n  - open, high, low, close (各4字节): 价格×1000\n  - amount (4字节): 成交金额\n  - volume (4字节): 成交量\n\n作者: MyStocks量化交易团队\n创建时间: 2025-10-18\n版本: 1.0.0",
      "lines_of_code": 482,
      "blank_lines": 96,
      "comment_lines": 31,
      "last_modified": "2025-10-18T20:41:42.536621",
      "imports": [
        "os",
        "struct",
        "pandas",
        "numpy",
        "typing",
        "datetime",
        "pathlib",
        "logging"
      ],
      "classes": [
        {
          "name": "TdxBinaryParser",
          "line_number": 40,
          "base_classes": [],
          "docstring": "TDX二进制文件解析器\n\n功能:\n- 读取.day日线数据\n- 读取.lc5五分钟数据\n- 读取.lc1一分钟数据\n- 自动识别市场和股票代码\n- 支持前后复权",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 58,
              "return_type": null,
              "docstring": "初始化TDX二进制解析器\n\n参数:\n    data_path: TDX数据目录路径（默认从环境变量TDX_DATA_PATH读取）",
              "is_async": false,
              "decorators": [],
              "body_lines": 29,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data_path",
                  "type_annotation": "str",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "read_day_data",
              "line_number": 89,
              "return_type": "pd.DataFrame",
              "docstring": "读取日线数据\n\n参数:\n    symbol: 股票代码（如 '600000' 或 'sh600000'）\n    start_date: 开始日期（可选）\n    end_date: 结束日期（可选）\n\n返回:\n    pd.DataFrame: 日线数据，包含 date, open, high, low, close, volume, amount\n\n示例:\n    >>> parser = TdxBinaryParser()\n    >>> data = parser.read_day_data('600000', start_date=date(2024, 1, 1))\n    >>> print(data.head())",
              "is_async": false,
              "decorators": [],
              "body_lines": 45,
              "complexity": 6,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "start_date",
                  "type_annotation": "Optional[date]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "end_date",
                  "type_annotation": "Optional[date]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "read_5min_data",
              "line_number": 139,
              "return_type": "pd.DataFrame",
              "docstring": "读取5分钟数据\n\n参数:\n    symbol: 股票代码\n    start_date: 开始日期（可选）\n    end_date: 结束日期（可选）\n\n返回:\n    pd.DataFrame: 5分钟数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 36,
              "complexity": 6,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "start_date",
                  "type_annotation": "Optional[date]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "end_date",
                  "type_annotation": "Optional[date]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "read_1min_data",
              "line_number": 180,
              "return_type": "pd.DataFrame",
              "docstring": "读取1分钟数据\n\n参数:\n    symbol: 股票代码\n    start_date: 开始日期（可选）\n    end_date: 结束日期（可选）\n\n返回:\n    pd.DataFrame: 1分钟数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 36,
              "complexity": 6,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "start_date",
                  "type_annotation": "Optional[date]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "end_date",
                  "type_annotation": "Optional[date]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "list_available_stocks",
              "line_number": 221,
              "return_type": "List[str]",
              "docstring": "列出指定市场的所有可用股票\n\n参数:\n    market: 市场代码 ('sh' 或 'sz')\n\n返回:\n    list: 股票代码列表",
              "is_async": false,
              "decorators": [],
              "body_lines": 27,
              "complexity": 6,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "market",
                  "type_annotation": "str",
                  "default_value": "\"sh\"",
                  "is_required": false
                }
              ]
            },
            {
              "name": "get_latest_date",
              "line_number": 250,
              "return_type": "Optional[date]",
              "docstring": "获取指定股票的最新数据日期\n\n参数:\n    symbol: 股票代码\n\n返回:\n    date: 最新数据日期，如果没有数据则返回None",
              "is_async": false,
              "decorators": [],
              "body_lines": 15,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_parse_symbol",
              "line_number": 267,
              "return_type": "Tuple[(str, str)]",
              "docstring": "解析股票代码，提取市场和代码\n\n参数:\n    symbol: 股票代码（如 '600000' 或 'sh600000'）\n\n返回:\n    tuple: (market, code)",
              "is_async": false,
              "decorators": [],
              "body_lines": 22,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_get_day_file_path",
              "line_number": 291,
              "return_type": "str",
              "docstring": "获取日线文件路径",
              "is_async": false,
              "decorators": [],
              "body_lines": 4,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "market",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "code",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_get_5min_file_path",
              "line_number": 297,
              "return_type": "str",
              "docstring": "获取5分钟文件路径",
              "is_async": false,
              "decorators": [],
              "body_lines": 3,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "market",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "code",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_get_1min_file_path",
              "line_number": 302,
              "return_type": "str",
              "docstring": "获取1分钟文件路径",
              "is_async": false,
              "decorators": [],
              "body_lines": 3,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "market",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "code",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_parse_day_file",
              "line_number": 307,
              "return_type": "pd.DataFrame",
              "docstring": "解析日线二进制文件\n\n日线数据结构（32字节）：\n- date (4字节): YYYYMMDD格式的整数\n- open (4字节): 开盘价×1000\n- high (4字节): 最高价×1000\n- low (4字节): 最低价×1000\n- close (4字节): 收盘价×1000\n- amount (4字节): 成交金额（元）\n- volume (4字节): 成交量（手）\n- reserved (4字节): 保留字段",
              "is_async": false,
              "decorators": [],
              "body_lines": 64,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "file_path",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_parse_min_file",
              "line_number": 373,
              "return_type": "pd.DataFrame",
              "docstring": "解析分钟线二进制文件\n\n分钟数据结构（32字节）：\n- year (2字节): 年份-1900\n- minute (2字节): 从当日0点开始的分钟数\n- open (4字节): 开盘价×1000\n- high (4字节): 最高价×1000\n- low (4字节): 最低价×1000\n- close (4字节): 收盘价×1000\n- amount (4字节): 成交金额\n- volume (4字节): 成交量\n- reserved (4字节): 保留",
              "is_async": false,
              "decorators": [],
              "body_lines": 69,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "file_path",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "interval",
                  "type_annotation": "int",
                  "default_value": "5",
                  "is_required": false
                }
              ]
            }
          ]
        }
      ],
      "functions": []
    },
    {
      "file_path": "data_sources/__init__.py",
      "module_name": "data_sources.__init__",
      "category": "unknown",
      "docstring": "Data Sources Module\n\n数据源模块，包含各种数据解析器和导入工具",
      "lines_of_code": 10,
      "blank_lines": 4,
      "comment_lines": 0,
      "last_modified": "2025-10-18T20:34:46.300909",
      "imports": [
        "tdx_binary_parser"
      ],
      "classes": [],
      "functions": []
    },
    {
      "file_path": "tests/test_automation.py",
      "module_name": "tests.test_automation",
      "category": "auxiliary",
      "docstring": "自动化系统测试 (Automation System Tests)\n\n测试覆盖:\n- TaskScheduler: 任务调度器\n- NotificationManager: 通知管理器\n- JobLock: 任务锁\n- PredefinedTasks: 预定义任务\n\n作者: MyStocks量化交易团队\n创建时间: 2025-10-18\n版本: 1.0.0",
      "lines_of_code": 503,
      "blank_lines": 113,
      "comment_lines": 27,
      "last_modified": "2025-10-18T23:26:25.026464",
      "imports": [
        "sys",
        "os",
        "pytest",
        "time",
        "datetime",
        "unittest.mock",
        "automation",
        "automation.predefined_tasks"
      ],
      "classes": [
        {
          "name": "TestJobLock",
          "line_number": 50,
          "base_classes": [],
          "docstring": "任务锁测试",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "test_acquire_lock",
              "line_number": 53,
              "return_type": null,
              "docstring": "测试获取锁",
              "is_async": false,
              "decorators": [],
              "body_lines": 6,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_acquire_locked_job",
              "line_number": 61,
              "return_type": null,
              "docstring": "测试获取已锁定的任务",
              "is_async": false,
              "decorators": [],
              "body_lines": 8,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_release_lock",
              "line_number": 71,
              "return_type": null,
              "docstring": "测试释放锁",
              "is_async": false,
              "decorators": [],
              "body_lines": 8,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_lock_timeout",
              "line_number": 81,
              "return_type": null,
              "docstring": "测试锁超时",
              "is_async": false,
              "decorators": [],
              "body_lines": 12,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_multiple_jobs",
              "line_number": 95,
              "return_type": null,
              "docstring": "测试多个任务的锁",
              "is_async": false,
              "decorators": [],
              "body_lines": 10,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        },
        {
          "name": "TestNotificationManager",
          "line_number": 112,
          "base_classes": [],
          "docstring": "通知管理器测试",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "test_basic_notification",
              "line_number": 115,
              "return_type": null,
              "docstring": "测试基本通知发送",
              "is_async": false,
              "decorators": [],
              "body_lines": 15,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_multiple_channels",
              "line_number": 132,
              "return_type": null,
              "docstring": "测试多渠道通知",
              "is_async": false,
              "decorators": [],
              "body_lines": 15,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_rate_limiting",
              "line_number": 149,
              "return_type": null,
              "docstring": "测试频率限制",
              "is_async": false,
              "decorators": [],
              "body_lines": 23,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_success_notification",
              "line_number": 174,
              "return_type": null,
              "docstring": "测试成功通知",
              "is_async": false,
              "decorators": [],
              "body_lines": 12,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_failure_notification",
              "line_number": 188,
              "return_type": null,
              "docstring": "测试失败通知",
              "is_async": false,
              "decorators": [],
              "body_lines": 12,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_signal_notification",
              "line_number": 202,
              "return_type": null,
              "docstring": "测试交易信号通知",
              "is_async": false,
              "decorators": [],
              "body_lines": 13,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_notification_history",
              "line_number": 217,
              "return_type": null,
              "docstring": "测试通知历史",
              "is_async": false,
              "decorators": [],
              "body_lines": 14,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_notification_history_filter",
              "line_number": 233,
              "return_type": null,
              "docstring": "测试通知历史过滤",
              "is_async": false,
              "decorators": [],
              "body_lines": 13,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_statistics",
              "line_number": 248,
              "return_type": null,
              "docstring": "测试统计信息",
              "is_async": false,
              "decorators": [],
              "body_lines": 11,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        },
        {
          "name": "TestTaskScheduler",
          "line_number": 266,
          "base_classes": [],
          "docstring": "任务调度器测试",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "test_create_scheduler",
              "line_number": 269,
              "return_type": null,
              "docstring": "测试创建调度器",
              "is_async": false,
              "decorators": [],
              "body_lines": 4,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_add_task",
              "line_number": 275,
              "return_type": null,
              "docstring": "测试添加任务",
              "is_async": false,
              "decorators": [],
              "body_lines": 16,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_add_disabled_task",
              "line_number": 293,
              "return_type": null,
              "docstring": "测试添加禁用的任务",
              "is_async": false,
              "decorators": [],
              "body_lines": 16,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_list_tasks",
              "line_number": 311,
              "return_type": null,
              "docstring": "测试列出任务",
              "is_async": false,
              "decorators": [],
              "body_lines": 17,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_get_statistics",
              "line_number": 330,
              "return_type": null,
              "docstring": "测试获取统计信息",
              "is_async": false,
              "decorators": [],
              "body_lines": 17,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        },
        {
          "name": "TestPredefinedTasks",
          "line_number": 354,
          "base_classes": [],
          "docstring": "预定义任务测试",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "test_health_check",
              "line_number": 357,
              "return_type": null,
              "docstring": "测试健康检查",
              "is_async": false,
              "decorators": [],
              "body_lines": 6,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_health_check_specific_services",
              "line_number": 365,
              "return_type": null,
              "docstring": "测试特定服务健康检查",
              "is_async": false,
              "decorators": [],
              "body_lines": 5,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_generate_daily_report",
              "line_number": 372,
              "return_type": null,
              "docstring": "测试生成每日报告",
              "is_async": false,
              "decorators": [],
              "body_lines": 6,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_create_daily_update_task",
              "line_number": 380,
              "return_type": null,
              "docstring": "测试创建每日更新任务配置",
              "is_async": false,
              "decorators": [],
              "body_lines": 7,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_create_strategy_execution_task",
              "line_number": 389,
              "return_type": null,
              "docstring": "测试创建策略执行任务配置",
              "is_async": false,
              "decorators": [],
              "body_lines": 11,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_create_health_check_task",
              "line_number": 402,
              "return_type": null,
              "docstring": "测试创建健康检查任务配置",
              "is_async": false,
              "decorators": [],
              "body_lines": 7,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        },
        {
          "name": "TestIntegration",
          "line_number": 416,
          "base_classes": [],
          "docstring": "集成测试",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "test_scheduler_with_notification",
              "line_number": 419,
              "return_type": null,
              "docstring": "测试调度器与通知集成",
              "is_async": false,
              "decorators": [],
              "body_lines": 21,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_task_execution_flow",
              "line_number": 442,
              "return_type": null,
              "docstring": "测试任务执行流程",
              "is_async": false,
              "decorators": [],
              "body_lines": 19,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_multiple_tasks_coordination",
              "line_number": 463,
              "return_type": null,
              "docstring": "测试多任务协调",
              "is_async": false,
              "decorators": [],
              "body_lines": 31,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": []
    },
    {
      "file_path": "tests/test_ml_integration.py",
      "module_name": "tests.test_ml_integration",
      "category": "unknown",
      "docstring": "机器学习模块端到端集成测试\n\n测试完整的数据流:\n1. 读取通达信二进制文件\n2. 生成特征\n3. 训练模型\n4. 价格预测\n5. 模型评估\n\n作者: MyStocks Development Team\n创建日期: 2025-10-19",
      "lines_of_code": 240,
      "blank_lines": 58,
      "comment_lines": 17,
      "last_modified": "2025-10-19T08:33:14.945949",
      "imports": [
        "pytest",
        "pandas",
        "numpy",
        "os",
        "sys",
        "adapters.tdx_adapter",
        "ml_strategy.feature_engineering",
        "ml_strategy.price_predictor"
      ],
      "classes": [
        {
          "name": "TestMLIntegration",
          "line_number": 29,
          "base_classes": [],
          "docstring": "机器学习模块集成测试类",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "test_day_file",
              "line_number": 33,
              "return_type": null,
              "docstring": "测试数据文件路径",
              "is_async": false,
              "decorators": [
                "pytest.fixture"
              ],
              "body_lines": 5,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "sample_data",
              "line_number": 41,
              "return_type": null,
              "docstring": "生成模拟数据（如果测试文件不存在）",
              "is_async": false,
              "decorators": [
                "pytest.fixture"
              ],
              "body_lines": 11,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_end_to_end_prediction_with_real_data",
              "line_number": 54,
              "return_type": null,
              "docstring": "端到端测试：使用真实数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 54,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "test_day_file",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_end_to_end_prediction_with_sample_data",
              "line_number": 110,
              "return_type": null,
              "docstring": "端到端测试：使用模拟数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 39,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "sample_data",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_different_feature_types",
              "line_number": 151,
              "return_type": null,
              "docstring": "测试不同类型的特征生成",
              "is_async": false,
              "decorators": [],
              "body_lines": 33,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "sample_data",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_prediction_with_confidence",
              "line_number": 186,
              "return_type": null,
              "docstring": "测试置信区间预测",
              "is_async": false,
              "decorators": [],
              "body_lines": 22,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "sample_data",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_performance_metrics",
              "line_number": 210,
              "return_type": null,
              "docstring": "测试性能指标",
              "is_async": false,
              "decorators": [],
              "body_lines": 24,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "sample_data",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": []
    },
    {
      "file_path": "tests/__init__.py",
      "module_name": "tests.__init__",
      "category": "unknown",
      "docstring": null,
      "lines_of_code": 1,
      "blank_lines": 1,
      "comment_lines": 0,
      "last_modified": "2025-10-12T15:25:29.959533",
      "imports": [],
      "classes": [],
      "functions": []
    },
    {
      "file_path": "tests/test_tdx_binary_read.py",
      "module_name": "tests.test_tdx_binary_read",
      "category": "unknown",
      "docstring": "TDX 二进制文件读取功能测试\n\n测试 TdxAdapter.read_day_file() 方法\n\n作者: MyStocks Development Team\n创建日期: 2025-10-19",
      "lines_of_code": 164,
      "blank_lines": 46,
      "comment_lines": 17,
      "last_modified": "2025-10-19T06:23:48.784681",
      "imports": [
        "pytest",
        "pandas",
        "os",
        "sys",
        "adapters.tdx_adapter"
      ],
      "classes": [
        {
          "name": "TestTdxBinaryRead",
          "line_number": 21,
          "base_classes": [],
          "docstring": "TDX 二进制文件读取测试类",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "tdx_adapter",
              "line_number": 25,
              "return_type": null,
              "docstring": "创建 TdxAdapter 实例",
              "is_async": false,
              "decorators": [
                "pytest.fixture"
              ],
              "body_lines": 2,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_day_file",
              "line_number": 30,
              "return_type": null,
              "docstring": "测试文件路径",
              "is_async": false,
              "decorators": [
                "pytest.fixture"
              ],
              "body_lines": 5,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_read_day_file_basic",
              "line_number": 37,
              "return_type": null,
              "docstring": "测试基本读取功能",
              "is_async": false,
              "decorators": [],
              "body_lines": 21,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "tdx_adapter",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "test_day_file",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_read_day_file_data_types",
              "line_number": 60,
              "return_type": null,
              "docstring": "测试数据类型正确性",
              "is_async": false,
              "decorators": [],
              "body_lines": 18,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "tdx_adapter",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "test_day_file",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_read_day_file_data_validity",
              "line_number": 80,
              "return_type": null,
              "docstring": "测试数据有效性",
              "is_async": false,
              "decorators": [],
              "body_lines": 20,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "tdx_adapter",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "test_day_file",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_read_day_file_stock_code",
              "line_number": 102,
              "return_type": null,
              "docstring": "测试股票代码提取",
              "is_async": false,
              "decorators": [],
              "body_lines": 12,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "tdx_adapter",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "test_day_file",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_read_day_file_date_format",
              "line_number": 116,
              "return_type": null,
              "docstring": "测试日期格式",
              "is_async": false,
              "decorators": [],
              "body_lines": 16,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "tdx_adapter",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "test_day_file",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_read_day_file_not_found",
              "line_number": 134,
              "return_type": null,
              "docstring": "测试文件不存在的情况",
              "is_async": false,
              "decorators": [],
              "body_lines": 5,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "tdx_adapter",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_read_day_file_statistics",
              "line_number": 141,
              "return_type": null,
              "docstring": "测试数据统计信息",
              "is_async": false,
              "decorators": [],
              "body_lines": 17,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "tdx_adapter",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "test_day_file",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": []
    },
    {
      "file_path": "tests/conftest.py",
      "module_name": "tests.conftest",
      "category": "unknown",
      "docstring": "pytest配置和fixtures",
      "lines_of_code": 243,
      "blank_lines": 39,
      "comment_lines": 8,
      "last_modified": "2025-10-18T20:22:06.951829",
      "imports": [
        "pytest",
        "pandas",
        "datetime",
        "unittest.mock"
      ],
      "classes": [],
      "functions": [
        {
          "name": "sample_stock_data",
          "line_number": 12,
          "return_type": null,
          "docstring": "生成示例股票数据DataFrame",
          "is_async": false,
          "decorators": [
            "pytest.fixture"
          ],
          "body_lines": 14,
          "complexity": 1,
          "parameters": []
        },
        {
          "name": "sample_realtime_data",
          "line_number": 30,
          "return_type": null,
          "docstring": "生成示例实时行情数据",
          "is_async": false,
          "decorators": [
            "pytest.fixture"
          ],
          "body_lines": 17,
          "complexity": 1,
          "parameters": []
        },
        {
          "name": "sample_financial_data",
          "line_number": 51,
          "return_type": null,
          "docstring": "生成示例财务数据DataFrame",
          "is_async": false,
          "decorators": [
            "pytest.fixture"
          ],
          "body_lines": 12,
          "complexity": 1,
          "parameters": []
        },
        {
          "name": "mock_database_connection",
          "line_number": 69,
          "return_type": null,
          "docstring": "Mock数据库连接",
          "is_async": false,
          "decorators": [
            "pytest.fixture"
          ],
          "body_lines": 7,
          "complexity": 1,
          "parameters": []
        },
        {
          "name": "mock_adapter",
          "line_number": 80,
          "return_type": null,
          "docstring": "Mock数据源适配器",
          "is_async": false,
          "decorators": [
            "pytest.fixture"
          ],
          "body_lines": 13,
          "complexity": 1,
          "parameters": []
        },
        {
          "name": "test_environment",
          "line_number": 99,
          "return_type": null,
          "docstring": "设置测试环境",
          "is_async": false,
          "decorators": [
            "pytest.fixture"
          ],
          "body_lines": 9,
          "complexity": 1,
          "parameters": []
        },
        {
          "name": "temp_test_dir",
          "line_number": 112,
          "return_type": null,
          "docstring": "创建临时测试目录",
          "is_async": false,
          "decorators": [
            "pytest.fixture"
          ],
          "body_lines": 6,
          "complexity": 1,
          "parameters": [
            {
              "name": "tmp_path",
              "type_annotation": null,
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "sample_price_data",
          "line_number": 124,
          "return_type": null,
          "docstring": "生成回测用价格数据",
          "is_async": false,
          "decorators": [
            "pytest.fixture"
          ],
          "body_lines": 21,
          "complexity": 1,
          "parameters": []
        },
        {
          "name": "sample_signals",
          "line_number": 149,
          "return_type": null,
          "docstring": "生成示例交易信号",
          "is_async": false,
          "decorators": [
            "pytest.fixture"
          ],
          "body_lines": 20,
          "complexity": 4,
          "parameters": []
        },
        {
          "name": "sample_trades",
          "line_number": 173,
          "return_type": null,
          "docstring": "生成示例交易记录",
          "is_async": false,
          "decorators": [
            "pytest.fixture"
          ],
          "body_lines": 51,
          "complexity": 1,
          "parameters": []
        },
        {
          "name": "sample_backtest_result",
          "line_number": 228,
          "return_type": null,
          "docstring": "生成示例回测结果",
          "is_async": false,
          "decorators": [
            "pytest.fixture"
          ],
          "body_lines": 14,
          "complexity": 1,
          "parameters": [
            {
              "name": "sample_price_data",
              "type_annotation": null,
              "default_value": null,
              "is_required": true
            },
            {
              "name": "sample_signals",
              "type_annotation": null,
              "default_value": null,
              "is_required": true
            }
          ]
        }
      ]
    },
    {
      "file_path": "visualization/chart_generator.py",
      "module_name": "visualization.chart_generator",
      "category": "monitoring",
      "docstring": "K线图和信号可视化 (Chart Generator)\n\n功能说明:\n- 生成专业K线图（使用mplfinance）\n- 标记买卖信号\n- 叠加技术指标\n- 支持多种图表样式\n\n作者: MyStocks量化交易团队\n创建时间: 2025-10-18\n版本: 1.0.0",
      "lines_of_code": 621,
      "blank_lines": 95,
      "comment_lines": 46,
      "last_modified": "2025-10-18T20:28:14.883437",
      "imports": [
        "pandas",
        "numpy",
        "mplfinance",
        "typing",
        "datetime",
        "matplotlib.pyplot",
        "matplotlib.patches",
        "logging"
      ],
      "classes": [
        {
          "name": "ChartStyle",
          "line_number": 25,
          "base_classes": [],
          "docstring": "图表样式配置",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "get_china_style",
              "line_number": 46,
              "return_type": null,
              "docstring": "获取中国风格（红涨绿跌）",
              "is_async": false,
              "decorators": [
                "staticmethod"
              ],
              "body_lines": 8,
              "complexity": 1,
              "parameters": []
            }
          ]
        },
        {
          "name": "ChartGenerator",
          "line_number": 57,
          "base_classes": [],
          "docstring": "K线图生成器\n\n功能:\n- 生成K线图\n- 标记交易信号\n- 叠加技术指标\n- 自定义样式",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 68,
              "return_type": null,
              "docstring": "初始化图表生成器\n\n参数:\n    style: 图表样式，可选值:\n          - 'china': 中国风格（红涨绿跌）\n          - 'charles': 经典风格\n          - 'yahoo': Yahoo风格\n          - 'binance': 币安风格",
              "is_async": false,
              "decorators": [],
              "body_lines": 18,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "style",
                  "type_annotation": "str",
                  "default_value": "\"china\"",
                  "is_required": false
                }
              ]
            },
            {
              "name": "plot_kline",
              "line_number": 88,
              "return_type": "None",
              "docstring": "绘制基础K线图\n\n参数:\n    data: K线数据，必须包含 open, high, low, close, volume\n          index必须是DatetimeIndex\n    title: 图表标题\n    volume: 是否显示成交量\n    show: 是否显示图表\n    save_path: 保存路径（可选）\n    figsize: 图表大小\n\n示例:\n    >>> generator = ChartGenerator()\n    >>> generator.plot_kline(price_data, title=\"平安银行\", save_path=\"kline.png\")",
              "is_async": false,
              "decorators": [],
              "body_lines": 41,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "title",
                  "type_annotation": "str",
                  "default_value": "\"K线图\"",
                  "is_required": false
                },
                {
                  "name": "volume",
                  "type_annotation": "bool",
                  "default_value": "True",
                  "is_required": false
                },
                {
                  "name": "show",
                  "type_annotation": "bool",
                  "default_value": "False",
                  "is_required": false
                },
                {
                  "name": "save_path",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "figsize",
                  "type_annotation": "Tuple[(int, int)]",
                  "default_value": "...",
                  "is_required": false
                }
              ]
            },
            {
              "name": "plot_with_signals",
              "line_number": 137,
              "return_type": "None",
              "docstring": "绘制带交易信号的K线图\n\n参数:\n    data: K线数据\n    signals: 信号数据，包含 signal ('buy'/'sell'), entry_price\n    title: 图表标题\n    volume: 是否显示成交量\n    show: 是否显示图表\n    save_path: 保存路径\n    figsize: 图表大小\n\n示例:\n    >>> generator = ChartGenerator()\n    >>> generator.plot_with_signals(\n    ...     price_data, signals,\n    ...     title=\"动量策略信号\",\n    ...     save_path=\"signals.png\"\n    ... )",
              "is_async": false,
              "decorators": [],
              "body_lines": 119,
              "complexity": 14,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "signals",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "title",
                  "type_annotation": "str",
                  "default_value": "\"K线图 + 信号\"",
                  "is_required": false
                },
                {
                  "name": "volume",
                  "type_annotation": "bool",
                  "default_value": "True",
                  "is_required": false
                },
                {
                  "name": "show",
                  "type_annotation": "bool",
                  "default_value": "False",
                  "is_required": false
                },
                {
                  "name": "save_path",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "figsize",
                  "type_annotation": "Tuple[(int, int)]",
                  "default_value": "...",
                  "is_required": false
                }
              ]
            },
            {
              "name": "plot_with_indicators",
              "line_number": 265,
              "return_type": "None",
              "docstring": "绘制带技术指标的K线图\n\n参数:\n    data: K线数据\n    indicators: 指标字典，格式: {'指标名': Series}\n               支持主图指标（MA, BOLL等）和副图指标（MACD, RSI等）\n    title: 图表标题\n    volume: 是否显示成交量\n    show: 是否显示图表\n    save_path: 保存路径\n    figsize: 图表大小\n\n示例:\n    >>> indicators = {\n    ...     'MA5': ma5_series,\n    ...     'MA20': ma20_series,\n    ...     'RSI': rsi_series\n    ... }\n    >>> generator.plot_with_indicators(\n    ...     price_data, indicators,\n    ...     save_path=\"indicators.png\"\n    ... )",
              "is_async": false,
              "decorators": [],
              "body_lines": 99,
              "complexity": 8,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "indicators",
                  "type_annotation": "Dict[(str, pd.Series)]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "title",
                  "type_annotation": "str",
                  "default_value": "\"K线图 + 指标\"",
                  "is_required": false
                },
                {
                  "name": "volume",
                  "type_annotation": "bool",
                  "default_value": "True",
                  "is_required": false
                },
                {
                  "name": "show",
                  "type_annotation": "bool",
                  "default_value": "False",
                  "is_required": false
                },
                {
                  "name": "save_path",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "figsize",
                  "type_annotation": "Tuple[(int, int)]",
                  "default_value": "...",
                  "is_required": false
                }
              ]
            },
            {
              "name": "plot_complete",
              "line_number": 373,
              "return_type": "None",
              "docstring": "绘制完整图表（K线 + 信号 + 指标）\n\n参数:\n    data: K线数据\n    signals: 信号数据（可选）\n    indicators: 指标字典（可选）\n    title: 图表标题\n    volume: 是否显示成交量\n    show: 是否显示图表\n    save_path: 保存路径\n    figsize: 图表大小\n\n示例:\n    >>> generator.plot_complete(\n    ...     price_data,\n    ...     signals=signals,\n    ...     indicators={'MA5': ma5, 'MA20': ma20, 'RSI': rsi},\n    ...     title=\"动量策略完整分析\",\n    ...     save_path=\"complete.png\"\n    ... )",
              "is_async": false,
              "decorators": [],
              "body_lines": 134,
              "complexity": 12,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "signals",
                  "type_annotation": "Optional[pd.DataFrame]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "indicators",
                  "type_annotation": "Optional[Dict[(str, pd.Series)]]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "title",
                  "type_annotation": "str",
                  "default_value": "\"完整K线图\"",
                  "is_required": false
                },
                {
                  "name": "volume",
                  "type_annotation": "bool",
                  "default_value": "True",
                  "is_required": false
                },
                {
                  "name": "show",
                  "type_annotation": "bool",
                  "default_value": "False",
                  "is_required": false
                },
                {
                  "name": "save_path",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "figsize",
                  "type_annotation": "Tuple[(int, int)]",
                  "default_value": "...",
                  "is_required": false
                }
              ]
            },
            {
              "name": "_validate_kline_data",
              "line_number": 517,
              "return_type": null,
              "docstring": "验证K线数据格式",
              "is_async": false,
              "decorators": [],
              "body_lines": 9,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": []
    },
    {
      "file_path": "visualization/backtest_visualizer.py",
      "module_name": "visualization.backtest_visualizer",
      "category": "auxiliary",
      "docstring": "回测性能可视化 (Backtest Visualizer)\n\n功能说明:\n- 权益曲线图\n- 回撤分析图\n- 收益分布图\n- 月度/年度收益表\n- 综合性能仪表盘\n\n作者: MyStocks量化交易团队\n创建时间: 2025-10-18\n版本: 1.0.0",
      "lines_of_code": 524,
      "blank_lines": 80,
      "comment_lines": 46,
      "last_modified": "2025-10-18T20:30:15.615343",
      "imports": [
        "pandas",
        "numpy",
        "matplotlib.pyplot",
        "matplotlib.dates",
        "matplotlib.gridspec",
        "typing",
        "datetime",
        "logging"
      ],
      "classes": [
        {
          "name": "BacktestVisualizer",
          "line_number": 26,
          "base_classes": [],
          "docstring": "回测性能可视化器\n\n功能:\n- 生成权益曲线\n- 回撤分析\n- 收益分布\n- 性能仪表盘",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 37,
              "return_type": null,
              "docstring": "初始化可视化器\n\n参数:\n    figsize: 默认图表大小",
              "is_async": false,
              "decorators": [],
              "body_lines": 12,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "figsize",
                  "type_annotation": "Tuple[(int, int)]",
                  "default_value": "...",
                  "is_required": false
                }
              ]
            },
            {
              "name": "plot_equity_curve",
              "line_number": 51,
              "return_type": "None",
              "docstring": "绘制权益曲线\n\n参数:\n    equity_curve: 权益曲线DataFrame，包含'equity'列\n    benchmark: 基准收益率（可选）\n    title: 图表标题\n    show: 是否显示图表\n    save_path: 保存路径\n\n示例:\n    >>> visualizer = BacktestVisualizer()\n    >>> visualizer.plot_equity_curve(\n    ...     equity_curve,\n    ...     benchmark=benchmark_returns,\n    ...     save_path=\"equity_curve.png\"\n    ... )",
              "is_async": false,
              "decorators": [],
              "body_lines": 54,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "equity_curve",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "benchmark",
                  "type_annotation": "Optional[pd.Series]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "title",
                  "type_annotation": "str",
                  "default_value": "\"权益曲线\"",
                  "is_required": false
                },
                {
                  "name": "show",
                  "type_annotation": "bool",
                  "default_value": "False",
                  "is_required": false
                },
                {
                  "name": "save_path",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "plot_drawdown",
              "line_number": 112,
              "return_type": "None",
              "docstring": "绘制回撤分析图\n\n参数:\n    equity_curve: 权益曲线DataFrame\n    title: 图表标题\n    show: 是否显示图表\n    save_path: 保存路径",
              "is_async": false,
              "decorators": [],
              "body_lines": 60,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "equity_curve",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "title",
                  "type_annotation": "str",
                  "default_value": "\"回撤分析\"",
                  "is_required": false
                },
                {
                  "name": "show",
                  "type_annotation": "bool",
                  "default_value": "False",
                  "is_required": false
                },
                {
                  "name": "save_path",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "plot_returns_distribution",
              "line_number": 178,
              "return_type": "None",
              "docstring": "绘制收益分布图\n\n参数:\n    daily_returns: 每日收益率\n    title: 图表标题\n    show: 是否显示图表\n    save_path: 保存路径",
              "is_async": false,
              "decorators": [],
              "body_lines": 41,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "daily_returns",
                  "type_annotation": "pd.Series",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "title",
                  "type_annotation": "str",
                  "default_value": "\"收益分布\"",
                  "is_required": false
                },
                {
                  "name": "show",
                  "type_annotation": "bool",
                  "default_value": "False",
                  "is_required": false
                },
                {
                  "name": "save_path",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "plot_monthly_returns",
              "line_number": 225,
              "return_type": "None",
              "docstring": "绘制月度收益热力图\n\n参数:\n    daily_returns: 每日收益率\n    title: 图表标题\n    show: 是否显示图表\n    save_path: 保存路径",
              "is_async": false,
              "decorators": [],
              "body_lines": 72,
              "complexity": 6,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "daily_returns",
                  "type_annotation": "pd.Series",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "title",
                  "type_annotation": "str",
                  "default_value": "\"月度收益热力图\"",
                  "is_required": false
                },
                {
                  "name": "show",
                  "type_annotation": "bool",
                  "default_value": "False",
                  "is_required": false
                },
                {
                  "name": "save_path",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "plot_dashboard",
              "line_number": 303,
              "return_type": "None",
              "docstring": "绘制综合性能仪表盘\n\n参数:\n    result: 回测结果字典，包含:\n           - backtest: 回测基础结果\n           - performance: 性能指标\n           - risk: 风险指标\n    title: 图表标题\n    show: 是否显示图表\n    save_path: 保存路径\n\n示例:\n    >>> from backtest.backtest_engine import BacktestEngine\n    >>> engine = BacktestEngine()\n    >>> result = engine.run(price_data, signals)\n    >>> visualizer = BacktestVisualizer()\n    >>> visualizer.plot_dashboard(result, save_path=\"dashboard.png\")",
              "is_async": false,
              "decorators": [],
              "body_lines": 119,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "result",
                  "type_annotation": "Dict",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "title",
                  "type_annotation": "str",
                  "default_value": "\"回测性能仪表盘\"",
                  "is_required": false
                },
                {
                  "name": "show",
                  "type_annotation": "bool",
                  "default_value": "False",
                  "is_required": false
                },
                {
                  "name": "save_path",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            }
          ]
        }
      ],
      "functions": []
    },
    {
      "file_path": "visualization/__init__.py",
      "module_name": "visualization.__init__",
      "category": "unknown",
      "docstring": null,
      "lines_of_code": 1,
      "blank_lines": 1,
      "comment_lines": 0,
      "last_modified": "2025-10-18T19:52:06.811100",
      "imports": [],
      "classes": [],
      "functions": []
    },
    {
      "file_path": "visualization/complete_example.py",
      "module_name": "visualization.complete_example",
      "category": "unknown",
      "docstring": "完整可视化示例 (Complete Visualization Example)\n\n功能说明:\n- 演示策略执行、回测和可视化的完整流程\n- 生成K线图、信号图、回测性能图表\n- 展示最佳实践\n\n作者: MyStocks量化交易团队\n创建时间: 2025-10-18\n版本: 1.0.0",
      "lines_of_code": 234,
      "blank_lines": 40,
      "comment_lines": 19,
      "last_modified": "2025-10-18T20:31:41.127581",
      "imports": [
        "sys",
        "os",
        "pandas",
        "numpy",
        "datetime",
        "strategy.templates.momentum_template",
        "backtest.backtest_engine",
        "visualization.chart_generator",
        "visualization.backtest_visualizer"
      ],
      "classes": [],
      "functions": [
        {
          "name": "generate_sample_data",
          "line_number": 29,
          "return_type": null,
          "docstring": "生成示例数据",
          "is_async": false,
          "decorators": [],
          "body_lines": 16,
          "complexity": 1,
          "parameters": [
            {
              "name": "n",
              "type_annotation": null,
              "default_value": "252",
              "is_required": false
            }
          ]
        },
        {
          "name": "main",
          "line_number": 48,
          "return_type": null,
          "docstring": "完整示例流程",
          "is_async": false,
          "decorators": [],
          "body_lines": 181,
          "complexity": 3,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "interfaces/data_source.py",
      "module_name": "interfaces.data_source",
      "category": "auxiliary",
      "docstring": "# 功能：统一数据源接口定义，所有数据源适配器必须实现此接口\n# 作者：JohnC (ninjas@sina.com) & Claude\n# 创建日期：2025-10-16\n# 版本：2.1.0\n# 依赖：详见requirements.txt或文件导入部分\n# 注意事项：\n#   本文件是MyStocks v2.1核心组件，遵循5-tier数据分类架构\n# 版权：MyStocks Project © 2025",
      "lines_of_code": 130,
      "blank_lines": 27,
      "comment_lines": 8,
      "last_modified": "2025-10-16T08:26:29.087207",
      "imports": [
        "abc",
        "pandas",
        "typing",
        "json"
      ],
      "classes": [
        {
          "name": "IDataSource",
          "line_number": 18,
          "base_classes": [
            "abc.ABC"
          ],
          "docstring": "统一数据接口：定义所有数据源必须实现的方法",
          "decorators": [],
          "is_abstract": true,
          "methods": [
            {
              "name": "get_stock_daily",
              "line_number": 22,
              "return_type": "pd.DataFrame",
              "docstring": "获取股票日线数据\n\nArgs:\n    symbol: 股票代码\n    start_date: 开始日期，格式：YYYY-MM-DD\n    end_date: 结束日期，格式：YYYY-MM-DD\n    \nReturns:\n    DataFrame: 包含股票日线数据的DataFrame",
              "is_async": false,
              "decorators": [
                "abc.abstractmethod"
              ],
              "body_lines": 12,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "start_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "end_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_index_daily",
              "line_number": 37,
              "return_type": "pd.DataFrame",
              "docstring": "获取指数日线数据\n\nArgs:\n    symbol: 指数代码\n    start_date: 开始日期，格式：YYYY-MM-DD\n    end_date: 结束日期，格式：YYYY-MM-DD\n    \nReturns:\n    DataFrame: 包含指数日线数据的DataFrame",
              "is_async": false,
              "decorators": [
                "abc.abstractmethod"
              ],
              "body_lines": 12,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "start_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "end_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_stock_basic",
              "line_number": 52,
              "return_type": "Dict",
              "docstring": "获取股票基本信息\n\nArgs:\n    symbol: 股票代码\n    \nReturns:\n    Dict: 包含股票基本信息的字典",
              "is_async": false,
              "decorators": [
                "abc.abstractmethod"
              ],
              "body_lines": 10,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_index_components",
              "line_number": 65,
              "return_type": "List[str]",
              "docstring": "获取指数成分股\n\nArgs:\n    symbol: 指数代码\n    \nReturns:\n    List[str]: 包含指数成分股代码的列表",
              "is_async": false,
              "decorators": [
                "abc.abstractmethod"
              ],
              "body_lines": 10,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_real_time_data",
              "line_number": 78,
              "return_type": "Union[(Dict, str)]",
              "docstring": "获取实时数据\n\nArgs:\n    symbol: 股票代码\n    \nReturns:\n    Union[Dict, str]: 实时数据，可以返回字典或JSON字符串",
              "is_async": false,
              "decorators": [
                "abc.abstractmethod"
              ],
              "body_lines": 10,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_market_calendar",
              "line_number": 91,
              "return_type": "Union[(pd.DataFrame, str)]",
              "docstring": "获取交易日历\n\nArgs:\n    start_date: 开始日期，格式：YYYY-MM-DD\n    end_date: 结束日期，格式：YYYY-MM-DD\n    \nReturns:\n    Union[pd.DataFrame, str]: 交易日历数据，可以返回DataFrame或JSON字符串",
              "is_async": false,
              "decorators": [
                "abc.abstractmethod"
              ],
              "body_lines": 11,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "start_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "end_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_financial_data",
              "line_number": 105,
              "return_type": "Union[(pd.DataFrame, str)]",
              "docstring": "获取财务数据\n\nArgs:\n    symbol: 股票代码\n    period: 报告期间，\"annual\"或\"quarterly\"\n    \nReturns:\n    Union[pd.DataFrame, str]: 财务数据，可以返回DataFrame或JSON字符串",
              "is_async": false,
              "decorators": [
                "abc.abstractmethod"
              ],
              "body_lines": 11,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "period",
                  "type_annotation": "str",
                  "default_value": "\"annual\"",
                  "is_required": false
                }
              ]
            },
            {
              "name": "get_news_data",
              "line_number": 119,
              "return_type": "Union[(List[Dict], str)]",
              "docstring": "获取新闻数据\n\nArgs:\n    symbol: 股票代码，为None时获取市场新闻\n    limit: 返回数量限制\n    \nReturns:\n    Union[List[Dict], str]: 新闻数据列表或JSON字符串",
              "is_async": false,
              "decorators": [
                "abc.abstractmethod"
              ],
              "body_lines": 11,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "limit",
                  "type_annotation": "int",
                  "default_value": "10",
                  "is_required": false
                }
              ]
            }
          ]
        }
      ],
      "functions": []
    },
    {
      "file_path": "interfaces/__init__.py",
      "module_name": "interfaces.__init__",
      "category": "unknown",
      "docstring": "统一数据接口模块\n定义了所有数据源必须实现的接口",
      "lines_of_code": 4,
      "blank_lines": 0,
      "comment_lines": 0,
      "last_modified": "2025-09-16T00:30:48.142806",
      "imports": [],
      "classes": [],
      "functions": []
    },
    {
      "file_path": "realtime/tick_receiver.py",
      "module_name": "realtime.tick_receiver",
      "category": "auxiliary",
      "docstring": "实时行情接收器 (Real-time Tick Receiver)\n\n功能说明:\n- 接收实时tick数据\n- WebSocket连接管理\n- 数据缓存和分发\n- 支持多数据源\n\n支持的数据源:\n- TDX实时行情\n- 自定义WebSocket源\n- Redis发布/订阅\n\n作者: MyStocks量化交易团队\n创建时间: 2025-10-18\n版本: 1.0.0",
      "lines_of_code": 406,
      "blank_lines": 83,
      "comment_lines": 38,
      "last_modified": "2025-10-18T23:56:24.037206",
      "imports": [
        "sys",
        "os",
        "typing",
        "datetime",
        "dataclasses",
        "enum",
        "logging",
        "threading",
        "queue",
        "time"
      ],
      "classes": [
        {
          "name": "DataSourceType",
          "line_number": 50,
          "base_classes": [
            "Enum"
          ],
          "docstring": "数据源类型",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "TickData",
          "line_number": 59,
          "base_classes": [],
          "docstring": "Tick数据",
          "decorators": [
            "dataclass"
          ],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "TickReceiver",
          "line_number": 76,
          "base_classes": [],
          "docstring": "实时行情接收器\n\n功能:\n- 管理多个数据源连接\n- 数据缓存和分发\n- 回调函数处理\n- 线程安全",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 87,
              "return_type": null,
              "docstring": "初始化接收器\n\n参数:\n    cache_size: 缓存大小\n    source_type: 数据源类型",
              "is_async": false,
              "decorators": [],
              "body_lines": 35,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "cache_size",
                  "type_annotation": "int",
                  "default_value": "1000",
                  "is_required": false
                },
                {
                  "name": "source_type",
                  "type_annotation": "DataSourceType",
                  "default_value": "...",
                  "is_required": false
                }
              ]
            },
            {
              "name": "subscribe",
              "line_number": 126,
              "return_type": null,
              "docstring": "订阅股票\n\n参数:\n    symbols: 股票代码列表",
              "is_async": false,
              "decorators": [],
              "body_lines": 11,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbols",
                  "type_annotation": "List[str]",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "unsubscribe",
              "line_number": 139,
              "return_type": null,
              "docstring": "取消订阅",
              "is_async": false,
              "decorators": [],
              "body_lines": 6,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbols",
                  "type_annotation": "List[str]",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "register_callback",
              "line_number": 147,
              "return_type": null,
              "docstring": "注册回调函数\n\n参数:\n    callback: 回调函数，接收TickData参数",
              "is_async": false,
              "decorators": [],
              "body_lines": 8,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "callback",
                  "type_annotation": "Callable[(Any, None)]",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "start",
              "line_number": 157,
              "return_type": null,
              "docstring": "启动接收器",
              "is_async": false,
              "decorators": [],
              "body_lines": 26,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "stop",
              "line_number": 185,
              "return_type": null,
              "docstring": "停止接收器",
              "is_async": false,
              "decorators": [],
              "body_lines": 10,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_receiver_loop",
              "line_number": 197,
              "return_type": null,
              "docstring": "接收线程主循环",
              "is_async": false,
              "decorators": [],
              "body_lines": 9,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_processor_loop",
              "line_number": 208,
              "return_type": null,
              "docstring": "处理线程主循环",
              "is_async": false,
              "decorators": [],
              "body_lines": 19,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_receive_from_tdx",
              "line_number": 229,
              "return_type": null,
              "docstring": "从TDX接收数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 6,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_receive_from_websocket",
              "line_number": 237,
              "return_type": null,
              "docstring": "从WebSocket接收数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 15,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_receive_from_redis",
              "line_number": 254,
              "return_type": null,
              "docstring": "从Redis订阅数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 10,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_receive_mock_data",
              "line_number": 266,
              "return_type": null,
              "docstring": "接收模拟数据（用于测试）",
              "is_async": false,
              "decorators": [],
              "body_lines": 28,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_cache_tick",
              "line_number": 296,
              "return_type": null,
              "docstring": "缓存tick数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 10,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "tick",
                  "type_annotation": "TickData",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_invoke_callbacks",
              "line_number": 308,
              "return_type": null,
              "docstring": "调用所有回调函数",
              "is_async": false,
              "decorators": [],
              "body_lines": 6,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "tick",
                  "type_annotation": "TickData",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_update_stats",
              "line_number": 316,
              "return_type": null,
              "docstring": "更新统计信息",
              "is_async": false,
              "decorators": [],
              "body_lines": 3,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_latest_tick",
              "line_number": 321,
              "return_type": "Optional[TickData]",
              "docstring": "获取最新tick数据\n\n参数:\n    symbol: 股票代码\n\n返回:\n    TickData: 最新数据，如果没有则返回None",
              "is_async": false,
              "decorators": [],
              "body_lines": 11,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_tick_history",
              "line_number": 334,
              "return_type": "List[TickData]",
              "docstring": "获取历史tick数据\n\n参数:\n    symbol: 股票代码\n    limit: 返回数量\n\n返回:\n    List[TickData]: 历史数据列表",
              "is_async": false,
              "decorators": [],
              "body_lines": 12,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "limit",
                  "type_annotation": "int",
                  "default_value": "100",
                  "is_required": false
                }
              ]
            },
            {
              "name": "get_statistics",
              "line_number": 348,
              "return_type": "Dict",
              "docstring": "获取统计信息",
              "is_async": false,
              "decorators": [],
              "body_lines": 7,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": []
    },
    {
      "file_path": "realtime/__init__.py",
      "module_name": "realtime.__init__",
      "category": "auxiliary",
      "docstring": "实时数据模块 (Real-time Data Module)\n\n提供实时行情接收和处理功能:\n- Tick数据接收\n- WebSocket连接管理\n- 数据缓存和分发\n- 回调函数处理\n\n作者: MyStocks量化交易团队\n创建时间: 2025-10-18\n版本: 1.0.0",
      "lines_of_code": 20,
      "blank_lines": 6,
      "comment_lines": 0,
      "last_modified": "2025-10-18T23:56:46.846188",
      "imports": [
        "tick_receiver"
      ],
      "classes": [],
      "functions": []
    },
    {
      "file_path": "utils/tdx_server_config.py",
      "module_name": "utils.tdx_server_config",
      "category": "infrastructure",
      "docstring": "# 功能：TDX服务器配置模块，管理通达信服务器列表和连接参数\n# 作者：JohnC (ninjas@sina.com) & Claude\n# 创建日期：2025-10-16\n# 版本：2.1.0\n# 依赖：详见requirements.txt或文件导入部分\n# 注意事项：\n#   本文件是MyStocks v2.1核心组件，遵循5-tier数据分类架构\n# 版权：MyStocks Project © 2025",
      "lines_of_code": 282,
      "blank_lines": 61,
      "comment_lines": 25,
      "last_modified": "2025-10-16T08:26:29.099201",
      "imports": [
        "os",
        "logging",
        "configparser",
        "typing",
        "random"
      ],
      "classes": [
        {
          "name": "TdxServerConfig",
          "line_number": 20,
          "base_classes": [],
          "docstring": "TDX服务器配置管理器\n\n功能:\n- 解析connect.cfg文件提取服务器列表\n- 支持主服务器配置(PrimaryHost)\n- 支持随机服务器选择(负载均衡)\n- 支持故障转移(fallback到备用服务器)\n\n示例:\n    >>> config = TdxServerConfig('/path/to/connect.cfg')\n    >>> primary_host, primary_port = config.get_primary_server()\n    >>> all_servers = config.get_all_servers()\n    >>> random_server = config.get_random_server()",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 37,
              "return_type": null,
              "docstring": "初始化TDX服务器配置管理器\n\nArgs:\n    config_file: connect.cfg文件路径\n                如果为None,使用项目默认路径: temp/connect.cfg",
              "is_async": false,
              "decorators": [],
              "body_lines": 20,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "config_file",
                  "type_annotation": "str",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "_load_config",
              "line_number": 59,
              "return_type": null,
              "docstring": "加载并解析connect.cfg文件\n\n解析[HQHOST]部分:\n- HostNum: 服务器总数\n- PrimaryHost: 主服务器索引(从1开始)\n- HostName##, IPAddress##, Port##: 服务器信息\n\n编码处理: connect.cfg使用GBK编码(中文Windows默认)",
              "is_async": false,
              "decorators": [],
              "body_lines": 75,
              "complexity": 12,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_primary_server",
              "line_number": 136,
              "return_type": "Tuple[(str, int)]",
              "docstring": "获取主服务器(根据PrimaryHost配置)\n\nReturns:\n    (host, port) 元组\n\nExample:\n    >>> config = TdxServerConfig()\n    >>> host, port = config.get_primary_server()\n    >>> print(f\"主服务器: {host}:{port}\")",
              "is_async": false,
              "decorators": [],
              "body_lines": 16,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_random_server",
              "line_number": 154,
              "return_type": "Tuple[(str, int)]",
              "docstring": "随机选择一个服务器(负载均衡)\n\nReturns:\n    (host, port) 元组\n\n适用场景:\n    - 多个客户端同时连接,分散负载\n    - 主服务器繁忙时的备选方案",
              "is_async": false,
              "decorators": [],
              "body_lines": 15,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_all_servers",
              "line_number": 171,
              "return_type": "List[Tuple[(str, int, str)]]",
              "docstring": "获取所有可用服务器列表\n\nReturns:\n    List of (host, port, name) 元组\n\n适用场景:\n    - 实现自定义负载均衡策略\n    - 故障转移(依次尝试所有服务器)\n    - 服务器状态监控",
              "is_async": false,
              "decorators": [],
              "body_lines": 12,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_server_by_index",
              "line_number": 185,
              "return_type": "Optional[Tuple[(str, int)]]",
              "docstring": "根据索引获取服务器\n\nArgs:\n    index: 服务器索引(从0开始)\n\nReturns:\n    (host, port) 元组,如果索引无效返回None",
              "is_async": false,
              "decorators": [],
              "body_lines": 13,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "index",
                  "type_annotation": "int",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_failover_servers",
              "line_number": 200,
              "return_type": "List[Tuple[(str, int)]]",
              "docstring": "获取故障转移服务器列表(主服务器+备用服务器)\n\nArgs:\n    max_count: 最多返回的服务器数量(包括主服务器)\n\nReturns:\n    List of (host, port) 元组\n\n适用场景:\n    - 主服务器连接失败时,自动尝试备用服务器\n    - 实现重试机制\n\n策略:\n    1. 首先返回主服务器\n    2. 然后随机选择其他服务器作为备用\n\nExample:\n    >>> config = TdxServerConfig()\n    >>> servers = config.get_failover_servers(max_count=3)\n    >>> for host, port in servers:\n    >>>     try:\n    >>>         connect(host, port)\n    >>>         break\n    >>>     except:\n    >>>         continue  # 尝试下一个服务器",
              "is_async": false,
              "decorators": [],
              "body_lines": 47,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "max_count",
                  "type_annotation": "int",
                  "default_value": "3",
                  "is_required": false
                }
              ]
            },
            {
              "name": "get_server_count",
              "line_number": 249,
              "return_type": "int",
              "docstring": "获取可用服务器总数",
              "is_async": false,
              "decorators": [],
              "body_lines": 2,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "__str__",
              "line_number": 253,
              "return_type": null,
              "docstring": "字符串表示",
              "is_async": false,
              "decorators": [],
              "body_lines": 7,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": [
        {
          "name": "get_global_config",
          "line_number": 267,
          "return_type": "TdxServerConfig",
          "docstring": "获取全局TDX服务器配置单例\n\nReturns:\n    TdxServerConfig单例实例\n\n示例:\n    >>> config = get_global_config()\n    >>> host, port = config.get_primary_server()",
          "is_async": false,
          "decorators": [],
          "body_lines": 14,
          "complexity": 2,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "utils/validate_test_naming.py",
      "module_name": "utils.validate_test_naming",
      "category": "utility",
      "docstring": "# 功能：验证测试文件命名规范是否符合pytest约定\n# 作者：JohnC (ninjas@sina.com) & Claude\n# 创建日期：2025-10-16\n# 版本：1.0.0\n# 依赖：无外部依赖\n# 注意事项：\n#   - 检查所有测试文件是否以test_开头\n#   - 统计符合/不符合pytest规范的文件\n#   - 提供修复建议\n# 版权：MyStocks Project © 2025",
      "lines_of_code": 204,
      "blank_lines": 42,
      "comment_lines": 31,
      "last_modified": "2025-10-16T08:41:04.830230",
      "imports": [
        "os",
        "re",
        "pathlib",
        "typing"
      ],
      "classes": [
        {
          "name": "TestNamingValidator",
          "line_number": 22,
          "base_classes": [],
          "docstring": "测试文件命名规范验证器",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 25,
              "return_type": null,
              "docstring": null,
              "is_async": false,
              "decorators": [],
              "body_lines": 7,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "root_dir",
                  "type_annotation": "str",
                  "default_value": "\".\"",
                  "is_required": false
                }
              ]
            },
            {
              "name": "find_all_test_files",
              "line_number": 34,
              "return_type": "List[Path]",
              "docstring": "查找所有测试文件（包含'test'关键字的.py文件）",
              "is_async": false,
              "decorators": [],
              "body_lines": 24,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "validate_file_naming",
              "line_number": 60,
              "return_type": "bool",
              "docstring": "验证单个文件是否符合pytest命名规范",
              "is_async": false,
              "decorators": [],
              "body_lines": 9,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "file_path",
                  "type_annotation": "Path",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "validate_all",
              "line_number": 71,
              "return_type": "Dict",
              "docstring": "验证所有测试文件",
              "is_async": false,
              "decorators": [],
              "body_lines": 15,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "suggest_rename",
              "line_number": 88,
              "return_type": "str",
              "docstring": "为不符合规范的文件建议新名称",
              "is_async": false,
              "decorators": [],
              "body_lines": 24,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "file_path",
                  "type_annotation": "Path",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "generate_report",
              "line_number": 114,
              "return_type": "str",
              "docstring": "生成验证报告",
              "is_async": false,
              "decorators": [],
              "body_lines": 63,
              "complexity": 9,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": [
        {
          "name": "main",
          "line_number": 180,
          "return_type": null,
          "docstring": "主函数",
          "is_async": false,
          "decorators": [],
          "body_lines": 19,
          "complexity": 2,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "utils/column_mapper.py",
      "module_name": "utils.column_mapper",
      "category": "utility",
      "docstring": "统一列名管理器\n提供DataFrame列名的标准化映射功能\n\n作用：\n- 统一不同数据源的列名格式\n- 支持中英文列名转换\n- 提供标准的列名映射规则\n- 简化数据源适配器的列名处理逻辑\n\n功能：\n- 标准化DataFrame列名\n- 中英文列名互转\n- 自动识别和映射常见列名\n- 支持自定义列名映射规则",
      "lines_of_code": 348,
      "blank_lines": 53,
      "comment_lines": 18,
      "last_modified": "2025-09-24T14:27:03.193270",
      "imports": [
        "pandas",
        "typing",
        "warnings"
      ],
      "classes": [
        {
          "name": "ColumnMapper",
          "line_number": 22,
          "base_classes": [],
          "docstring": "统一列名管理器",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "standardize_columns",
              "line_number": 134,
              "return_type": "pd.DataFrame",
              "docstring": "标准化DataFrame列名\n\nArgs:\n    df: 输入的DataFrame\n    target_lang: 目标语言，\"en\"(英文)或\"cn\"(中文)\n    custom_mapping: 自定义映射规则，会覆盖默认规则\n    \nReturns:\n    pd.DataFrame: 列名标准化后的DataFrame",
              "is_async": false,
              "decorators": [
                "classmethod"
              ],
              "body_lines": 51,
              "complexity": 11,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "df",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "target_lang",
                  "type_annotation": "str",
                  "default_value": "\"en\"",
                  "is_required": false
                },
                {
                  "name": "custom_mapping",
                  "type_annotation": "Optional[Dict[(str, str)]]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "to_english",
              "line_number": 190,
              "return_type": "pd.DataFrame",
              "docstring": "将DataFrame列名转换为英文\n\nArgs:\n    df: 输入的DataFrame\n    custom_mapping: 自定义映射规则\n    \nReturns:\n    pd.DataFrame: 英文列名的DataFrame",
              "is_async": false,
              "decorators": [
                "classmethod"
              ],
              "body_lines": 11,
              "complexity": 1,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "df",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "custom_mapping",
                  "type_annotation": "Optional[Dict[(str, str)]]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "to_chinese",
              "line_number": 205,
              "return_type": "pd.DataFrame",
              "docstring": "将DataFrame列名转换为中文\n\nArgs:\n    df: 输入的DataFrame  \n    custom_mapping: 自定义映射规则\n    \nReturns:\n    pd.DataFrame: 中文列名的DataFrame",
              "is_async": false,
              "decorators": [
                "classmethod"
              ],
              "body_lines": 11,
              "complexity": 1,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "df",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "custom_mapping",
                  "type_annotation": "Optional[Dict[(str, str)]]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "get_standard_columns",
              "line_number": 220,
              "return_type": "list",
              "docstring": "获取特定数据类型的标准列名\n\nArgs:\n    data_type: 数据类型，如\"stock_daily\", \"index_daily\", \"stock_basic\"等\n    lang: 语言，\"en\"或\"cn\"\n    \nReturns:\n    list: 标准列名列表",
              "is_async": false,
              "decorators": [
                "classmethod"
              ],
              "body_lines": 26,
              "complexity": 1,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data_type",
                  "type_annotation": "str",
                  "default_value": "\"stock_daily\"",
                  "is_required": false
                },
                {
                  "name": "lang",
                  "type_annotation": "str",
                  "default_value": "\"en\"",
                  "is_required": false
                }
              ]
            },
            {
              "name": "validate_columns",
              "line_number": 249,
              "return_type": "tuple",
              "docstring": "验证DataFrame是否包含必需的列\n\nArgs:\n    df: 输入的DataFrame\n    required_columns: 必需的列名列表\n    strict: 是否严格模式（必须完全匹配）\n    \nReturns:\n    tuple: (是否通过验证, 缺失的列, 额外的列)",
              "is_async": false,
              "decorators": [
                "classmethod"
              ],
              "body_lines": 20,
              "complexity": 3,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "df",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "required_columns",
                  "type_annotation": "list",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "strict",
                  "type_annotation": "bool",
                  "default_value": "False",
                  "is_required": false
                }
              ]
            },
            {
              "name": "add_custom_mapping",
              "line_number": 274,
              "return_type": null,
              "docstring": "添加自定义映射规则到默认映射表\n\nArgs:\n    custom_mapping: 自定义映射字典\n    target_lang: 目标语言",
              "is_async": false,
              "decorators": [
                "classmethod"
              ],
              "body_lines": 15,
              "complexity": 3,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "custom_mapping",
                  "type_annotation": "Dict[(str, str)]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "target_lang",
                  "type_annotation": "str",
                  "default_value": "\"en\"",
                  "is_required": false
                }
              ]
            }
          ]
        }
      ],
      "functions": [
        {
          "name": "standardize_dataframe",
          "line_number": 293,
          "return_type": "pd.DataFrame",
          "docstring": "便捷函数：标准化DataFrame列名\n\nArgs:\n    df: 输入的DataFrame\n    target_lang: 目标语言，\"en\"或\"cn\"\n    custom_mapping: 自定义映射规则\n    \nReturns:\n    pd.DataFrame: 标准化后的DataFrame",
          "is_async": false,
          "decorators": [],
          "body_lines": 12,
          "complexity": 1,
          "parameters": [
            {
              "name": "df",
              "type_annotation": "pd.DataFrame",
              "default_value": null,
              "is_required": true
            },
            {
              "name": "target_lang",
              "type_annotation": "str",
              "default_value": "\"en\"",
              "is_required": false
            },
            {
              "name": "custom_mapping",
              "type_annotation": "Optional[Dict[(str, str)]]",
              "default_value": "None",
              "is_required": false
            }
          ]
        },
        {
          "name": "to_english_columns",
          "line_number": 310,
          "return_type": "pd.DataFrame",
          "docstring": "便捷函数：转换为英文列名",
          "is_async": false,
          "decorators": [],
          "body_lines": 2,
          "complexity": 1,
          "parameters": [
            {
              "name": "df",
              "type_annotation": "pd.DataFrame",
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "to_chinese_columns",
          "line_number": 315,
          "return_type": "pd.DataFrame",
          "docstring": "便捷函数：转换为中文列名",
          "is_async": false,
          "decorators": [],
          "body_lines": 2,
          "complexity": 1,
          "parameters": [
            {
              "name": "df",
              "type_annotation": "pd.DataFrame",
              "default_value": null,
              "is_required": true
            }
          ]
        }
      ]
    },
    {
      "file_path": "utils/date_utils.py",
      "module_name": "utils.date_utils",
      "category": "utility",
      "docstring": "日期处理工具\n提供日期格式化和转换功能",
      "lines_of_code": 127,
      "blank_lines": 26,
      "comment_lines": 13,
      "last_modified": "2025-09-16T08:56:32.255981",
      "imports": [
        "datetime",
        "typing"
      ],
      "classes": [],
      "functions": [
        {
          "name": "normalize_date",
          "line_number": 9,
          "return_type": "str",
          "docstring": "将各种格式的日期转换为标准格式 YYYY-MM-DD\n\n支持的输入格式:\n- YYYY-MM-DD (标准格式)\n- YYYYMMDD (紧凑格式)\n- YYYY/MM/DD (斜杠分隔)\n- datetime.date 对象\n- datetime.datetime 对象\n\nArgs:\n    date_str: 需要格式化的日期字符串或日期对象\n    \nReturns:\n    str: 格式化后的日期字符串 (YYYY-MM-DD)\n    \nRaises:\n    ValueError: 如果日期格式无法识别",
          "is_async": false,
          "decorators": [],
          "body_lines": 66,
          "complexity": 16,
          "parameters": [
            {
              "name": "date_str",
              "type_annotation": "Union[(str, datetime.date, datetime.datetime)]",
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "get_date_range",
          "line_number": 78,
          "return_type": "tuple",
          "docstring": "获取标准化的日期范围\n\nArgs:\n    start_date: 开始日期\n    end_date: 结束日期 (如果提供了days参数，则忽略此参数)\n    days: 从开始日期算起的天数 (可选)，可以是整数或字符串\n    \nReturns:\n    tuple: (标准化开始日期, 标准化结束日期)",
          "is_async": false,
          "decorators": [],
          "body_lines": 30,
          "complexity": 3,
          "parameters": [
            {
              "name": "start_date",
              "type_annotation": "Union[(str, datetime.date)]",
              "default_value": null,
              "is_required": true
            },
            {
              "name": "end_date",
              "type_annotation": "Optional[Union[(str, datetime.date)]]",
              "default_value": "None",
              "is_required": false
            },
            {
              "name": "days",
              "type_annotation": "Optional[Union[(int, str)]]",
              "default_value": "None",
              "is_required": false
            }
          ]
        },
        {
          "name": "is_valid_date",
          "line_number": 113,
          "return_type": "bool",
          "docstring": "检查日期字符串是否有效\n\nArgs:\n    date_str: 日期字符串\n    \nReturns:\n    bool: 日期是否有效",
          "is_async": false,
          "decorators": [],
          "body_lines": 14,
          "complexity": 2,
          "parameters": [
            {
              "name": "date_str",
              "type_annotation": "str",
              "default_value": null,
              "is_required": true
            }
          ]
        }
      ]
    },
    {
      "file_path": "utils/add_python_headers.py",
      "module_name": "utils.add_python_headers",
      "category": "utility",
      "docstring": "# 功能：批量为Python核心文件添加规范化头注释\n# 作者：JohnC (ninjas@sina.com) & Claude\n# 创建日期：2025-10-16\n# 版本：1.0.0\n# 依赖：无外部依赖\n# 注意事项：\n#   - 自动检测已有头注释，避免重复添加\n#   - 支持7组件Python头注释标准\n#   - 备份原文件到.backup\n# 版权：MyStocks Project © 2025",
      "lines_of_code": 278,
      "blank_lines": 52,
      "comment_lines": 51,
      "last_modified": "2025-10-16T08:26:10.545243",
      "imports": [
        "os",
        "re",
        "datetime",
        "typing"
      ],
      "classes": [
        {
          "name": "PythonHeaderAdder",
          "line_number": 35,
          "base_classes": [],
          "docstring": "批量添加Python头注释的工具类",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 38,
              "return_type": null,
              "docstring": null,
              "is_async": false,
              "decorators": [],
              "body_lines": 3,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "has_standard_header",
              "line_number": 43,
              "return_type": "bool",
              "docstring": "检查文件是否已有标准头注释",
              "is_async": false,
              "decorators": [],
              "body_lines": 13,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "content",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "extract_shebang_and_encoding",
              "line_number": 58,
              "return_type": "Tuple[(str, str)]",
              "docstring": "提取文件的shebang和编码声明",
              "is_async": false,
              "decorators": [],
              "body_lines": 20,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "content",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "add_header_to_file",
              "line_number": 80,
              "return_type": "bool",
              "docstring": "为单个Python文件添加头注释",
              "is_async": false,
              "decorators": [],
              "body_lines": 57,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "file_path",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "description",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "author",
                  "type_annotation": "str",
                  "default_value": "\"JohnC (ninjas@sina.com) & Claude\"",
                  "is_required": false
                },
                {
                  "name": "created_date",
                  "type_annotation": "str",
                  "default_value": "\"2025-10-16\"",
                  "is_required": false
                },
                {
                  "name": "version",
                  "type_annotation": "str",
                  "default_value": "\"2.1.0\"",
                  "is_required": false
                },
                {
                  "name": "dependencies",
                  "type_annotation": "str",
                  "default_value": "\"详见requirements.txt或导入部分\"",
                  "is_required": false
                },
                {
                  "name": "notes",
                  "type_annotation": "str",
                  "default_value": "\"本文件是MyStocks v2.1核心组件\"",
                  "is_required": false
                },
                {
                  "name": "copyright",
                  "type_annotation": "str",
                  "default_value": "\"MyStocks Project © 2025\"",
                  "is_required": false
                }
              ]
            },
            {
              "name": "_remove_simple_docstring",
              "line_number": 149,
              "return_type": "str",
              "docstring": "移除简单的docstring，保留复杂的类/函数说明",
              "is_async": false,
              "decorators": [],
              "body_lines": 27,
              "complexity": 8,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "content",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": [
        {
          "name": "batch_add_headers",
          "line_number": 179,
          "return_type": null,
          "docstring": "批量为核心文件添加头注释",
          "is_async": false,
          "decorators": [],
          "body_lines": 88,
          "complexity": 4,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "utils/test_logs_api.py",
      "module_name": "utils.test_logs_api",
      "category": "utility",
      "docstring": "测试系统运行日志API端点\n验证日志查询和筛选功能",
      "lines_of_code": 302,
      "blank_lines": 69,
      "comment_lines": 6,
      "last_modified": "2025-10-16T10:32:25.721783",
      "imports": [
        "requests",
        "json",
        "datetime",
        "typing"
      ],
      "classes": [],
      "functions": [
        {
          "name": "print_separator",
          "line_number": 16,
          "return_type": null,
          "docstring": "打印分隔线",
          "is_async": false,
          "decorators": [],
          "body_lines": 2,
          "complexity": 1,
          "parameters": []
        },
        {
          "name": "test_get_all_logs",
          "line_number": 21,
          "return_type": null,
          "docstring": "测试1: 获取所有日志",
          "is_async": false,
          "decorators": [],
          "body_lines": 31,
          "complexity": 5,
          "parameters": []
        },
        {
          "name": "test_filter_errors_only",
          "line_number": 55,
          "return_type": null,
          "docstring": "测试2: 只获取有问题的日志",
          "is_async": false,
          "decorators": [],
          "body_lines": 37,
          "complexity": 5,
          "parameters": []
        },
        {
          "name": "test_filter_by_level",
          "line_number": 95,
          "return_type": null,
          "docstring": "测试3: 按日志级别筛选",
          "is_async": false,
          "decorators": [],
          "body_lines": 33,
          "complexity": 5,
          "parameters": []
        },
        {
          "name": "test_filter_by_category",
          "line_number": 131,
          "return_type": null,
          "docstring": "测试4: 按分类筛选",
          "is_async": false,
          "decorators": [],
          "body_lines": 33,
          "complexity": 5,
          "parameters": []
        },
        {
          "name": "test_pagination",
          "line_number": 167,
          "return_type": null,
          "docstring": "测试5: 分页功能",
          "is_async": false,
          "decorators": [],
          "body_lines": 29,
          "complexity": 4,
          "parameters": []
        },
        {
          "name": "test_logs_summary",
          "line_number": 199,
          "return_type": null,
          "docstring": "测试6: 日志统计摘要",
          "is_async": false,
          "decorators": [],
          "body_lines": 35,
          "complexity": 5,
          "parameters": []
        },
        {
          "name": "main",
          "line_number": 237,
          "return_type": null,
          "docstring": "主函数",
          "is_async": false,
          "decorators": [],
          "body_lines": 59,
          "complexity": 3,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "utils/check_db_health.py",
      "module_name": "utils.check_db_health",
      "category": "utility",
      "docstring": "数据库健康检查脚本\n\n验证4个数据库的连接状态，为修复Web页面问题做准备",
      "lines_of_code": 296,
      "blank_lines": 56,
      "comment_lines": 15,
      "last_modified": "2025-10-16T06:38:29.679335",
      "imports": [
        "sys",
        "os"
      ],
      "classes": [],
      "functions": [
        {
          "name": "check_mysql_connection",
          "line_number": 14,
          "return_type": null,
          "docstring": "验证MySQL连接",
          "is_async": false,
          "decorators": [],
          "body_lines": 40,
          "complexity": 3,
          "parameters": []
        },
        {
          "name": "check_postgresql_connection",
          "line_number": 57,
          "return_type": null,
          "docstring": "验证PostgreSQL连接",
          "is_async": false,
          "decorators": [],
          "body_lines": 71,
          "complexity": 4,
          "parameters": []
        },
        {
          "name": "check_tdengine_connection",
          "line_number": 131,
          "return_type": null,
          "docstring": "验证TDengine连接",
          "is_async": false,
          "decorators": [],
          "body_lines": 60,
          "complexity": 5,
          "parameters": []
        },
        {
          "name": "check_redis_connection",
          "line_number": 194,
          "return_type": null,
          "docstring": "验证Redis连接",
          "is_async": false,
          "decorators": [],
          "body_lines": 32,
          "complexity": 2,
          "parameters": []
        },
        {
          "name": "main",
          "line_number": 229,
          "return_type": null,
          "docstring": "主函数",
          "is_async": false,
          "decorators": [],
          "body_lines": 62,
          "complexity": 7,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "utils/check_api_health_v2.py",
      "module_name": "utils.check_api_health_v2",
      "category": "utility",
      "docstring": "# 功能：Web API健康检查工具 v2.0 - 验证短期优化改进后的API端点\n# 作者：JohnC (ninjas@sina.com) & Claude\n# 创建日期：2025-10-16\n# 版本：2.0.0\n# 依赖：requests\n# 注意事项：\n#   - 测试10个关键API端点（包含6个新增端点）\n#   - 自动获取JWT token进行认证测试\n#   - 生成详细的测试报告\n# 版权：MyStocks Project © 2025",
      "lines_of_code": 384,
      "blank_lines": 44,
      "comment_lines": 29,
      "last_modified": "2025-10-16T09:45:42.561319",
      "imports": [
        "requests",
        "json",
        "datetime",
        "typing"
      ],
      "classes": [
        {
          "name": "Colors",
          "line_number": 26,
          "base_classes": [],
          "docstring": "终端颜色",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "APIHealthChecker",
          "line_number": 35,
          "base_classes": [],
          "docstring": "API健康检查器",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 38,
              "return_type": null,
              "docstring": null,
              "is_async": false,
              "decorators": [],
              "body_lines": 2,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "print_header",
              "line_number": 42,
              "return_type": null,
              "docstring": "打印标题",
              "is_async": false,
              "decorators": [],
              "body_lines": 4,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "text",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "print_result",
              "line_number": 48,
              "return_type": null,
              "docstring": "打印测试结果",
              "is_async": false,
              "decorators": [],
              "body_lines": 11,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "status",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "detail",
                  "type_annotation": "str",
                  "default_value": "\"\"",
                  "is_required": false
                }
              ]
            },
            {
              "name": "check_backend_running",
              "line_number": 61,
              "return_type": "bool",
              "docstring": "检查Backend服务是否运行",
              "is_async": false,
              "decorators": [],
              "body_lines": 6,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_jwt_token",
              "line_number": 69,
              "return_type": "Tuple[(bool, str)]",
              "docstring": "获取JWT token",
              "is_async": false,
              "decorators": [],
              "body_lines": 20,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_endpoint",
              "line_number": 91,
              "return_type": "Dict",
              "docstring": "测试单个API端点",
              "is_async": false,
              "decorators": [],
              "body_lines": 78,
              "complexity": 15,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "method",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "url",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "priority",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "need_auth",
                  "type_annotation": "bool",
                  "default_value": "False",
                  "is_required": false
                },
                {
                  "name": "params",
                  "type_annotation": "Dict",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "data",
                  "type_annotation": "Dict",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "run_tests",
              "line_number": 173,
              "return_type": null,
              "docstring": "运行所有API测试",
              "is_async": false,
              "decorators": [],
              "body_lines": 134,
              "complexity": 8,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "generate_report",
              "line_number": 309,
              "return_type": null,
              "docstring": "生成测试报告",
              "is_async": false,
              "decorators": [],
              "body_lines": 63,
              "complexity": 8,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": [
        {
          "name": "main",
          "line_number": 375,
          "return_type": null,
          "docstring": "主函数",
          "is_async": false,
          "decorators": [],
          "body_lines": 4,
          "complexity": 1,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "utils/__init__.py",
      "module_name": "utils.__init__",
      "category": "utility",
      "docstring": "工具类包\n包含各种辅助函数和工具",
      "lines_of_code": 4,
      "blank_lines": 0,
      "comment_lines": 0,
      "last_modified": "2025-10-12T15:25:29.903938",
      "imports": [],
      "classes": [],
      "functions": []
    },
    {
      "file_path": "utils/symbol_utils.py",
      "module_name": "utils.symbol_utils",
      "category": "utility",
      "docstring": "股票代码处理工具\n提供股票代码格式化和转换功能",
      "lines_of_code": 351,
      "blank_lines": 64,
      "comment_lines": 24,
      "last_modified": "2025-09-16T11:14:37.383722",
      "imports": [
        "typing"
      ],
      "classes": [],
      "functions": [
        {
          "name": "normalize_stock_code",
          "line_number": 8,
          "return_type": "str",
          "docstring": "标准化股票代码格式\n支持格式: \n- 基本格式: 000001, 600000\n- 后缀格式: 000001.SZ, 600000.SH \n- 前缀格式: sz000001, SH600000\n- 点分隔格式: sz.000001, sh.600000\n- Baostock格式: sh.600000, sz.000001\n- AKShare格式: 600000\n\n返回格式: 6位纯数字代码\n\n参数:\n    code: 输入的股票代码(可以是字符串、整数或浮点数)\n    \n返回:\n    标准化后的6位数字股票代码\n    \n异常:\n    ValueError: 当输入为空或无法识别的格式时抛出",
          "is_async": false,
          "decorators": [],
          "body_lines": 75,
          "complexity": 19,
          "parameters": [
            {
              "name": "code",
              "type_annotation": "Union[(str, int, float)]",
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "get_stock_exchange",
          "line_number": 86,
          "return_type": "str",
          "docstring": "根据股票代码获取交易所代码\n\n参数:\n    code: 股票代码(可以是任何支持的格式)\n    \n返回:\n    str: 交易所代码 (SH/SZ/BJ)",
          "is_async": false,
          "decorators": [],
          "body_lines": 24,
          "complexity": 5,
          "parameters": [
            {
              "name": "code",
              "type_annotation": "Union[(str, int, float)]",
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "format_stock_code_for_source",
          "line_number": 113,
          "return_type": "str",
          "docstring": "根据数据源类型格式化股票代码\n\n参数:\n    code: 股票代码(可以是任何支持的格式)\n    source_type: 数据源类型\n        - 'akshare': AKShare格式 (600000) - 6位纯数字\n        - 'baostock': Baostock格式 (sh.600000) - 交易所.代码\n        \n返回:\n    str: 适合指定数据源的股票代码格式\n    \n异常:\n    ValueError: 当数据源类型无效时抛出",
          "is_async": false,
          "decorators": [],
          "body_lines": 27,
          "complexity": 3,
          "parameters": [
            {
              "name": "code",
              "type_annotation": "Union[(str, int, float)]",
              "default_value": null,
              "is_required": true
            },
            {
              "name": "source_type",
              "type_annotation": "str",
              "default_value": "\"akshare\"",
              "is_required": false
            }
          ]
        },
        {
          "name": "format_stock_code",
          "line_number": 146,
          "return_type": "str",
          "docstring": "根据指定格式格式化股票代码（保持向后兼容）\n\n参数:\n    code: 股票代码(可以是任何支持的格式)\n    format_type: 格式类型\n        - 'numeric': 纯数字格式 (600001)\n        - 'prefix': 前缀格式 (sh600001)\n        - 'suffix': 后缀格式 (600001.SH)\n        - 'baostock': Baostock格式 (sh.600000)\n        - 'akshare': AKShare格式 (600000)\n        \n返回:\n    str: 格式化后的股票代码\n    \n异常:\n    ValueError: 当格式类型无效时抛出",
          "is_async": false,
          "decorators": [],
          "body_lines": 34,
          "complexity": 6,
          "parameters": [
            {
              "name": "code",
              "type_annotation": "Union[(str, int, float)]",
              "default_value": null,
              "is_required": true
            },
            {
              "name": "format_type",
              "type_annotation": "str",
              "default_value": "\"numeric\"",
              "is_required": false
            }
          ]
        },
        {
          "name": "is_valid_stock_code",
          "line_number": 186,
          "return_type": "bool",
          "docstring": "检查股票代码是否有效\n\n参数:\n    code: 股票代码\n    \n返回:\n    bool: 股票代码是否有效",
          "is_async": false,
          "decorators": [],
          "body_lines": 14,
          "complexity": 2,
          "parameters": [
            {
              "name": "code",
              "type_annotation": "Union[(str, int, float)]",
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "format_index_code_for_source",
          "line_number": 203,
          "return_type": "str",
          "docstring": "根据数据源类型格式化指数代码\n\n参数:\n    code: 指数代码(可以是任何支持的格式)\n    source_type: 数据源类型\n        - 'akshare': AKShare格式 (通常是 sh000001, sz399001 或 000001, 399001)\n        - 'baostock': Baostock格式 (sh.000001, sz.399001)\n        \n返回:\n    str: 适合指定数据源的指数代码格式\n    \n异常:\n    ValueError: 当数据源类型无效时抛出",
          "is_async": false,
          "decorators": [],
          "body_lines": 34,
          "complexity": 5,
          "parameters": [
            {
              "name": "code",
              "type_annotation": "Union[(str, int, float)]",
              "default_value": null,
              "is_required": true
            },
            {
              "name": "source_type",
              "type_annotation": "str",
              "default_value": "\"akshare\"",
              "is_required": false
            }
          ]
        },
        {
          "name": "normalize_index_code",
          "line_number": 243,
          "return_type": "str",
          "docstring": "标准化指数代码格式\n支持格式: \n- 基本格式: 000001, 399001\n- 后缀格式: 000001.SH, 399001.SZ \n- 前缀格式: sh000001, SZ399001\n- 点分隔格式: sh.000001, sz.399001\n\n返回格式: 6位纯数字代码\n\n参数:\n    code: 输入的指数代码(可以是字符串、整数或浮点数)\n    \n返回:\n    标准化后的6位数字指数代码\n    \n异常:\n    ValueError: 当输入为空或无法识别的格式时抛出",
          "is_async": false,
          "decorators": [],
          "body_lines": 68,
          "complexity": 16,
          "parameters": [
            {
              "name": "code",
              "type_annotation": "Union[(str, int, float)]",
              "default_value": null,
              "is_required": true
            }
          ]
        }
      ]
    },
    {
      "file_path": "utils/validate_gitignore.py",
      "module_name": "utils.validate_gitignore",
      "category": "utility",
      "docstring": "# 功能：验证.gitignore配置是否正确排除应忽略的文件\n# 作者：JohnC (ninjas@sina.com) & Claude\n# 创建日期：2025-10-16\n# 版本：1.0.0\n# 依赖：无外部依赖\n# 注意事项：\n#   - 检查git status中不应出现的文件类型\n#   - 验证.env.example等例外文件可见\n#   - 提供清理建议\n# 版权：MyStocks Project © 2025",
      "lines_of_code": 277,
      "blank_lines": 50,
      "comment_lines": 26,
      "last_modified": "2025-10-16T08:49:56.658898",
      "imports": [
        "subprocess",
        "os",
        "re",
        "pathlib",
        "typing"
      ],
      "classes": [
        {
          "name": "GitIgnoreValidator",
          "line_number": 23,
          "base_classes": [],
          "docstring": "Git忽略规则验证器",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 26,
              "return_type": null,
              "docstring": null,
              "is_async": false,
              "decorators": [],
              "body_lines": 27,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "root_dir",
                  "type_annotation": "str",
                  "default_value": "\".\"",
                  "is_required": false
                }
              ]
            },
            {
              "name": "run_git_command",
              "line_number": 55,
              "return_type": "str",
              "docstring": "执行git命令",
              "is_async": false,
              "decorators": [],
              "body_lines": 12,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "args",
                  "type_annotation": "List[str]",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_untracked_files",
              "line_number": 69,
              "return_type": "List[str]",
              "docstring": "获取未跟踪的文件列表",
              "is_async": false,
              "decorators": [],
              "body_lines": 10,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "check_ignored_patterns",
              "line_number": 81,
              "return_type": null,
              "docstring": "检查应该被忽略的文件模式",
              "is_async": false,
              "decorators": [],
              "body_lines": 19,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "check_exception_files",
              "line_number": 102,
              "return_type": null,
              "docstring": "检查排除规则文件是否可见",
              "is_async": false,
              "decorators": [],
              "body_lines": 19,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "check_gitignore_exists",
              "line_number": 123,
              "return_type": "bool",
              "docstring": "检查.gitignore文件是否存在",
              "is_async": false,
              "decorators": [],
              "body_lines": 19,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "generate_cleanup_commands",
              "line_number": 144,
              "return_type": "List[str]",
              "docstring": "生成清理命令",
              "is_async": false,
              "decorators": [],
              "body_lines": 19,
              "complexity": 6,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "generate_report",
              "line_number": 165,
              "return_type": "str",
              "docstring": "生成验证报告",
              "is_async": false,
              "decorators": [],
              "body_lines": 91,
              "complexity": 21,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": [
        {
          "name": "main",
          "line_number": 259,
          "return_type": null,
          "docstring": "主函数",
          "is_async": false,
          "decorators": [],
          "body_lines": 13,
          "complexity": 2,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "utils/check_api_health.py",
      "module_name": "utils.check_api_health",
      "category": "utility",
      "docstring": "Web API健康检查脚本\n\n验证10个关键页面的数据接口可用性",
      "lines_of_code": 319,
      "blank_lines": 45,
      "comment_lines": 16,
      "last_modified": "2025-10-16T08:11:12.316680",
      "imports": [
        "sys",
        "requests",
        "time",
        "typing"
      ],
      "classes": [],
      "functions": [
        {
          "name": "check_backend_running",
          "line_number": 111,
          "return_type": "bool",
          "docstring": "检查Backend服务是否运行",
          "is_async": false,
          "decorators": [],
          "body_lines": 6,
          "complexity": 2,
          "parameters": []
        },
        {
          "name": "get_auth_token",
          "line_number": 120,
          "return_type": "Optional[str]",
          "docstring": "获取认证Token",
          "is_async": false,
          "decorators": [],
          "body_lines": 12,
          "complexity": 3,
          "parameters": []
        },
        {
          "name": "test_api_endpoint",
          "line_number": 135,
          "return_type": "Tuple[(bool, str, Optional[int])]",
          "docstring": "测试单个API端点\n\nReturns:\n    (成功, 错误消息, 状态码)",
          "is_async": false,
          "decorators": [],
          "body_lines": 43,
          "complexity": 13,
          "parameters": [
            {
              "name": "endpoint",
              "type_annotation": "Dict",
              "default_value": null,
              "is_required": true
            },
            {
              "name": "token",
              "type_annotation": "Optional[str]",
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "main",
          "line_number": 181,
          "return_type": null,
          "docstring": "主函数",
          "is_async": false,
          "decorators": [],
          "body_lines": 133,
          "complexity": 18,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "utils/add_doc_metadata.py",
      "module_name": "utils.add_doc_metadata",
      "category": "utility",
      "docstring": "批量为MD文档添加元数据标记\n\n用法:\n    python utils/add_doc_metadata.py --doc README.md --creator \"JohnC & Claude\" --version \"2.1.0\"",
      "lines_of_code": 158,
      "blank_lines": 37,
      "comment_lines": 13,
      "last_modified": "2025-10-16T08:13:46.680949",
      "imports": [
        "argparse",
        "os",
        "datetime"
      ],
      "classes": [],
      "functions": [
        {
          "name": "add_metadata",
          "line_number": 25,
          "return_type": null,
          "docstring": "为MD文档添加元数据\n\nArgs:\n    file_path: 文档路径\n    creator: 创建人\n    version: 版本号\n    approved_date: 批准日期 (可选，默认今天)\n    revision_notes: 修订内容描述",
          "is_async": false,
          "decorators": [],
          "body_lines": 55,
          "complexity": 5,
          "parameters": [
            {
              "name": "file_path",
              "type_annotation": "str",
              "default_value": null,
              "is_required": true
            },
            {
              "name": "creator",
              "type_annotation": "str",
              "default_value": null,
              "is_required": true
            },
            {
              "name": "version",
              "type_annotation": "str",
              "default_value": null,
              "is_required": true
            },
            {
              "name": "approved_date",
              "type_annotation": "str",
              "default_value": "None",
              "is_required": false
            },
            {
              "name": "revision_notes",
              "type_annotation": "str",
              "default_value": "\"添加文档元数据标记\"",
              "is_required": false
            }
          ]
        },
        {
          "name": "batch_add_metadata",
          "line_number": 84,
          "return_type": null,
          "docstring": "批量为核心文档添加元数据",
          "is_async": false,
          "decorators": [],
          "body_lines": 52,
          "complexity": 4,
          "parameters": []
        },
        {
          "name": "main",
          "line_number": 139,
          "return_type": null,
          "docstring": null,
          "is_async": false,
          "decorators": [],
          "body_lines": 14,
          "complexity": 3,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "utils/failure_recovery_queue.py",
      "module_name": "utils.failure_recovery_queue",
      "category": "utility",
      "docstring": "# 功能：故障恢复队列，数据库不可用时缓存操作并自动重试\n# 作者：JohnC (ninjas@sina.com) & Claude\n# 创建日期：2025-10-16\n# 版本：2.1.0\n# 依赖：详见requirements.txt或文件导入部分\n# 注意事项：\n#   本文件是MyStocks v2.1核心组件，遵循5-tier数据分类架构\n# 版权：MyStocks Project © 2025",
      "lines_of_code": 269,
      "blank_lines": 55,
      "comment_lines": 10,
      "last_modified": "2025-10-16T08:26:29.099201",
      "imports": [
        "sqlite3",
        "json",
        "datetime",
        "typing"
      ],
      "classes": [
        {
          "name": "FailureRecoveryQueue",
          "line_number": 19,
          "base_classes": [],
          "docstring": "故障恢复队列\n\n当目标数据库不可用时,将数据持久化到本地SQLite队列,\n待数据库恢复后自动重试。",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 27,
              "return_type": null,
              "docstring": "初始化队列\n\nArgs:\n    db_path: SQLite数据库文件路径",
              "is_async": false,
              "decorators": [],
              "body_lines": 10,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "db_path",
                  "type_annotation": "str",
                  "default_value": "\"/tmp/mystocks_recovery_queue.db\"",
                  "is_required": false
                }
              ]
            },
            {
              "name": "_init_db",
              "line_number": 39,
              "return_type": null,
              "docstring": "初始化SQLite数据库表",
              "is_async": false,
              "decorators": [],
              "body_lines": 18,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "enqueue",
              "line_number": 59,
              "return_type": null,
              "docstring": "将失败的数据操作加入队列\n\nArgs:\n    classification: 数据分类\n    target_database: 目标数据库\n    data: 数据内容 (将转为JSON)",
              "is_async": false,
              "decorators": [],
              "body_lines": 18,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "classification",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "target_database",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data",
                  "type_annotation": "Dict[(str, Any)]",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_pending_items",
              "line_number": 79,
              "return_type": null,
              "docstring": "获取待重试的队列项\n\nArgs:\n    limit: 最大返回数量\n    \nReturns:\n    待处理的队列项列表",
              "is_async": false,
              "decorators": [],
              "body_lines": 24,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "limit",
                  "type_annotation": "int",
                  "default_value": "100",
                  "is_required": false
                }
              ]
            },
            {
              "name": "mark_item_processed",
              "line_number": 105,
              "return_type": null,
              "docstring": "标记队列项为已处理\n\nArgs:\n    item_id: 队列项ID",
              "is_async": false,
              "decorators": [],
              "body_lines": 17,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "item_id",
                  "type_annotation": "int",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "mark_item_failed",
              "line_number": 124,
              "return_type": null,
              "docstring": "标记队列项为失败并增加重试次数\n\nArgs:\n    item_id: 队列项ID\n    error_message: 错误信息",
              "is_async": false,
              "decorators": [],
              "body_lines": 21,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "item_id",
                  "type_annotation": "int",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "error_message",
                  "type_annotation": "str",
                  "default_value": "\"\"",
                  "is_required": false
                }
              ]
            },
            {
              "name": "retry_failed_items",
              "line_number": 147,
              "return_type": null,
              "docstring": "重试失败的队列项\n\nArgs:\n    max_retries: 最大重试次数\n\nReturns:\n    重置为pending状态的队列项数量",
              "is_async": false,
              "decorators": [],
              "body_lines": 23,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "max_retries",
                  "type_annotation": "int",
                  "default_value": "3",
                  "is_required": false
                }
              ]
            },
            {
              "name": "cleanup_old_items",
              "line_number": 172,
              "return_type": null,
              "docstring": "清理旧的已处理项\n\nArgs:\n    days_old: 保留天数\n\nReturns:\n    清理的项数量",
              "is_async": false,
              "decorators": [],
              "body_lines": 23,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "days_old",
                  "type_annotation": "int",
                  "default_value": "30",
                  "is_required": false
                }
              ]
            },
            {
              "name": "get_queue_stats",
              "line_number": 197,
              "return_type": "Dict[(str, Any)]",
              "docstring": "获取队列统计信息\n\nReturns:\n    队列统计信息",
              "is_async": false,
              "decorators": [],
              "body_lines": 36,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_failed_items_with_high_retry_count",
              "line_number": 235,
              "return_type": "list",
              "docstring": "获取重试次数过多的失败项\n\nArgs:\n    min_retries: 最小重试次数\n\nReturns:\n    高重试次数的失败项列表",
              "is_async": false,
              "decorators": [],
              "body_lines": 33,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "min_retries",
                  "type_annotation": "int",
                  "default_value": "5",
                  "is_required": false
                }
              ]
            }
          ]
        }
      ],
      "functions": []
    },
    {
      "file_path": "strategy/stock_screener.py",
      "module_name": "strategy.stock_screener",
      "category": "auxiliary",
      "docstring": "股票筛选器 (Stock Screener)\n\n功能说明:\n- 根据多维度条件筛选股票池\n- 支持市值、行业、价格、成交量等过滤条件\n- 排除ST股票、停牌股票等特殊状态\n- 与UnifiedDataManager集成获取股票信息\n\n作者: MyStocks量化交易团队\n创建时间: 2025-10-18\n版本: 1.0.0",
      "lines_of_code": 542,
      "blank_lines": 112,
      "comment_lines": 40,
      "last_modified": "2025-10-18T20:09:01.303478",
      "imports": [
        "pandas",
        "numpy",
        "typing",
        "datetime",
        "logging",
        "dataclasses"
      ],
      "classes": [
        {
          "name": "ScreeningCriteria",
          "line_number": 24,
          "base_classes": [],
          "docstring": "筛选条件配置",
          "decorators": [
            "dataclass"
          ],
          "is_abstract": false,
          "methods": [
            {
              "name": "__post_init__",
              "line_number": 56,
              "return_type": null,
              "docstring": "初始化后处理",
              "is_async": false,
              "decorators": [],
              "body_lines": 13,
              "complexity": 7,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        },
        {
          "name": "StockScreener",
          "line_number": 72,
          "base_classes": [],
          "docstring": "股票筛选器 - 根据条件过滤股票池\n\n功能:\n    - 多维度条件筛选\n    - ST股票、停牌股票过滤\n    - 行业、板块、市值过滤\n    - 自定义过滤函数支持",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 83,
              "return_type": null,
              "docstring": "初始化股票筛选器\n\n参数:\n    unified_manager: UnifiedDataManager实例\n    criteria: 筛选条件配置",
              "is_async": false,
              "decorators": [],
              "body_lines": 27,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "unified_manager",
                  "type_annotation": null,
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "criteria",
                  "type_annotation": "Optional[ScreeningCriteria]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "screen",
              "line_number": 114,
              "return_type": "List[str]",
              "docstring": "执行股票筛选\n\n参数:\n    symbols: 输入股票池 (如果为None，使用全市场股票)\n    as_of_date: 筛选基准日期 (默认为今天)\n\n返回:\n    List[str]: 筛选后的股票代码列表\n\n示例:\n    >>> screener = StockScreener(unified_manager, criteria)\n    >>> filtered = screener.screen(symbols=['000001', '000002', '600000'])\n    >>> print(f\"筛选后股票数量: {len(filtered)}\")",
              "is_async": false,
              "decorators": [],
              "body_lines": 84,
              "complexity": 18,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbols",
                  "type_annotation": "Optional[List[str]]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "as_of_date",
                  "type_annotation": "Optional[date]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "_get_all_symbols",
              "line_number": 202,
              "return_type": "List[str]",
              "docstring": "获取全市场股票列表",
              "is_async": false,
              "decorators": [],
              "body_lines": 16,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_get_stock_info",
              "line_number": 220,
              "return_type": "pd.DataFrame",
              "docstring": "获取股票基本信息\n\n返回DataFrame包含:\n    - symbol: 股票代码\n    - name: 股票名称\n    - exchange: 交易所\n    - industry: 行业\n    - board: 板块\n    - list_date: 上市日期\n    - is_st: 是否ST\n    - is_suspended: 是否停牌\n    - close: 收盘价\n    - volume: 成交量\n    - amount: 成交额\n    - market_cap: 市值",
              "is_async": false,
              "decorators": [],
              "body_lines": 47,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbols",
                  "type_annotation": "List[str]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "as_of_date",
                  "type_annotation": "date",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_filter_st_stocks",
              "line_number": 269,
              "return_type": "Set[str]",
              "docstring": "过滤ST股票",
              "is_async": false,
              "decorators": [],
              "body_lines": 11,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbols",
                  "type_annotation": "Set[str]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "stock_info",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_filter_suspended_stocks",
              "line_number": 284,
              "return_type": "Set[str]",
              "docstring": "过滤停牌股票",
              "is_async": false,
              "decorators": [],
              "body_lines": 12,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbols",
                  "type_annotation": "Set[str]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "stock_info",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_filter_new_stocks",
              "line_number": 300,
              "return_type": "Set[str]",
              "docstring": "过滤次新股",
              "is_async": false,
              "decorators": [],
              "body_lines": 19,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbols",
                  "type_annotation": "Set[str]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "stock_info",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "as_of_date",
                  "type_annotation": "date",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_filter_by_price",
              "line_number": 324,
              "return_type": "Set[str]",
              "docstring": "按价格过滤",
              "is_async": false,
              "decorators": [],
              "body_lines": 24,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbols",
                  "type_annotation": "Set[str]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "stock_info",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_filter_by_volume",
              "line_number": 352,
              "return_type": "Set[str]",
              "docstring": "按成交量/成交额过滤",
              "is_async": false,
              "decorators": [],
              "body_lines": 21,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbols",
                  "type_annotation": "Set[str]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "stock_info",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_filter_by_market_cap",
              "line_number": 377,
              "return_type": "Set[str]",
              "docstring": "按市值过滤",
              "is_async": false,
              "decorators": [],
              "body_lines": 26,
              "complexity": 7,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbols",
                  "type_annotation": "Set[str]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "stock_info",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_filter_by_industry",
              "line_number": 407,
              "return_type": "Set[str]",
              "docstring": "按行业过滤",
              "is_async": false,
              "decorators": [],
              "body_lines": 23,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbols",
                  "type_annotation": "Set[str]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "stock_info",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_filter_by_board",
              "line_number": 434,
              "return_type": "Set[str]",
              "docstring": "按板块过滤",
              "is_async": false,
              "decorators": [],
              "body_lines": 22,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbols",
                  "type_annotation": "Set[str]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "stock_info",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_filter_by_exchange",
              "line_number": 460,
              "return_type": "Set[str]",
              "docstring": "按交易所过滤",
              "is_async": false,
              "decorators": [],
              "body_lines": 11,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbols",
                  "type_annotation": "Set[str]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "stock_info",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_apply_custom_filters",
              "line_number": 475,
              "return_type": "Set[str]",
              "docstring": "应用自定义过滤函数",
              "is_async": false,
              "decorators": [],
              "body_lines": 18,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbols",
                  "type_annotation": "Set[str]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "stock_info",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_print_summary",
              "line_number": 497,
              "return_type": null,
              "docstring": "打印筛选摘要",
              "is_async": false,
              "decorators": [],
              "body_lines": 15,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": []
    },
    {
      "file_path": "strategy/signal_manager.py",
      "module_name": "strategy.signal_manager",
      "category": "auxiliary",
      "docstring": "信号管理器 (Signal Manager)\n\n功能说明:\n- 策略信号的持久化存储和查询\n- 批量操作优化\n- 与UnifiedDataManager集成\n- 支持信号统计和分析\n\n数据库:\n- PostgreSQL+TimescaleDB (strategy_signals表)\n- 通过UnifiedDataManager进行数据访问\n\n作者: MyStocks量化交易团队\n创建时间: 2025-10-18\n版本: 1.0.0",
      "lines_of_code": 540,
      "blank_lines": 88,
      "comment_lines": 31,
      "last_modified": "2025-10-18T20:06:15.713324",
      "imports": [
        "pandas",
        "numpy",
        "typing",
        "datetime",
        "logging",
        "json"
      ],
      "classes": [
        {
          "name": "SignalManager",
          "line_number": 27,
          "base_classes": [],
          "docstring": "信号管理器 - 负责策略信号的存储、查询和管理\n\n功能:\n    - 批量保存策略信号到数据库\n    - 按条件查询信号\n    - 信号统计分析\n    - 信号去重和验证",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 38,
              "return_type": null,
              "docstring": "初始化信号管理器\n\n参数:\n    unified_manager: UnifiedDataManager实例\n    batch_size: 批量插入的批次大小",
              "is_async": false,
              "decorators": [],
              "body_lines": 22,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "unified_manager",
                  "type_annotation": null,
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "batch_size",
                  "type_annotation": "int",
                  "default_value": "1000",
                  "is_required": false
                }
              ]
            },
            {
              "name": "save_signals",
              "line_number": 62,
              "return_type": "Dict",
              "docstring": "保存策略信号到数据库\n\n参数:\n    signals: 信号DataFrame，必须包含:\n            - index: DatetimeIndex (信号日期)\n            - symbol: 股票代码\n            - signal: 信号类型 ('buy' or 'sell')\n            - strength: 信号强度 (0.0-1.0，可选)\n            - entry_price: 入场价格\n            - indicators: 指标字典 (可选)\n            - metadata: 元数据字典 (可选)\n    strategy_id: 策略ID\n    batch_insert: 是否使用批量插入\n\n返回:\n    dict: 保存结果\n        - success: 是否成功\n        - saved_count: 保存的信号数量\n        - failed_count: 失败的信号数量\n        - execution_time: 执行时间(秒)\n\n示例:\n    >>> signals_df = pd.DataFrame({\n    ...     'symbol': ['000001', '000002'],\n    ...     'signal': ['buy', 'sell'],\n    ...     'entry_price': [12.34, 56.78],\n    ...     'strength': [0.8, 0.9]\n    ... }, index=pd.date_range('2024-01-01', periods=2))\n    >>> result = signal_manager.save_signals(signals_df, strategy_id=1)\n    >>> print(f\"保存了 {result['saved_count']} 个信号\")",
              "is_async": false,
              "decorators": [],
              "body_lines": 134,
              "complexity": 13,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "signals",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "strategy_id",
                  "type_annotation": "int",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "batch_insert",
                  "type_annotation": "bool",
                  "default_value": "True",
                  "is_required": false
                }
              ]
            },
            {
              "name": "_save_to_database",
              "line_number": 201,
              "return_type": null,
              "docstring": "实际保存信号到数据库 (通过UnifiedDataManager)\n\n参数:\n    signals_df: 信号DataFrame",
              "is_async": false,
              "decorators": [],
              "body_lines": 17,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "signals_df",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "query_signals",
              "line_number": 220,
              "return_type": "pd.DataFrame",
              "docstring": "查询策略信号\n\n参数:\n    strategy_id: 策略ID (可选)\n    symbol: 股票代码 (可选)\n    start_date: 开始日期 (可选)\n    end_date: 结束日期 (可选)\n    signal_type: 信号类型 ('buy' or 'sell'，可选)\n    limit: 返回记录数限制\n    offset: 偏移量 (用于分页)\n\n返回:\n    pd.DataFrame: 信号记录\n\n示例:\n    >>> # 查询特定策略的所有买入信号\n    >>> signals = signal_manager.query_signals(\n    ...     strategy_id=1,\n    ...     signal_type='buy',\n    ...     start_date=date(2024, 1, 1),\n    ...     end_date=date(2024, 12, 31)\n    ... )",
              "is_async": false,
              "decorators": [],
              "body_lines": 66,
              "complexity": 7,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "strategy_id",
                  "type_annotation": "Optional[int]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "symbol",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "start_date",
                  "type_annotation": "Optional[date]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "end_date",
                  "type_annotation": "Optional[date]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "signal_type",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "limit",
                  "type_annotation": "int",
                  "default_value": "1000",
                  "is_required": false
                },
                {
                  "name": "offset",
                  "type_annotation": "int",
                  "default_value": "0",
                  "is_required": false
                }
              ]
            },
            {
              "name": "delete_signals",
              "line_number": 295,
              "return_type": "int",
              "docstring": "删除策略信号\n\n参数:\n    strategy_id: 策略ID\n    start_date: 开始日期 (可选)\n    end_date: 结束日期 (可选)\n\n返回:\n    int: 删除的记录数\n\n警告:\n    此操作不可逆，请谨慎使用！\n\n示例:\n    >>> # 删除策略ID为1的所有2024年信号\n    >>> deleted = signal_manager.delete_signals(\n    ...     strategy_id=1,\n    ...     start_date=date(2024, 1, 1),\n    ...     end_date=date(2024, 12, 31)\n    ... )",
              "is_async": false,
              "decorators": [],
              "body_lines": 52,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "strategy_id",
                  "type_annotation": "int",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "start_date",
                  "type_annotation": "Optional[date]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "end_date",
                  "type_annotation": "Optional[date]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "get_signal_statistics",
              "line_number": 352,
              "return_type": "Dict",
              "docstring": "获取信号统计信息\n\n参数:\n    strategy_id: 策略ID\n    start_date: 开始日期 (可选)\n    end_date: 结束日期 (可选)\n\n返回:\n    dict: 统计信息\n        - total_signals: 总信号数\n        - buy_signals: 买入信号数\n        - sell_signals: 卖出信号数\n        - unique_symbols: 涉及股票数\n        - avg_strength: 平均信号强度\n        - date_range: 日期范围\n\n示例:\n    >>> stats = signal_manager.get_signal_statistics(strategy_id=1)\n    >>> print(f\"总信号数: {stats['total_signals']}\")\n    >>> print(f\"买入/卖出比例: {stats['buy_signals']}/{stats['sell_signals']}\")",
              "is_async": false,
              "decorators": [],
              "body_lines": 52,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "strategy_id",
                  "type_annotation": "int",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "start_date",
                  "type_annotation": "Optional[date]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "end_date",
                  "type_annotation": "Optional[date]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "validate_signal",
              "line_number": 409,
              "return_type": "Tuple[(bool, Optional[str])]",
              "docstring": "验证单个信号的有效性\n\n参数:\n    signal: 信号字典\n\n返回:\n    tuple: (是否有效, 错误信息)\n\n示例:\n    >>> signal = {\n    ...     'symbol': '000001',\n    ...     'signal': 'buy',\n    ...     'entry_price': 12.34,\n    ...     'strength': 0.8\n    ... }\n    >>> is_valid, error = signal_manager.validate_signal(signal)",
              "is_async": false,
              "decorators": [],
              "body_lines": 39,
              "complexity": 9,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "signal",
                  "type_annotation": "Dict",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_latest_signals",
              "line_number": 450,
              "return_type": "pd.DataFrame",
              "docstring": "获取最新的N个信号\n\n参数:\n    strategy_id: 策略ID\n    limit: 返回记录数\n\n返回:\n    pd.DataFrame: 最新信号记录 (按日期降序)\n\n示例:\n    >>> latest = signal_manager.get_latest_signals(strategy_id=1, limit=5)\n    >>> print(latest[['symbol', 'signal_type', 'signal_date']])",
              "is_async": false,
              "decorators": [],
              "body_lines": 23,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "strategy_id",
                  "type_annotation": "int",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "limit",
                  "type_annotation": "int",
                  "default_value": "10",
                  "is_required": false
                }
              ]
            },
            {
              "name": "get_manager_stats",
              "line_number": 477,
              "return_type": "Dict",
              "docstring": "获取管理器统计信息\n\n返回:\n    dict: 统计信息",
              "is_async": false,
              "decorators": [],
              "body_lines": 7,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": []
    },
    {
      "file_path": "strategy/__init__.py",
      "module_name": "strategy.__init__",
      "category": "auxiliary",
      "docstring": null,
      "lines_of_code": 1,
      "blank_lines": 1,
      "comment_lines": 0,
      "last_modified": "2025-10-18T19:52:06.811100",
      "imports": [],
      "classes": [],
      "functions": []
    },
    {
      "file_path": "strategy/strategy_executor.py",
      "module_name": "strategy.strategy_executor",
      "category": "auxiliary",
      "docstring": "策略执行引擎 (Strategy Executor)\n\n功能说明:\n- 多进程并行执行策略\n- 进度跟踪和性能监控\n- 异常处理和失败重试\n- 自动保存信号到数据库\n- 支持快速模式和完整模式\n\n作者: MyStocks量化交易团队\n创建时间: 2025-10-18\n版本: 1.0.0",
      "lines_of_code": 470,
      "blank_lines": 72,
      "comment_lines": 31,
      "last_modified": "2025-10-18T20:07:41.658165",
      "imports": [
        "pandas",
        "numpy",
        "typing",
        "datetime",
        "logging",
        "multiprocessing",
        "concurrent.futures",
        "time",
        "dataclasses",
        "enum",
        "traceback"
      ],
      "classes": [
        {
          "name": "ExecutionMode",
          "line_number": 41,
          "base_classes": [
            "Enum"
          ],
          "docstring": "执行模式枚举",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "ExecutionConfig",
          "line_number": 48,
          "base_classes": [],
          "docstring": "执行配置",
          "decorators": [
            "dataclass"
          ],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "ExecutionProgress",
          "line_number": 60,
          "base_classes": [],
          "docstring": "执行进度",
          "decorators": [
            "dataclass"
          ],
          "is_abstract": false,
          "methods": [
            {
              "name": "get_progress_pct",
              "line_number": 69,
              "return_type": "float",
              "docstring": "获取进度百分比",
              "is_async": false,
              "decorators": [],
              "body_lines": 4,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        },
        {
          "name": "StrategyExecutor",
          "line_number": 76,
          "base_classes": [],
          "docstring": "策略执行引擎 - 负责策略的并行执行和结果管理\n\n功能:\n    - 多进程并行执行策略\n    - 实时进度跟踪\n    - 异常处理和重试\n    - 自动保存信号到数据库",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 87,
              "return_type": null,
              "docstring": "初始化策略执行引擎\n\n参数:\n    strategy: 策略实例\n    signal_manager: 信号管理器实例\n    config: 执行配置 (可选)",
              "is_async": false,
              "decorators": [],
              "body_lines": 20,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "strategy",
                  "type_annotation": "BaseStrategy",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "signal_manager",
                  "type_annotation": "SignalManager",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "config",
                  "type_annotation": "Optional[ExecutionConfig]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "execute",
              "line_number": 112,
              "return_type": "Dict",
              "docstring": "执行策略对股票池进行筛选\n\n参数:\n    stock_pool: 股票代码列表\n    mode: 执行模式 (FAST或FULL)\n    start_date: 开始日期 (FULL模式必需)\n    end_date: 结束日期 (FULL模式必需)\n    **kwargs: 额外参数\n\n返回:\n    dict: 执行结果\n        - execution_id: 执行ID\n        - status: 执行状态 ('completed', 'failed', 'partial')\n        - signals: 生成的信号DataFrame\n        - progress: 进度信息\n        - statistics: 统计信息\n        - errors: 错误列表\n\n示例:\n    >>> executor = StrategyExecutor(strategy, signal_manager)\n    >>> # 快速模式: 仅当前交易日\n    >>> result = executor.execute(\n    ...     stock_pool=['000001', '000002', '000003'],\n    ...     mode=ExecutionMode.FAST\n    ... )\n    >>> # 完整模式: 历史周期\n    >>> result = executor.execute(\n    ...     stock_pool=['000001', '000002'],\n    ...     mode=ExecutionMode.FULL,\n    ...     start_date=date(2024, 1, 1),\n    ...     end_date=date(2024, 12, 31)\n    ... )",
              "is_async": false,
              "decorators": [],
              "body_lines": 162,
              "complexity": 17,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "stock_pool",
                  "type_annotation": "List[str]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "mode",
                  "type_annotation": "ExecutionMode",
                  "default_value": "...",
                  "is_required": false
                },
                {
                  "name": "start_date",
                  "type_annotation": "Optional[date]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "end_date",
                  "type_annotation": "Optional[date]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "**kwargs",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": false
                }
              ]
            },
            {
              "name": "_execute_serial",
              "line_number": 281,
              "return_type": "tuple",
              "docstring": "串行执行策略",
              "is_async": false,
              "decorators": [],
              "body_lines": 31,
              "complexity": 6,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "stock_pool",
                  "type_annotation": "List[str]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "start_date",
                  "type_annotation": "date",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "end_date",
                  "type_annotation": "date",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "**kwargs",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": false
                }
              ]
            },
            {
              "name": "_execute_parallel",
              "line_number": 318,
              "return_type": "tuple",
              "docstring": "并行执行策略",
              "is_async": false,
              "decorators": [],
              "body_lines": 49,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "stock_pool",
                  "type_annotation": "List[str]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "start_date",
                  "type_annotation": "date",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "end_date",
                  "type_annotation": "date",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "**kwargs",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": false
                }
              ]
            },
            {
              "name": "_process_batch",
              "line_number": 373,
              "return_type": "tuple",
              "docstring": "处理一批股票",
              "is_async": false,
              "decorators": [],
              "body_lines": 20,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbols",
                  "type_annotation": "List[str]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "start_date",
                  "type_annotation": "date",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "end_date",
                  "type_annotation": "date",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "**kwargs",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": false
                }
              ]
            },
            {
              "name": "_process_single_stock",
              "line_number": 399,
              "return_type": "Optional[pd.DataFrame]",
              "docstring": "处理单只股票",
              "is_async": false,
              "decorators": [],
              "body_lines": 20,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "start_date",
                  "type_annotation": "date",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "end_date",
                  "type_annotation": "date",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "**kwargs",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": false
                }
              ]
            },
            {
              "name": "get_progress",
              "line_number": 425,
              "return_type": "Dict",
              "docstring": "获取当前执行进度\n\n返回:\n    dict: 进度信息",
              "is_async": false,
              "decorators": [],
              "body_lines": 16,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": []
    },
    {
      "file_path": "strategy/base_strategy.py",
      "module_name": "strategy.base_strategy",
      "category": "auxiliary",
      "docstring": "策略基类 (Base Strategy Class)\n\n功能说明:\n- 提供策略开发的基础框架\n- 定义策略必须实现的接口方法\n- 提供常用的工具方法和指标计算\n- 集成UnifiedDataManager进行数据访问\n- 支持参数验证和回测兼容\n\n作者: MyStocks量化交易团队\n创建时间: 2025-10-18\n版本: 1.0.0",
      "lines_of_code": 476,
      "blank_lines": 87,
      "comment_lines": 31,
      "last_modified": "2025-10-18T19:59:37.103521",
      "imports": [
        "pandas",
        "numpy",
        "hashlib",
        "json",
        "abc",
        "typing",
        "datetime",
        "logging",
        "sys",
        "os",
        "indicators.tdx_functions",
        "indicators.talib_wrapper"
      ],
      "classes": [
        {
          "name": "BaseStrategy",
          "line_number": 36,
          "base_classes": [
            "ABC"
          ],
          "docstring": "策略基类 - 所有自定义策略必须继承此类\n\n子类必须实现:\n    - generate_signals(): 核心信号生成逻辑\n\n子类可选重写:\n    - validate_parameters(): 自定义参数验证\n    - on_before_execute(): 执行前回调\n    - on_after_execute(): 执行后回调",
          "decorators": [],
          "is_abstract": true,
          "methods": [
            {
              "name": "__init__",
              "line_number": 49,
              "return_type": null,
              "docstring": "初始化策略\n\n参数:\n    name: 策略名称 (字母数字+连字符/下划线)\n    version: 策略版本 (语义化版本号 X.Y.Z)\n    parameters: 策略参数字典\n    unified_manager: UnifiedDataManager实例 (用于数据访问)\n    description: 策略描述",
              "is_async": false,
              "decorators": [],
              "body_lines": 36,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "version",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "parameters",
                  "type_annotation": "Dict",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "unified_manager",
                  "type_annotation": null,
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "description",
                  "type_annotation": "str",
                  "default_value": "\"\"",
                  "is_required": false
                }
              ]
            },
            {
              "name": "generate_signals",
              "line_number": 93,
              "return_type": "pd.DataFrame",
              "docstring": "核心信号生成方法 - 子类必须实现\n\n参数:\n    data: K线数据DataFrame，必须包含:\n          - index: DatetimeIndex\n          - columns: open, high, low, close, volume\n\n返回:\n    pd.DataFrame: 信号DataFrame，包含:\n        - index: DatetimeIndex (与输入data相同)\n        - signal: 信号类型 ('buy', 'sell', None)\n        - strength: 信号强度 (0.0-1.0)\n        - entry_price: 建议入场价格\n        - indicators: 指标值字典 (可选)\n\n示例:\n    >>> def generate_signals(self, data):\n    ...     signals = pd.DataFrame(index=data.index)\n    ...     signals['signal'] = None\n    ...     signals['strength'] = 0.0\n    ...     signals['entry_price'] = data['close']\n    ...\n    ...     # 计算指标\n    ...     ma5 = MA(data['close'], 5)\n    ...     ma20 = MA(data['close'], 20)\n    ...\n    ...     # 生成买入信号\n    ...     buy_condition = CROSS(ma5, ma20)\n    ...     signals.loc[buy_condition, 'signal'] = 'buy'\n    ...     signals.loc[buy_condition, 'strength'] = 0.8\n    ...\n    ...     return signals",
              "is_async": false,
              "decorators": [
                "abstractmethod"
              ],
              "body_lines": 35,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "validate_parameters",
              "line_number": 130,
              "return_type": "bool",
              "docstring": "参数验证方法 - 子类可重写以添加自定义验证\n\n返回:\n    bool: 验证是否通过\n\n异常:\n    ValueError: 参数验证失败时抛出",
              "is_async": false,
              "decorators": [],
              "body_lines": 20,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "calculate_code_hash",
              "line_number": 152,
              "return_type": "str",
              "docstring": "计算策略代码的SHA-256哈希值\n\n用于版本控制和变更追踪\n\n返回:\n    str: 64位十六进制哈希字符串",
              "is_async": false,
              "decorators": [],
              "body_lines": 15,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_market_data",
              "line_number": 169,
              "return_type": "pd.DataFrame",
              "docstring": "获取市场数据\n\n参数:\n    symbol: 股票代码\n    start_date: 开始日期\n    end_date: 结束日期\n    frequency: 数据频率 ('daily', 'minute', 'tick')\n\n返回:\n    pd.DataFrame: K线数据\n\n异常:\n    ValueError: 如果unified_manager未初始化",
              "is_async": false,
              "decorators": [],
              "body_lines": 33,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "start_date",
                  "type_annotation": "date",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "end_date",
                  "type_annotation": "date",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "frequency",
                  "type_annotation": "str",
                  "default_value": "\"daily\"",
                  "is_required": false
                }
              ]
            },
            {
              "name": "execute",
              "line_number": 208,
              "return_type": "Dict",
              "docstring": "执行策略对股票池进行筛选\n\n参数:\n    symbols: 股票代码列表\n    start_date: 开始日期\n    end_date: 结束日期\n    **kwargs: 额外参数\n\n返回:\n    dict: 执行结果\n        - signals: 生成的信号列表\n        - statistics: 执行统计信息\n        - errors: 错误列表\n\n示例:\n    >>> strategy = MyStrategy(...)\n    >>> result = strategy.execute(\n    ...     symbols=['000001', '000002'],\n    ...     start_date=date(2024, 1, 1),\n    ...     end_date=date(2024, 12, 31)\n    ... )\n    >>> print(f\"生成了 {len(result['signals'])} 个信号\")",
              "is_async": false,
              "decorators": [],
              "body_lines": 105,
              "complexity": 6,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbols",
                  "type_annotation": "List[str]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "start_date",
                  "type_annotation": "date",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "end_date",
                  "type_annotation": "date",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "**kwargs",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": false
                }
              ]
            },
            {
              "name": "on_before_execute",
              "line_number": 319,
              "return_type": null,
              "docstring": "执行前回调 - 子类可重写\n\n参数:\n    symbols: 股票代码列表\n    start_date: 开始日期\n    end_date: 结束日期\n    **kwargs: 额外参数",
              "is_async": false,
              "decorators": [],
              "body_lines": 10,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbols",
                  "type_annotation": "List[str]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "start_date",
                  "type_annotation": "date",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "end_date",
                  "type_annotation": "date",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "**kwargs",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": false
                }
              ]
            },
            {
              "name": "on_after_execute",
              "line_number": 331,
              "return_type": null,
              "docstring": "执行后回调 - 子类可重写\n\n参数:\n    result: 执行结果字典",
              "is_async": false,
              "decorators": [],
              "body_lines": 7,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "result",
                  "type_annotation": "Dict",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "to_dict",
              "line_number": 340,
              "return_type": "Dict",
              "docstring": "将策略转换为字典格式 (用于数据库存储)\n\n返回:\n    dict: 策略信息字典",
              "is_async": false,
              "decorators": [],
              "body_lines": 16,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "__repr__",
              "line_number": 358,
              "return_type": "str",
              "docstring": null,
              "is_async": false,
              "decorators": [],
              "body_lines": 1,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        },
        {
          "name": "MomentumStrategy",
          "line_number": 366,
          "base_classes": [
            "BaseStrategy"
          ],
          "docstring": "动量策略示例 - MA交叉 + RSI过滤\n\n策略逻辑:\n    - 买入信号: MA5上穿MA20 且 RSI < 30 (超卖)\n    - 卖出信号: MA5下穿MA20 或 RSI > 70 (超买)",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 375,
              "return_type": null,
              "docstring": null,
              "is_async": false,
              "decorators": [],
              "body_lines": 15,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "unified_manager",
                  "type_annotation": null,
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "generate_signals",
              "line_number": 392,
              "return_type": "pd.DataFrame",
              "docstring": "实现信号生成逻辑",
              "is_async": false,
              "decorators": [],
              "body_lines": 40,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": []
    },
    {
      "file_path": "backtest/backtest_engine.py",
      "module_name": "backtest.backtest_engine",
      "category": "auxiliary",
      "docstring": "回测引擎主接口 (Backtest Engine)\n\n功能说明:\n- 整合向量化回测器、性能指标、风险指标\n- 提供统一的回测接口\n- 支持单股票和批量回测\n- 自动生成完整的回测报告\n\n作者: MyStocks量化交易团队\n创建时间: 2025-10-18\n版本: 1.0.0",
      "lines_of_code": 241,
      "blank_lines": 45,
      "comment_lines": 21,
      "last_modified": "2025-10-18T20:17:07.524740",
      "imports": [
        "pandas",
        "numpy",
        "typing",
        "datetime",
        "logging"
      ],
      "classes": [
        {
          "name": "BacktestEngine",
          "line_number": 35,
          "base_classes": [],
          "docstring": "回测引擎 - 策略回测的统一接口\n\n功能:\n- 执行向量化回测\n- 计算性能和风险指标\n- 生成完整回测报告\n- 支持基准比较",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 46,
              "return_type": null,
              "docstring": "初始化回测引擎\n\n参数:\n    config: 回测配置\n    risk_free_rate: 无风险利率（年化）",
              "is_async": false,
              "decorators": [],
              "body_lines": 21,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "config",
                  "type_annotation": "Optional[BacktestConfig]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "risk_free_rate",
                  "type_annotation": "float",
                  "default_value": "0.03",
                  "is_required": false
                }
              ]
            },
            {
              "name": "run",
              "line_number": 71,
              "return_type": "Dict",
              "docstring": "执行回测\n\n参数:\n    price_data: 价格数据 (open, high, low, close, volume)\n    signals: 信号数据 (signal, strength)\n    benchmark_returns: 基准收益率（可选）\n\n返回:\n    dict: 完整回测结果\n        - backtest: 回测基础结果\n        - performance: 性能指标\n        - risk: 风险指标\n        - report: 文字报告\n\n示例:\n    >>> engine = BacktestEngine()\n    >>> result = engine.run(price_data, signals)\n    >>> print(result['report'])",
              "is_async": false,
              "decorators": [],
              "body_lines": 66,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "price_data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "signals",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "benchmark_returns",
                  "type_annotation": "Optional[pd.Series]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "get_trades_df",
              "line_number": 142,
              "return_type": "pd.DataFrame",
              "docstring": "获取交易记录DataFrame",
              "is_async": false,
              "decorators": [],
              "body_lines": 2,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_equity_curve",
              "line_number": 146,
              "return_type": "pd.DataFrame",
              "docstring": "获取权益曲线",
              "is_async": false,
              "decorators": [],
              "body_lines": 4,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_daily_returns",
              "line_number": 152,
              "return_type": "pd.Series",
              "docstring": "获取每日收益率",
              "is_async": false,
              "decorators": [],
              "body_lines": 4,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "save_result",
              "line_number": 158,
              "return_type": null,
              "docstring": "保存回测结果\n\n参数:\n    filepath: 保存路径",
              "is_async": false,
              "decorators": [],
              "body_lines": 25,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "filepath",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": []
    },
    {
      "file_path": "backtest/risk_metrics.py",
      "module_name": "backtest.risk_metrics",
      "category": "monitoring",
      "docstring": "风险指标计算模块 (Risk Metrics)\n\n功能说明:\n- 计算各种风险度量指标\n- 提供风险敞口分析\n- 生成风险报告\n\n作者: MyStocks量化交易团队\n创建时间: 2025-10-18\n版本: 1.0.0",
      "lines_of_code": 440,
      "blank_lines": 111,
      "comment_lines": 21,
      "last_modified": "2025-10-18T20:16:14.187720",
      "imports": [
        "pandas",
        "numpy",
        "typing",
        "scipy",
        "logging"
      ],
      "classes": [
        {
          "name": "RiskMetrics",
          "line_number": 21,
          "base_classes": [],
          "docstring": "风险指标计算器\n\n提供全面的风险分析指标",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 28,
              "return_type": null,
              "docstring": "初始化风险指标计算器",
              "is_async": false,
              "decorators": [],
              "body_lines": 3,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "downside_deviation",
              "line_number": 33,
              "return_type": "float",
              "docstring": "下行偏差 (Downside Deviation)\n\n只考虑低于目标收益的波动\n\n参数:\n    returns: 收益率序列\n    target_return: 目标收益率\n\n返回:\n    float: 年化下行偏差",
              "is_async": false,
              "decorators": [],
              "body_lines": 19,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "returns",
                  "type_annotation": "pd.Series",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "target_return",
                  "type_annotation": "float",
                  "default_value": "0.0",
                  "is_required": false
                }
              ]
            },
            {
              "name": "ulcer_index",
              "line_number": 54,
              "return_type": "float",
              "docstring": "溃疡指数 (Ulcer Index)\n\n衡量回撤的深度和持续时间\n\n参数:\n    equity_curve: 权益曲线\n\n返回:\n    float: 溃疡指数",
              "is_async": false,
              "decorators": [],
              "body_lines": 21,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "equity_curve",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "pain_index",
              "line_number": 77,
              "return_type": "float",
              "docstring": "痛苦指数 (Pain Index)\n\n平均回撤深度\n\n参数:\n    equity_curve: 权益曲线\n\n返回:\n    float: 痛苦指数",
              "is_async": false,
              "decorators": [],
              "body_lines": 19,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "equity_curve",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "tail_ratio",
              "line_number": 98,
              "return_type": "float",
              "docstring": "尾部比率 (Tail Ratio)\n\n右尾(95分位)与左尾(5分位)的比率\n\n参数:\n    returns: 收益率序列\n\n返回:\n    float: 尾部比率",
              "is_async": false,
              "decorators": [],
              "body_lines": 18,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "returns",
                  "type_annotation": "pd.Series",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "skewness",
              "line_number": 118,
              "return_type": "float",
              "docstring": "偏度 (Skewness)\n\n收益分布的不对称性\n- 正值: 右偏（正收益较多）\n- 负值: 左偏（负收益较多）\n\n参数:\n    returns: 收益率序列\n\n返回:\n    float: 偏度",
              "is_async": false,
              "decorators": [],
              "body_lines": 14,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "returns",
                  "type_annotation": "pd.Series",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "kurtosis",
              "line_number": 134,
              "return_type": "float",
              "docstring": "峰度 (Kurtosis)\n\n收益分布的尖峭程度\n- 正值: 尖峭（极端值较多）\n- 负值: 平坦\n\n参数:\n    returns: 收益率序列\n\n返回:\n    float: 峰度（超额峰度）",
              "is_async": false,
              "decorators": [],
              "body_lines": 14,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "returns",
                  "type_annotation": "pd.Series",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "omega_ratio",
              "line_number": 150,
              "return_type": "float",
              "docstring": "Omega比率\n\n高于目标收益的概率加权收益 / 低于目标收益的概率加权损失\n\n参数:\n    returns: 收益率序列\n    target_return: 目标收益率\n\n返回:\n    float: Omega比率",
              "is_async": false,
              "decorators": [],
              "body_lines": 21,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "returns",
                  "type_annotation": "pd.Series",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "target_return",
                  "type_annotation": "float",
                  "default_value": "0.0",
                  "is_required": false
                }
              ]
            },
            {
              "name": "burke_ratio",
              "line_number": 173,
              "return_type": "float",
              "docstring": "Burke比率\n\n超额收益 / 回撤平方和的平方根\n\n参数:\n    returns: 收益率序列\n    equity_curve: 权益曲线\n    risk_free_rate: 无风险利率\n\n返回:\n    float: Burke比率",
              "is_async": false,
              "decorators": [],
              "body_lines": 28,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "returns",
                  "type_annotation": "pd.Series",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "equity_curve",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "risk_free_rate",
                  "type_annotation": "float",
                  "default_value": "0.03",
                  "is_required": false
                }
              ]
            },
            {
              "name": "consecutive_losses",
              "line_number": 206,
              "return_type": "Tuple[(int, float)]",
              "docstring": "最大连续亏损\n\n参数:\n    trades: 交易记录列表\n\n返回:\n    tuple: (最大连续亏损次数, 最大连续亏损金额)",
              "is_async": false,
              "decorators": [],
              "body_lines": 28,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "trades",
                  "type_annotation": "List",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "recovery_factor",
              "line_number": 236,
              "return_type": "float",
              "docstring": "恢复因子\n\n总收益 / 最大回撤\n\n参数:\n    total_return: 总收益率\n    max_drawdown: 最大回撤\n\n返回:\n    float: 恢复因子",
              "is_async": false,
              "decorators": [],
              "body_lines": 16,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "total_return",
                  "type_annotation": "float",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "max_drawdown",
                  "type_annotation": "float",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "payoff_ratio",
              "line_number": 254,
              "return_type": "float",
              "docstring": "盈亏比 (Payoff Ratio)\n\n平均盈利 / 平均亏损\n\n参数:\n    trades: 交易记录列表\n\n返回:\n    float: 盈亏比",
              "is_async": false,
              "decorators": [],
              "body_lines": 27,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "trades",
                  "type_annotation": "List",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "trade_expectancy",
              "line_number": 283,
              "return_type": "float",
              "docstring": "交易期望值\n\n(胜率 × 平均盈利) - (败率 × 平均亏损)\n\n参数:\n    trades: 交易记录列表\n\n返回:\n    float: 期望值",
              "is_async": false,
              "decorators": [],
              "body_lines": 24,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "trades",
                  "type_annotation": "List",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "calculate_all_risk_metrics",
              "line_number": 309,
              "return_type": "Dict",
              "docstring": "计算所有风险指标\n\n参数:\n    equity_curve: 权益曲线\n    returns: 收益率序列\n    trades: 交易记录列表\n    total_return: 总收益率\n    max_drawdown: 最大回撤\n    risk_free_rate: 无风险利率\n\n返回:\n    dict: 所有风险指标",
              "is_async": false,
              "decorators": [],
              "body_lines": 40,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "equity_curve",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "returns",
                  "type_annotation": "pd.Series",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "trades",
                  "type_annotation": "List",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "total_return",
                  "type_annotation": "float",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "max_drawdown",
                  "type_annotation": "float",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "risk_free_rate",
                  "type_annotation": "float",
                  "default_value": "0.03",
                  "is_required": false
                }
              ]
            },
            {
              "name": "generate_risk_report",
              "line_number": 357,
              "return_type": "str",
              "docstring": "生成风险报告\n\n参数:\n    metrics: 风险指标字典\n\n返回:\n    str: 格式化的风险报告",
              "is_async": false,
              "decorators": [],
              "body_lines": 39,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "metrics",
                  "type_annotation": "Dict",
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": []
    },
    {
      "file_path": "backtest/vectorized_backtester.py",
      "module_name": "backtest.vectorized_backtester",
      "category": "auxiliary",
      "docstring": "向量化回测引擎 (Vectorized Backtester)\n\n功能说明:\n- 基于预计算信号的向量化回测\n- 支持多种仓位管理策略\n- 自动计算交易成本（佣金、印花税、滑点）\n- 生成详细的交易记录和权益曲线\n- 性能优于事件驱动回测（10-100x）\n\n设计原理:\n- 使用NumPy向量化操作，避免循环\n- 预计算所有买卖点位\n- 批量计算收益和成本\n- 适合已有信号的策略回测\n\n作者: MyStocks量化交易团队\n创建时间: 2025-10-18\n版本: 1.0.0",
      "lines_of_code": 455,
      "blank_lines": 82,
      "comment_lines": 46,
      "last_modified": "2025-10-18T20:13:54.038522",
      "imports": [
        "pandas",
        "numpy",
        "typing",
        "datetime",
        "dataclasses",
        "logging"
      ],
      "classes": [
        {
          "name": "BacktestConfig",
          "line_number": 31,
          "base_classes": [],
          "docstring": "回测配置",
          "decorators": [
            "dataclass"
          ],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "Trade",
          "line_number": 50,
          "base_classes": [],
          "docstring": "交易记录",
          "decorators": [
            "dataclass"
          ],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "VectorizedBacktester",
          "line_number": 65,
          "base_classes": [],
          "docstring": "向量化回测引擎\n\n特点:\n- 基于预计算的买卖信号\n- 向量化计算，性能优异\n- 支持多种仓位管理模式\n- 自动计算交易成本",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 76,
              "return_type": null,
              "docstring": "初始化回测引擎\n\n参数:\n    config: 回测配置",
              "is_async": false,
              "decorators": [],
              "body_lines": 16,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "config",
                  "type_annotation": "Optional[BacktestConfig]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "run",
              "line_number": 94,
              "return_type": "Dict",
              "docstring": "执行回测\n\n参数:\n    price_data: 价格数据，包含 open, high, low, close, volume\n               index必须是DatetimeIndex\n    signals: 信号数据，包含 signal ('buy'/'sell'), strength (可选)\n            index必须与price_data对齐\n\n返回:\n    dict: 回测结果\n        - trades: 交易记录列表\n        - equity_curve: 权益曲线DataFrame\n        - summary: 汇总统计\n\n示例:\n    >>> backtester = VectorizedBacktester()\n    >>> result = backtester.run(price_data, signals)\n    >>> print(f\"总收益率: {result['summary']['total_return']:.2%}\")",
              "is_async": false,
              "decorators": [],
              "body_lines": 218,
              "complexity": 17,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "price_data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "signals",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_validate_data",
              "line_number": 316,
              "return_type": null,
              "docstring": "验证输入数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 11,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "price_data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "signals",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_calculate_summary",
              "line_number": 329,
              "return_type": "Dict",
              "docstring": "计算汇总统计",
              "is_async": false,
              "decorators": [],
              "body_lines": 42,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_trades_df",
              "line_number": 373,
              "return_type": "pd.DataFrame",
              "docstring": "获取交易记录DataFrame\n\n返回:\n    pd.DataFrame: 交易记录",
              "is_async": false,
              "decorators": [],
              "body_lines": 23,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": []
    },
    {
      "file_path": "backtest/performance_metrics.py",
      "module_name": "backtest.performance_metrics",
      "category": "monitoring",
      "docstring": "性能指标计算模块 (Performance Metrics)\n\n功能说明:\n- 计算回测的各种性能指标\n- 支持年化收益率、夏普比率、索提诺比率等\n- 提供可视化的性能报告\n\n作者: MyStocks量化交易团队\n创建时间: 2025-10-18\n版本: 1.0.0",
      "lines_of_code": 513,
      "blank_lines": 126,
      "comment_lines": 39,
      "last_modified": "2025-10-18T20:15:08.461248",
      "imports": [
        "pandas",
        "numpy",
        "typing",
        "datetime",
        "logging"
      ],
      "classes": [
        {
          "name": "PerformanceMetrics",
          "line_number": 21,
          "base_classes": [],
          "docstring": "性能指标计算器\n\n提供常用的回测性能指标计算方法",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 28,
              "return_type": null,
              "docstring": "初始化性能指标计算器\n\n参数:\n    risk_free_rate: 无风险利率（年化）默认3%",
              "is_async": false,
              "decorators": [],
              "body_lines": 11,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "risk_free_rate",
                  "type_annotation": "float",
                  "default_value": "0.03",
                  "is_required": false
                }
              ]
            },
            {
              "name": "calculate_all_metrics",
              "line_number": 41,
              "return_type": "Dict",
              "docstring": "计算所有性能指标\n\n参数:\n    equity_curve: 权益曲线DataFrame\n    daily_returns: 每日收益率Series\n    trades: 交易记录列表\n    initial_capital: 初始资金\n    benchmark_returns: 基准收益率（可选）\n\n返回:\n    dict: 所有性能指标",
              "is_async": false,
              "decorators": [],
              "body_lines": 46,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "equity_curve",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "daily_returns",
                  "type_annotation": "pd.Series",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "trades",
                  "type_annotation": "list",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "initial_capital",
                  "type_annotation": "float",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "benchmark_returns",
                  "type_annotation": "Optional[pd.Series]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "total_return",
              "line_number": 94,
              "return_type": "float",
              "docstring": "总收益率\n\n参数:\n    equity_curve: 权益曲线\n    initial_capital: 初始资金\n\n返回:\n    float: 总收益率",
              "is_async": false,
              "decorators": [],
              "body_lines": 12,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "equity_curve",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "initial_capital",
                  "type_annotation": "float",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "annualized_return",
              "line_number": 108,
              "return_type": "float",
              "docstring": "年化收益率\n\n参数:\n    daily_returns: 每日收益率\n\n返回:\n    float: 年化收益率",
              "is_async": false,
              "decorators": [],
              "body_lines": 24,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "daily_returns",
                  "type_annotation": "pd.Series",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "sharpe_ratio",
              "line_number": 134,
              "return_type": "float",
              "docstring": "夏普比率 (Sharpe Ratio)\n\n衡量单位风险的超额收益\n\n参数:\n    daily_returns: 每日收益率\n\n返回:\n    float: 夏普比率",
              "is_async": false,
              "decorators": [],
              "body_lines": 22,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "daily_returns",
                  "type_annotation": "pd.Series",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "sortino_ratio",
              "line_number": 158,
              "return_type": "float",
              "docstring": "索提诺比率 (Sortino Ratio)\n\n仅考虑下行风险的夏普比率\n\n参数:\n    daily_returns: 每日收益率\n\n返回:\n    float: 索提诺比率",
              "is_async": false,
              "decorators": [],
              "body_lines": 24,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "daily_returns",
                  "type_annotation": "pd.Series",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "max_drawdown",
              "line_number": 184,
              "return_type": "float",
              "docstring": "最大回撤 (Maximum Drawdown)\n\n参数:\n    equity_curve: 权益曲线\n\n返回:\n    float: 最大回撤比例（正数）",
              "is_async": false,
              "decorators": [],
              "body_lines": 17,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "equity_curve",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "max_drawdown_duration",
              "line_number": 203,
              "return_type": "int",
              "docstring": "最大回撤持续时间\n\n参数:\n    equity_curve: 权益曲线\n\n返回:\n    int: 最大回撤持续天数",
              "is_async": false,
              "decorators": [],
              "body_lines": 30,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "equity_curve",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "calmar_ratio",
              "line_number": 235,
              "return_type": "float",
              "docstring": "卡尔玛比率 (Calmar Ratio)\n\n年化收益率 / 最大回撤\n\n参数:\n    daily_returns: 每日收益率\n    equity_curve: 权益曲线\n\n返回:\n    float: 卡尔玛比率",
              "is_async": false,
              "decorators": [],
              "body_lines": 19,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "daily_returns",
                  "type_annotation": "pd.Series",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "equity_curve",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "volatility",
              "line_number": 256,
              "return_type": "float",
              "docstring": "波动率（年化标准差）\n\n参数:\n    daily_returns: 每日收益率\n\n返回:\n    float: 年化波动率",
              "is_async": false,
              "decorators": [],
              "body_lines": 10,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "daily_returns",
                  "type_annotation": "pd.Series",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "value_at_risk",
              "line_number": 268,
              "return_type": "float",
              "docstring": "风险价值 (Value at Risk, VaR)\n\n给定置信水平下的最大损失\n\n参数:\n    daily_returns: 每日收益率\n    confidence: 置信水平（默认95%）\n\n返回:\n    float: VaR值（负数表示损失）",
              "is_async": false,
              "decorators": [],
              "body_lines": 13,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "daily_returns",
                  "type_annotation": "pd.Series",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "confidence",
                  "type_annotation": "float",
                  "default_value": "0.95",
                  "is_required": false
                }
              ]
            },
            {
              "name": "conditional_var",
              "line_number": 283,
              "return_type": "float",
              "docstring": "条件风险价值 (Conditional VaR, CVaR)\n\n超过VaR的平均损失\n\n参数:\n    daily_returns: 每日收益率\n    confidence: 置信水平（默认95%）\n\n返回:\n    float: CVaR值",
              "is_async": false,
              "decorators": [],
              "body_lines": 14,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "daily_returns",
                  "type_annotation": "pd.Series",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "confidence",
                  "type_annotation": "float",
                  "default_value": "0.95",
                  "is_required": false
                }
              ]
            },
            {
              "name": "alpha",
              "line_number": 299,
              "return_type": "float",
              "docstring": "Alpha - 超额收益\n\n参数:\n    strategy_returns: 策略收益率\n    benchmark_returns: 基准收益率\n\n返回:\n    float: Alpha值（年化）",
              "is_async": false,
              "decorators": [],
              "body_lines": 24,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "strategy_returns",
                  "type_annotation": "pd.Series",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "benchmark_returns",
                  "type_annotation": "pd.Series",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "beta",
              "line_number": 325,
              "return_type": "float",
              "docstring": "Beta - 系统性风险\n\n参数:\n    strategy_returns: 策略收益率\n    benchmark_returns: 基准收益率\n\n返回:\n    float: Beta值",
              "is_async": false,
              "decorators": [],
              "body_lines": 27,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "strategy_returns",
                  "type_annotation": "pd.Series",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "benchmark_returns",
                  "type_annotation": "pd.Series",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "information_ratio",
              "line_number": 354,
              "return_type": "float",
              "docstring": "信息比率 (Information Ratio)\n\n超额收益 / 跟踪误差\n\n参数:\n    strategy_returns: 策略收益率\n    benchmark_returns: 基准收益率\n\n返回:\n    float: 信息比率",
              "is_async": false,
              "decorators": [],
              "body_lines": 32,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "strategy_returns",
                  "type_annotation": "pd.Series",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "benchmark_returns",
                  "type_annotation": "pd.Series",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_trade_statistics",
              "line_number": 388,
              "return_type": "Dict",
              "docstring": "计算交易统计",
              "is_async": false,
              "decorators": [],
              "body_lines": 34,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "trades",
                  "type_annotation": "list",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "generate_report",
              "line_number": 424,
              "return_type": "str",
              "docstring": "生成性能报告\n\n参数:\n    metrics: 性能指标字典\n\n返回:\n    str: 格式化的报告文本",
              "is_async": false,
              "decorators": [],
              "body_lines": 47,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "metrics",
                  "type_annotation": "Dict",
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": []
    },
    {
      "file_path": "backtest/__init__.py",
      "module_name": "backtest.__init__",
      "category": "auxiliary",
      "docstring": null,
      "lines_of_code": 1,
      "blank_lines": 1,
      "comment_lines": 0,
      "last_modified": "2025-10-18T19:52:06.811100",
      "imports": [],
      "classes": [],
      "functions": []
    },
    {
      "file_path": "data_access/__init__.py",
      "module_name": "data_access.__init__",
      "category": "core",
      "docstring": "数据访问层模块\n\n提供4种数据库的统一访问接口:\n- TDengine: 高频时序数据\n- PostgreSQL: 历史分析数据\n- MySQL: 参考数据和元数据\n- Redis: 实时热数据\n\n创建日期: 2025-10-11\n版本: 1.0.0",
      "lines_of_code": 27,
      "blank_lines": 6,
      "comment_lines": 0,
      "last_modified": "2025-10-11T15:39:12.113771",
      "imports": [
        "data_access.tdengine_access",
        "data_access.postgresql_access",
        "data_access.mysql_access",
        "data_access.redis_access"
      ],
      "classes": [],
      "functions": []
    },
    {
      "file_path": "data_access/postgresql_access.py",
      "module_name": "data_access.postgresql_access",
      "category": "core",
      "docstring": "PostgreSQL数据访问层\n\n封装PostgreSQL+TimescaleDB的所有CRUD操作。\n专门处理历史分析数据和衍生计算结果(日线/技术指标/回测结果)。\n\n创建日期: 2025-10-11\n版本: 1.0.0",
      "lines_of_code": 472,
      "blank_lines": 98,
      "comment_lines": 9,
      "last_modified": "2025-10-11T15:36:11.275137",
      "imports": [
        "pandas",
        "typing",
        "datetime",
        "psycopg2",
        "psycopg2.extras",
        "db_manager.connection_manager"
      ],
      "classes": [
        {
          "name": "PostgreSQLDataAccess",
          "line_number": 20,
          "base_classes": [],
          "docstring": "PostgreSQL+TimescaleDB数据访问类\n\n提供历史分析数据的存储和查询接口:\n- 时序表(Hypertable)管理\n- 批量写入(execute_values优化)\n- 复杂时间范围查询\n- JOIN查询支持\n- 聚合和窗口函数",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 32,
              "return_type": null,
              "docstring": "初始化PostgreSQL连接池",
              "is_async": false,
              "decorators": [],
              "body_lines": 3,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_get_connection",
              "line_number": 37,
              "return_type": null,
              "docstring": "从连接池获取连接",
              "is_async": false,
              "decorators": [],
              "body_lines": 4,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_return_connection",
              "line_number": 43,
              "return_type": null,
              "docstring": "归还连接到连接池",
              "is_async": false,
              "decorators": [],
              "body_lines": 3,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "conn",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "create_table",
              "line_number": 48,
              "return_type": null,
              "docstring": "创建普通表\n\nArgs:\n    table_name: 表名\n    schema: 字段定义 {'symbol': 'VARCHAR(20)', 'date': 'DATE', 'close': 'DECIMAL(10,2)'}\n    primary_key: 主键字段 (可选)\n\nExample:\n    create_table('daily_kline', {\n        'symbol': 'VARCHAR(20)',\n        'date': 'DATE',\n        'open': 'DECIMAL(10,2)',\n        'high': 'DECIMAL(10,2)',\n        'low': 'DECIMAL(10,2)',\n        'close': 'DECIMAL(10,2)',\n        'volume': 'BIGINT'\n    }, primary_key='symbol, date')",
              "is_async": false,
              "decorators": [],
              "body_lines": 44,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "schema",
                  "type_annotation": "Dict[(str, str)]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "primary_key",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "create_hypertable",
              "line_number": 94,
              "return_type": null,
              "docstring": "将表转换为TimescaleDB时序表(Hypertable)\n\nArgs:\n    table_name: 表名\n    time_column: 时间列名 (默认'time')\n    chunk_interval: 分块间隔 (默认7天)\n\nExample:\n    create_hypertable('daily_kline', 'date', '30 days')",
              "is_async": false,
              "decorators": [],
              "body_lines": 36,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "time_column",
                  "type_annotation": "str",
                  "default_value": "\"time\"",
                  "is_required": false
                },
                {
                  "name": "chunk_interval",
                  "type_annotation": "str",
                  "default_value": "\"7 days\"",
                  "is_required": false
                }
              ]
            },
            {
              "name": "insert_dataframe",
              "line_number": 132,
              "return_type": "int",
              "docstring": "批量插入DataFrame数据 (使用execute_values优化)\n\nArgs:\n    table_name: 表名\n    df: 数据DataFrame\n\nReturns:\n    插入的行数\n\nExample:\n    df = pd.DataFrame({\n        'symbol': ['600000.SH'] * 100,\n        'date': pd.date_range('2025-01-01', periods=100),\n        'close': np.random.uniform(10, 20, 100)\n    })\n    insert_dataframe('daily_kline', df)",
              "is_async": false,
              "decorators": [],
              "body_lines": 49,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "df",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "upsert_dataframe",
              "line_number": 183,
              "return_type": "int",
              "docstring": "批量Upsert (INSERT ... ON CONFLICT UPDATE)\n\nArgs:\n    table_name: 表名\n    df: 数据DataFrame\n    conflict_columns: 冲突检测列 (通常是主键)\n    update_columns: 需要更新的列 (None表示更新所有非冲突列)\n\nReturns:\n    影响的行数\n\nExample:\n    upsert_dataframe('daily_kline', df,\n                   conflict_columns=['symbol', 'date'],\n                   update_columns=['close', 'volume'])",
              "is_async": false,
              "decorators": [],
              "body_lines": 60,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "df",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "conflict_columns",
                  "type_annotation": "List[str]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "update_columns",
                  "type_annotation": "Optional[List[str]]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "query",
              "line_number": 251,
              "return_type": "pd.DataFrame",
              "docstring": "通用查询\n\nArgs:\n    table_name: 表名\n    columns: 查询字段列表 (None表示所有字段)\n    where: WHERE子句 (不含WHERE关键字)\n    order_by: ORDER BY子句 (不含ORDER BY关键字)\n    limit: 返回行数限制\n\nReturns:\n    查询结果DataFrame\n\nExample:\n    df = query('daily_kline',\n              columns=['symbol', 'date', 'close'],\n              where=\"symbol = '600000.SH' AND date >= '2025-01-01'\",\n              order_by='date DESC',\n              limit=100)",
              "is_async": false,
              "decorators": [],
              "body_lines": 43,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "columns",
                  "type_annotation": "Optional[List[str]]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "where",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "order_by",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "limit",
                  "type_annotation": "Optional[int]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "query_by_time_range",
              "line_number": 303,
              "return_type": "pd.DataFrame",
              "docstring": "按时间范围查询\n\nArgs:\n    table_name: 表名\n    time_column: 时间列名\n    start_time: 开始时间\n    end_time: 结束时间\n    columns: 查询字段列表\n    filters: 额外过滤条件\n\nReturns:\n    查询结果DataFrame",
              "is_async": false,
              "decorators": [],
              "body_lines": 20,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "time_column",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "start_time",
                  "type_annotation": "datetime",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "end_time",
                  "type_annotation": "datetime",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "columns",
                  "type_annotation": "Optional[List[str]]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "filters",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "execute_sql",
              "line_number": 333,
              "return_type": "pd.DataFrame",
              "docstring": "执行自定义SQL查询\n\nArgs:\n    sql: SQL语句\n    params: 参数元组 (用于参数化查询)\n\nReturns:\n    查询结果DataFrame\n\nExample:\n    df = execute_sql(\n        \"\"\"\n        SELECT symbol, AVG(close) as avg_close\n        FROM daily_kline\n        WHERE date >= %s\n        GROUP BY symbol\n        HAVING AVG(close) > %s\n        \"\"\",\n        params=('2025-01-01', 50.0)\n    )",
              "is_async": false,
              "decorators": [],
              "body_lines": 33,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "sql",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "params",
                  "type_annotation": "Optional[Tuple]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "delete",
              "line_number": 368,
              "return_type": "int",
              "docstring": "删除数据\n\nArgs:\n    table_name: 表名\n    where: WHERE子句 (不含WHERE关键字)\n\nReturns:\n    删除的行数\n\nExample:\n    deleted = delete('daily_kline', \"date < '2020-01-01'\")",
              "is_async": false,
              "decorators": [],
              "body_lines": 33,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "where",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_table_stats",
              "line_number": 403,
              "return_type": "Dict[(str, Any)]",
              "docstring": "获取表统计信息\n\nArgs:\n    table_name: 表名\n\nReturns:\n    统计信息字典",
              "is_async": false,
              "decorators": [],
              "body_lines": 34,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "close_all",
              "line_number": 439,
              "return_type": null,
              "docstring": "关闭所有连接",
              "is_async": false,
              "decorators": [],
              "body_lines": 4,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": []
    },
    {
      "file_path": "data_access/tdengine_access.py",
      "module_name": "data_access.tdengine_access",
      "category": "core",
      "docstring": "TDengine数据访问层\n\n封装TDengine WebSocket连接的所有CRUD操作。\n专门处理高频时序数据(Tick/分钟线/盘口快照)的存储和查询。\n\n创建日期: 2025-10-11\n版本: 1.0.0",
      "lines_of_code": 430,
      "blank_lines": 85,
      "comment_lines": 13,
      "last_modified": "2025-10-11T15:34:53.687431",
      "imports": [
        "pandas",
        "typing",
        "datetime",
        "db_manager.connection_manager"
      ],
      "classes": [
        {
          "name": "TDengineDataAccess",
          "line_number": 18,
          "base_classes": [],
          "docstring": "TDengine数据访问类\n\n提供高频时序数据的存储和查询接口:\n- 超表(STable)管理\n- 批量写入(自动按timestamp分区)\n- 时间范围查询\n- 聚合查询(OHLC等)",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 29,
              "return_type": null,
              "docstring": "初始化TDengine连接",
              "is_async": false,
              "decorators": [],
              "body_lines": 3,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_get_connection",
              "line_number": 34,
              "return_type": null,
              "docstring": "获取TDengine连接(懒加载)",
              "is_async": false,
              "decorators": [],
              "body_lines": 4,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "create_stable",
              "line_number": 40,
              "return_type": null,
              "docstring": "创建超表(STable)\n\nArgs:\n    stable_name: 超表名称\n    schema: 字段定义 {'ts': 'TIMESTAMP', 'price': 'FLOAT', 'volume': 'INT'}\n    tags: 标签定义 {'symbol': 'BINARY(20)', 'exchange': 'BINARY(10)'}\n\nExample:\n    create_stable('tick_data',\n                 {'ts': 'TIMESTAMP', 'price': 'FLOAT', 'volume': 'INT'},\n                 {'symbol': 'BINARY(20)', 'exchange': 'BINARY(10)'})",
              "is_async": false,
              "decorators": [],
              "body_lines": 30,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "stable_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "schema",
                  "type_annotation": "Dict[(str, str)]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "tags",
                  "type_annotation": "Dict[(str, str)]",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "create_table",
              "line_number": 72,
              "return_type": null,
              "docstring": "创建子表(基于超表)\n\nArgs:\n    table_name: 子表名称 (建议: {stable_name}_{symbol})\n    stable_name: 超表名称\n    tag_values: 标签值 {'symbol': '600000.SH', 'exchange': 'SSE'}\n\nExample:\n    create_table('tick_data_600000', 'tick_data', {'symbol': '600000.SH', 'exchange': 'SSE'})",
              "is_async": false,
              "decorators": [],
              "body_lines": 26,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "stable_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "tag_values",
                  "type_annotation": "Dict[(str, Any)]",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "insert_dataframe",
              "line_number": 100,
              "return_type": null,
              "docstring": "批量插入DataFrame数据\n\nArgs:\n    table_name: 表名\n    df: 数据DataFrame (必须包含timestamp列)\n    timestamp_col: 时间戳列名 (默认'ts')\n\nReturns:\n    插入的行数\n\nExample:\n    df = pd.DataFrame({\n        'ts': pd.date_range('2025-01-01', periods=1000, freq='1s'),\n        'price': np.random.uniform(10, 20, 1000),\n        'volume': np.random.randint(100, 10000, 1000)\n    })\n    insert_dataframe('tick_data_600000', df)",
              "is_async": false,
              "decorators": [],
              "body_lines": 65,
              "complexity": 10,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "df",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "timestamp_col",
                  "type_annotation": "str",
                  "default_value": "\"ts\"",
                  "is_required": false
                }
              ]
            },
            {
              "name": "query_by_time_range",
              "line_number": 167,
              "return_type": "pd.DataFrame",
              "docstring": "按时间范围查询数据\n\nArgs:\n    table_name: 表名\n    start_time: 开始时间\n    end_time: 结束时间\n    columns: 查询字段列表 (None表示所有字段)\n    limit: 返回行数限制\n\nReturns:\n    查询结果DataFrame\n\nExample:\n    df = query_by_time_range(\n        'tick_data_600000',\n        datetime(2025, 1, 1, 9, 30),\n        datetime(2025, 1, 1, 15, 0),\n        columns=['ts', 'price', 'volume'],\n        limit=10000\n    )",
              "is_async": false,
              "decorators": [],
              "body_lines": 56,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "start_time",
                  "type_annotation": "datetime",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "end_time",
                  "type_annotation": "datetime",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "columns",
                  "type_annotation": "Optional[List[str]]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "limit",
                  "type_annotation": "Optional[int]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "query_latest",
              "line_number": 232,
              "return_type": "pd.DataFrame",
              "docstring": "查询最新N条数据\n\nArgs:\n    table_name: 表名\n    limit: 返回行数 (默认100)\n\nReturns:\n    最新数据DataFrame",
              "is_async": false,
              "decorators": [],
              "body_lines": 33,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "limit",
                  "type_annotation": "int",
                  "default_value": "100",
                  "is_required": false
                }
              ]
            },
            {
              "name": "aggregate_to_kline",
              "line_number": 267,
              "return_type": "pd.DataFrame",
              "docstring": "聚合为K线数据\n\nArgs:\n    table_name: 表名\n    start_time: 开始时间\n    end_time: 结束时间\n    interval: 聚合周期 ('1m', '5m', '15m', '1h', '1d')\n    price_col: 价格字段名\n    volume_col: 成交量字段名\n\nReturns:\n    K线DataFrame (columns: ts, open, high, low, close, volume)\n\nExample:\n    kline = aggregate_to_kline(\n        'tick_data_600000',\n        datetime(2025, 1, 1),\n        datetime(2025, 1, 2),\n        interval='5m'\n    )",
              "is_async": false,
              "decorators": [],
              "body_lines": 52,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "start_time",
                  "type_annotation": "datetime",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "end_time",
                  "type_annotation": "datetime",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "interval",
                  "type_annotation": "str",
                  "default_value": "\"1m\"",
                  "is_required": false
                },
                {
                  "name": "price_col",
                  "type_annotation": "str",
                  "default_value": "\"price\"",
                  "is_required": false
                },
                {
                  "name": "volume_col",
                  "type_annotation": "str",
                  "default_value": "\"volume\"",
                  "is_required": false
                }
              ]
            },
            {
              "name": "delete_by_time_range",
              "line_number": 329,
              "return_type": "int",
              "docstring": "删除时间范围内的数据\n\nArgs:\n    table_name: 表名\n    start_time: 开始时间\n    end_time: 结束时间\n\nReturns:\n    删除的行数",
              "is_async": false,
              "decorators": [],
              "body_lines": 30,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "start_time",
                  "type_annotation": "datetime",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "end_time",
                  "type_annotation": "datetime",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_table_info",
              "line_number": 361,
              "return_type": "Dict[(str, Any)]",
              "docstring": "获取表信息(行数、时间范围、磁盘占用)\n\nArgs:\n    table_name: 表名\n\nReturns:\n    表信息字典",
              "is_async": false,
              "decorators": [],
              "body_lines": 35,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "close",
              "line_number": 398,
              "return_type": null,
              "docstring": "关闭连接",
              "is_async": false,
              "decorators": [],
              "body_lines": 4,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": []
    },
    {
      "file_path": "data_access/mysql_access.py",
      "module_name": "data_access.mysql_access",
      "category": "core",
      "docstring": "MySQL数据访问层\n\n封装MySQL/MariaDB的所有CRUD操作。\n专门处理参考数据和元数据(股票信息/交易日历/系统配置)。\n\n创建日期: 2025-10-11\n版本: 1.0.0",
      "lines_of_code": 452,
      "blank_lines": 98,
      "comment_lines": 13,
      "last_modified": "2025-10-11T15:37:17.893138",
      "imports": [
        "pandas",
        "typing",
        "pymysql",
        "pymysql.cursors",
        "db_manager.connection_manager"
      ],
      "classes": [
        {
          "name": "MySQLDataAccess",
          "line_number": 19,
          "base_classes": [],
          "docstring": "MySQL/MariaDB数据访问类\n\n提供参考数据和元数据的存储和查询接口:\n- 表管理(CREATE/ALTER)\n- 批量写入(executemany优化)\n- ACID事务支持\n- 复杂JOIN查询\n- 索引管理",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 31,
              "return_type": null,
              "docstring": "初始化MySQL连接",
              "is_async": false,
              "decorators": [],
              "body_lines": 3,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_get_connection",
              "line_number": 36,
              "return_type": null,
              "docstring": "获取MySQL连接(懒加载)",
              "is_async": false,
              "decorators": [],
              "body_lines": 4,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_reconnect_if_needed",
              "line_number": 42,
              "return_type": null,
              "docstring": "检查连接并在需要时重连",
              "is_async": false,
              "decorators": [],
              "body_lines": 7,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "create_table",
              "line_number": 51,
              "return_type": null,
              "docstring": "创建表\n\nArgs:\n    table_name: 表名\n    schema: 字段定义 {'symbol': 'VARCHAR(20)', 'name': 'VARCHAR(100)', 'list_date': 'DATE'}\n    primary_key: 主键字段\n\nExample:\n    create_table('stock_info', {\n        'symbol': 'VARCHAR(20)',\n        'name': 'VARCHAR(100)',\n        'exchange': 'VARCHAR(10)',\n        'list_date': 'DATE',\n        'delist_date': 'DATE',\n        'is_active': 'TINYINT DEFAULT 1'\n    }, primary_key='symbol')",
              "is_async": false,
              "decorators": [],
              "body_lines": 41,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "schema",
                  "type_annotation": "Dict[(str, str)]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "primary_key",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "create_index",
              "line_number": 94,
              "return_type": null,
              "docstring": "创建索引\n\nArgs:\n    table_name: 表名\n    index_name: 索引名\n    columns: 索引列列表\n    unique: 是否唯一索引\n\nExample:\n    create_index('stock_info', 'idx_exchange', ['exchange'])\n    create_index('stock_info', 'idx_unique_name', ['name'], unique=True)",
              "is_async": false,
              "decorators": [],
              "body_lines": 34,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "index_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "columns",
                  "type_annotation": "List[str]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "unique",
                  "type_annotation": "bool",
                  "default_value": "False",
                  "is_required": false
                }
              ]
            },
            {
              "name": "insert_dataframe",
              "line_number": 130,
              "return_type": "int",
              "docstring": "批量插入DataFrame数据\n\nArgs:\n    table_name: 表名\n    df: 数据DataFrame\n    batch_size: 批次大小 (默认1000)\n\nReturns:\n    插入的行数\n\nExample:\n    df = pd.DataFrame({\n        'symbol': ['600000.SH', '000001.SZ'],\n        'name': ['浦发银行', '平安银行'],\n        'exchange': ['SSE', 'SZSE']\n    })\n    insert_dataframe('stock_info', df)",
              "is_async": false,
              "decorators": [],
              "body_lines": 52,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "df",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "batch_size",
                  "type_annotation": "int",
                  "default_value": "1000",
                  "is_required": false
                }
              ]
            },
            {
              "name": "upsert_dataframe",
              "line_number": 184,
              "return_type": "int",
              "docstring": "批量Upsert (INSERT ... ON DUPLICATE KEY UPDATE)\n\nArgs:\n    table_name: 表名\n    df: 数据DataFrame\n    update_columns: 需要更新的列 (None表示更新所有列)\n    batch_size: 批次大小\n\nReturns:\n    影响的行数\n\nExample:\n    upsert_dataframe('stock_info', df, update_columns=['name', 'is_active'])",
              "is_async": false,
              "decorators": [],
              "body_lines": 58,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "df",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "update_columns",
                  "type_annotation": "Optional[List[str]]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "batch_size",
                  "type_annotation": "int",
                  "default_value": "1000",
                  "is_required": false
                }
              ]
            },
            {
              "name": "query",
              "line_number": 250,
              "return_type": "pd.DataFrame",
              "docstring": "通用查询\n\nArgs:\n    table_name: 表名\n    columns: 查询字段列表 (None表示所有字段)\n    where: WHERE子句\n    order_by: ORDER BY子句\n    limit: 返回行数限制\n\nReturns:\n    查询结果DataFrame\n\nExample:\n    df = query('stock_info',\n              columns=['symbol', 'name', 'exchange'],\n              where=\"exchange = 'SSE' AND is_active = 1\",\n              order_by='symbol ASC',\n              limit=100)",
              "is_async": false,
              "decorators": [],
              "body_lines": 41,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "columns",
                  "type_annotation": "Optional[List[str]]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "where",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "order_by",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "limit",
                  "type_annotation": "Optional[int]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "execute_sql",
              "line_number": 300,
              "return_type": "Optional[pd.DataFrame]",
              "docstring": "执行自定义SQL\n\nArgs:\n    sql: SQL语句\n    params: 参数元组\n    fetch: 是否返回结果 (False用于INSERT/UPDATE/DELETE)\n\nReturns:\n    查询结果DataFrame (fetch=True时)\n\nExample:\n    # 查询\n    df = execute_sql(\n        \"SELECT * FROM stock_info WHERE exchange = %s\",\n        params=('SSE',)\n    )\n\n    # 更新\n    execute_sql(\n        \"UPDATE stock_info SET is_active = 0 WHERE delist_date < %s\",\n        params=('2020-01-01',),\n        fetch=False\n    )",
              "is_async": false,
              "decorators": [],
              "body_lines": 43,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "sql",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "params",
                  "type_annotation": "Optional[Tuple]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "fetch",
                  "type_annotation": "bool",
                  "default_value": "True",
                  "is_required": false
                }
              ]
            },
            {
              "name": "delete",
              "line_number": 345,
              "return_type": "int",
              "docstring": "删除数据\n\nArgs:\n    table_name: 表名\n    where: WHERE子句\n\nReturns:\n    删除的行数\n\nExample:\n    deleted = delete('stock_info', \"delist_date < '2020-01-01'\")",
              "is_async": false,
              "decorators": [],
              "body_lines": 31,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "where",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_table_info",
              "line_number": 378,
              "return_type": "Dict[(str, Any)]",
              "docstring": "获取表信息\n\nArgs:\n    table_name: 表名\n\nReturns:\n    表信息字典",
              "is_async": false,
              "decorators": [],
              "body_lines": 39,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "close",
              "line_number": 419,
              "return_type": null,
              "docstring": "关闭连接",
              "is_async": false,
              "decorators": [],
              "body_lines": 4,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": []
    },
    {
      "file_path": "data_access/redis_access.py",
      "module_name": "data_access.redis_access",
      "category": "core",
      "docstring": "Redis数据访问层\n\n封装Redis的所有操作。\n专门处理实时热数据(实时持仓/实时账户/订单队列)。\n\n创建日期: 2025-10-11\n版本: 1.0.0",
      "lines_of_code": 500,
      "blank_lines": 115,
      "comment_lines": 16,
      "last_modified": "2025-10-11T15:38:27.894964",
      "imports": [
        "json",
        "pandas",
        "typing",
        "datetime",
        "db_manager.connection_manager"
      ],
      "classes": [
        {
          "name": "RedisDataAccess",
          "line_number": 19,
          "base_classes": [],
          "docstring": "Redis数据访问类\n\n提供实时热数据的存储和查询接口:\n- String操作 (简单键值对)\n- Hash操作 (实时持仓/账户)\n- List操作 (订单队列)\n- Set操作 (标的集合)\n- SortedSet操作 (排序队列)\n- TTL过期管理",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 32,
              "return_type": null,
              "docstring": "初始化Redis连接",
              "is_async": false,
              "decorators": [],
              "body_lines": 3,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_get_connection",
              "line_number": 37,
              "return_type": null,
              "docstring": "获取Redis连接(懒加载)",
              "is_async": false,
              "decorators": [],
              "body_lines": 4,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "set",
              "line_number": 45,
              "return_type": null,
              "docstring": "设置键值对\n\nArgs:\n    key: 键\n    value: 值 (自动JSON序列化)\n    ttl: 过期时间(秒) (None表示不过期)\n\nExample:\n    set('position:600000.SH', {'quantity': 1000, 'cost': 15.5}, ttl=300)",
              "is_async": false,
              "decorators": [],
              "body_lines": 21,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "key",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "value",
                  "type_annotation": "Any",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "ttl",
                  "type_annotation": "Optional[int]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "get",
              "line_number": 68,
              "return_type": "Optional[Any]",
              "docstring": "获取键值\n\nArgs:\n    key: 键\n\nReturns:\n    值 (自动JSON反序列化) 或 None\n\nExample:\n    position = get('position:600000.SH')",
              "is_async": false,
              "decorators": [],
              "body_lines": 23,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "key",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "delete",
              "line_number": 93,
              "return_type": "int",
              "docstring": "删除键\n\nArgs:\n    keys: 键列表\n\nReturns:\n    删除的键数量\n\nExample:\n    delete('position:600000.SH', 'position:000001.SZ')",
              "is_async": false,
              "decorators": [],
              "body_lines": 14,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "*keys",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": false
                }
              ]
            },
            {
              "name": "exists",
              "line_number": 109,
              "return_type": "bool",
              "docstring": "检查键是否存在",
              "is_async": false,
              "decorators": [],
              "body_lines": 3,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "key",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "expire",
              "line_number": 114,
              "return_type": "bool",
              "docstring": "设置键的过期时间\n\nArgs:\n    key: 键\n    ttl: 过期时间(秒)\n\nReturns:\n    设置是否成功",
              "is_async": false,
              "decorators": [],
              "body_lines": 12,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "key",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "ttl",
                  "type_annotation": "int",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "hset",
              "line_number": 130,
              "return_type": null,
              "docstring": "设置Hash字段\n\nArgs:\n    key: Hash键\n    field: 字段名\n    value: 字段值 (自动JSON序列化)\n\nExample:\n    hset('account:user001', 'cash', 100000.0)\n    hset('account:user001', 'positions', {'600000.SH': 1000})",
              "is_async": false,
              "decorators": [],
              "body_lines": 18,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "key",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "field",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "value",
                  "type_annotation": "Any",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "hget",
              "line_number": 150,
              "return_type": "Optional[Any]",
              "docstring": "获取Hash字段值\n\nArgs:\n    key: Hash键\n    field: 字段名\n\nReturns:\n    字段值 或 None",
              "is_async": false,
              "decorators": [],
              "body_lines": 20,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "key",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "field",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "hgetall",
              "line_number": 172,
              "return_type": "Dict[(str, Any)]",
              "docstring": "获取Hash所有字段\n\nArgs:\n    key: Hash键\n\nReturns:\n    字段字典\n\nExample:\n    account = hgetall('account:user001')\n    # {'cash': 100000.0, 'positions': {...}}",
              "is_async": false,
              "decorators": [],
              "body_lines": 25,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "key",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "hmset",
              "line_number": 199,
              "return_type": null,
              "docstring": "批量设置Hash字段\n\nArgs:\n    key: Hash键\n    mapping: 字段字典\n\nExample:\n    hmset('account:user001', {\n        'cash': 100000.0,\n        'available_cash': 50000.0,\n        'total_assets': 200000.0\n    })",
              "is_async": false,
              "decorators": [],
              "body_lines": 25,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "key",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "mapping",
                  "type_annotation": "Dict[(str, Any)]",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "hdel",
              "line_number": 226,
              "return_type": "int",
              "docstring": "删除Hash字段",
              "is_async": false,
              "decorators": [],
              "body_lines": 3,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "key",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "*fields",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": false
                }
              ]
            },
            {
              "name": "lpush",
              "line_number": 233,
              "return_type": "int",
              "docstring": "从左侧推入列表\n\nArgs:\n    key: 列表键\n    values: 值列表 (自动JSON序列化)\n\nReturns:\n    列表长度\n\nExample:\n    lpush('order_queue', {'symbol': '600000.SH', 'quantity': 100})",
              "is_async": false,
              "decorators": [],
              "body_lines": 24,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "key",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "*values",
                  "type_annotation": "Any",
                  "default_value": null,
                  "is_required": false
                }
              ]
            },
            {
              "name": "rpush",
              "line_number": 259,
              "return_type": "int",
              "docstring": "从右侧推入列表",
              "is_async": false,
              "decorators": [],
              "body_lines": 11,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "key",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "*values",
                  "type_annotation": "Any",
                  "default_value": null,
                  "is_required": false
                }
              ]
            },
            {
              "name": "lpop",
              "line_number": 272,
              "return_type": "Optional[Any]",
              "docstring": "从左侧弹出元素",
              "is_async": false,
              "decorators": [],
              "body_lines": 11,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "key",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "rpop",
              "line_number": 285,
              "return_type": "Optional[Any]",
              "docstring": "从右侧弹出元素",
              "is_async": false,
              "decorators": [],
              "body_lines": 11,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "key",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "lrange",
              "line_number": 298,
              "return_type": "List[Any]",
              "docstring": "获取列表范围元素\n\nArgs:\n    key: 列表键\n    start: 起始索引 (0表示第一个元素)\n    end: 结束索引 (-1表示最后一个元素)\n\nReturns:\n    元素列表\n\nExample:\n    # 获取前10个订单\n    orders = lrange('order_queue', 0, 9)",
              "is_async": false,
              "decorators": [],
              "body_lines": 27,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "key",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "start",
                  "type_annotation": "int",
                  "default_value": "0",
                  "is_required": false
                },
                {
                  "name": "end",
                  "type_annotation": "int",
                  "default_value": "...",
                  "is_required": false
                }
              ]
            },
            {
              "name": "llen",
              "line_number": 327,
              "return_type": "int",
              "docstring": "获取列表长度",
              "is_async": false,
              "decorators": [],
              "body_lines": 3,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "key",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "sadd",
              "line_number": 334,
              "return_type": "int",
              "docstring": "添加集合成员\n\nArgs:\n    key: 集合键\n    members: 成员列表\n\nReturns:\n    添加的成员数量\n\nExample:\n    sadd('watchlist:user001', '600000.SH', '000001.SZ')",
              "is_async": false,
              "decorators": [],
              "body_lines": 23,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "key",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "*members",
                  "type_annotation": "Any",
                  "default_value": null,
                  "is_required": false
                }
              ]
            },
            {
              "name": "smembers",
              "line_number": 359,
              "return_type": "set",
              "docstring": "获取集合所有成员",
              "is_async": false,
              "decorators": [],
              "body_lines": 12,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "key",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "srem",
              "line_number": 373,
              "return_type": "int",
              "docstring": "删除集合成员",
              "is_async": false,
              "decorators": [],
              "body_lines": 11,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "key",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "*members",
                  "type_annotation": "Any",
                  "default_value": null,
                  "is_required": false
                }
              ]
            },
            {
              "name": "sismember",
              "line_number": 386,
              "return_type": "bool",
              "docstring": "检查成员是否在集合中",
              "is_async": false,
              "decorators": [],
              "body_lines": 7,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "key",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "member",
                  "type_annotation": "Any",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "mget",
              "line_number": 397,
              "return_type": "List[Optional[Any]]",
              "docstring": "批量获取键值",
              "is_async": false,
              "decorators": [],
              "body_lines": 15,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "*keys",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": false
                }
              ]
            },
            {
              "name": "mset",
              "line_number": 414,
              "return_type": null,
              "docstring": "批量设置键值\n\nArgs:\n    mapping: 键值字典\n\nExample:\n    mset({\n        'position:600000.SH': {'quantity': 1000},\n        'position:000001.SZ': {'quantity': 500}\n    })",
              "is_async": false,
              "decorators": [],
              "body_lines": 22,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "mapping",
                  "type_annotation": "Dict[(str, Any)]",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "keys",
              "line_number": 440,
              "return_type": "List[str]",
              "docstring": "查找匹配模式的键\n\nArgs:\n    pattern: 匹配模式 (支持通配符 *)\n\nReturns:\n    键列表\n\nExample:\n    # 查找所有持仓键\n    position_keys = keys('position:*')",
              "is_async": false,
              "decorators": [],
              "body_lines": 15,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "pattern",
                  "type_annotation": "str",
                  "default_value": "\"*\"",
                  "is_required": false
                }
              ]
            },
            {
              "name": "flushdb",
              "line_number": 457,
              "return_type": null,
              "docstring": "清空当前数据库 (谨慎使用!)",
              "is_async": false,
              "decorators": [],
              "body_lines": 3,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "info",
              "line_number": 462,
              "return_type": "Dict[(str, Any)]",
              "docstring": "获取Redis服务器信息",
              "is_async": false,
              "decorators": [],
              "body_lines": 3,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "close",
              "line_number": 467,
              "return_type": null,
              "docstring": "关闭连接",
              "is_async": false,
              "decorators": [],
              "body_lines": 4,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": []
    },
    {
      "file_path": "db_manager/validate_mystocks_architecture.py",
      "module_name": "db_manager.validate_mystocks_architecture",
      "category": "infrastructure",
      "docstring": "MyStocks统一接口验证脚本\n验证实时市场数据保存系统是否符合MyStocks架构设计\n\n验证内容：\n1. 统一管理器初始化\n2. 数据分类路由正确性\n3. 自动数据库选择\n4. 监控系统集成\n5. 与系统架构的一致性\n\n作者: MyStocks项目组\n日期: 2025-09-21",
      "lines_of_code": 368,
      "blank_lines": 75,
      "comment_lines": 30,
      "last_modified": "2025-09-21T23:29:11.486081",
      "imports": [
        "os",
        "sys",
        "logging",
        "datetime",
        "unified_manager",
        "core",
        "adapters.customer_adapter"
      ],
      "classes": [],
      "functions": [
        {
          "name": "setup_logging",
          "line_number": 31,
          "return_type": null,
          "docstring": "配置日志系统",
          "is_async": false,
          "decorators": [],
          "body_lines": 7,
          "complexity": 1,
          "parameters": []
        },
        {
          "name": "test_data_classification_strategy",
          "line_number": 40,
          "return_type": null,
          "docstring": "测试数据分类策略",
          "is_async": false,
          "decorators": [],
          "body_lines": 37,
          "complexity": 4,
          "parameters": []
        },
        {
          "name": "test_unified_manager_initialization",
          "line_number": 79,
          "return_type": null,
          "docstring": "测试统一管理器初始化",
          "is_async": false,
          "decorators": [],
          "body_lines": 48,
          "complexity": 4,
          "parameters": []
        },
        {
          "name": "test_data_source_integration",
          "line_number": 129,
          "return_type": null,
          "docstring": "测试数据源集成",
          "is_async": false,
          "decorators": [],
          "body_lines": 34,
          "complexity": 7,
          "parameters": []
        },
        {
          "name": "test_unified_interface_save",
          "line_number": 165,
          "return_type": null,
          "docstring": "测试统一接口保存功能",
          "is_async": false,
          "decorators": [],
          "body_lines": 62,
          "complexity": 8,
          "parameters": [
            {
              "name": "unified_manager",
              "type_annotation": null,
              "default_value": null,
              "is_required": true
            },
            {
              "name": "sample_data",
              "type_annotation": null,
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "test_architecture_consistency",
          "line_number": 229,
          "return_type": null,
          "docstring": "测试架构一致性",
          "is_async": false,
          "decorators": [],
          "body_lines": 41,
          "complexity": 5,
          "parameters": []
        },
        {
          "name": "main",
          "line_number": 272,
          "return_type": null,
          "docstring": "主函数",
          "is_async": false,
          "decorators": [],
          "body_lines": 92,
          "complexity": 12,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "db_manager/execute_example.py",
      "module_name": "db_manager.execute_example",
      "category": "infrastructure",
      "docstring": null,
      "lines_of_code": 60,
      "blank_lines": 10,
      "comment_lines": 9,
      "last_modified": "2025-09-18T19:07:34.580378",
      "imports": [
        "database_manager",
        "os",
        "dotenv",
        "db_utils"
      ],
      "classes": [],
      "functions": []
    },
    {
      "file_path": "db_manager/test_jupyter_compatibility.py",
      "module_name": "db_manager.test_jupyter_compatibility",
      "category": "infrastructure",
      "docstring": "测试 Jupyter 环境兼容性",
      "lines_of_code": 45,
      "blank_lines": 10,
      "comment_lines": 5,
      "last_modified": "2025-09-18T19:07:34.585377",
      "imports": [
        "sys",
        "os",
        "init_db_monitor"
      ],
      "classes": [],
      "functions": [
        {
          "name": "test_jupyter_api",
          "line_number": 15,
          "return_type": null,
          "docstring": "测试 Jupyter API 调用",
          "is_async": false,
          "decorators": [],
          "body_lines": 17,
          "complexity": 3,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "db_manager/save_realtime_market_data_simple.py",
      "module_name": "db_manager.save_realtime_market_data_simple",
      "category": "infrastructure",
      "docstring": "沪深市场A股实时数据保存系统 - 简化版\n专注于实时数据获取和Redis存储，避免复杂的数据库依赖\n\n核心功能：\n1. 从efinance获取沪深A股实时数据\n2. 保存到Redis热数据存储（5分钟过期）\n3. 可选：导出到CSV文件作为备份\n4. 支持强制更新（跳过缓存）\n\n作者: MyStocks项目组\n日期: 2025-09-21\n版本: 简化版 v1.0",
      "lines_of_code": 426,
      "blank_lines": 85,
      "comment_lines": 45,
      "last_modified": "2025-09-22T00:05:44.488461",
      "imports": [
        "os",
        "sys",
        "logging",
        "argparse",
        "pandas",
        "redis",
        "json",
        "datetime",
        "typing",
        "dotenv"
      ],
      "classes": [
        {
          "name": "SimpleRealtimeDataSaver",
          "line_number": 29,
          "base_classes": [],
          "docstring": "简化版实时数据保存器 - 只使用Redis和CSV",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 32,
              "return_type": null,
              "docstring": "初始化简化版数据保存器",
              "is_async": false,
              "decorators": [],
              "body_lines": 19,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "config_file",
                  "type_annotation": "str",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "_setup_logging",
              "line_number": 53,
              "return_type": null,
              "docstring": "配置日志系统",
              "is_async": false,
              "decorators": [],
              "body_lines": 13,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_load_config",
              "line_number": 68,
              "return_type": null,
              "docstring": "加载配置参数",
              "is_async": false,
              "decorators": [],
              "body_lines": 45,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "initialize_redis",
              "line_number": 115,
              "return_type": "bool",
              "docstring": "初始化Redis连接",
              "is_async": false,
              "decorators": [],
              "body_lines": 22,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_realtime_market_data",
              "line_number": 139,
              "return_type": "Optional[pd.DataFrame]",
              "docstring": "获取实时市场数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 52,
              "complexity": 13,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_validate_market_data",
              "line_number": 193,
              "return_type": "bool",
              "docstring": "验证市场数据的基本结构",
              "is_async": false,
              "decorators": [],
              "body_lines": 23,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "save_to_redis",
              "line_number": 218,
              "return_type": "bool",
              "docstring": "保存数据到Redis",
              "is_async": false,
              "decorators": [],
              "body_lines": 34,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "save_to_csv",
              "line_number": 254,
              "return_type": "bool",
              "docstring": "保存数据到CSV文件",
              "is_async": false,
              "decorators": [],
              "body_lines": 23,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "force_update",
              "line_number": 279,
              "return_type": "Dict[(str, Any)]",
              "docstring": "强制更新（清除缓存并获取最新数据）",
              "is_async": false,
              "decorators": [],
              "body_lines": 43,
              "complexity": 7,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "save_data",
              "line_number": 324,
              "return_type": "Dict[(str, bool)]",
              "docstring": "保存数据到所有配置的目标",
              "is_async": false,
              "decorators": [],
              "body_lines": 10,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "run",
              "line_number": 336,
              "return_type": "bool",
              "docstring": "执行完整的数据获取和保存流程",
              "is_async": false,
              "decorators": [],
              "body_lines": 56,
              "complexity": 10,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "force_update",
                  "type_annotation": "bool",
                  "default_value": "False",
                  "is_required": false
                }
              ]
            }
          ]
        }
      ],
      "functions": [
        {
          "name": "main",
          "line_number": 394,
          "return_type": null,
          "docstring": "主函数",
          "is_async": false,
          "decorators": [],
          "body_lines": 29,
          "complexity": 2,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "db_manager/fix_database_connections.py",
      "module_name": "db_manager.fix_database_connections",
      "category": "infrastructure",
      "docstring": "数据库连接修复工具\n用于解决MyStocks项目中的数据库连接问题",
      "lines_of_code": 264,
      "blank_lines": 45,
      "comment_lines": 22,
      "last_modified": "2025-09-23T02:20:45.118704",
      "imports": [
        "os",
        "sys",
        "logging",
        "psycopg2",
        "pymysql",
        "importlib",
        "db_manager.database_manager"
      ],
      "classes": [],
      "functions": [
        {
          "name": "check_database_connections",
          "line_number": 27,
          "return_type": null,
          "docstring": "检查所有数据库连接配置",
          "is_async": false,
          "decorators": [],
          "body_lines": 20,
          "complexity": 4,
          "parameters": []
        },
        {
          "name": "fix_postgresql_hypertable",
          "line_number": 49,
          "return_type": null,
          "docstring": "修复PostgreSQL中的hypertable问题",
          "is_async": false,
          "decorators": [],
          "body_lines": 34,
          "complexity": 3,
          "parameters": []
        },
        {
          "name": "fix_tdengine_database",
          "line_number": 85,
          "return_type": null,
          "docstring": "修复TDengine数据库指定问题",
          "is_async": false,
          "decorators": [],
          "body_lines": 17,
          "complexity": 3,
          "parameters": []
        },
        {
          "name": "create_databases",
          "line_number": 104,
          "return_type": null,
          "docstring": "创建所需的数据库",
          "is_async": false,
          "decorators": [],
          "body_lines": 79,
          "complexity": 11,
          "parameters": []
        },
        {
          "name": "validate_connections",
          "line_number": 185,
          "return_type": null,
          "docstring": "验证所有数据库连接",
          "is_async": false,
          "decorators": [],
          "body_lines": 39,
          "complexity": 6,
          "parameters": []
        },
        {
          "name": "main",
          "line_number": 226,
          "return_type": null,
          "docstring": "主函数",
          "is_async": false,
          "decorators": [],
          "body_lines": 34,
          "complexity": 6,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "db_manager/database_manager.py",
      "module_name": "db_manager.database_manager",
      "category": "infrastructure",
      "docstring": "# 功能：数据库管理器，负责连接管理、表创建和结构验证\n# 作者：JohnC (ninjas@sina.com) & Claude\n# 创建日期：2025-10-16\n# 版本：2.1.0\n# 依赖：详见requirements.txt或文件导入部分\n# 注意事项：\n#   本文件是MyStocks v2.1核心组件，遵循5-tier数据分类架构\n# 版权：MyStocks Project © 2025",
      "lines_of_code": 937,
      "blank_lines": 148,
      "comment_lines": 100,
      "last_modified": "2025-10-16T08:26:29.099201",
      "imports": [
        "json",
        "logging",
        "os",
        "datetime",
        "enum",
        "typing",
        "sqlalchemy",
        "sqlalchemy",
        "sqlalchemy.ext.declarative",
        "sqlalchemy.orm",
        "psycopg2",
        "redis",
        "pymysql",
        "dotenv",
        "yaml"
      ],
      "classes": [
        {
          "name": "DatabaseType",
          "line_number": 71,
          "base_classes": [
            "Enum"
          ],
          "docstring": null,
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "TableCreationLog",
          "line_number": 79,
          "base_classes": [
            "Base"
          ],
          "docstring": null,
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "ColumnDefinitionLog",
          "line_number": 96,
          "base_classes": [
            "Base"
          ],
          "docstring": null,
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "TableOperationLog",
          "line_number": 111,
          "base_classes": [
            "Base"
          ],
          "docstring": null,
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "TableValidationLog",
          "line_number": 125,
          "base_classes": [
            "Base"
          ],
          "docstring": null,
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "DatabaseTableManager",
          "line_number": 137,
          "base_classes": [],
          "docstring": null,
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 138,
              "return_type": null,
              "docstring": null,
              "is_async": false,
              "decorators": [],
              "body_lines": 41,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_connection",
              "line_number": 182,
              "return_type": null,
              "docstring": "获取数据库连接",
              "is_async": false,
              "decorators": [],
              "body_lines": 85,
              "complexity": 13,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "db_type",
                  "type_annotation": "DatabaseType",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "db_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "**kwargs",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": false
                }
              ]
            },
            {
              "name": "_log_operation",
              "line_number": 269,
              "return_type": null,
              "docstring": "记录操作日志到监控数据库",
              "is_async": false,
              "decorators": [],
              "body_lines": 14,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "db_type",
                  "type_annotation": "DatabaseType",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "db_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "operation_type",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "operation_details",
                  "type_annotation": "Dict",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "ddl_command",
                  "type_annotation": "str",
                  "default_value": "\"\"",
                  "is_required": false
                },
                {
                  "name": "status",
                  "type_annotation": "str",
                  "default_value": "\"success\"",
                  "is_required": false
                },
                {
                  "name": "error_message",
                  "type_annotation": "str",
                  "default_value": "\"\"",
                  "is_required": false
                }
              ]
            },
            {
              "name": "create_table",
              "line_number": 287,
              "return_type": "bool",
              "docstring": "在指定数据库中创建表",
              "is_async": false,
              "decorators": [],
              "body_lines": 89,
              "complexity": 7,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "db_type",
                  "type_annotation": "DatabaseType",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "db_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "columns",
                  "type_annotation": "List[Dict]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "**kwargs",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": false
                }
              ]
            },
            {
              "name": "alter_table",
              "line_number": 379,
              "return_type": "bool",
              "docstring": "修改表结构",
              "is_async": false,
              "decorators": [],
              "body_lines": 49,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "db_type",
                  "type_annotation": "DatabaseType",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "db_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "alterations",
                  "type_annotation": "List[Dict]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "**kwargs",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": false
                }
              ]
            },
            {
              "name": "drop_table",
              "line_number": 431,
              "return_type": "bool",
              "docstring": "删除表",
              "is_async": false,
              "decorators": [],
              "body_lines": 63,
              "complexity": 9,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "db_type",
                  "type_annotation": "DatabaseType",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "db_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "**kwargs",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": false
                }
              ]
            },
            {
              "name": "validate_table_structure",
              "line_number": 496,
              "return_type": "Dict",
              "docstring": "验证表结构是否符合预期",
              "is_async": false,
              "decorators": [],
              "body_lines": 75,
              "complexity": 15,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "db_type",
                  "type_annotation": "DatabaseType",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "db_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "expected_columns",
                  "type_annotation": "List[Dict]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "**kwargs",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": false
                }
              ]
            },
            {
              "name": "batch_create_tables",
              "line_number": 574,
              "return_type": null,
              "docstring": "通过配置文件table_config.yaml批量创建表,若yaml格式修改，这个函数也要改\n连接参数将从环境变量中自动获取，无需在YAML中配置",
              "is_async": false,
              "decorators": [],
              "body_lines": 24,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "config_file",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_generate_alter_ddl",
              "line_number": 600,
              "return_type": "str",
              "docstring": "生成ALTER TABLE语句",
              "is_async": false,
              "decorators": [],
              "body_lines": 18,
              "complexity": 6,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "db_type",
                  "type_annotation": "DatabaseType",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "alterations",
                  "type_annotation": "List[Dict]",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_generate_column_definition",
              "line_number": 620,
              "return_type": "str",
              "docstring": "生成列定义字符串",
              "is_async": false,
              "decorators": [],
              "body_lines": 23,
              "complexity": 9,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "col_def",
                  "type_annotation": "Dict",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_generate_tdengine_ddl",
              "line_number": 648,
              "return_type": "str",
              "docstring": "生成TDengine的DDL语句",
              "is_async": false,
              "decorators": [],
              "body_lines": 36,
              "complexity": 8,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "columns",
                  "type_annotation": "List[Dict]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "tags",
                  "type_annotation": "List[Dict]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "**kwargs",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": false
                }
              ]
            },
            {
              "name": "_generate_postgresql_ddl",
              "line_number": 686,
              "return_type": "str",
              "docstring": "生成PostgreSQL的DDL语句",
              "is_async": false,
              "decorators": [],
              "body_lines": 40,
              "complexity": 12,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "columns",
                  "type_annotation": "List[Dict]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "**kwargs",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": false
                }
              ]
            },
            {
              "name": "_generate_mysql_ddl",
              "line_number": 728,
              "return_type": "str",
              "docstring": "生成MySQL的DDL语句",
              "is_async": false,
              "decorators": [],
              "body_lines": 50,
              "complexity": 13,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "columns",
                  "type_annotation": "List[Dict]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "**kwargs",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": false
                }
              ]
            },
            {
              "name": "_initialize_redis_structure",
              "line_number": 780,
              "return_type": null,
              "docstring": "初始化Redis数据结构",
              "is_async": false,
              "decorators": [],
              "body_lines": 19,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "conn",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "key_prefix",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "columns",
                  "type_annotation": "List[Dict]",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_table_info",
              "line_number": 801,
              "return_type": "Optional[Dict]",
              "docstring": "获取表结构信息",
              "is_async": false,
              "decorators": [],
              "body_lines": 73,
              "complexity": 11,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "db_type",
                  "type_annotation": "DatabaseType",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "db_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "**kwargs",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": false
                }
              ]
            },
            {
              "name": "close_all_connections",
              "line_number": 876,
              "return_type": null,
              "docstring": "关闭所有数据库连接",
              "is_async": false,
              "decorators": [],
              "body_lines": 14,
              "complexity": 6,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": []
    },
    {
      "file_path": "db_manager/test_tdengine.py",
      "module_name": "db_manager.test_tdengine",
      "category": "infrastructure",
      "docstring": "TDengine连接测试脚本\n包含条件导入和错误处理机制",
      "lines_of_code": 171,
      "blank_lines": 27,
      "comment_lines": 17,
      "last_modified": "2025-09-18T19:07:34.585377",
      "imports": [
        "logging",
        "sys"
      ],
      "classes": [],
      "functions": [
        {
          "name": "test_tdengine_import",
          "line_number": 15,
          "return_type": null,
          "docstring": "测试TDengine导入和连接",
          "is_async": false,
          "decorators": [],
          "body_lines": 27,
          "complexity": 4,
          "parameters": []
        },
        {
          "name": "test_tdengine_connection",
          "line_number": 44,
          "return_type": null,
          "docstring": "测试TDengine数据库连接",
          "is_async": false,
          "decorators": [],
          "body_lines": 86,
          "complexity": 10,
          "parameters": [
            {
              "name": "taos_module",
              "type_annotation": null,
              "default_value": null,
              "is_required": true
            },
            {
              "name": "module_name",
              "type_annotation": null,
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "main",
          "line_number": 132,
          "return_type": null,
          "docstring": "主函数",
          "is_async": false,
          "decorators": [],
          "body_lines": 36,
          "complexity": 3,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "db_manager/test_database_menu.py",
      "module_name": "db_manager.test_database_menu",
      "category": "infrastructure",
      "docstring": "数据库测试工具 - 交互式菜单版本\n整合了路径查找、配置检查、连通性测试功能",
      "lines_of_code": 732,
      "blank_lines": 101,
      "comment_lines": 44,
      "last_modified": "2025-09-18T19:07:34.579377",
      "imports": [
        "os",
        "sys",
        "time",
        "typing",
        "dotenv"
      ],
      "classes": [
        {
          "name": "DatabaseTestTool",
          "line_number": 14,
          "base_classes": [],
          "docstring": "数据库测试工具类",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 17,
              "return_type": null,
              "docstring": "初始化测试工具",
              "is_async": false,
              "decorators": [],
              "body_lines": 13,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "find_env_file",
              "line_number": 32,
              "return_type": "bool",
              "docstring": "查找.env文件路径",
              "is_async": false,
              "decorators": [],
              "body_lines": 47,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "load_config",
              "line_number": 81,
              "return_type": "Dict[(str, Any)]",
              "docstring": "从环境变量加载数据库配置",
              "is_async": false,
              "decorators": [],
              "body_lines": 42,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_config_integrity",
              "line_number": 125,
              "return_type": "bool",
              "docstring": "测试数据库配置完整性",
              "is_async": false,
              "decorators": [],
              "body_lines": 48,
              "complexity": 9,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "check_database_drivers",
              "line_number": 175,
              "return_type": "bool",
              "docstring": "检查数据库驱动安装情况",
              "is_async": false,
              "decorators": [],
              "body_lines": 66,
              "complexity": 9,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_check_tdengine_drivers",
              "line_number": 243,
              "return_type": "list",
              "docstring": "检测 TDengine 的各种连接方式",
              "is_async": false,
              "decorators": [],
              "body_lines": 77,
              "complexity": 18,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_database_connectivity",
              "line_number": 322,
              "return_type": "bool",
              "docstring": "测试数据库连通性",
              "is_async": false,
              "decorators": [],
              "body_lines": 110,
              "complexity": 28,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_test_mysql_monitor_simple",
              "line_number": 434,
              "return_type": "bool",
              "docstring": "简化版MySQL监控数据库测试",
              "is_async": false,
              "decorators": [],
              "body_lines": 13,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "config",
                  "type_annotation": "Dict[(str, Any)]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "create_engine",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "text",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_test_mysql_simple",
              "line_number": 449,
              "return_type": "bool",
              "docstring": "简化版MySQL连接测试",
              "is_async": false,
              "decorators": [],
              "body_lines": 24,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "config",
                  "type_annotation": "Dict[(str, Any)]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "pymysql",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_test_redis_simple",
              "line_number": 475,
              "return_type": "bool",
              "docstring": "简化版Redis连接测试",
              "is_async": false,
              "decorators": [],
              "body_lines": 22,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "config",
                  "type_annotation": "Dict[(str, Any)]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "redis_lib",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_test_tdengine_multi",
              "line_number": 499,
              "return_type": "bool",
              "docstring": "多种连接方式测试TDengine，只要有一种成功即可",
              "is_async": false,
              "decorators": [],
              "body_lines": 48,
              "complexity": 12,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "config",
                  "type_annotation": "Dict[(str, Any)]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "methods",
                  "type_annotation": "Dict[(str, Any)]",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_test_tdengine_websocket",
              "line_number": 549,
              "return_type": "bool",
              "docstring": "测试TDengine WebSocket连接",
              "is_async": false,
              "decorators": [],
              "body_lines": 18,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "config",
                  "type_annotation": "Dict[(str, Any)]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "taosws",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_test_tdengine_rest",
              "line_number": 569,
              "return_type": "bool",
              "docstring": "测试TDengine REST连接",
              "is_async": false,
              "decorators": [],
              "body_lines": 23,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "config",
                  "type_annotation": "Dict[(str, Any)]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "taosrest",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_test_tdengine_native",
              "line_number": 594,
              "return_type": "bool",
              "docstring": "测试TDengine原生连接",
              "is_async": false,
              "decorators": [],
              "body_lines": 23,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "config",
                  "type_annotation": "Dict[(str, Any)]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "taos",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_print_config_summary",
              "line_number": 619,
              "return_type": "None",
              "docstring": "打印配置测试总结",
              "is_async": false,
              "decorators": [],
              "body_lines": 20,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "successful",
                  "type_annotation": "int",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "run_all_tests",
              "line_number": 641,
              "return_type": "None",
              "docstring": "运行所有测试",
              "is_async": false,
              "decorators": [],
              "body_lines": 30,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": [
        {
          "name": "show_menu",
          "line_number": 673,
          "return_type": null,
          "docstring": "显示主菜单",
          "is_async": false,
          "decorators": [],
          "body_lines": 13,
          "complexity": 1,
          "parameters": []
        },
        {
          "name": "main",
          "line_number": 688,
          "return_type": null,
          "docstring": "主函数",
          "is_async": false,
          "decorators": [],
          "body_lines": 41,
          "complexity": 9,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "db_manager/connection_manager.py",
      "module_name": "db_manager.connection_manager",
      "category": "infrastructure",
      "docstring": "数据库连接管理器\n\n管理4种数据库(TDengine/PostgreSQL/MySQL/Redis)的连接池和连接生命周期。\n所有连接参数从环境变量读取,确保安全性。\n\n创建日期: 2025-10-11\n版本: 1.0.0",
      "lines_of_code": 330,
      "blank_lines": 64,
      "comment_lines": 14,
      "last_modified": "2025-10-11T21:42:40.817589",
      "imports": [
        "os",
        "typing",
        "dotenv"
      ],
      "classes": [
        {
          "name": "DatabaseConnectionManager",
          "line_number": 19,
          "base_classes": [],
          "docstring": "数据库连接管理器基础类\n\n管理4种数据库的连接池,提供统一的连接获取接口",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 26,
              "return_type": null,
              "docstring": "初始化连接管理器,验证必需的环境变量",
              "is_async": false,
              "decorators": [],
              "body_lines": 3,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_validate_env_variables",
              "line_number": 31,
              "return_type": null,
              "docstring": "验证必需的环境变量是否存在",
              "is_async": false,
              "decorators": [],
              "body_lines": 32,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_tdengine_connection",
              "line_number": 65,
              "return_type": null,
              "docstring": "获取TDengine WebSocket连接\n\nReturns:\n    TDengine连接对象\n\nRaises:\n    ConnectionError: 连接失败",
              "is_async": false,
              "decorators": [],
              "body_lines": 37,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_postgresql_connection",
              "line_number": 104,
              "return_type": null,
              "docstring": "获取PostgreSQL连接池\n\nReturns:\n    PostgreSQL连接对象\n\nRaises:\n    ConnectionError: 连接失败",
              "is_async": false,
              "decorators": [],
              "body_lines": 36,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_return_postgresql_connection",
              "line_number": 142,
              "return_type": null,
              "docstring": "归还PostgreSQL连接到连接池\n\nArgs:\n    conn: PostgreSQL连接对象",
              "is_async": false,
              "decorators": [],
              "body_lines": 8,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "conn",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_mysql_connection",
              "line_number": 152,
              "return_type": null,
              "docstring": "获取MySQL连接池\n\nReturns:\n    MySQL连接池对象\n\nRaises:\n    ConnectionError: 连接失败",
              "is_async": false,
              "decorators": [],
              "body_lines": 36,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_redis_connection",
              "line_number": 190,
              "return_type": null,
              "docstring": "获取Redis连接池\n\n使用1号数据库(避开0号,已被PAPERLESS占用)\n\nReturns:\n    Redis连接对象\n\nRaises:\n    ConnectionError: 连接失败",
              "is_async": false,
              "decorators": [],
              "body_lines": 43,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "close_all_connections",
              "line_number": 235,
              "return_type": null,
              "docstring": "关闭所有数据库连接",
              "is_async": false,
              "decorators": [],
              "body_lines": 15,
              "complexity": 7,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_all_connections",
              "line_number": 252,
              "return_type": "Dict[(str, bool)]",
              "docstring": "测试所有数据库连接\n\nReturns:\n    dict: 每个数据库的连接状态 {'tdengine': True, 'postgresql': True, ...}",
              "is_async": false,
              "decorators": [],
              "body_lines": 45,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": [
        {
          "name": "get_connection_manager",
          "line_number": 304,
          "return_type": "DatabaseConnectionManager",
          "docstring": "获取全局连接管理器实例 (单例模式)",
          "is_async": false,
          "decorators": [],
          "body_lines": 5,
          "complexity": 2,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "db_manager/execute_example_mysql_only.py",
      "module_name": "db_manager.execute_example_mysql_only",
      "category": "infrastructure",
      "docstring": null,
      "lines_of_code": 97,
      "blank_lines": 13,
      "comment_lines": 12,
      "last_modified": "2025-09-18T19:07:34.580378",
      "imports": [
        "database_manager",
        "os",
        "dotenv",
        "db_utils"
      ],
      "classes": [],
      "functions": []
    },
    {
      "file_path": "db_manager/test_simple.py",
      "module_name": "db_manager.test_simple",
      "category": "infrastructure",
      "docstring": "简化的数据库连接测试脚本\n用于验证TDengine导入问题是否已解决",
      "lines_of_code": 92,
      "blank_lines": 16,
      "comment_lines": 10,
      "last_modified": "2025-09-18T19:07:34.584380",
      "imports": [
        "logging"
      ],
      "classes": [],
      "functions": [
        {
          "name": "test_taos_import",
          "line_number": 14,
          "return_type": null,
          "docstring": "测试TDengine导入",
          "is_async": false,
          "decorators": [],
          "body_lines": 14,
          "complexity": 3,
          "parameters": []
        },
        {
          "name": "test_other_databases",
          "line_number": 30,
          "return_type": null,
          "docstring": "测试其他数据库库的导入",
          "is_async": false,
          "decorators": [],
          "body_lines": 23,
          "complexity": 4,
          "parameters": []
        },
        {
          "name": "test_conditional_import",
          "line_number": 55,
          "return_type": null,
          "docstring": "测试条件导入机制",
          "is_async": false,
          "decorators": [],
          "body_lines": 14,
          "complexity": 2,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "db_manager/init_db_monitor.py",
      "module_name": "db_manager.init_db_monitor",
      "category": "infrastructure",
      "docstring": null,
      "lines_of_code": 448,
      "blank_lines": 74,
      "comment_lines": 44,
      "last_modified": "2025-09-24T15:47:59.594533",
      "imports": [
        "sqlalchemy",
        "sqlalchemy",
        "sqlalchemy.exc",
        "argparse",
        "os",
        "time",
        "loguru"
      ],
      "classes": [],
      "functions": [
        {
          "name": "find_env_file",
          "line_number": 28,
          "return_type": null,
          "docstring": "智能查找环境变量文件，支持多种工作目录\n\nArgs:\n    default_path (str): 默认相对路径\n    \nReturns:\n    str: 找到的环境文件绝对路径\n    \nRaises:\n    FileNotFoundError: 如果所有路径都找不到文件",
          "is_async": false,
          "decorators": [],
          "body_lines": 70,
          "complexity": 4,
          "parameters": [
            {
              "name": "default_path",
              "type_annotation": null,
              "default_value": "\"mystocks/.env\"",
              "is_required": false
            }
          ]
        },
        {
          "name": "load_env_config",
          "line_number": 100,
          "return_type": null,
          "docstring": "从环境变量文件加载配置",
          "is_async": false,
          "decorators": [],
          "body_lines": 64,
          "complexity": 9,
          "parameters": [
            {
              "name": "env_file",
              "type_annotation": null,
              "default_value": "None",
              "is_required": false
            }
          ]
        },
        {
          "name": "get_sql_commands",
          "line_number": 166,
          "return_type": null,
          "docstring": "生成SQL命令，支持删除已有表选项",
          "is_async": false,
          "decorators": [],
          "body_lines": 87,
          "complexity": 2,
          "parameters": [
            {
              "name": "drop_existing",
              "type_annotation": null,
              "default_value": "False",
              "is_required": false
            },
            {
              "name": "charset",
              "type_annotation": null,
              "default_value": "\"utf8mb4\"",
              "is_required": false
            },
            {
              "name": "collation",
              "type_annotation": null,
              "default_value": "\"utf8mb4_unicode_ci\"",
              "is_required": false
            }
          ]
        },
        {
          "name": "create_database_and_tables",
          "line_number": 255,
          "return_type": null,
          "docstring": "创建数据库和表结构",
          "is_async": false,
          "decorators": [],
          "body_lines": 100,
          "complexity": 12,
          "parameters": [
            {
              "name": "drop_existing",
              "type_annotation": null,
              "default_value": "False",
              "is_required": false
            }
          ]
        },
        {
          "name": "init_monitoring_database",
          "line_number": 357,
          "return_type": null,
          "docstring": "初始化监控数据库（专用于 Jupyter 环境调用）\n\nArgs:\n    drop_existing (bool): 是否删除已存在的表\n\nReturns:\n    bool: 初始化是否成功\n\nExamples:\n    # 在 Jupyter 中使用\n    success = init_monitoring_database()\n    \n    # 删除已存在的表并重建\n    success = init_monitoring_database(drop_existing=True)",
          "is_async": false,
          "decorators": [],
          "body_lines": 35,
          "complexity": 2,
          "parameters": [
            {
              "name": "drop_existing",
              "type_annotation": null,
              "default_value": "False",
              "is_required": false
            }
          ]
        },
        {
          "name": "extract_table_name",
          "line_number": 394,
          "return_type": null,
          "docstring": "从 CREATE TABLE 命令中提取表名",
          "is_async": false,
          "decorators": [],
          "body_lines": 9,
          "complexity": 2,
          "parameters": [
            {
              "name": "sql_cmd",
              "type_annotation": null,
              "default_value": null,
              "is_required": true
            }
          ]
        }
      ]
    },
    {
      "file_path": "db_manager/__init__.py",
      "module_name": "db_manager.__init__",
      "category": "infrastructure",
      "docstring": null,
      "lines_of_code": 1,
      "blank_lines": 1,
      "comment_lines": 0,
      "last_modified": "2025-10-12T15:25:29.888054",
      "imports": [],
      "classes": [],
      "functions": []
    },
    {
      "file_path": "db_manager/save_realtime_market_data_offline.py",
      "module_name": "db_manager.save_realtime_market_data_offline",
      "category": "auxiliary",
      "docstring": "沪深市场A股实时数据保存系统 - 离线版\n完全离线运行，只需要efinance库，数据保存到CSV文件\n\n功能特点：\n1. 从efinance获取沪深A股实时数据\n2. 保存到CSV文件（带时间戳）\n3. 自动创建备份目录\n4. 支持强制更新\n5. 无需任何数据库依赖\n\n适用场景：\n- 快速测试和验证\n- 数据收集和备份\n- 开发环境测试\n- 离线数据分析\n\n作者: MyStocks项目组\n日期: 2025-09-21\n版本: 离线版 v1.0",
      "lines_of_code": 415,
      "blank_lines": 84,
      "comment_lines": 35,
      "last_modified": "2025-09-22T00:13:45.509854",
      "imports": [
        "os",
        "sys",
        "logging",
        "argparse",
        "pandas",
        "json",
        "datetime",
        "typing"
      ],
      "classes": [
        {
          "name": "OfflineRealtimeDataSaver",
          "line_number": 34,
          "base_classes": [],
          "docstring": "离线版实时数据保存器 - 只使用CSV文件",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 37,
              "return_type": null,
              "docstring": "初始化离线版数据保存器",
              "is_async": false,
              "decorators": [],
              "body_lines": 14,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_setup_logging",
              "line_number": 53,
              "return_type": null,
              "docstring": "配置日志系统",
              "is_async": false,
              "decorators": [],
              "body_lines": 11,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_create_backup_directory",
              "line_number": 66,
              "return_type": null,
              "docstring": "创建备份目录",
              "is_async": false,
              "decorators": [],
              "body_lines": 8,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "check_dependencies",
              "line_number": 76,
              "return_type": "bool",
              "docstring": "检查依赖库",
              "is_async": false,
              "decorators": [],
              "body_lines": 28,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_realtime_market_data",
              "line_number": 106,
              "return_type": "Optional[pd.DataFrame]",
              "docstring": "获取实时市场数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 44,
              "complexity": 10,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "market_symbol",
                  "type_annotation": "str",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "_validate_data",
              "line_number": 152,
              "return_type": null,
              "docstring": "验证数据质量",
              "is_async": false,
              "decorators": [],
              "body_lines": 35,
              "complexity": 7,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "save_to_csv",
              "line_number": 189,
              "return_type": "str",
              "docstring": "保存数据到CSV文件",
              "is_async": false,
              "decorators": [],
              "body_lines": 20,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "market_symbol",
                  "type_annotation": "str",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "save_to_json",
              "line_number": 211,
              "return_type": "str",
              "docstring": "保存数据到JSON文件",
              "is_async": false,
              "decorators": [],
              "body_lines": 29,
              "complexity": 6,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "market_symbol",
                  "type_annotation": "str",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "save_to_excel",
              "line_number": 242,
              "return_type": "str",
              "docstring": "保存数据到Excel文件",
              "is_async": false,
              "decorators": [],
              "body_lines": 23,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "market_symbol",
                  "type_annotation": "str",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "create_summary_report",
              "line_number": 267,
              "return_type": null,
              "docstring": "创建汇总报告",
              "is_async": false,
              "decorators": [],
              "body_lines": 36,
              "complexity": 7,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "saved_files",
                  "type_annotation": "list",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "run",
              "line_number": 305,
              "return_type": "bool",
              "docstring": "运行完整流程",
              "is_async": false,
              "decorators": [],
              "body_lines": 69,
              "complexity": 9,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "market_symbol",
                  "type_annotation": "str",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "force_update",
                  "type_annotation": "bool",
                  "default_value": "False",
                  "is_required": false
                }
              ]
            }
          ]
        }
      ],
      "functions": [
        {
          "name": "main",
          "line_number": 376,
          "return_type": null,
          "docstring": "主函数",
          "is_async": false,
          "decorators": [],
          "body_lines": 36,
          "complexity": 1,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "db_manager/fixed_example.py",
      "module_name": "db_manager.fixed_example",
      "category": "infrastructure",
      "docstring": "修复后的数据库管理示例\n只使用可用的数据库库进行测试",
      "lines_of_code": 107,
      "blank_lines": 24,
      "comment_lines": 8,
      "last_modified": "2025-09-18T19:07:34.581380",
      "imports": [
        "os",
        "logging"
      ],
      "classes": [],
      "functions": [
        {
          "name": "test_database_manager_import",
          "line_number": 15,
          "return_type": null,
          "docstring": "测试DatabaseTableManager导入",
          "is_async": false,
          "decorators": [],
          "body_lines": 10,
          "complexity": 2,
          "parameters": []
        },
        {
          "name": "create_simple_mysql_example",
          "line_number": 27,
          "return_type": null,
          "docstring": "创建简单的MySQL示例（仅生成DDL，不连接数据库）",
          "is_async": false,
          "decorators": [],
          "body_lines": 21,
          "complexity": 2,
          "parameters": []
        },
        {
          "name": "test_yaml_config_loading",
          "line_number": 50,
          "return_type": null,
          "docstring": "测试YAML配置文件加载",
          "is_async": false,
          "decorators": [],
          "body_lines": 23,
          "complexity": 4,
          "parameters": []
        },
        {
          "name": "main",
          "line_number": 75,
          "return_type": null,
          "docstring": null,
          "is_async": false,
          "decorators": [],
          "body_lines": 29,
          "complexity": 2,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "db_manager/db_utils.py",
      "module_name": "db_manager.db_utils",
      "category": "infrastructure",
      "docstring": "安全的数据库管理工具函数\n避免在代码中硬编码敏感信息，统一从环境变量读取",
      "lines_of_code": 147,
      "blank_lines": 26,
      "comment_lines": 10,
      "last_modified": "2025-09-18T19:07:34.579377",
      "imports": [
        "os",
        "pymysql",
        "dotenv"
      ],
      "classes": [],
      "functions": [
        {
          "name": "create_databases_safely",
          "line_number": 10,
          "return_type": null,
          "docstring": "安全地创建所需的数据库\n所有连接参数从环境变量中读取",
          "is_async": false,
          "decorators": [],
          "body_lines": 60,
          "complexity": 7,
          "parameters": []
        },
        {
          "name": "get_database_config",
          "line_number": 73,
          "return_type": null,
          "docstring": "安全地获取数据库配置\n:param db_type: 数据库类型 ('mysql', 'postgresql', 'tdengine', 'redis', 'mariadb')\n:return: 数据库配置字典或None",
          "is_async": false,
          "decorators": [],
          "body_lines": 58,
          "complexity": 4,
          "parameters": [
            {
              "name": "db_type",
              "type_annotation": null,
              "default_value": null,
              "is_required": true
            }
          ]
        }
      ]
    },
    {
      "file_path": "db_manager/df2sql.py",
      "module_name": "db_manager.df2sql",
      "category": "infrastructure",
      "docstring": "Created on Mon May 15 10:01:46 2023\n@author: CHENGJUN\nupdate: 2025-09-12\n\n功能介绍：这是用来把dataframe保存到mysql的必备转化工具，可根据dataframe生成SQL建表命令\n          这个版本是更新过的，它支持设置primary_key和字符集utf8mb4\n          \n修改日期：2025-09-12\n修改内容：增加了对大整数的支持，自动选择INT或BIGINT类型",
      "lines_of_code": 66,
      "blank_lines": 10,
      "comment_lines": 8,
      "last_modified": "2025-09-21T00:04:16.617070",
      "imports": [
        "pandas",
        "sqlalchemy",
        "pymysql"
      ],
      "classes": [],
      "functions": [
        {
          "name": "create_sql_cmd",
          "line_number": 18,
          "return_type": null,
          "docstring": null,
          "is_async": false,
          "decorators": [],
          "body_lines": 47,
          "complexity": 14,
          "parameters": [
            {
              "name": "df",
              "type_annotation": null,
              "default_value": null,
              "is_required": true
            },
            {
              "name": "table_name",
              "type_annotation": null,
              "default_value": null,
              "is_required": true
            },
            {
              "name": "primary_key",
              "type_annotation": null,
              "default_value": "None",
              "is_required": false
            }
          ]
        }
      ]
    },
    {
      "file_path": "db_manager/redis_data_fixation.py",
      "module_name": "db_manager.redis_data_fixation",
      "category": "infrastructure",
      "docstring": "Redis热数据固化和强制更新扩展模块\n解决Redis 5分钟过期数据的持久化和强制刷新问题\n\n功能特性：\n1. 自动固化Redis热数据到永久存储\n2. 支持强制更新（跳过缓存）\n3. 数据备份和恢复机制\n4. 灵活的固化策略配置\n\n作者: MyStocks项目组\n日期: 2025-09-21",
      "lines_of_code": 347,
      "blank_lines": 73,
      "comment_lines": 33,
      "last_modified": "2025-09-24T15:33:07.280403",
      "imports": [
        "os",
        "sys",
        "time",
        "logging",
        "pandas",
        "datetime",
        "typing",
        "enum",
        "core",
        "unified_manager"
      ],
      "classes": [
        {
          "name": "FixationStrategy",
          "line_number": 32,
          "base_classes": [
            "Enum"
          ],
          "docstring": "数据固化策略",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "RedisDataFixationManager",
          "line_number": 39,
          "base_classes": [],
          "docstring": "Redis热数据固化管理器",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 42,
              "return_type": null,
              "docstring": "初始化Redis数据固化管理器\n\nArgs:\n    unified_manager: 统一管理器实例",
              "is_async": false,
              "decorators": [],
              "body_lines": 21,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "unified_manager",
                  "type_annotation": "MyStocksUnifiedManager",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "force_update_realtime_data",
              "line_number": 65,
              "return_type": "Dict[(str, Any)]",
              "docstring": "强制更新实时数据（不读缓存）\n\nArgs:\n    market_symbol: 市场代码 ('hs', 'sh', 'sz')\n    bypass_cache: 是否跳过Redis缓存\n    \nReturns:\n    Dict: 操作结果和数据统计",
              "is_async": false,
              "decorators": [],
              "body_lines": 59,
              "complexity": 6,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "market_symbol",
                  "type_annotation": "str",
                  "default_value": "\"hs\"",
                  "is_required": false
                },
                {
                  "name": "bypass_cache",
                  "type_annotation": "bool",
                  "default_value": "True",
                  "is_required": false
                }
              ]
            },
            {
              "name": "_clear_redis_cache",
              "line_number": 127,
              "return_type": "bool",
              "docstring": "清除Redis缓存\n\nArgs:\n    market_symbol: 市场代码\n    \nReturns:\n    bool: 清除是否成功",
              "is_async": false,
              "decorators": [],
              "body_lines": 27,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "market_symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "fixate_redis_data_immediate",
              "line_number": 156,
              "return_type": "Dict[(str, bool)]",
              "docstring": "立即固化Redis数据到永久存储\n\nArgs:\n    data: 要固化的数据\n    \nReturns:\n    Dict[str, bool]: 固化结果",
              "is_async": false,
              "decorators": [],
              "body_lines": 71,
              "complexity": 10,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_aggregate_to_daily_format",
              "line_number": 229,
              "return_type": "Optional[pd.DataFrame]",
              "docstring": "将实时数据聚合为日线格式\n\nArgs:\n    realtime_data: 实时数据\n    \nReturns:\n    Optional[pd.DataFrame]: 聚合后的日线数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 45,
              "complexity": 6,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "realtime_data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "start_scheduled_fixation",
              "line_number": 276,
              "return_type": null,
              "docstring": "启动定时固化任务\n\nArgs:\n    interval_seconds: 固化间隔（秒）",
              "is_async": false,
              "decorators": [],
              "body_lines": 13,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "interval_seconds",
                  "type_annotation": "int",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "get_fixation_statistics",
              "line_number": 291,
              "return_type": "Dict[(str, Any)]",
              "docstring": "获取固化统计信息\n\nReturns:\n    Dict: 统计信息",
              "is_async": false,
              "decorators": [],
              "body_lines": 26,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": [
        {
          "name": "main",
          "line_number": 319,
          "return_type": null,
          "docstring": "演示Redis热数据固化和强制更新功能",
          "is_async": false,
          "decorators": [],
          "body_lines": 25,
          "complexity": 1,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "db_manager/security_check.py",
      "module_name": "db_manager.security_check",
      "category": "infrastructure",
      "docstring": "数据库安全检查脚本\n检查代码中是否存在硬编码的敏感信息",
      "lines_of_code": 202,
      "blank_lines": 39,
      "comment_lines": 17,
      "last_modified": "2025-09-18T19:07:34.582378",
      "imports": [
        "os",
        "re",
        "glob",
        "typing"
      ],
      "classes": [
        {
          "name": "SecurityChecker",
          "line_number": 12,
          "base_classes": [],
          "docstring": "数据库安全检查器",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 15,
              "return_type": null,
              "docstring": null,
              "is_async": false,
              "decorators": [],
              "body_lines": 37,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "project_root",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "is_excluded_file",
              "line_number": 54,
              "return_type": "bool",
              "docstring": "检查文件是否应该被排除",
              "is_async": false,
              "decorators": [],
              "body_lines": 5,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "file_path",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "is_safe_line",
              "line_number": 61,
              "return_type": "bool",
              "docstring": "检查是否是安全的代码行",
              "is_async": false,
              "decorators": [],
              "body_lines": 5,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "line",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "scan_file",
              "line_number": 68,
              "return_type": "List[Dict]",
              "docstring": "扫描单个文件",
              "is_async": false,
              "decorators": [],
              "body_lines": 39,
              "complexity": 10,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "file_path",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "scan_directory",
              "line_number": 109,
              "return_type": "List[Dict]",
              "docstring": "扫描目录中的所有Python文件",
              "is_async": false,
              "decorators": [],
              "body_lines": 24,
              "complexity": 7,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "directory",
                  "type_annotation": "str",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "generate_report",
              "line_number": 135,
              "return_type": "str",
              "docstring": "生成安全检查报告",
              "is_async": false,
              "decorators": [],
              "body_lines": 33,
              "complexity": 6,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "issues",
                  "type_annotation": "List[Dict]",
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": [
        {
          "name": "main",
          "line_number": 171,
          "return_type": null,
          "docstring": "主函数",
          "is_async": false,
          "decorators": [],
          "body_lines": 26,
          "complexity": 1,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "db_manager/save_realtime_market_data.py",
      "module_name": "db_manager.save_realtime_market_data",
      "category": "infrastructure",
      "docstring": "沪深市场A股实时数据保存系统 - efinance版本\n严格按照MyStocks系统的统一接口规范和数据分类策略实现\n\n核心设计理念：\n1. 使用efinance的ef.stock.get_realtime_quotes()获取沪深A股实时数据\n2. 使用统一管理器 (MyStocksUnifiedManager) - 隐藏底层数据库差异\n3. 正确的数据分类 - 实时行情数据保存为REALTIME_POSITIONS (Redis) + DAILY_KLINE (PostgreSQL)\n4. 自动路由保存 - 系统自动选择最优数据库存储\n5. 完整监控集成 - 所有操作自动记录到监控数据库\n\n数据分类策略：\n- ef.stock.get_realtime_quotes() 获取的实时行情快照：\n  * REALTIME_POSITIONS → Redis (热数据，快速访问)\n  * DAILY_KLINE → PostgreSQL+TimescaleDB (持久化存储，分析查询)\n- 双重保存确保数据的实时性和持久性\n\n作者: MyStocks项目组\n日期: 2025-09-23\n修正: 使用efinance接口并保存到PostgreSQL",
      "lines_of_code": 597,
      "blank_lines": 116,
      "comment_lines": 63,
      "last_modified": "2025-09-23T19:45:19.658553",
      "imports": [
        "os",
        "sys",
        "logging",
        "argparse",
        "pandas",
        "datetime",
        "typing",
        "dotenv",
        "unified_manager",
        "core",
        "adapters.customer_adapter"
      ],
      "classes": [
        {
          "name": "RealtimeMarketDataSaver",
          "line_number": 42,
          "base_classes": [],
          "docstring": "沪深市场A股实时数据保存器 - 按照MyStocks统一接口规范实现",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 45,
              "return_type": null,
              "docstring": "初始化数据保存器",
              "is_async": false,
              "decorators": [],
              "body_lines": 10,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "config_file",
                  "type_annotation": "str",
                  "default_value": "\"realtime_market_config.env\"",
                  "is_required": false
                }
              ]
            },
            {
              "name": "_setup_logging",
              "line_number": 57,
              "return_type": null,
              "docstring": "配置日志系统",
              "is_async": false,
              "decorators": [],
              "body_lines": 14,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_load_config",
              "line_number": 73,
              "return_type": null,
              "docstring": "加载配置参数",
              "is_async": false,
              "decorators": [],
              "body_lines": 44,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "initialize_unified_manager",
              "line_number": 119,
              "return_type": "bool",
              "docstring": "初始化MyStocks统一管理器",
              "is_async": false,
              "decorators": [],
              "body_lines": 30,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "initialize_data_source",
              "line_number": 151,
              "return_type": "bool",
              "docstring": "初始化数据源适配器",
              "is_async": false,
              "decorators": [],
              "body_lines": 16,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_realtime_market_data",
              "line_number": 169,
              "return_type": "Optional[pd.DataFrame]",
              "docstring": "使用efinance获取沪深市场A股实时数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 39,
              "complexity": 8,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_validate_market_data",
              "line_number": 210,
              "return_type": "bool",
              "docstring": "验证市场数据的基本结构",
              "is_async": false,
              "decorators": [],
              "body_lines": 25,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "save_data_using_unified_interface",
              "line_number": 237,
              "return_type": "Dict[(str, bool)]",
              "docstring": "使用MyStocks统一接口保存数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 91,
              "complexity": 15,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_prepare_daily_data",
              "line_number": 330,
              "return_type": "Optional[pd.DataFrame]",
              "docstring": "将实时市场数据转换为日线数据格式（用于PostgreSQL存储）",
              "is_async": false,
              "decorators": [],
              "body_lines": 81,
              "complexity": 15,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "market_data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_prepare_tick_data",
              "line_number": 413,
              "return_type": "Optional[pd.DataFrame]",
              "docstring": "将市场数据转换为Tick数据格式（用于TDengine存储）",
              "is_async": false,
              "decorators": [],
              "body_lines": 48,
              "complexity": 10,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "market_data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "run",
              "line_number": 463,
              "return_type": "bool",
              "docstring": "执行完整的数据获取和保存流程",
              "is_async": false,
              "decorators": [],
              "body_lines": 73,
              "complexity": 14,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": [
        {
          "name": "main",
          "line_number": 538,
          "return_type": null,
          "docstring": "主函数",
          "is_async": false,
          "decorators": [],
          "body_lines": 56,
          "complexity": 8,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "db_manager/test_multi_directory.py",
      "module_name": "db_manager.test_multi_directory",
      "category": "infrastructure",
      "docstring": "模拟不同工作目录下运行的测试",
      "lines_of_code": 80,
      "blank_lines": 15,
      "comment_lines": 7,
      "last_modified": "2025-09-18T19:07:34.586377",
      "imports": [
        "os",
        "sys"
      ],
      "classes": [],
      "functions": [
        {
          "name": "test_from_directory",
          "line_number": 18,
          "return_type": null,
          "docstring": "从指定目录测试初始化",
          "is_async": false,
          "decorators": [],
          "body_lines": 31,
          "complexity": 3,
          "parameters": [
            {
              "name": "test_dir",
              "type_annotation": null,
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "main",
          "line_number": 51,
          "return_type": null,
          "docstring": "主测试函数",
          "is_async": false,
          "decorators": [],
          "body_lines": 26,
          "complexity": 5,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "core/batch_failure_strategy.py",
      "module_name": "core.batch_failure_strategy",
      "category": "auxiliary",
      "docstring": "批量操作失败策略\n\n定义批量数据操作失败时的三种处理策略:\n1. ROLLBACK - 回滚整个批次\n2. CONTINUE - 跳过失败记录,继续处理\n3. RETRY - 自动重试失败记录\n\n创建日期: 2025-10-11\n版本: 1.0.0",
      "lines_of_code": 395,
      "blank_lines": 70,
      "comment_lines": 13,
      "last_modified": "2025-10-11T15:50:47.294975",
      "imports": [
        "enum",
        "typing",
        "dataclasses",
        "pandas",
        "time",
        "datetime"
      ],
      "classes": [
        {
          "name": "BatchFailureStrategy",
          "line_number": 21,
          "base_classes": [
            "str",
            "Enum"
          ],
          "docstring": "批量操作失败策略枚举\n\n- ROLLBACK: 任何记录失败则回滚整个批次 (ACID语义)\n- CONTINUE: 跳过失败记录,继续处理剩余记录 (最大努力语义)\n- RETRY: 自动重试失败记录,使用指数退避 (最终一致性语义)",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "BatchOperationResult",
          "line_number": 41,
          "base_classes": [],
          "docstring": "批量操作结果\n\n记录批量操作的详细结果,包括成功/失败统计和错误详情",
          "decorators": [
            "dataclass"
          ],
          "is_abstract": false,
          "methods": [
            {
              "name": "__post_init__",
              "line_number": 75,
              "return_type": null,
              "docstring": null,
              "is_async": false,
              "decorators": [],
              "body_lines": 4,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "success_rate",
              "line_number": 82,
              "return_type": "float",
              "docstring": "成功率 (0.0-1.0)",
              "is_async": false,
              "decorators": [
                "property"
              ],
              "body_lines": 4,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "to_dict",
              "line_number": 88,
              "return_type": "Dict[(str, Any)]",
              "docstring": "转换为字典",
              "is_async": false,
              "decorators": [],
              "body_lines": 13,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        },
        {
          "name": "BatchFailureHandler",
          "line_number": 104,
          "base_classes": [],
          "docstring": "批量失败处理器\n\n提供三种失败策略的具体实现逻辑",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 111,
              "return_type": null,
              "docstring": "初始化失败处理器\n\nArgs:\n    strategy: 失败策略\n    max_retries: 最大重试次数 (仅RETRY策略)\n    retry_delay_base: 重试基础延迟(秒)\n    retry_delay_multiplier: 重试延迟倍数 (指数退避)",
              "is_async": false,
              "decorators": [],
              "body_lines": 13,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "strategy",
                  "type_annotation": "BatchFailureStrategy",
                  "default_value": "...",
                  "is_required": false
                },
                {
                  "name": "max_retries",
                  "type_annotation": "int",
                  "default_value": "3",
                  "is_required": false
                },
                {
                  "name": "retry_delay_base",
                  "type_annotation": "float",
                  "default_value": "1.0",
                  "is_required": false
                },
                {
                  "name": "retry_delay_multiplier",
                  "type_annotation": "float",
                  "default_value": "2.0",
                  "is_required": false
                }
              ]
            },
            {
              "name": "execute_batch",
              "line_number": 132,
              "return_type": "BatchOperationResult",
              "docstring": "执行批量操作 (根据策略处理失败)\n\nArgs:\n    data: 数据DataFrame\n    operation: 操作函数 (接收DataFrame,返回bool表示成功/失败)\n    operation_name: 操作名称 (用于日志)\n\nReturns:\n    批量操作结果\n\nExample:\n    handler = BatchFailureHandler(BatchFailureStrategy.RETRY)\n    result = handler.execute_batch(\n        df,\n        lambda batch: mysql_access.insert_dataframe('table', batch),\n        'insert_stock_data'\n    )\n    print(f\"成功率: {result.success_rate:.2%}\")",
              "is_async": false,
              "decorators": [],
              "body_lines": 37,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "operation",
                  "type_annotation": "Callable[(Any, bool)]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "operation_name",
                  "type_annotation": "str",
                  "default_value": "\"batch_operation\"",
                  "is_required": false
                }
              ]
            },
            {
              "name": "_execute_with_rollback",
              "line_number": 176,
              "return_type": "BatchOperationResult",
              "docstring": "ROLLBACK策略: 任何失败都回滚整个批次\n\n实现原理:\n1. 尝试执行整批操作\n2. 如果失败,回滚所有已完成的操作\n3. 返回失败结果",
              "is_async": false,
              "decorators": [],
              "body_lines": 46,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "operation",
                  "type_annotation": "Callable[(Any, bool)]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "operation_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_execute_with_continue",
              "line_number": 229,
              "return_type": "BatchOperationResult",
              "docstring": "CONTINUE策略: 逐条处理,跳过失败记录\n\n实现原理:\n1. 逐条执行操作\n2. 失败记录跳过,记录错误\n3. 继续处理剩余记录",
              "is_async": false,
              "decorators": [],
              "body_lines": 43,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "operation",
                  "type_annotation": "Callable[(Any, bool)]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "operation_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_execute_with_retry",
              "line_number": 279,
              "return_type": "BatchOperationResult",
              "docstring": "RETRY策略: 失败记录自动重试 (指数退避)\n\n实现原理:\n1. 首次批量执行\n2. 收集失败记录\n3. 使用指数退避重试失败记录\n4. 重复直到成功或达到最大重试次数",
              "is_async": false,
              "decorators": [],
              "body_lines": 65,
              "complexity": 9,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "operation",
                  "type_annotation": "Callable[(Any, bool)]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "operation_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": []
    },
    {
      "file_path": "core/data_storage_strategy.py",
      "module_name": "core.data_storage_strategy",
      "category": "auxiliary",
      "docstring": "数据存储策略\n\n实现23个数据分类到4种数据库的智能路由映射。\n基于数据特征(时序性、访问频率、存储周期)自动选择最优数据库。\n\n创建日期: 2025-10-11\n版本: 1.0.0",
      "lines_of_code": 274,
      "blank_lines": 54,
      "comment_lines": 15,
      "last_modified": "2025-10-11T15:33:18.169292",
      "imports": [
        "typing",
        "enum",
        "core.data_classification"
      ],
      "classes": [
        {
          "name": "DataStorageStrategy",
          "line_number": 17,
          "base_classes": [],
          "docstring": "数据存储策略\n\n根据数据分类的特征自动选择最优存储数据库:\n- 高频时序数据 → TDengine (极致压缩 + 高写入性能)\n- 历史分析数据 → PostgreSQL+TimescaleDB (复杂查询 + 自动分区)\n- 参考元数据 → MySQL/MariaDB (ACID + 复杂JOIN)\n- 实时热数据 → Redis (亚毫秒访问)",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "get_target_database",
              "line_number": 76,
              "return_type": "DatabaseTarget",
              "docstring": "根据数据分类获取目标数据库\n\nArgs:\n    classification: 数据分类枚举\n\nReturns:\n    目标数据库类型\n\nRaises:\n    ValueError: 未知的数据分类",
              "is_async": false,
              "decorators": [
                "classmethod"
              ],
              "body_lines": 19,
              "complexity": 2,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "classification",
                  "type_annotation": "DataClassification",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_classifications_by_database",
              "line_number": 98,
              "return_type": "List[DataClassification]",
              "docstring": "获取指定数据库负责的所有数据分类\n\nArgs:\n    database: 数据库类型\n\nReturns:\n    数据分类列表",
              "is_async": false,
              "decorators": [
                "classmethod"
              ],
              "body_lines": 14,
              "complexity": 1,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "database",
                  "type_annotation": "DatabaseTarget",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "validate_routing_completeness",
              "line_number": 115,
              "return_type": "bool",
              "docstring": "验证路由映射是否完整 (覆盖所有23个数据分类)\n\nReturns:\n    True: 路由完整\n    False: 存在未映射的分类",
              "is_async": false,
              "decorators": [
                "classmethod"
              ],
              "body_lines": 17,
              "complexity": 2,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_routing_statistics",
              "line_number": 135,
              "return_type": "Dict[(DatabaseTarget, int)]",
              "docstring": "获取路由分布统计\n\nReturns:\n    各数据库负责的数据分类数量",
              "is_async": false,
              "decorators": [
                "classmethod"
              ],
              "body_lines": 12,
              "complexity": 2,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "print_routing_map",
              "line_number": 150,
              "return_type": null,
              "docstring": "打印完整的路由映射表 (用于调试和文档)",
              "is_async": false,
              "decorators": [
                "classmethod"
              ],
              "body_lines": 20,
              "complexity": 4,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        },
        {
          "name": "DataStorageRules",
          "line_number": 173,
          "base_classes": [],
          "docstring": "数据存储规则\n\n定义各数据库的存储策略、保留周期、压缩策略等",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "get_retention_days",
              "line_number": 215,
              "return_type": "Optional[int]",
              "docstring": "获取数据保留天数\n\nArgs:\n    classification: 数据分类\n\nReturns:\n    保留天数 (None表示永久保留, 0表示无固定周期)",
              "is_async": false,
              "decorators": [
                "classmethod"
              ],
              "body_lines": 15,
              "complexity": 2,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "classification",
                  "type_annotation": "DataClassification",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_redis_ttl",
              "line_number": 233,
              "return_type": "Optional[int]",
              "docstring": "获取Redis缓存过期时间\n\nArgs:\n    classification: 数据分类\n\nReturns:\n    TTL秒数 (None表示不过期)",
              "is_async": false,
              "decorators": [
                "classmethod"
              ],
              "body_lines": 10,
              "complexity": 1,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "classification",
                  "type_annotation": "DataClassification",
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": []
    },
    {
      "file_path": "core/__init__.py",
      "module_name": "core.__init__",
      "category": "core",
      "docstring": null,
      "lines_of_code": 4,
      "blank_lines": 1,
      "comment_lines": 0,
      "last_modified": "2025-10-12T15:25:29.856286",
      "imports": [
        "data_classification",
        "data_storage_strategy"
      ],
      "classes": [],
      "functions": []
    },
    {
      "file_path": "core/config_driven_table_manager.py",
      "module_name": "core.config_driven_table_manager",
      "category": "infrastructure",
      "docstring": "配置驱动的表管理器\n\n根据table_config.yaml自动创建和管理数据库表结构,支持安全模式和版本管理。\n\n创建日期: 2025-10-11\n版本: 1.0.0",
      "lines_of_code": 584,
      "blank_lines": 109,
      "comment_lines": 38,
      "last_modified": "2025-10-11T20:09:27.151155",
      "imports": [
        "yaml",
        "os",
        "typing",
        "pathlib",
        "logging",
        "db_manager.connection_manager",
        "core.data_classification"
      ],
      "classes": [
        {
          "name": "ConfigDrivenTableManager",
          "line_number": 23,
          "base_classes": [],
          "docstring": "配置驱动的表管理器\n\n功能:\n1. 从YAML配置文件读取表结构定义\n2. 根据配置自动创建表 (TDengine Super Table, TimescaleDB Hypertable, MySQL表)\n3. 验证表结构与配置一致性\n4. 安全模式: 自动添加列,删除/修改需确认",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 34,
              "return_type": null,
              "docstring": "初始化配置驱动表管理器\n\nArgs:\n    config_path: 配置文件路径",
              "is_async": false,
              "decorators": [],
              "body_lines": 12,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "config_path",
                  "type_annotation": "str",
                  "default_value": "\"config/table_config.yaml\"",
                  "is_required": false
                }
              ]
            },
            {
              "name": "_load_config",
              "line_number": 48,
              "return_type": "Dict[(str, Any)]",
              "docstring": "加载并验证YAML配置文件",
              "is_async": false,
              "decorators": [],
              "body_lines": 19,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "initialize_all_tables",
              "line_number": 69,
              "return_type": "Dict[(str, Any)]",
              "docstring": "根据配置初始化所有表\n\nReturns:\n    结果字典: {\n        'tables_created': int,\n        'tables_skipped': int,\n        'errors': List[str]\n    }",
              "is_async": false,
              "decorators": [],
              "body_lines": 36,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_create_table",
              "line_number": 107,
              "return_type": "bool",
              "docstring": "创建单个表\n\nArgs:\n    table_def: 表定义字典\n\nReturns:\n    True表示创建成功,False表示表已存在",
              "is_async": false,
              "decorators": [],
              "body_lines": 29,
              "complexity": 6,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_def",
                  "type_annotation": "Dict[(str, Any)]",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_table_exists",
              "line_number": 138,
              "return_type": "bool",
              "docstring": "检查表是否存在",
              "is_async": false,
              "decorators": [],
              "body_lines": 43,
              "complexity": 6,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "db_type",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "database_name",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "_create_tdengine_super_table",
              "line_number": 183,
              "return_type": "bool",
              "docstring": "创建TDengine Super Table",
              "is_async": false,
              "decorators": [],
              "body_lines": 53,
              "complexity": 7,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_def",
                  "type_annotation": "Dict[(str, Any)]",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_create_postgresql_table",
              "line_number": 238,
              "return_type": "bool",
              "docstring": "创建PostgreSQL表 (支持TimescaleDB)",
              "is_async": false,
              "decorators": [],
              "body_lines": 117,
              "complexity": 16,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_def",
                  "type_annotation": "Dict[(str, Any)]",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_create_mysql_table",
              "line_number": 357,
              "return_type": "bool",
              "docstring": "创建MySQL表",
              "is_async": false,
              "decorators": [],
              "body_lines": 88,
              "complexity": 17,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_def",
                  "type_annotation": "Dict[(str, Any)]",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "validate_all_table_structures",
              "line_number": 447,
              "return_type": "Dict[(str, Any)]",
              "docstring": "验证所有表结构与配置一致性\n\nReturns:\n    验证结果字典",
              "is_async": false,
              "decorators": [],
              "body_lines": 29,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_validate_table_structure",
              "line_number": 478,
              "return_type": "bool",
              "docstring": "验证单个表结构",
              "is_async": false,
              "decorators": [],
              "body_lines": 15,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_def",
                  "type_annotation": "Dict[(str, Any)]",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "safe_add_column",
              "line_number": 495,
              "return_type": "bool",
              "docstring": "安全模式: 自动添加列\n\nArgs:\n    table_name: 表名\n    column_def: 列定义字典\n\nReturns:\n    True表示添加成功",
              "is_async": false,
              "decorators": [],
              "body_lines": 17,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "column_def",
                  "type_annotation": "Dict[(str, Any)]",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "confirm_dangerous_operation",
              "line_number": 514,
              "return_type": "bool",
              "docstring": "确认危险操作 (删除列/修改列)\n\nArgs:\n    operation_type: 操作类型 (DELETE_COLUMN/MODIFY_COLUMN)\n    table_name: 表名\n    details: 操作详情\n\nReturns:\n    True表示用户确认执行",
              "is_async": false,
              "decorators": [],
              "body_lines": 16,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "operation_type",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "table_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "details",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_table_count_by_database",
              "line_number": 532,
              "return_type": "Dict[(str, int)]",
              "docstring": "获取每个数据库的表数量统计",
              "is_async": false,
              "decorators": [],
              "body_lines": 13,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_classification_mapping",
              "line_number": 547,
              "return_type": "Dict[(str, str)]",
              "docstring": "获取数据分类到表名的映射",
              "is_async": false,
              "decorators": [],
              "body_lines": 7,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": []
    },
    {
      "file_path": "core/data_classification.py",
      "module_name": "core.data_classification",
      "category": "core",
      "docstring": "数据分类枚举模块\n\n定义MyStocks系统的5层数据分类体系(23个子项)和数据库类型枚举。\n这是整个系统架构的基础,所有数据路由决策都基于这些枚举。\n\n创建日期: 2025-10-11\n版本: 1.0.0",
      "lines_of_code": 238,
      "blank_lines": 62,
      "comment_lines": 11,
      "last_modified": "2025-10-11T15:10:01.359165",
      "imports": [
        "enum",
        "typing"
      ],
      "classes": [
        {
          "name": "DataClassification",
          "line_number": 15,
          "base_classes": [
            "str",
            "Enum"
          ],
          "docstring": "数据分类枚举 - 23个子项完整定义\n\n基于宪法第I节: 5层数据分类体系 (不可协商)\n所有数据必须归属以下23个分类之一",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "get_all_classifications",
              "line_number": 141,
              "return_type": "List[str]",
              "docstring": "返回所有23个数据分类的列表",
              "is_async": false,
              "decorators": [
                "classmethod"
              ],
              "body_lines": 2,
              "complexity": 1,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_market_data_classifications",
              "line_number": 146,
              "return_type": "List[str]",
              "docstring": "返回市场数据分类 (6项)",
              "is_async": false,
              "decorators": [
                "classmethod"
              ],
              "body_lines": 9,
              "complexity": 1,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_reference_data_classifications",
              "line_number": 158,
              "return_type": "List[str]",
              "docstring": "返回参考数据分类 (9项)",
              "is_async": false,
              "decorators": [
                "classmethod"
              ],
              "body_lines": 12,
              "complexity": 1,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_derived_data_classifications",
              "line_number": 173,
              "return_type": "List[str]",
              "docstring": "返回衍生数据分类 (6项)",
              "is_async": false,
              "decorators": [
                "classmethod"
              ],
              "body_lines": 9,
              "complexity": 1,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_transaction_data_classifications",
              "line_number": 185,
              "return_type": "List[str]",
              "docstring": "返回交易数据分类 (7项)",
              "is_async": false,
              "decorators": [
                "classmethod"
              ],
              "body_lines": 10,
              "complexity": 1,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_metadata_classifications",
              "line_number": 198,
              "return_type": "List[str]",
              "docstring": "返回元数据分类 (6项)",
              "is_async": false,
              "decorators": [
                "classmethod"
              ],
              "body_lines": 9,
              "complexity": 1,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        },
        {
          "name": "DatabaseTarget",
          "line_number": 210,
          "base_classes": [
            "str",
            "Enum"
          ],
          "docstring": "数据库类型枚举\n\n定义系统支持的4种数据库类型,每种数据库针对特定数据特性优化",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "get_all_targets",
              "line_number": 230,
              "return_type": "List[str]",
              "docstring": "返回所有数据库类型列表",
              "is_async": false,
              "decorators": [
                "classmethod"
              ],
              "body_lines": 2,
              "complexity": 1,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": []
    },
    {
      "file_path": "core/config_loader.py",
      "module_name": "core.config_loader",
      "category": "infrastructure",
      "docstring": "YAML配置加载器\n\n使用PyYAML解析配置文件,Pydantic V2进行类型验证。\n支持环境变量替换。\n\n创建日期: 2025-10-11\n版本: 1.0.0",
      "lines_of_code": 42,
      "blank_lines": 12,
      "comment_lines": 0,
      "last_modified": "2025-10-11T15:12:51.672728",
      "imports": [
        "os",
        "yaml",
        "typing",
        "pydantic"
      ],
      "classes": [
        {
          "name": "ConfigLoader",
          "line_number": 17,
          "base_classes": [],
          "docstring": "YAML配置加载器",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "load_config",
              "line_number": 21,
              "return_type": "Dict[(str, Any)]",
              "docstring": "加载YAML配置文件\n\nArgs:\n    config_path: 配置文件路径\n    \nReturns:\n    解析后的配置字典\n    \nRaises:\n    FileNotFoundError: 配置文件不存在\n    yaml.YAMLError: YAML格式错误",
              "is_async": false,
              "decorators": [
                "staticmethod"
              ],
              "body_lines": 20,
              "complexity": 2,
              "parameters": [
                {
                  "name": "config_path",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": []
    },
    {
      "file_path": "config/__init__.py",
      "module_name": "config.__init__",
      "category": "infrastructure",
      "docstring": null,
      "lines_of_code": 1,
      "blank_lines": 1,
      "comment_lines": 0,
      "last_modified": "2025-10-18T19:52:06.811100",
      "imports": [],
      "classes": [],
      "functions": []
    },
    {
      "file_path": "indicators/tdx_functions.py",
      "module_name": "indicators.tdx_functions",
      "category": "unknown",
      "docstring": "TDX (Tongdaxin) 兼容技术指标函数库\n\n功能说明:\n- 提供与通达信公式兼容的技术指标函数\n- 使用NumPy向量化计算，性能优于pandas rolling\n- 支持多种技术分析指标 (MA, EMA, MACD, KDJ, RSI等)\n- 自动处理NaN值和边界条件\n\n作者: MyStocks量化交易团队\n创建时间: 2025-10-18\n版本: 1.0.0",
      "lines_of_code": 593,
      "blank_lines": 157,
      "comment_lines": 23,
      "last_modified": "2025-10-18T19:56:31.863640",
      "imports": [
        "numpy",
        "pandas",
        "typing"
      ],
      "classes": [],
      "functions": [
        {
          "name": "MA",
          "line_number": 20,
          "return_type": "np.ndarray",
          "docstring": "简单移动平均 (Simple Moving Average)\n\n参数:\n    data: 价格序列 (收盘价、成交量等)\n    period: 移动平均周期\n\n返回:\n    np.ndarray: 移动平均值序列 (前period-1个值为NaN)\n\n示例:\n    >>> close = np.array([10, 11, 12, 13, 14, 15])\n    >>> ma5 = MA(close, 5)\n    >>> print(ma5)\n    [nan nan nan nan 12. 13.]",
          "is_async": false,
          "decorators": [],
          "body_lines": 31,
          "complexity": 3,
          "parameters": [
            {
              "name": "data",
              "type_annotation": "Union[(np.ndarray, pd.Series)]",
              "default_value": null,
              "is_required": true
            },
            {
              "name": "period",
              "type_annotation": "int",
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "SMA",
          "line_number": 54,
          "return_type": "np.ndarray",
          "docstring": "平滑移动平均 (Smoothed Moving Average)\n\nTDX公式: SMA(X, N, M) = (M*X + (N-M)*Y) / N\n其中Y为上一周期SMA值\n\n参数:\n    data: 价格序列\n    period: 平滑周期\n    weight: 权重系数 (默认1.0)\n\n返回:\n    np.ndarray: 平滑移动平均值序列\n\n示例:\n    >>> close = np.array([10, 11, 12, 13, 14, 15])\n    >>> sma5 = SMA(close, 5, 1)",
          "is_async": false,
          "decorators": [],
          "body_lines": 33,
          "complexity": 3,
          "parameters": [
            {
              "name": "data",
              "type_annotation": "Union[(np.ndarray, pd.Series)]",
              "default_value": null,
              "is_required": true
            },
            {
              "name": "period",
              "type_annotation": "int",
              "default_value": null,
              "is_required": true
            },
            {
              "name": "weight",
              "type_annotation": "float",
              "default_value": "1.0",
              "is_required": false
            }
          ]
        },
        {
          "name": "EMA",
          "line_number": 90,
          "return_type": "np.ndarray",
          "docstring": "指数移动平均 (Exponential Moving Average)\n\n参数:\n    data: 价格序列\n    period: EMA周期\n\n返回:\n    np.ndarray: 指数移动平均值序列\n\n示例:\n    >>> close = np.array([10, 11, 12, 13, 14, 15])\n    >>> ema5 = EMA(close, 5)",
          "is_async": false,
          "decorators": [],
          "body_lines": 28,
          "complexity": 3,
          "parameters": [
            {
              "name": "data",
              "type_annotation": "Union[(np.ndarray, pd.Series)]",
              "default_value": null,
              "is_required": true
            },
            {
              "name": "period",
              "type_annotation": "int",
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "CROSS",
          "line_number": 121,
          "return_type": "np.ndarray",
          "docstring": "交叉函数 - 判断series1是否向上穿越series2\n\n参数:\n    series1: 第一个序列 (通常是短期均线)\n    series2: 第二个序列 (通常是长期均线)\n\n返回:\n    np.ndarray: 布尔数组，True表示发生向上交叉\n\n示例:\n    >>> ma5 = np.array([10, 11, 12, 13, 14])\n    >>> ma10 = np.array([12, 12, 12, 12, 12])\n    >>> cross = CROSS(ma5, ma10)\n    >>> print(cross)\n    [False False False  True False]",
          "is_async": false,
          "decorators": [],
          "body_lines": 30,
          "complexity": 4,
          "parameters": [
            {
              "name": "series1",
              "type_annotation": "Union[(np.ndarray, pd.Series)]",
              "default_value": null,
              "is_required": true
            },
            {
              "name": "series2",
              "type_annotation": "Union[(np.ndarray, pd.Series)]",
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "HHV",
          "line_number": 155,
          "return_type": "np.ndarray",
          "docstring": "最高值 (Highest High Value) - 滚动窗口内的最高价\n\n参数:\n    data: 价格序列\n    period: 滚动窗口周期\n\n返回:\n    np.ndarray: 滚动最高值序列\n\n示例:\n    >>> high = np.array([10, 12, 11, 15, 13, 14])\n    >>> hhv5 = HHV(high, 5)\n    >>> print(hhv5)\n    [nan nan nan nan 15. 15.]",
          "is_async": false,
          "decorators": [],
          "body_lines": 25,
          "complexity": 3,
          "parameters": [
            {
              "name": "data",
              "type_annotation": "Union[(np.ndarray, pd.Series)]",
              "default_value": null,
              "is_required": true
            },
            {
              "name": "period",
              "type_annotation": "int",
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "LLV",
          "line_number": 183,
          "return_type": "np.ndarray",
          "docstring": "最低值 (Lowest Low Value) - 滚动窗口内的最低价\n\n参数:\n    data: 价格序列\n    period: 滚动窗口周期\n\n返回:\n    np.ndarray: 滚动最低值序列\n\n示例:\n    >>> low = np.array([10, 12, 11, 15, 13, 14])\n    >>> llv5 = LLV(low, 5)\n    >>> print(llv5)\n    [nan nan nan nan 10. 11.]",
          "is_async": false,
          "decorators": [],
          "body_lines": 25,
          "complexity": 3,
          "parameters": [
            {
              "name": "data",
              "type_annotation": "Union[(np.ndarray, pd.Series)]",
              "default_value": null,
              "is_required": true
            },
            {
              "name": "period",
              "type_annotation": "int",
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "REF",
          "line_number": 211,
          "return_type": "np.ndarray",
          "docstring": "引用函数 - 获取period周期前的数据\n\n参数:\n    data: 价格序列\n    period: 向前引用的周期数\n\n返回:\n    np.ndarray: 向前引用后的序列\n\n示例:\n    >>> close = np.array([10, 11, 12, 13, 14, 15])\n    >>> ref1 = REF(close, 1)\n    >>> print(ref1)\n    [nan 10. 11. 12. 13. 14.]",
          "is_async": false,
          "decorators": [],
          "body_lines": 23,
          "complexity": 2,
          "parameters": [
            {
              "name": "data",
              "type_annotation": "Union[(np.ndarray, pd.Series)]",
              "default_value": null,
              "is_required": true
            },
            {
              "name": "period",
              "type_annotation": "int",
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "BARSLAST",
          "line_number": 237,
          "return_type": "np.ndarray",
          "docstring": "上一次条件成立位置 - 距离上次条件为True的周期数\n\n参数:\n    condition: 布尔数组\n\n返回:\n    np.ndarray: 距离上次True的周期数\n\n示例:\n    >>> cond = np.array([False, True, False, False, True, False])\n    >>> bars = BARSLAST(cond)\n    >>> print(bars)\n    [nan  0.  1.  2.  0.  1.]",
          "is_async": false,
          "decorators": [],
          "body_lines": 29,
          "complexity": 5,
          "parameters": [
            {
              "name": "condition",
              "type_annotation": "Union[(np.ndarray, pd.Series)]",
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "STD",
          "line_number": 269,
          "return_type": "np.ndarray",
          "docstring": "标准差 (Standard Deviation) - 滚动窗口标准差\n\n参数:\n    data: 价格序列\n    period: 滚动窗口周期\n\n返回:\n    np.ndarray: 滚动标准差序列\n\n示例:\n    >>> close = np.array([10, 11, 12, 13, 14, 15])\n    >>> std5 = STD(close, 5)",
          "is_async": false,
          "decorators": [],
          "body_lines": 23,
          "complexity": 3,
          "parameters": [
            {
              "name": "data",
              "type_annotation": "Union[(np.ndarray, pd.Series)]",
              "default_value": null,
              "is_required": true
            },
            {
              "name": "period",
              "type_annotation": "int",
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "SUM",
          "line_number": 295,
          "return_type": "np.ndarray",
          "docstring": "求和函数 - 滚动窗口求和\n\n参数:\n    data: 价格序列\n    period: 滚动窗口周期\n\n返回:\n    np.ndarray: 滚动求和序列\n\n示例:\n    >>> volume = np.array([100, 200, 150, 300, 250])\n    >>> sum3 = SUM(volume, 3)\n    >>> print(sum3)\n    [nan nan 450. 650. 700.]",
          "is_async": false,
          "decorators": [],
          "body_lines": 25,
          "complexity": 3,
          "parameters": [
            {
              "name": "data",
              "type_annotation": "Union[(np.ndarray, pd.Series)]",
              "default_value": null,
              "is_required": true
            },
            {
              "name": "period",
              "type_annotation": "int",
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "COUNT",
          "line_number": 323,
          "return_type": "np.ndarray",
          "docstring": "计数函数 - 统计滚动窗口内条件为True的次数\n\n参数:\n    condition: 布尔数组\n    period: 滚动窗口周期\n\n返回:\n    np.ndarray: 滚动计数序列\n\n示例:\n    >>> cond = np.array([True, False, True, True, False, True])\n    >>> count3 = COUNT(cond, 3)\n    >>> print(count3)\n    [nan nan  2.  2.  2.  2.]",
          "is_async": false,
          "decorators": [],
          "body_lines": 25,
          "complexity": 3,
          "parameters": [
            {
              "name": "condition",
              "type_annotation": "Union[(np.ndarray, pd.Series)]",
              "default_value": null,
              "is_required": true
            },
            {
              "name": "period",
              "type_annotation": "int",
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "MAX",
          "line_number": 351,
          "return_type": "np.ndarray",
          "docstring": "取最大值 - 逐个元素比较取大\n\n参数:\n    series1: 第一个序列\n    series2: 第二个序列\n\n返回:\n    np.ndarray: 逐个元素的最大值",
          "is_async": false,
          "decorators": [],
          "body_lines": 16,
          "complexity": 3,
          "parameters": [
            {
              "name": "series1",
              "type_annotation": "Union[(np.ndarray, pd.Series)]",
              "default_value": null,
              "is_required": true
            },
            {
              "name": "series2",
              "type_annotation": "Union[(np.ndarray, pd.Series)]",
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "MIN",
          "line_number": 371,
          "return_type": "np.ndarray",
          "docstring": "取最小值 - 逐个元素比较取小\n\n参数:\n    series1: 第一个序列\n    series2: 第二个序列\n\n返回:\n    np.ndarray: 逐个元素的最小值",
          "is_async": false,
          "decorators": [],
          "body_lines": 16,
          "complexity": 3,
          "parameters": [
            {
              "name": "series1",
              "type_annotation": "Union[(np.ndarray, pd.Series)]",
              "default_value": null,
              "is_required": true
            },
            {
              "name": "series2",
              "type_annotation": "Union[(np.ndarray, pd.Series)]",
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "ABS",
          "line_number": 391,
          "return_type": "np.ndarray",
          "docstring": "绝对值函数\n\n参数:\n    data: 数据序列\n\n返回:\n    np.ndarray: 绝对值序列",
          "is_async": false,
          "decorators": [],
          "body_lines": 13,
          "complexity": 2,
          "parameters": [
            {
              "name": "data",
              "type_annotation": "Union[(np.ndarray, pd.Series)]",
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "MACD",
          "line_number": 411,
          "return_type": "tuple",
          "docstring": "MACD指标 (Moving Average Convergence Divergence)\n\n参数:\n    close: 收盘价序列\n    fast_period: 快速EMA周期 (默认12)\n    slow_period: 慢速EMA周期 (默认26)\n    signal_period: 信号线周期 (默认9)\n\n返回:\n    tuple: (DIF, DEA, MACD柱)\n\n示例:\n    >>> close = np.random.randn(100) + 100\n    >>> dif, dea, macd = MACD(close)",
          "is_async": false,
          "decorators": [],
          "body_lines": 27,
          "complexity": 2,
          "parameters": [
            {
              "name": "close",
              "type_annotation": "Union[(np.ndarray, pd.Series)]",
              "default_value": null,
              "is_required": true
            },
            {
              "name": "fast_period",
              "type_annotation": "int",
              "default_value": "12",
              "is_required": false
            },
            {
              "name": "slow_period",
              "type_annotation": "int",
              "default_value": "26",
              "is_required": false
            },
            {
              "name": "signal_period",
              "type_annotation": "int",
              "default_value": "9",
              "is_required": false
            }
          ]
        },
        {
          "name": "KDJ",
          "line_number": 444,
          "return_type": "tuple",
          "docstring": "KDJ指标 (随机指标)\n\n参数:\n    high: 最高价序列\n    low: 最低价序列\n    close: 收盘价序列\n    n: RSV计算周期 (默认9)\n    m1: K值平滑周期 (默认3)\n    m2: D值平滑周期 (默认3)\n\n返回:\n    tuple: (K, D, J)\n\n示例:\n    >>> k, d, j = KDJ(high, low, close)",
          "is_async": false,
          "decorators": [],
          "body_lines": 38,
          "complexity": 4,
          "parameters": [
            {
              "name": "high",
              "type_annotation": "Union[(np.ndarray, pd.Series)]",
              "default_value": null,
              "is_required": true
            },
            {
              "name": "low",
              "type_annotation": "Union[(np.ndarray, pd.Series)]",
              "default_value": null,
              "is_required": true
            },
            {
              "name": "close",
              "type_annotation": "Union[(np.ndarray, pd.Series)]",
              "default_value": null,
              "is_required": true
            },
            {
              "name": "n",
              "type_annotation": "int",
              "default_value": "9",
              "is_required": false
            },
            {
              "name": "m1",
              "type_annotation": "int",
              "default_value": "3",
              "is_required": false
            },
            {
              "name": "m2",
              "type_annotation": "int",
              "default_value": "3",
              "is_required": false
            }
          ]
        },
        {
          "name": "RSI",
          "line_number": 490,
          "return_type": "np.ndarray",
          "docstring": "相对强弱指标 (Relative Strength Index)\n\n参数:\n    close: 收盘价序列\n    period: RSI周期 (默认14)\n\n返回:\n    np.ndarray: RSI值序列 (0-100)\n\n示例:\n    >>> close = np.random.randn(100) + 100\n    >>> rsi14 = RSI(close, 14)",
          "is_async": false,
          "decorators": [],
          "body_lines": 33,
          "complexity": 2,
          "parameters": [
            {
              "name": "close",
              "type_annotation": "Union[(np.ndarray, pd.Series)]",
              "default_value": null,
              "is_required": true
            },
            {
              "name": "period",
              "type_annotation": "int",
              "default_value": "14",
              "is_required": false
            }
          ]
        },
        {
          "name": "BOLL",
          "line_number": 526,
          "return_type": "tuple",
          "docstring": "布林带指标 (Bollinger Bands)\n\n参数:\n    close: 收盘价序列\n    period: 移动平均周期 (默认20)\n    std_dev: 标准差倍数 (默认2.0)\n\n返回:\n    tuple: (上轨, 中轨, 下轨)\n\n示例:\n    >>> upper, middle, lower = BOLL(close, 20, 2)",
          "is_async": false,
          "decorators": [],
          "body_lines": 24,
          "complexity": 2,
          "parameters": [
            {
              "name": "close",
              "type_annotation": "Union[(np.ndarray, pd.Series)]",
              "default_value": null,
              "is_required": true
            },
            {
              "name": "period",
              "type_annotation": "int",
              "default_value": "20",
              "is_required": false
            },
            {
              "name": "std_dev",
              "type_annotation": "float",
              "default_value": "2.0",
              "is_required": false
            }
          ]
        }
      ]
    },
    {
      "file_path": "indicators/talib_wrapper.py",
      "module_name": "indicators.talib_wrapper",
      "category": "utility",
      "docstring": "TA-Lib 技术指标包装器\n\n功能说明:\n- 封装TA-Lib库的常用技术指标函数\n- 提供统一的错误处理和参数验证\n- 支持pandas Series和numpy array输入\n- 自动处理NaN值和数据长度校验\n\n依赖:\n- TA-Lib 0.6.7+ (使用binary wheels安装)\n\n作者: MyStocks量化交易团队\n创建时间: 2025-10-18\n版本: 1.0.0",
      "lines_of_code": 536,
      "blank_lines": 98,
      "comment_lines": 28,
      "last_modified": "2025-10-18T19:58:21.296021",
      "imports": [
        "numpy",
        "pandas",
        "talib",
        "typing"
      ],
      "classes": [
        {
          "name": "TALibIndicators",
          "line_number": 24,
          "base_classes": [],
          "docstring": "TA-Lib技术指标包装类\n\n提供常用技术指标的便捷访问接口，自动处理输入数据格式和异常情况",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "_to_numpy",
              "line_number": 32,
              "return_type": "np.ndarray",
              "docstring": "将输入数据转换为numpy array\n\n参数:\n    data: 输入数据 (numpy array或pandas Series)\n\n返回:\n    np.ndarray: 转换后的numpy数组",
              "is_async": false,
              "decorators": [
                "staticmethod"
              ],
              "body_lines": 12,
              "complexity": 2,
              "parameters": [
                {
                  "name": "data",
                  "type_annotation": "Union[(np.ndarray, pd.Series)]",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_validate_length",
              "line_number": 47,
              "return_type": null,
              "docstring": "验证数据长度\n\n参数:\n    data: 输入数据\n    min_length: 最小数据长度\n    name: 数据名称(用于错误提示)\n\n异常:\n    ValueError: 数据长度不足",
              "is_async": false,
              "decorators": [
                "staticmethod"
              ],
              "body_lines": 15,
              "complexity": 2,
              "parameters": [
                {
                  "name": "data",
                  "type_annotation": "np.ndarray",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "min_length",
                  "type_annotation": "int",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "name",
                  "type_annotation": "str",
                  "default_value": "\"数据\"",
                  "is_required": false
                }
              ]
            },
            {
              "name": "calculate_sma",
              "line_number": 69,
              "return_type": "np.ndarray",
              "docstring": "简单移动平均 (Simple Moving Average)\n\n参数:\n    close: 收盘价序列\n    period: 移动平均周期\n\n返回:\n    np.ndarray: SMA值序列",
              "is_async": false,
              "decorators": [
                "classmethod"
              ],
              "body_lines": 13,
              "complexity": 1,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "close",
                  "type_annotation": "Union[(np.ndarray, pd.Series)]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "period",
                  "type_annotation": "int",
                  "default_value": "20",
                  "is_required": false
                }
              ]
            },
            {
              "name": "calculate_ema",
              "line_number": 86,
              "return_type": "np.ndarray",
              "docstring": "指数移动平均 (Exponential Moving Average)\n\n参数:\n    close: 收盘价序列\n    period: EMA周期\n\n返回:\n    np.ndarray: EMA值序列",
              "is_async": false,
              "decorators": [
                "classmethod"
              ],
              "body_lines": 13,
              "complexity": 1,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "close",
                  "type_annotation": "Union[(np.ndarray, pd.Series)]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "period",
                  "type_annotation": "int",
                  "default_value": "20",
                  "is_required": false
                }
              ]
            },
            {
              "name": "calculate_wma",
              "line_number": 103,
              "return_type": "np.ndarray",
              "docstring": "加权移动平均 (Weighted Moving Average)\n\n参数:\n    close: 收盘价序列\n    period: WMA周期\n\n返回:\n    np.ndarray: WMA值序列",
              "is_async": false,
              "decorators": [
                "classmethod"
              ],
              "body_lines": 13,
              "complexity": 1,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "close",
                  "type_annotation": "Union[(np.ndarray, pd.Series)]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "period",
                  "type_annotation": "int",
                  "default_value": "20",
                  "is_required": false
                }
              ]
            },
            {
              "name": "calculate_macd",
              "line_number": 120,
              "return_type": "Tuple[(np.ndarray, np.ndarray, np.ndarray)]",
              "docstring": "MACD指标 (Moving Average Convergence Divergence)\n\n参数:\n    close: 收盘价序列\n    fastperiod: 快速EMA周期\n    slowperiod: 慢速EMA周期\n    signalperiod: 信号线周期\n\n返回:\n    tuple: (MACD线, 信号线, MACD柱)",
              "is_async": false,
              "decorators": [
                "classmethod"
              ],
              "body_lines": 21,
              "complexity": 1,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "close",
                  "type_annotation": "Union[(np.ndarray, pd.Series)]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "fastperiod",
                  "type_annotation": "int",
                  "default_value": "12",
                  "is_required": false
                },
                {
                  "name": "slowperiod",
                  "type_annotation": "int",
                  "default_value": "26",
                  "is_required": false
                },
                {
                  "name": "signalperiod",
                  "type_annotation": "int",
                  "default_value": "9",
                  "is_required": false
                }
              ]
            },
            {
              "name": "calculate_rsi",
              "line_number": 151,
              "return_type": "np.ndarray",
              "docstring": "相对强弱指标 (Relative Strength Index)\n\n参数:\n    close: 收盘价序列\n    period: RSI周期\n\n返回:\n    np.ndarray: RSI值序列 (0-100)",
              "is_async": false,
              "decorators": [
                "classmethod"
              ],
              "body_lines": 13,
              "complexity": 1,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "close",
                  "type_annotation": "Union[(np.ndarray, pd.Series)]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "period",
                  "type_annotation": "int",
                  "default_value": "14",
                  "is_required": false
                }
              ]
            },
            {
              "name": "calculate_stoch",
              "line_number": 168,
              "return_type": "Tuple[(np.ndarray, np.ndarray)]",
              "docstring": "随机指标 (Stochastic Oscillator)\n\n参数:\n    high: 最高价序列\n    low: 最低价序列\n    close: 收盘价序列\n    fastk_period: FastK周期\n    slowk_period: SlowK周期\n    slowd_period: SlowD周期\n\n返回:\n    tuple: (SlowK, SlowD)",
              "is_async": false,
              "decorators": [
                "classmethod"
              ],
              "body_lines": 30,
              "complexity": 1,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "high",
                  "type_annotation": "Union[(np.ndarray, pd.Series)]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "low",
                  "type_annotation": "Union[(np.ndarray, pd.Series)]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "close",
                  "type_annotation": "Union[(np.ndarray, pd.Series)]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "fastk_period",
                  "type_annotation": "int",
                  "default_value": "5",
                  "is_required": false
                },
                {
                  "name": "slowk_period",
                  "type_annotation": "int",
                  "default_value": "3",
                  "is_required": false
                },
                {
                  "name": "slowd_period",
                  "type_annotation": "int",
                  "default_value": "3",
                  "is_required": false
                }
              ]
            },
            {
              "name": "calculate_cci",
              "line_number": 206,
              "return_type": "np.ndarray",
              "docstring": "顺势指标 (Commodity Channel Index)\n\n参数:\n    high: 最高价序列\n    low: 最低价序列\n    close: 收盘价序列\n    period: CCI周期\n\n返回:\n    np.ndarray: CCI值序列",
              "is_async": false,
              "decorators": [
                "classmethod"
              ],
              "body_lines": 18,
              "complexity": 1,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "high",
                  "type_annotation": "Union[(np.ndarray, pd.Series)]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "low",
                  "type_annotation": "Union[(np.ndarray, pd.Series)]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "close",
                  "type_annotation": "Union[(np.ndarray, pd.Series)]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "period",
                  "type_annotation": "int",
                  "default_value": "14",
                  "is_required": false
                }
              ]
            },
            {
              "name": "calculate_mom",
              "line_number": 230,
              "return_type": "np.ndarray",
              "docstring": "动量指标 (Momentum)\n\n参数:\n    close: 收盘价序列\n    period: 动量周期\n\n返回:\n    np.ndarray: 动量值序列",
              "is_async": false,
              "decorators": [
                "classmethod"
              ],
              "body_lines": 13,
              "complexity": 1,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "close",
                  "type_annotation": "Union[(np.ndarray, pd.Series)]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "period",
                  "type_annotation": "int",
                  "default_value": "10",
                  "is_required": false
                }
              ]
            },
            {
              "name": "calculate_bbands",
              "line_number": 251,
              "return_type": "Tuple[(np.ndarray, np.ndarray, np.ndarray)]",
              "docstring": "布林带 (Bollinger Bands)\n\n参数:\n    close: 收盘价序列\n    period: 移动平均周期\n    nbdevup: 上轨标准差倍数\n    nbdevdn: 下轨标准差倍数\n\n返回:\n    tuple: (上轨, 中轨, 下轨)",
              "is_async": false,
              "decorators": [
                "classmethod"
              ],
              "body_lines": 23,
              "complexity": 1,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "close",
                  "type_annotation": "Union[(np.ndarray, pd.Series)]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "period",
                  "type_annotation": "int",
                  "default_value": "20",
                  "is_required": false
                },
                {
                  "name": "nbdevup",
                  "type_annotation": "float",
                  "default_value": "2.0",
                  "is_required": false
                },
                {
                  "name": "nbdevdn",
                  "type_annotation": "float",
                  "default_value": "2.0",
                  "is_required": false
                }
              ]
            },
            {
              "name": "calculate_atr",
              "line_number": 280,
              "return_type": "np.ndarray",
              "docstring": "平均真实波幅 (Average True Range)\n\n参数:\n    high: 最高价序列\n    low: 最低价序列\n    close: 收盘价序列\n    period: ATR周期\n\n返回:\n    np.ndarray: ATR值序列",
              "is_async": false,
              "decorators": [
                "classmethod"
              ],
              "body_lines": 18,
              "complexity": 1,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "high",
                  "type_annotation": "Union[(np.ndarray, pd.Series)]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "low",
                  "type_annotation": "Union[(np.ndarray, pd.Series)]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "close",
                  "type_annotation": "Union[(np.ndarray, pd.Series)]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "period",
                  "type_annotation": "int",
                  "default_value": "14",
                  "is_required": false
                }
              ]
            },
            {
              "name": "calculate_obv",
              "line_number": 308,
              "return_type": "np.ndarray",
              "docstring": "能量潮 (On Balance Volume)\n\n参数:\n    close: 收盘价序列\n    volume: 成交量序列\n\n返回:\n    np.ndarray: OBV值序列",
              "is_async": false,
              "decorators": [
                "classmethod"
              ],
              "body_lines": 15,
              "complexity": 1,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "close",
                  "type_annotation": "Union[(np.ndarray, pd.Series)]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "volume",
                  "type_annotation": "Union[(np.ndarray, pd.Series)]",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "calculate_ad",
              "line_number": 327,
              "return_type": "np.ndarray",
              "docstring": "累积/派发线 (Accumulation/Distribution Line)\n\n参数:\n    high: 最高价序列\n    low: 最低价序列\n    close: 收盘价序列\n    volume: 成交量序列\n\n返回:\n    np.ndarray: A/D线值序列",
              "is_async": false,
              "decorators": [
                "classmethod"
              ],
              "body_lines": 19,
              "complexity": 1,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "high",
                  "type_annotation": "Union[(np.ndarray, pd.Series)]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "low",
                  "type_annotation": "Union[(np.ndarray, pd.Series)]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "close",
                  "type_annotation": "Union[(np.ndarray, pd.Series)]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "volume",
                  "type_annotation": "Union[(np.ndarray, pd.Series)]",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "detect_doji",
              "line_number": 356,
              "return_type": "np.ndarray",
              "docstring": "十字星形态识别 (Doji)\n\n参数:\n    open_: 开盘价序列\n    high: 最高价序列\n    low: 最低价序列\n    close: 收盘价序列\n\n返回:\n    np.ndarray: 形态标识 (100=看涨, -100=看跌, 0=无形态)",
              "is_async": false,
              "decorators": [
                "classmethod"
              ],
              "body_lines": 18,
              "complexity": 1,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "open_",
                  "type_annotation": "Union[(np.ndarray, pd.Series)]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "high",
                  "type_annotation": "Union[(np.ndarray, pd.Series)]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "low",
                  "type_annotation": "Union[(np.ndarray, pd.Series)]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "close",
                  "type_annotation": "Union[(np.ndarray, pd.Series)]",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "detect_hammer",
              "line_number": 380,
              "return_type": "np.ndarray",
              "docstring": "锤子线形态识别 (Hammer)\n\n参数:\n    open_: 开盘价序列\n    high: 最高价序列\n    low: 最低价序列\n    close: 收盘价序列\n\n返回:\n    np.ndarray: 形态标识 (100=看涨锤子线, 0=无形态)",
              "is_async": false,
              "decorators": [
                "classmethod"
              ],
              "body_lines": 18,
              "complexity": 1,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "open_",
                  "type_annotation": "Union[(np.ndarray, pd.Series)]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "high",
                  "type_annotation": "Union[(np.ndarray, pd.Series)]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "low",
                  "type_annotation": "Union[(np.ndarray, pd.Series)]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "close",
                  "type_annotation": "Union[(np.ndarray, pd.Series)]",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "detect_engulfing",
              "line_number": 404,
              "return_type": "np.ndarray",
              "docstring": "吞没形态识别 (Engulfing)\n\n参数:\n    open_: 开盘价序列\n    high: 最高价序列\n    low: 最低价序列\n    close: 收盘价序列\n\n返回:\n    np.ndarray: 形态标识 (100=看涨吞没, -100=看跌吞没, 0=无形态)",
              "is_async": false,
              "decorators": [
                "classmethod"
              ],
              "body_lines": 18,
              "complexity": 1,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "open_",
                  "type_annotation": "Union[(np.ndarray, pd.Series)]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "high",
                  "type_annotation": "Union[(np.ndarray, pd.Series)]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "low",
                  "type_annotation": "Union[(np.ndarray, pd.Series)]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "close",
                  "type_annotation": "Union[(np.ndarray, pd.Series)]",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "calculate_all_indicators",
              "line_number": 432,
              "return_type": "Dict[(str, np.ndarray)]",
              "docstring": "批量计算所有常用指标\n\n参数:\n    df: K线数据DataFrame，需包含 open, high, low, close, volume 列\n\n返回:\n    dict: 指标名称到值序列的映射\n\n示例:\n    >>> indicators = TALibIndicators.calculate_all_indicators(df)\n    >>> print(indicators.keys())\n    dict_keys(['ma5', 'ma20', 'ema12', 'ema26', 'rsi14', ...])",
              "is_async": false,
              "decorators": [
                "classmethod"
              ],
              "body_lines": 55,
              "complexity": 2,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "df",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": []
    },
    {
      "file_path": "indicators/__init__.py",
      "module_name": "indicators.__init__",
      "category": "unknown",
      "docstring": null,
      "lines_of_code": 1,
      "blank_lines": 1,
      "comment_lines": 0,
      "last_modified": "2025-10-18T19:52:06.811100",
      "imports": [],
      "classes": [],
      "functions": []
    },
    {
      "file_path": "scripts/analysis/classifier.py",
      "module_name": "scripts.analysis.classifier",
      "category": "unknown",
      "docstring": "模块分类器 - 将模块分类到五大功能类别\n\n使用规则引擎和启发式方法将模块分类为：\n- 核心功能 (Core)\n- 辅助功能 (Auxiliary)\n- 基础设施功能 (Infrastructure)\n- 监控功能 (Monitoring)\n- 工具功能 (Utility)\n\n作者: MyStocks Team\n日期: 2025-10-19",
      "lines_of_code": 416,
      "blank_lines": 74,
      "comment_lines": 21,
      "last_modified": "2025-10-19T09:56:31.765446",
      "imports": [
        "typing",
        "pathlib",
        "sys",
        "models"
      ],
      "classes": [
        {
          "name": "ModuleClassifier",
          "line_number": 24,
          "base_classes": [],
          "docstring": "模块分类器",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 27,
              "return_type": null,
              "docstring": "初始化分类器规则",
              "is_async": false,
              "decorators": [],
              "body_lines": 2,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_init_classification_rules",
              "line_number": 31,
              "return_type": null,
              "docstring": "初始化分类规则",
              "is_async": false,
              "decorators": [],
              "body_lines": 96,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "classify_module",
              "line_number": 129,
              "return_type": "CategoryEnum",
              "docstring": "对模块进行分类\n\nArgs:\n    module: 模块元数据\n\nReturns:\n    分类结果",
              "is_async": false,
              "decorators": [],
              "body_lines": 30,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "module",
                  "type_annotation": "ModuleMetadata",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_score_category",
              "line_number": 161,
              "return_type": "int",
              "docstring": "计算模块与某类别的匹配分数\n\nArgs:\n    module: 模块元数据\n    indicators: 类别指标\n\nReturns:\n    匹配分数",
              "is_async": false,
              "decorators": [],
              "body_lines": 64,
              "complexity": 26,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "module",
                  "type_annotation": "ModuleMetadata",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "indicators",
                  "type_annotation": "Dict[(str, List[str])]",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "classify_batch",
              "line_number": 227,
              "return_type": "Dict[(CategoryEnum, List[ModuleMetadata])]",
              "docstring": "批量分类模块\n\nArgs:\n    modules: 模块列表\n\nReturns:\n    按类别分组的模块字典",
              "is_async": false,
              "decorators": [],
              "body_lines": 24,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "modules",
                  "type_annotation": "List[ModuleMetadata]",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_category_stats",
              "line_number": 253,
              "return_type": "Dict[(str, Dict[(str, int)])]",
              "docstring": "获取分类统计信息\n\nArgs:\n    modules: 模块列表\n\nReturns:\n    统计信息字典",
              "is_async": false,
              "decorators": [],
              "body_lines": 28,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "modules",
                  "type_annotation": "List[ModuleMetadata]",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "suggest_recategorization",
              "line_number": 283,
              "return_type": "List[str]",
              "docstring": "建议可能的重新分类\n\nArgs:\n    module: 模块元数据\n\nReturns:\n    建议列表",
              "is_async": false,
              "decorators": [],
              "body_lines": 39,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "module",
                  "type_annotation": "ModuleMetadata",
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": [
        {
          "name": "create_category_report",
          "line_number": 325,
          "return_type": "str",
          "docstring": "创建分类报告\n\nArgs:\n    modules: 模块列表\n\nReturns:\n    Markdown 格式的报告",
          "is_async": false,
          "decorators": [],
          "body_lines": 62,
          "complexity": 7,
          "parameters": [
            {
              "name": "modules",
              "type_annotation": "List[ModuleMetadata]",
              "default_value": null,
              "is_required": true
            }
          ]
        }
      ]
    },
    {
      "file_path": "scripts/analysis/generate_docs.py",
      "module_name": "scripts.analysis.generate_docs",
      "category": "unknown",
      "docstring": "文档生成器 - 生成功能分类手册文档\n\n从扫描的模块清单生成完整的分类手册文档。\n\n作者: MyStocks Team\n日期: 2025-10-19\n\n使用方法:\n    python scripts/analysis/generate_docs.py",
      "lines_of_code": 429,
      "blank_lines": 65,
      "comment_lines": 16,
      "last_modified": "2025-10-19T09:59:38.326615",
      "imports": [
        "sys",
        "json",
        "pathlib",
        "datetime",
        "models",
        "utils.markdown_writer"
      ],
      "classes": [],
      "functions": [
        {
          "name": "load_inventory",
          "line_number": 32,
          "return_type": "ModuleInventory",
          "docstring": "从 JSON 文件加载清单\n\nArgs:\n    json_path: JSON 文件路径\n\nReturns:\n    ModuleInventory 对象",
          "is_async": false,
          "decorators": [],
          "body_lines": 114,
          "complexity": 5,
          "parameters": [
            {
              "name": "json_path",
              "type_annotation": "str",
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "generate_category_documents",
          "line_number": 149,
          "return_type": null,
          "docstring": "生成所有类别文档",
          "is_async": false,
          "decorators": [],
          "body_lines": 101,
          "complexity": 4,
          "parameters": [
            {
              "name": "inventory",
              "type_annotation": "ModuleInventory",
              "default_value": null,
              "is_required": true
            },
            {
              "name": "writer",
              "type_annotation": "MarkdownWriter",
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "generate_data_flows",
          "line_number": 253,
          "return_type": null,
          "docstring": "生成数据流文档",
          "is_async": false,
          "decorators": [],
          "body_lines": 75,
          "complexity": 1,
          "parameters": [
            {
              "name": "inventory",
              "type_annotation": "ModuleInventory",
              "default_value": null,
              "is_required": true
            },
            {
              "name": "writer",
              "type_annotation": "MarkdownWriter",
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "main",
          "line_number": 331,
          "return_type": null,
          "docstring": "主函数",
          "is_async": false,
          "decorators": [],
          "body_lines": 42,
          "complexity": 2,
          "parameters": []
        },
        {
          "name": "update_readme_stats",
          "line_number": 376,
          "return_type": null,
          "docstring": "更新 README 中的统计表",
          "is_async": false,
          "decorators": [],
          "body_lines": 48,
          "complexity": 3,
          "parameters": [
            {
              "name": "inventory",
              "type_annotation": "ModuleInventory",
              "default_value": null,
              "is_required": true
            }
          ]
        }
      ]
    },
    {
      "file_path": "scripts/analysis/scan_codebase.py",
      "module_name": "scripts.analysis.scan_codebase",
      "category": "unknown",
      "docstring": "代码库扫描器 - 扫描整个 MyStocks 项目\n\n扫描所有 Python 文件并提取结构化元数据。\n\n作者: MyStocks Team\n日期: 2025-10-19\n\n使用方法:\n    python scripts/analysis/scan_codebase.py",
      "lines_of_code": 282,
      "blank_lines": 52,
      "comment_lines": 16,
      "last_modified": "2025-10-19T09:58:35.774214",
      "imports": [
        "sys",
        "pathlib",
        "datetime",
        "json",
        "models",
        "utils.ast_parser",
        "classifier"
      ],
      "classes": [],
      "functions": [
        {
          "name": "scan_project",
          "line_number": 29,
          "return_type": "ModuleInventory",
          "docstring": "扫描整个项目\n\nArgs:\n    project_root: 项目根目录\n    exclude_patterns: 要排除的路径模式\n\nReturns:\n    ModuleInventory 对象",
          "is_async": false,
          "decorators": [],
          "body_lines": 81,
          "complexity": 8,
          "parameters": [
            {
              "name": "project_root",
              "type_annotation": "str",
              "default_value": null,
              "is_required": true
            },
            {
              "name": "exclude_patterns",
              "type_annotation": "list",
              "default_value": "None",
              "is_required": false
            }
          ]
        },
        {
          "name": "save_inventory",
          "line_number": 113,
          "return_type": null,
          "docstring": "保存清单到 JSON 文件\n\nArgs:\n    inventory: 模块清单\n    output_path: 输出文件路径",
          "is_async": false,
          "decorators": [],
          "body_lines": 107,
          "complexity": 5,
          "parameters": [
            {
              "name": "inventory",
              "type_annotation": "ModuleInventory",
              "default_value": null,
              "is_required": true
            },
            {
              "name": "output_path",
              "type_annotation": "str",
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "print_summary",
          "line_number": 223,
          "return_type": null,
          "docstring": "打印扫描摘要",
          "is_async": false,
          "decorators": [],
          "body_lines": 32,
          "complexity": 3,
          "parameters": [
            {
              "name": "inventory",
              "type_annotation": "ModuleInventory",
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "main",
          "line_number": 258,
          "return_type": null,
          "docstring": "主函数",
          "is_async": false,
          "decorators": [],
          "body_lines": 19,
          "complexity": 1,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "scripts/analysis/__init__.py",
      "module_name": "scripts.analysis.__init__",
      "category": "unknown",
      "docstring": "MyStocks 代码分析工具包\n\n提供代码扫描、分类、相似性检测和文档生成功能。",
      "lines_of_code": 8,
      "blank_lines": 3,
      "comment_lines": 0,
      "last_modified": "2025-10-19T09:59:51.242692",
      "imports": [],
      "classes": [],
      "functions": []
    },
    {
      "file_path": "scripts/analysis/models.py",
      "module_name": "scripts.analysis.models",
      "category": "infrastructure",
      "docstring": "数据模型定义 - MyStocks Function Classification Manual\n\n定义所有代码分析和手册生成使用的数据结构。\n\n作者: MyStocks Team\n日期: 2025-10-19",
      "lines_of_code": 402,
      "blank_lines": 78,
      "comment_lines": 13,
      "last_modified": "2025-10-19T09:54:04.508514",
      "imports": [
        "dataclasses",
        "typing",
        "enum",
        "datetime"
      ],
      "classes": [
        {
          "name": "CategoryEnum",
          "line_number": 16,
          "base_classes": [
            "Enum"
          ],
          "docstring": "功能类别枚举",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "SeverityEnum",
          "line_number": 26,
          "base_classes": [
            "Enum"
          ],
          "docstring": "严重性级别枚举",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "PriorityEnum",
          "line_number": 34,
          "base_classes": [
            "Enum"
          ],
          "docstring": "优先级枚举",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "ParameterMetadata",
          "line_number": 43,
          "base_classes": [],
          "docstring": "函数参数元数据",
          "decorators": [
            "dataclass"
          ],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "FunctionMetadata",
          "line_number": 52,
          "base_classes": [],
          "docstring": "函数元数据",
          "decorators": [
            "dataclass"
          ],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "ClassMetadata",
          "line_number": 66,
          "base_classes": [],
          "docstring": "类元数据",
          "decorators": [
            "dataclass"
          ],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "ModuleMetadata",
          "line_number": 78,
          "base_classes": [],
          "docstring": "模块元数据",
          "decorators": [
            "dataclass"
          ],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "CodeBlock",
          "line_number": 94,
          "base_classes": [],
          "docstring": "代码块（用于相似性比较）",
          "decorators": [
            "dataclass"
          ],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "DuplicationCase",
          "line_number": 107,
          "base_classes": [],
          "docstring": "代码重复案例",
          "decorators": [
            "dataclass"
          ],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "Dependency",
          "line_number": 120,
          "base_classes": [],
          "docstring": "模块依赖关系",
          "decorators": [
            "dataclass"
          ],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "OptimizationOpportunity",
          "line_number": 129,
          "base_classes": [],
          "docstring": "优化机会",
          "decorators": [
            "dataclass"
          ],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "MergeRecommendation",
          "line_number": 144,
          "base_classes": [],
          "docstring": "合并建议",
          "decorators": [
            "dataclass"
          ],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "DataFlow",
          "line_number": 158,
          "base_classes": [],
          "docstring": "数据流",
          "decorators": [
            "dataclass"
          ],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "ArchitectureIssue",
          "line_number": 170,
          "base_classes": [],
          "docstring": "架构问题",
          "decorators": [
            "dataclass"
          ],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "ManualMetadata",
          "line_number": 182,
          "base_classes": [],
          "docstring": "手册元数据",
          "decorators": [
            "dataclass"
          ],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "ModuleInventory",
          "line_number": 210,
          "base_classes": [],
          "docstring": "模块清单",
          "decorators": [
            "dataclass"
          ],
          "is_abstract": false,
          "methods": [
            {
              "name": "get_modules_by_category",
              "line_number": 216,
              "return_type": "List[ModuleMetadata]",
              "docstring": "按类别获取模块列表",
              "is_async": false,
              "decorators": [],
              "body_lines": 2,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "category",
                  "type_annotation": "CategoryEnum",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_module_by_path",
              "line_number": 220,
              "return_type": "Optional[ModuleMetadata]",
              "docstring": "根据文件路径获取模块",
              "is_async": false,
              "decorators": [],
              "body_lines": 5,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "file_path",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_total_functions",
              "line_number": 227,
              "return_type": "int",
              "docstring": "获取总函数数量",
              "is_async": false,
              "decorators": [],
              "body_lines": 7,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_total_classes",
              "line_number": 236,
              "return_type": "int",
              "docstring": "获取总类数量",
              "is_async": false,
              "decorators": [],
              "body_lines": 2,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        },
        {
          "name": "DuplicationIndex",
          "line_number": 242,
          "base_classes": [],
          "docstring": "重复索引",
          "decorators": [
            "dataclass"
          ],
          "is_abstract": false,
          "methods": [
            {
              "name": "add_duplication",
              "line_number": 253,
              "return_type": null,
              "docstring": "添加重复案例并自动分类",
              "is_async": false,
              "decorators": [],
              "body_lines": 12,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "dup",
                  "type_annotation": "DuplicationCase",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_by_severity",
              "line_number": 267,
              "return_type": "List[DuplicationCase]",
              "docstring": "按严重性获取重复案例",
              "is_async": false,
              "decorators": [],
              "body_lines": 10,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "severity",
                  "type_annotation": "SeverityEnum",
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        },
        {
          "name": "OptimizationRoadmap",
          "line_number": 281,
          "base_classes": [],
          "docstring": "优化路线图",
          "decorators": [
            "dataclass"
          ],
          "is_abstract": false,
          "methods": [
            {
              "name": "add_opportunity",
              "line_number": 290,
              "return_type": null,
              "docstring": "添加优化机会并自动分类",
              "is_async": false,
              "decorators": [],
              "body_lines": 9,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "opp",
                  "type_annotation": "OptimizationOpportunity",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_by_priority",
              "line_number": 301,
              "return_type": "List[OptimizationOpportunity]",
              "docstring": "按优先级获取优化机会",
              "is_async": false,
              "decorators": [],
              "body_lines": 2,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "priority",
                  "type_annotation": "PriorityEnum",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_quick_wins",
              "line_number": 305,
              "return_type": "List[OptimizationOpportunity]",
              "docstring": "获取快速胜利项（高优先级 + 低工作量）",
              "is_async": false,
              "decorators": [],
              "body_lines": 8,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        },
        {
          "name": "ConsolidationGuide",
          "line_number": 317,
          "base_classes": [],
          "docstring": "合并指南",
          "decorators": [
            "dataclass"
          ],
          "is_abstract": false,
          "methods": [
            {
              "name": "add_recommendation",
              "line_number": 321,
              "return_type": null,
              "docstring": "添加合并建议",
              "is_async": false,
              "decorators": [],
              "body_lines": 2,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "rec",
                  "type_annotation": "MergeRecommendation",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_by_risk_level",
              "line_number": 325,
              "return_type": "List[MergeRecommendation]",
              "docstring": "按风险级别获取建议",
              "is_async": false,
              "decorators": [],
              "body_lines": 2,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "risk_level",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_high_impact",
              "line_number": 329,
              "return_type": "List[MergeRecommendation]",
              "docstring": "获取高影响合并建议（合并 3+ 模块）",
              "is_async": false,
              "decorators": [],
              "body_lines": 2,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": [
        {
          "name": "severity_from_similarity",
          "line_number": 336,
          "return_type": "SeverityEnum",
          "docstring": "根据相似度计算严重性级别",
          "is_async": false,
          "decorators": [],
          "body_lines": 9,
          "complexity": 7,
          "parameters": [
            {
              "name": "token_sim",
              "type_annotation": "float",
              "default_value": null,
              "is_required": true
            },
            {
              "name": "ast_sim",
              "type_annotation": "float",
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "categorize_module_by_path",
          "line_number": 348,
          "return_type": "CategoryEnum",
          "docstring": "根据文件路径推断模块类别（初步分类）",
          "is_async": false,
          "decorators": [],
          "body_lines": 34,
          "complexity": 6,
          "parameters": [
            {
              "name": "file_path",
              "type_annotation": "str",
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "estimate_complexity",
          "line_number": 385,
          "return_type": "int",
          "docstring": "估算函数圈复杂度\n\n简化版本：计算决策点数量（if, for, while, try, except, and, or）",
          "is_async": false,
          "decorators": [],
          "body_lines": 16,
          "complexity": 4,
          "parameters": [
            {
              "name": "function_ast",
              "type_annotation": null,
              "default_value": null,
              "is_required": true
            }
          ]
        }
      ]
    },
    {
      "file_path": "scripts/analysis/utils/markdown_writer.py",
      "module_name": "scripts.analysis.utils.markdown_writer",
      "category": "utility",
      "docstring": "Markdown 文档生成器 - 生成手册文档\n\n生成格式良好的 Markdown 文档，包括：\n- 模块分类文档\n- 重复分析报告\n- 优化路线图\n- 合并指南\n- 数据流图\n\n作者: MyStocks Team\n日期: 2025-10-19",
      "lines_of_code": 519,
      "blank_lines": 101,
      "comment_lines": 25,
      "last_modified": "2025-10-19T09:57:40.505864",
      "imports": [
        "typing",
        "pathlib",
        "datetime",
        "sys",
        "models"
      ],
      "classes": [
        {
          "name": "MarkdownWriter",
          "line_number": 30,
          "base_classes": [],
          "docstring": "Markdown 文档生成器",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 33,
              "return_type": null,
              "docstring": "初始化文档生成器\n\nArgs:\n    output_dir: 输出目录路径",
              "is_async": false,
              "decorators": [],
              "body_lines": 8,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "output_dir",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "generate_category_document",
              "line_number": 43,
              "return_type": "str",
              "docstring": "生成功能类别文档\n\nArgs:\n    category: 类别枚举\n    modules: 该类别的模块列表\n    category_name_cn: 中文类别名称\n    category_description: 类别描述\n\nReturns:\n    文档文件路径",
              "is_async": false,
              "decorators": [],
              "body_lines": 110,
              "complexity": 16,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "category",
                  "type_annotation": "CategoryEnum",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "modules",
                  "type_annotation": "List[ModuleMetadata]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "category_name_cn",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "category_description",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "generate_duplication_analysis",
              "line_number": 161,
              "return_type": "str",
              "docstring": "生成重复分析文档\n\nArgs:\n    duplication_index: 重复索引\n\nReturns:\n    文档文件路径",
              "is_async": false,
              "decorators": [],
              "body_lines": 56,
              "complexity": 9,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "duplication_index",
                  "type_annotation": "DuplicationIndex",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "generate_optimization_roadmap",
              "line_number": 222,
              "return_type": "str",
              "docstring": "生成优化路线图文档\n\nArgs:\n    roadmap: 优化路线图\n\nReturns:\n    文档文件路径",
              "is_async": false,
              "decorators": [],
              "body_lines": 46,
              "complexity": 9,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "roadmap",
                  "type_annotation": "OptimizationRoadmap",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "generate_consolidation_guide",
              "line_number": 273,
              "return_type": "str",
              "docstring": "生成合并指南文档\n\nArgs:\n    guide: 合并指南\n\nReturns:\n    文档文件路径",
              "is_async": false,
              "decorators": [],
              "body_lines": 37,
              "complexity": 6,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "guide",
                  "type_annotation": "ConsolidationGuide",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "generate_data_flow_maps",
              "line_number": 315,
              "return_type": "str",
              "docstring": "生成数据流图文档\n\nArgs:\n    data_flows: 数据流列表\n\nReturns:\n    文档文件路径",
              "is_async": false,
              "decorators": [],
              "body_lines": 84,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data_flows",
                  "type_annotation": "List[DataFlow]",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_format_parameters",
              "line_number": 404,
              "return_type": "str",
              "docstring": "格式化参数列表",
              "is_async": false,
              "decorators": [],
              "body_lines": 19,
              "complexity": 7,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "parameters",
                  "type_annotation": "List",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_format_duplication",
              "line_number": 425,
              "return_type": "List[str]",
              "docstring": "格式化重复案例",
              "is_async": false,
              "decorators": [],
              "body_lines": 18,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "dup",
                  "type_annotation": "DuplicationCase",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_format_optimization",
              "line_number": 445,
              "return_type": "List[str]",
              "docstring": "格式化优化机会",
              "is_async": false,
              "decorators": [],
              "body_lines": 29,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "opp",
                  "type_annotation": "OptimizationOpportunity",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_format_merge_recommendation",
              "line_number": 476,
              "return_type": "List[str]",
              "docstring": "格式化合并建议",
              "is_async": false,
              "decorators": [],
              "body_lines": 35,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "rec",
                  "type_annotation": "MergeRecommendation",
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": []
    },
    {
      "file_path": "scripts/analysis/utils/ast_parser.py",
      "module_name": "scripts.analysis.utils.ast_parser",
      "category": "utility",
      "docstring": "AST 解析器 - 提取 Python 代码的结构化元数据\n\n使用 Python 的 ast 模块解析代码文件，提取类、函数、参数等信息。\n\n作者: MyStocks Team\n日期: 2025-10-19",
      "lines_of_code": 387,
      "blank_lines": 70,
      "comment_lines": 31,
      "last_modified": "2025-10-19T09:54:49.536801",
      "imports": [
        "ast",
        "os",
        "pathlib",
        "typing",
        "datetime",
        "sys",
        "models"
      ],
      "classes": [
        {
          "name": "ASTParser",
          "line_number": 26,
          "base_classes": [],
          "docstring": "AST 解析器类",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 29,
              "return_type": null,
              "docstring": "初始化 AST 解析器\n\nArgs:\n    project_root: 项目根目录路径",
              "is_async": false,
              "decorators": [],
              "body_lines": 7,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "project_root",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "parse_file",
              "line_number": 38,
              "return_type": "Optional[ModuleMetadata]",
              "docstring": "解析单个 Python 文件\n\nArgs:\n    file_path: 文件路径\n\nReturns:\n    ModuleMetadata 对象，如果解析失败则返回 None",
              "is_async": false,
              "decorators": [],
              "body_lines": 62,
              "complexity": 11,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "file_path",
                  "type_annotation": "Path",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_get_module_name",
              "line_number": 102,
              "return_type": "str",
              "docstring": "获取模块名称",
              "is_async": false,
              "decorators": [],
              "body_lines": 4,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "file_path",
                  "type_annotation": "Path",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_parse_class",
              "line_number": 108,
              "return_type": "ClassMetadata",
              "docstring": "解析类定义\n\nArgs:\n    node: ast.ClassDef 节点\n\nReturns:\n    ClassMetadata 对象",
              "is_async": false,
              "decorators": [],
              "body_lines": 37,
              "complexity": 8,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "node",
                  "type_annotation": "ast.ClassDef",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_parse_function",
              "line_number": 147,
              "return_type": "FunctionMetadata",
              "docstring": "解析函数定义\n\nArgs:\n    node: ast.FunctionDef 或 ast.AsyncFunctionDef 节点\n\nReturns:\n    FunctionMetadata 对象",
              "is_async": false,
              "decorators": [],
              "body_lines": 41,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "node",
                  "type_annotation": "Any",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_parse_parameters",
              "line_number": 190,
              "return_type": "List[ParameterMetadata]",
              "docstring": "解析函数参数\n\nArgs:\n    args: ast.arguments 节点\n\nReturns:\n    参数元数据列表",
              "is_async": false,
              "decorators": [],
              "body_lines": 41,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "args",
                  "type_annotation": "ast.arguments",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_get_type_annotation",
              "line_number": 233,
              "return_type": "str",
              "docstring": "提取类型注解字符串",
              "is_async": false,
              "decorators": [],
              "body_lines": 21,
              "complexity": 7,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "annotation",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_get_default_value",
              "line_number": 256,
              "return_type": "str",
              "docstring": "提取默认值字符串",
              "is_async": false,
              "decorators": [],
              "body_lines": 16,
              "complexity": 8,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "default",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_get_decorator_name",
              "line_number": 274,
              "return_type": "str",
              "docstring": "提取装饰器名称",
              "is_async": false,
              "decorators": [],
              "body_lines": 11,
              "complexity": 6,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "decorator",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "scan_directory",
              "line_number": 287,
              "return_type": "List[ModuleMetadata]",
              "docstring": "扫描目录下的所有 Python 文件\n\nArgs:\n    directory: 目录路径\n    exclude_patterns: 排除的路径模式列表\n\nReturns:\n    模块元数据列表",
              "is_async": false,
              "decorators": [],
              "body_lines": 36,
              "complexity": 7,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "directory",
                  "type_annotation": "Path",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "exclude_patterns",
                  "type_annotation": "List[str]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            }
          ]
        }
      ],
      "functions": [
        {
          "name": "extract_code_block",
          "line_number": 326,
          "return_type": "str",
          "docstring": "从文件中提取代码块\n\nArgs:\n    file_path: 文件路径\n    start_line: 起始行号（从 1 开始）\n    end_line: 结束行号\n\nReturns:\n    代码块字符串",
          "is_async": false,
          "decorators": [],
          "body_lines": 19,
          "complexity": 2,
          "parameters": [
            {
              "name": "file_path",
              "type_annotation": "str",
              "default_value": null,
              "is_required": true
            },
            {
              "name": "start_line",
              "type_annotation": "int",
              "default_value": null,
              "is_required": true
            },
            {
              "name": "end_line",
              "type_annotation": "int",
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "tokenize_code",
          "line_number": 348,
          "return_type": "List[str]",
          "docstring": "将代码分词为 token 列表\n\nArgs:\n    code: 代码字符串\n\nReturns:\n    token 列表",
          "is_async": false,
          "decorators": [],
          "body_lines": 20,
          "complexity": 1,
          "parameters": [
            {
              "name": "code",
              "type_annotation": "str",
              "default_value": null,
              "is_required": true
            }
          ]
        }
      ]
    },
    {
      "file_path": "scripts/analysis/utils/__init__.py",
      "module_name": "scripts.analysis.utils.__init__",
      "category": "utility",
      "docstring": "代码分析工具模块",
      "lines_of_code": 4,
      "blank_lines": 1,
      "comment_lines": 0,
      "last_modified": "2025-10-19T09:59:55.598718",
      "imports": [],
      "classes": [],
      "functions": []
    },
    {
      "file_path": "scripts/analysis/utils/similarity.py",
      "module_name": "scripts.analysis.utils.similarity",
      "category": "utility",
      "docstring": "代码相似性检测 - 识别重复和相似代码\n\n使用混合方法：token-based 相似度 + AST 结构相似度\n\n作者: MyStocks Team\n日期: 2025-10-19",
      "lines_of_code": 408,
      "blank_lines": 80,
      "comment_lines": 23,
      "last_modified": "2025-10-19T09:55:39.173103",
      "imports": [
        "ast",
        "hashlib",
        "difflib",
        "typing",
        "pathlib",
        "sys",
        "models",
        "utils.ast_parser"
      ],
      "classes": [
        {
          "name": "SimilarityDetector",
          "line_number": 26,
          "base_classes": [],
          "docstring": "代码相似性检测器",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 29,
              "return_type": null,
              "docstring": "初始化相似性检测器\n\nArgs:\n    min_token_similarity: 最小 token 相似度阈值（0.0-1.0）\n    min_ast_similarity: 最小 AST 相似度阈值（0.0-1.0）",
              "is_async": false,
              "decorators": [],
              "body_lines": 9,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "min_token_similarity",
                  "type_annotation": "float",
                  "default_value": "0.4",
                  "is_required": false
                },
                {
                  "name": "min_ast_similarity",
                  "type_annotation": "float",
                  "default_value": "0.3",
                  "is_required": false
                }
              ]
            },
            {
              "name": "calculate_token_similarity",
              "line_number": 40,
              "return_type": "float",
              "docstring": "计算两段代码的 token 相似度\n\nArgs:\n    code1: 第一段代码\n    code2: 第二段代码\n\nReturns:\n    相似度分数（0.0-1.0）",
              "is_async": false,
              "decorators": [],
              "body_lines": 19,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "code1",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "code2",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "calculate_ast_similarity",
              "line_number": 61,
              "return_type": "float",
              "docstring": "计算两段代码的 AST 结构相似度\n\nArgs:\n    code1: 第一段代码\n    code2: 第二段代码\n\nReturns:\n    相似度分数（0.0-1.0）",
              "is_async": false,
              "decorators": [],
              "body_lines": 34,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "code1",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "code2",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_ast_structure_hash",
              "line_number": 97,
              "return_type": "str",
              "docstring": "计算 AST 结构哈希（忽略标识符名称）\n\nArgs:\n    tree: AST 树\n\nReturns:\n    哈希字符串",
              "is_async": false,
              "decorators": [],
              "body_lines": 29,
              "complexity": 6,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "tree",
                  "type_annotation": "ast.AST",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_extract_node_sequence",
              "line_number": 128,
              "return_type": "List[str]",
              "docstring": "提取 AST 节点类型序列\n\nArgs:\n    tree: AST 树\n\nReturns:\n    节点类型列表",
              "is_async": false,
              "decorators": [],
              "body_lines": 15,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "tree",
                  "type_annotation": "ast.AST",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "compare_functions",
              "line_number": 145,
              "return_type": "Optional[Tuple[(float, float)]]",
              "docstring": "比较两个函数的相似度\n\nArgs:\n    func1: 第一个函数元数据\n    func2: 第二个函数元数据\n    file1_path: 第一个文件路径\n    file2_path: 第二个文件路径\n\nReturns:\n    (token_similarity, ast_similarity) 或 None",
              "is_async": false,
              "decorators": [],
              "body_lines": 36,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "func1",
                  "type_annotation": "FunctionMetadata",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "func2",
                  "type_annotation": "FunctionMetadata",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "file1_path",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "file2_path",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "create_duplication_case",
              "line_number": 189,
              "return_type": "DuplicationCase",
              "docstring": "创建重复案例\n\nArgs:\n    blocks: 代码块列表，每个元素为 (file_path, start_line, end_line, code)\n    token_similarity: Token 相似度\n    ast_similarity: AST 相似度\n    description: 描述\n\nReturns:\n    DuplicationCase 对象",
              "is_async": false,
              "decorators": [],
              "body_lines": 55,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "blocks",
                  "type_annotation": "List[Tuple[(str, int, int, str)]]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "token_similarity",
                  "type_annotation": "float",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "ast_similarity",
                  "type_annotation": "float",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "description",
                  "type_annotation": "str",
                  "default_value": "\"\"",
                  "is_required": false
                }
              ]
            },
            {
              "name": "_generate_merge_suggestion",
              "line_number": 252,
              "return_type": "str",
              "docstring": "生成合并建议",
              "is_async": false,
              "decorators": [],
              "body_lines": 29,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "severity",
                  "type_annotation": "SeverityEnum",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "blocks",
                  "type_annotation": "List[CodeBlock]",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "find_similar_code_blocks",
              "line_number": 287,
              "return_type": "List[DuplicationCase]",
              "docstring": "在代码块列表中查找相似项\n\nArgs:\n    code_blocks: 代码块列表\n\nReturns:\n    重复案例列表",
              "is_async": false,
              "decorators": [],
              "body_lines": 56,
              "complexity": 8,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "code_blocks",
                  "type_annotation": "List[Tuple[(str, int, int, str)]]",
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": [
        {
          "name": "normalize_code",
          "line_number": 349,
          "return_type": "str",
          "docstring": "标准化代码以便更好地比较\n\nArgs:\n    code: 原始代码\n\nReturns:\n    标准化后的代码",
          "is_async": false,
          "decorators": [],
          "body_lines": 27,
          "complexity": 2,
          "parameters": [
            {
              "name": "code",
              "type_annotation": "str",
              "default_value": null,
              "is_required": true
            }
          ]
        }
      ]
    },
    {
      "file_path": "adapters/byapi/load_json_1by1.py",
      "module_name": "adapters.byapi.load_json_1by1",
      "category": "auxiliary",
      "docstring": null,
      "lines_of_code": 143,
      "blank_lines": 23,
      "comment_lines": 20,
      "last_modified": "2025-08-30T23:47:16",
      "imports": [
        "json",
        "pandas",
        "os"
      ],
      "classes": [
        {
          "name": "load_json",
          "line_number": 28,
          "base_classes": [],
          "docstring": null,
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 29,
              "return_type": null,
              "docstring": "初始化load_json类\n\nArgs:\n    file_path (str): JSON文件路径\n    api_key (str, optional): api_mapping.json中的KEY值\n    item (str, optional): 指定的items中的参数值",
              "is_async": false,
              "decorators": [],
              "body_lines": 16,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "file_path",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "api_key",
                  "type_annotation": null,
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "item",
                  "type_annotation": null,
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "read_json",
              "line_number": 47,
              "return_type": null,
              "docstring": "读取JSON文件并解析数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 32,
              "complexity": 10,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "__getattr__",
              "line_number": 81,
              "return_type": null,
              "docstring": "允许通过点操作符访问JSON数据中的属性",
              "is_async": false,
              "decorators": [],
              "body_lines": 30,
              "complexity": 17,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "name",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": []
    },
    {
      "file_path": "adapters/byapi/byapi_mapping_updated.py",
      "module_name": "adapters.byapi.byapi_mapping_updated",
      "category": "auxiliary",
      "docstring": "API映射配置文件\n根据byapi_info_all.md文档中的接口定义，提供API接口的类型、名称、URL、描述及返回字段映射。",
      "lines_of_code": 2437,
      "blank_lines": 17,
      "comment_lines": 10,
      "last_modified": "2025-10-12T12:47:28.843071",
      "imports": [],
      "classes": [],
      "functions": [
        {
          "name": "get_api_info",
          "line_number": 2348,
          "return_type": null,
          "docstring": "根据API类型、名称或URL获取API接口信息\n\n参数:\n    api_type: API类型\n    api_name: API名称\n    api_url: API URL\n    \n返回:\n    dict: API接口信息",
          "is_async": false,
          "decorators": [],
          "body_lines": 18,
          "complexity": 7,
          "parameters": [
            {
              "name": "api_type",
              "type_annotation": null,
              "default_value": "None",
              "is_required": false
            },
            {
              "name": "api_name",
              "type_annotation": null,
              "default_value": "None",
              "is_required": false
            },
            {
              "name": "api_url",
              "type_annotation": null,
              "default_value": "None",
              "is_required": false
            }
          ]
        },
        {
          "name": "get_all_api_types",
          "line_number": 2369,
          "return_type": null,
          "docstring": "获取所有API类型\n\n返回:\n    list: 所有API类型的列表",
          "is_async": false,
          "decorators": [],
          "body_lines": 7,
          "complexity": 1,
          "parameters": []
        },
        {
          "name": "get_api_names_by_type",
          "line_number": 2379,
          "return_type": null,
          "docstring": "获取特定类型的所有API名称\n\n参数:\n    api_type: API类型\n    \n返回:\n    list: 特定类型的所有API名称列表",
          "is_async": false,
          "decorators": [],
          "body_lines": 12,
          "complexity": 2,
          "parameters": [
            {
              "name": "api_type",
              "type_annotation": null,
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "get_field_mapping",
          "line_number": 2394,
          "return_type": null,
          "docstring": "获取特定API的字段映射\n\n参数:\n    api_type: API类型\n    api_name: API名称\n    \n返回:\n    dict: 字段映射字典",
          "is_async": false,
          "decorators": [],
          "body_lines": 13,
          "complexity": 3,
          "parameters": [
            {
              "name": "api_type",
              "type_annotation": null,
              "default_value": null,
              "is_required": true
            },
            {
              "name": "api_name",
              "type_annotation": null,
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "get_api_documentation",
          "line_number": 2410,
          "return_type": null,
          "docstring": "根据API名称获取API文档信息\n\n参数:\n    api_name: API中文名称\n    \n返回:\n    dict: 包含API文档信息的字典",
          "is_async": false,
          "decorators": [],
          "body_lines": 20,
          "complexity": 3,
          "parameters": [
            {
              "name": "api_name",
              "type_annotation": null,
              "default_value": null,
              "is_required": true
            }
          ]
        }
      ]
    },
    {
      "file_path": "adapters/byapi/byapi_new_updated.py",
      "module_name": "adapters.byapi.byapi_new_updated",
      "category": "auxiliary",
      "docstring": null,
      "lines_of_code": 1358,
      "blank_lines": 252,
      "comment_lines": 114,
      "last_modified": "2025-08-31T14:27:21",
      "imports": [
        "requests",
        "time",
        "re",
        "pandas",
        "json",
        "typing",
        "os",
        "loguru"
      ],
      "classes": [
        {
          "name": "ApiInfoReader",
          "line_number": 209,
          "base_classes": [],
          "docstring": "用于读取和解析api_info.json文件的类\n提供方法来获取api_links和tables数据，并支持通过api_mapping.json中的键进行访问",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 215,
              "return_type": null,
              "docstring": "初始化ApiInfoReader类\n\nArgs:\n    api_info_path: api_info.json文件的路径\n    api_mapping_path: api_mapping.json文件的路径，默认为None",
              "is_async": false,
              "decorators": [],
              "body_lines": 13,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "api_info_path",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "api_mapping_path",
                  "type_annotation": null,
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "read_api_info_file",
              "line_number": 230,
              "return_type": null,
              "docstring": "读取api_info.json文件内容\n\nReturns:\n    dict: 解析后的JSON数据\n\nRaises:\n    FileNotFoundError: 文件不存在\n    json.JSONDecodeError: JSON格式错误\n    Exception: 其他错误",
              "is_async": false,
              "decorators": [],
              "body_lines": 27,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "read_api_mapping_file",
              "line_number": 259,
              "return_type": null,
              "docstring": "读取api_mapping.json文件内容\n\nReturns:\n    dict: 解析后的JSON数据\n\nRaises:\n    FileNotFoundError: 文件不存在\n    json.JSONDecodeError: JSON格式错误\n    Exception: 其他错误",
              "is_async": false,
              "decorators": [],
              "body_lines": 27,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_init_mappings",
              "line_number": 288,
              "return_type": null,
              "docstring": "初始化api_links和tables的映射关系",
              "is_async": false,
              "decorators": [],
              "body_lines": 40,
              "complexity": 8,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_api_links",
              "line_number": 330,
              "return_type": null,
              "docstring": "获取api_links数据，支持通过key参数过滤特定的api_link\n\nArgs:\n    key: 可选，api_mapping中的键，如\"股票列表\"，不提供时返回所有api_links\n\nReturns:\n    dict or dict: 当不提供key时返回所有api_links字典；提供key时返回对应的api_link数据\n\nRaises:\n    KeyError: 当提供的key不存在时抛出",
              "is_async": false,
              "decorators": [],
              "body_lines": 27,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "key",
                  "type_annotation": null,
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "get_tables",
              "line_number": 359,
              "return_type": null,
              "docstring": "获取tables的headers数据，支持通过key参数过滤特定表格的headers，并支持不同的输出格式\n\nArgs:\n    key: 可选，api_mapping中的键，如\"股票列表\"，不提供时返回所有表格的headers\n    export: 可选，输出格式，默认为'json'，可选值为'json'、'dict'、'df'\n\nReturns:\n    根据export参数返回不同格式的数据：\n    - 'json': 当不提供key时返回包含所有表格headers的字典；提供key时返回对应表格的headers列表\n    - 'dict': 返回json_to_dict转换后的字段信息字典\n    - 'df': 返回dict_to_df转换后的pandas DataFrame\n\nRaises:\n    KeyError: 当提供的key不存在时抛出\n    ValueError: 当export参数值不合法或表格数据格式错误时抛出",
              "is_async": false,
              "decorators": [],
              "body_lines": 66,
              "complexity": 14,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "key",
                  "type_annotation": null,
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "export",
                  "type_annotation": null,
                  "default_value": "\"json\"",
                  "is_required": false
                }
              ]
            }
          ]
        },
        {
          "name": "ByapiInfo",
          "line_number": 428,
          "base_classes": [],
          "docstring": "BYAPI接口管理类 - 基于新的API映射关系更新",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 431,
              "return_type": null,
              "docstring": "初始化API管理器\n\nArgs:\n    licence (str): API许可证",
              "is_async": false,
              "decorators": [],
              "body_lines": 94,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "licence",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_get_stock_code_without_suffix",
              "line_number": 527,
              "return_type": "str",
              "docstring": "移除股票代码中的市场后缀\n\nArgs:\n    stock_code (str): 股票代码\n\nReturns:\n    str: 移除后缀后的股票代码",
              "is_async": false,
              "decorators": [],
              "body_lines": 11,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "stock_code",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_api_links",
              "line_number": 540,
              "return_type": null,
              "docstring": "获取API链接信息\n\nArgs:\n    key: 可选，API名称键，如\"股票列表\"，不提供时返回所有API链接\n\nReturns:\n    dict: API链接信息",
              "is_async": false,
              "decorators": [],
              "body_lines": 17,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "key",
                  "type_annotation": null,
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "get_tables",
              "line_number": 559,
              "return_type": null,
              "docstring": "获取表格定义信息\n\nArgs:\n    key: 可选，API名称键，如\"股票列表\"，不提供时返回所有表格定义\n    export: 可选，输出格式，默认为'json'，可选值为'json'、'dict'、'df'\n\nReturns:\n    表格定义信息，格式根据export参数而定",
              "is_async": false,
              "decorators": [],
              "body_lines": 20,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "key",
                  "type_annotation": null,
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "export",
                  "type_annotation": null,
                  "default_value": "\"json\"",
                  "is_required": false
                }
              ]
            },
            {
              "name": "_request",
              "line_number": 582,
              "return_type": "Dict[(Any, Any)]",
              "docstring": "发送HTTP请求并返回JSON数据\n\nArgs:\n    url (str): 完整的API URL\n    \nReturns:\n    Dict[Any, Any]: 解析后的JSON数据\n    \nRaises:\n    requests.RequestException: 请求失败时抛出异常",
              "is_async": false,
              "decorators": [],
              "body_lines": 39,
              "complexity": 6,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "url",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_to_dataframe",
              "line_number": 623,
              "return_type": "pd.DataFrame",
              "docstring": "将JSON数据转换为DataFrame\n\nArgs:\n    json_data (Any): JSON数据，可以是字典、列表或其他类型\n    func_name (str): 函数名称，用于查找字段映射\n    col_name (bool): 是否使用中文列名\n    \nReturns:\n    pd.DataFrame: 转换后的DataFrame",
              "is_async": false,
              "decorators": [],
              "body_lines": 107,
              "complexity": 28,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "json_data",
                  "type_annotation": "Any",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "func_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "col_name",
                  "type_annotation": "bool",
                  "default_value": "False",
                  "is_required": false
                }
              ]
            },
            {
              "name": "__call__",
              "line_number": 732,
              "return_type": "pd.DataFrame",
              "docstring": "通过中文名称调用API接口\n\nArgs:\n    api_name (str): API中文名称\n    col_name (bool): 是否使用中文列名\n    *args: 位置参数\n    **kwargs: 关键字参数\n    \nReturns:\n    pd.DataFrame: API返回的数据\n    \nRaises:\n    ValueError: 如果API名称不存在",
              "is_async": false,
              "decorators": [],
              "body_lines": 24,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "api_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "*args",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": false
                },
                {
                  "name": "**kwargs",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": false
                }
              ]
            },
            {
              "name": "stock_list",
              "line_number": 760,
              "return_type": "pd.DataFrame",
              "docstring": "获取基础的股票代码和名称，用于后续接口的参数传入",
              "is_async": false,
              "decorators": [],
              "body_lines": 4,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "col_name",
                  "type_annotation": "bool",
                  "default_value": "True",
                  "is_required": false
                }
              ]
            },
            {
              "name": "new_stock_calendar",
              "line_number": 766,
              "return_type": "pd.DataFrame",
              "docstring": "新股日历，按申购日期倒序",
              "is_async": false,
              "decorators": [],
              "body_lines": 4,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "col_name",
                  "type_annotation": "bool",
                  "default_value": "True",
                  "is_required": false
                }
              ]
            },
            {
              "name": "index_industry_concept_tree",
              "line_number": 774,
              "return_type": "pd.DataFrame",
              "docstring": "获取指数、行业、概念（包括基金，债券，美股，外汇，期货，黄金等的代码）",
              "is_async": false,
              "decorators": [],
              "body_lines": 4,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "col_name",
                  "type_annotation": "bool",
                  "default_value": "True",
                  "is_required": false
                }
              ]
            },
            {
              "name": "stocks_by_index_industry_concept",
              "line_number": 780,
              "return_type": "pd.DataFrame",
              "docstring": "根据\"指数、行业、概念树\"接口得到的代码作为参数，得到相关的股票",
              "is_async": false,
              "decorators": [],
              "body_lines": 4,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "code",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "col_name",
                  "type_annotation": "bool",
                  "default_value": "True",
                  "is_required": false
                }
              ]
            },
            {
              "name": "index_industry_concept_by_stock",
              "line_number": 786,
              "return_type": "pd.DataFrame",
              "docstring": "根据《股票列表》得到的股票代码作为参数，得到相关的指数、行业、概念",
              "is_async": false,
              "decorators": [],
              "body_lines": 8,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "stock_code",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "col_name",
                  "type_annotation": "bool",
                  "default_value": "True",
                  "is_required": false
                }
              ]
            },
            {
              "name": "limit_up_stocks",
              "line_number": 798,
              "return_type": "pd.DataFrame",
              "docstring": "根据日期获取每天的涨停股票列表，根据封板时间升序",
              "is_async": false,
              "decorators": [],
              "body_lines": 7,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "date",
                  "type_annotation": "str",
                  "default_value": "\"\"",
                  "is_required": false
                },
                {
                  "name": "col_name",
                  "type_annotation": "bool",
                  "default_value": "True",
                  "is_required": false
                }
              ]
            },
            {
              "name": "limit_down_stocks",
              "line_number": 807,
              "return_type": "pd.DataFrame",
              "docstring": "根据日期获取每天的跌停股票列表，根据封单资金升序",
              "is_async": false,
              "decorators": [],
              "body_lines": 7,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "date",
                  "type_annotation": "str",
                  "default_value": "\"\"",
                  "is_required": false
                },
                {
                  "name": "col_name",
                  "type_annotation": "bool",
                  "default_value": "True",
                  "is_required": false
                }
              ]
            },
            {
              "name": "strong_stocks",
              "line_number": 816,
              "return_type": "pd.DataFrame",
              "docstring": "根据日期获取每天的强势股票列表，根据涨幅倒序",
              "is_async": false,
              "decorators": [],
              "body_lines": 7,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "date",
                  "type_annotation": "str",
                  "default_value": "\"\"",
                  "is_required": false
                },
                {
                  "name": "col_name",
                  "type_annotation": "bool",
                  "default_value": "True",
                  "is_required": false
                }
              ]
            },
            {
              "name": "new_stocks",
              "line_number": 825,
              "return_type": "pd.DataFrame",
              "docstring": "根据日期获取每天的次新股票列表，根据开板几日升序",
              "is_async": false,
              "decorators": [],
              "body_lines": 7,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "date",
                  "type_annotation": "str",
                  "default_value": "\"\"",
                  "is_required": false
                },
                {
                  "name": "col_name",
                  "type_annotation": "bool",
                  "default_value": "True",
                  "is_required": false
                }
              ]
            },
            {
              "name": "broken_limit_stocks",
              "line_number": 834,
              "return_type": "pd.DataFrame",
              "docstring": "根据日期获取每天的炸板股票列表，根据首次封板时间升序",
              "is_async": false,
              "decorators": [],
              "body_lines": 7,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "date",
                  "type_annotation": "str",
                  "default_value": "\"\"",
                  "is_required": false
                },
                {
                  "name": "col_name",
                  "type_annotation": "bool",
                  "default_value": "True",
                  "is_required": false
                }
              ]
            },
            {
              "name": "company_profile",
              "line_number": 845,
              "return_type": "pd.DataFrame",
              "docstring": "根据股票代码获取上市公司的简介",
              "is_async": false,
              "decorators": [],
              "body_lines": 6,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "stock_code",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "col_name",
                  "type_annotation": "bool",
                  "default_value": "True",
                  "is_required": false
                }
              ]
            },
            {
              "name": "index_membership",
              "line_number": 853,
              "return_type": "pd.DataFrame",
              "docstring": "根据股票代码获取上市公司所属的指数信息",
              "is_async": false,
              "decorators": [],
              "body_lines": 6,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "stock_code",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "col_name",
                  "type_annotation": "bool",
                  "default_value": "True",
                  "is_required": false
                }
              ]
            },
            {
              "name": "executive_history",
              "line_number": 861,
              "return_type": "pd.DataFrame",
              "docstring": "根据股票代码获取上市公司历届高管成员信息",
              "is_async": false,
              "decorators": [],
              "body_lines": 6,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "stock_code",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "col_name",
                  "type_annotation": "bool",
                  "default_value": "True",
                  "is_required": false
                }
              ]
            },
            {
              "name": "board_history",
              "line_number": 869,
              "return_type": "pd.DataFrame",
              "docstring": "根据股票代码获取上市公司历届董事会成员信息",
              "is_async": false,
              "decorators": [],
              "body_lines": 6,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "stock_code",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "col_name",
                  "type_annotation": "bool",
                  "default_value": "True",
                  "is_required": false
                }
              ]
            },
            {
              "name": "supervisory_history",
              "line_number": 877,
              "return_type": "pd.DataFrame",
              "docstring": "根据股票代码获取上市公司历届监事会成员信息",
              "is_async": false,
              "decorators": [],
              "body_lines": 6,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "stock_code",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "col_name",
                  "type_annotation": "bool",
                  "default_value": "True",
                  "is_required": false
                }
              ]
            },
            {
              "name": "recent_dividends",
              "line_number": 885,
              "return_type": "pd.DataFrame",
              "docstring": "根据股票代码获取上市公司近年分红信息",
              "is_async": false,
              "decorators": [],
              "body_lines": 6,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "stock_code",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "col_name",
                  "type_annotation": "bool",
                  "default_value": "True",
                  "is_required": false
                }
              ]
            },
            {
              "name": "recent_seo",
              "line_number": 893,
              "return_type": "pd.DataFrame",
              "docstring": "根据股票代码获取上市公司近年增发信息",
              "is_async": false,
              "decorators": [],
              "body_lines": 6,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "stock_code",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "col_name",
                  "type_annotation": "bool",
                  "default_value": "True",
                  "is_required": false
                }
              ]
            },
            {
              "name": "lifted_shares",
              "line_number": 901,
              "return_type": "pd.DataFrame",
              "docstring": "根据股票代码获取上市公司解禁限售信息",
              "is_async": false,
              "decorators": [],
              "body_lines": 6,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "stock_code",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "col_name",
                  "type_annotation": "bool",
                  "default_value": "True",
                  "is_required": false
                }
              ]
            },
            {
              "name": "quarterly_profits",
              "line_number": 909,
              "return_type": "pd.DataFrame",
              "docstring": "根据股票代码获取上市公司近一年各季度利润信息",
              "is_async": false,
              "decorators": [],
              "body_lines": 6,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "stock_code",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "col_name",
                  "type_annotation": "bool",
                  "default_value": "True",
                  "is_required": false
                }
              ]
            },
            {
              "name": "quarterly_cashflow",
              "line_number": 917,
              "return_type": "pd.DataFrame",
              "docstring": "根据股票代码获取上市公司近一年各季度现金流信息",
              "is_async": false,
              "decorators": [],
              "body_lines": 6,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "stock_code",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "col_name",
                  "type_annotation": "bool",
                  "default_value": "True",
                  "is_required": false
                }
              ]
            },
            {
              "name": "earnings_forecast",
              "line_number": 925,
              "return_type": "pd.DataFrame",
              "docstring": "根据股票代码获取上市公司近年业绩预告信息",
              "is_async": false,
              "decorators": [],
              "body_lines": 6,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "stock_code",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "col_name",
                  "type_annotation": "bool",
                  "default_value": "True",
                  "is_required": false
                }
              ]
            },
            {
              "name": "financial_indicators",
              "line_number": 933,
              "return_type": "pd.DataFrame",
              "docstring": "根据股票代码获取上市公司的财务指标数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 6,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "stock_code",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "col_name",
                  "type_annotation": "bool",
                  "default_value": "True",
                  "is_required": false
                }
              ]
            },
            {
              "name": "top_shareholders",
              "line_number": 941,
              "return_type": "pd.DataFrame",
              "docstring": "根据股票代码获取上市公司的十大股东信息",
              "is_async": false,
              "decorators": [],
              "body_lines": 6,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "stock_code",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "col_name",
                  "type_annotation": "bool",
                  "default_value": "True",
                  "is_required": false
                }
              ]
            },
            {
              "name": "top_float_shareholders",
              "line_number": 949,
              "return_type": "pd.DataFrame",
              "docstring": "根据股票代码获取上市公司的十大流通股东信息",
              "is_async": false,
              "decorators": [],
              "body_lines": 6,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "stock_code",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "col_name",
                  "type_annotation": "bool",
                  "default_value": "True",
                  "is_required": false
                }
              ]
            },
            {
              "name": "shareholder_trend",
              "line_number": 957,
              "return_type": "pd.DataFrame",
              "docstring": "根据股票代码获取上市公司的股东变化趋势信息",
              "is_async": false,
              "decorators": [],
              "body_lines": 6,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "stock_code",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "col_name",
                  "type_annotation": "bool",
                  "default_value": "True",
                  "is_required": false
                }
              ]
            },
            {
              "name": "fund_ownership",
              "line_number": 965,
              "return_type": "pd.DataFrame",
              "docstring": "根据股票代码获取上市公司的基金持股信息",
              "is_async": false,
              "decorators": [],
              "body_lines": 6,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "stock_code",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "col_name",
                  "type_annotation": "bool",
                  "default_value": "True",
                  "is_required": false
                }
              ]
            },
            {
              "name": "realtime_quotes_public",
              "line_number": 975,
              "return_type": "pd.DataFrame",
              "docstring": "获取单个股票的实时交易公开数据（不需要授权）",
              "is_async": false,
              "decorators": [],
              "body_lines": 6,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "stock_code",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "col_name",
                  "type_annotation": "bool",
                  "default_value": "True",
                  "is_required": false
                }
              ]
            },
            {
              "name": "intraday_transactions",
              "line_number": 983,
              "return_type": "pd.DataFrame",
              "docstring": "获取当天的逐笔交易数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 6,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "stock_code",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "col_name",
                  "type_annotation": "bool",
                  "default_value": "True",
                  "is_required": false
                }
              ]
            },
            {
              "name": "realtime_quotes",
              "line_number": 991,
              "return_type": "pd.DataFrame",
              "docstring": "获取单个股票的实时交易数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 6,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "stock_code",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "col_name",
                  "type_annotation": "bool",
                  "default_value": "True",
                  "is_required": false
                }
              ]
            },
            {
              "name": "five_level_quotes",
              "line_number": 999,
              "return_type": "pd.DataFrame",
              "docstring": "获取单个股票的买卖五档盘口数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 7,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "stock_code",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "col_name",
                  "type_annotation": "bool",
                  "default_value": "True",
                  "is_required": false
                }
              ]
            },
            {
              "name": "multi_stock_realtime",
              "line_number": 1008,
              "return_type": "pd.DataFrame",
              "docstring": "获取多个股票的实时交易数据，股票代码用逗号分隔",
              "is_async": false,
              "decorators": [],
              "body_lines": 4,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "stock_codes",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "col_name",
                  "type_annotation": "bool",
                  "default_value": "True",
                  "is_required": false
                }
              ]
            },
            {
              "name": "fund_flow_data",
              "line_number": 1014,
              "return_type": "pd.DataFrame",
              "docstring": "获取单个股票的资金流向数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 6,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "stock_code",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "col_name",
                  "type_annotation": "bool",
                  "default_value": "True",
                  "is_required": false
                }
              ]
            },
            {
              "name": "latest_minute_quotes",
              "line_number": 1024,
              "return_type": "pd.DataFrame",
              "docstring": "获取单个股票的最新分时交易数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 6,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "stock_code",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "col_name",
                  "type_annotation": "bool",
                  "default_value": "True",
                  "is_required": false
                }
              ]
            },
            {
              "name": "history_minute_quotes",
              "line_number": 1032,
              "return_type": "pd.DataFrame",
              "docstring": "获取单个股票的历史分时交易数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 8,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "stock_code",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "date",
                  "type_annotation": "str",
                  "default_value": "\"\"",
                  "is_required": false
                },
                {
                  "name": "col_name",
                  "type_annotation": "bool",
                  "default_value": "True",
                  "is_required": false
                }
              ]
            },
            {
              "name": "history_limit_prices",
              "line_number": 1042,
              "return_type": "pd.DataFrame",
              "docstring": "获取单个股票的历史涨跌停价格数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 6,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "stock_code",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "col_name",
                  "type_annotation": "bool",
                  "default_value": "True",
                  "is_required": false
                }
              ]
            },
            {
              "name": "market_indicators",
              "line_number": 1050,
              "return_type": "pd.DataFrame",
              "docstring": "获取单个股票的行情指标数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 6,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "stock_code",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "col_name",
                  "type_annotation": "bool",
                  "default_value": "True",
                  "is_required": false
                }
              ]
            },
            {
              "name": "stock_basic_info",
              "line_number": 1060,
              "return_type": "pd.DataFrame",
              "docstring": "获取单个股票的基础信息",
              "is_async": false,
              "decorators": [],
              "body_lines": 6,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "stock_code",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "col_name",
                  "type_annotation": "bool",
                  "default_value": "True",
                  "is_required": false
                }
              ]
            },
            {
              "name": "balance_sheet",
              "line_number": 1070,
              "return_type": "pd.DataFrame",
              "docstring": "获取单个股票的资产负债表数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 5,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "stock_code",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "col_name",
                  "type_annotation": "bool",
                  "default_value": "True",
                  "is_required": false
                }
              ]
            },
            {
              "name": "income_statement",
              "line_number": 1077,
              "return_type": "pd.DataFrame",
              "docstring": "获取单个股票的利润表数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 5,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "stock_code",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "col_name",
                  "type_annotation": "bool",
                  "default_value": "True",
                  "is_required": false
                }
              ]
            },
            {
              "name": "cash_flow_statement",
              "line_number": 1084,
              "return_type": "pd.DataFrame",
              "docstring": "获取单个股票的现金流量表数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 6,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "stock_code",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "col_name",
                  "type_annotation": "bool",
                  "default_value": "True",
                  "is_required": false
                }
              ]
            },
            {
              "name": "financial_ratios",
              "line_number": 1092,
              "return_type": "pd.DataFrame",
              "docstring": "获取单个股票的财务主要指标数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 6,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "stock_code",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "col_name",
                  "type_annotation": "bool",
                  "default_value": "True",
                  "is_required": false
                }
              ]
            },
            {
              "name": "capital_structure",
              "line_number": 1100,
              "return_type": "pd.DataFrame",
              "docstring": "获取单个股票的公司股本表数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 6,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "stock_code",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "col_name",
                  "type_annotation": "bool",
                  "default_value": "True",
                  "is_required": false
                }
              ]
            },
            {
              "name": "company_top_shareholders",
              "line_number": 1108,
              "return_type": "pd.DataFrame",
              "docstring": "获取单个股票的公司十大股东数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 6,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "stock_code",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "col_name",
                  "type_annotation": "bool",
                  "default_value": "True",
                  "is_required": false
                }
              ]
            },
            {
              "name": "company_top_float_holders",
              "line_number": 1116,
              "return_type": "pd.DataFrame",
              "docstring": "获取单个股票的公司十大流通股东数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 6,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "stock_code",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "col_name",
                  "type_annotation": "bool",
                  "default_value": "True",
                  "is_required": false
                }
              ]
            },
            {
              "name": "shareholder_count",
              "line_number": 1124,
              "return_type": "pd.DataFrame",
              "docstring": "获取单个股票的公司股东数数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 6,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "stock_code",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "col_name",
                  "type_annotation": "bool",
                  "default_value": "True",
                  "is_required": false
                }
              ]
            },
            {
              "name": "history_macd",
              "line_number": 1134,
              "return_type": "pd.DataFrame",
              "docstring": "获取单个股票的历史分时MACD数据\n\nArgs:\n    stock_code (str): 股票代码，格式如000001.SZ\n    level (str): 分时级别，支持5、15、30、60、d、w、m、y\n    adj_type (str): 除权类型，日线以上支持n（不复权）、f（前复权）、b（后复权）、fr（等比前复权）、br（等比后复权），分钟级仅限n\n    start_time (str): 开始时间，格式为YYYYMMDD或YYYYMMDDhhmmss\n    end_time (str): 结束时间，格式为YYYYMMDD或YYYYMMDDhhmmss\n    limit (int): 最新条数，0表示全部\n    col_name (bool): 是否使用中文列名\n\nReturns:\n    pd.DataFrame: MACD数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 29,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "stock_code",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "level",
                  "type_annotation": "str",
                  "default_value": "\"d\"",
                  "is_required": false
                },
                {
                  "name": "adj_type",
                  "type_annotation": "str",
                  "default_value": "\"n\"",
                  "is_required": false
                },
                {
                  "name": "start_time",
                  "type_annotation": "str",
                  "default_value": "\"\"",
                  "is_required": false
                },
                {
                  "name": "end_time",
                  "type_annotation": "str",
                  "default_value": "\"\"",
                  "is_required": false
                },
                {
                  "name": "limit",
                  "type_annotation": "int",
                  "default_value": "0",
                  "is_required": false
                },
                {
                  "name": "col_name",
                  "type_annotation": "bool",
                  "default_value": "True",
                  "is_required": false
                }
              ]
            },
            {
              "name": "history_ma",
              "line_number": 1165,
              "return_type": "pd.DataFrame",
              "docstring": "获取单个股票的历史分时MA数据\n\nArgs:\n    stock_code (str): 股票代码，格式如000001.SZ\n    level (str): 分时级别，支持5、15、30、60、d、w、m、y\n    adj_type (str): 除权类型，日线以上支持n（不复权）、f（前复权）、b（后复权）、fr（等比前复权）、br（等比后复权），分钟级仅限n\n    start_time (str): 开始时间，格式为YYYYMMDD或YYYYMMDDhhmmss\n    end_time (str): 结束时间，格式为YYYYMMDD或YYYYMMDDhhmmss\n    limit (int): 最新条数，0表示全部\n    col_name (bool): 是否使用中文列名\n\nReturns:\n    pd.DataFrame: MA数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 31,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "stock_code",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "level",
                  "type_annotation": "str",
                  "default_value": "\"d\"",
                  "is_required": false
                },
                {
                  "name": "adj_type",
                  "type_annotation": "str",
                  "default_value": "\"n\"",
                  "is_required": false
                },
                {
                  "name": "start_time",
                  "type_annotation": "str",
                  "default_value": "\"\"",
                  "is_required": false
                },
                {
                  "name": "end_time",
                  "type_annotation": "str",
                  "default_value": "\"\"",
                  "is_required": false
                },
                {
                  "name": "limit",
                  "type_annotation": "int",
                  "default_value": "0",
                  "is_required": false
                },
                {
                  "name": "col_name",
                  "type_annotation": "bool",
                  "default_value": "True",
                  "is_required": false
                }
              ]
            },
            {
              "name": "history_boll",
              "line_number": 1198,
              "return_type": "pd.DataFrame",
              "docstring": "获取单个股票的历史分时BOLL数据\n\nArgs:\n    stock_code (str): 股票代码，格式如000001.SZ\n    level (str): 分时级别，支持5、15、30、60、d、w、m、y\n    adj_type (str): 除权类型，日线以上支持n（不复权）、f（前复权）、b（后复权）、fr（等比前复权）、br（等比后复权），分钟级仅限n\n    start_time (str): 开始时间，格式为YYYYMMDD或YYYYMMDDhhmmss\n    end_time (str): 结束时间，格式为YYYYMMDD或YYYYMMDDhhmmss\n    limit (int): 最新条数，0表示全部\n    col_name (bool): 是否使用中文列名\n\nReturns:\n    pd.DataFrame: BOLL数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 31,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "stock_code",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "level",
                  "type_annotation": "str",
                  "default_value": "\"d\"",
                  "is_required": false
                },
                {
                  "name": "adj_type",
                  "type_annotation": "str",
                  "default_value": "\"n\"",
                  "is_required": false
                },
                {
                  "name": "start_time",
                  "type_annotation": "str",
                  "default_value": "\"\"",
                  "is_required": false
                },
                {
                  "name": "end_time",
                  "type_annotation": "str",
                  "default_value": "\"\"",
                  "is_required": false
                },
                {
                  "name": "limit",
                  "type_annotation": "int",
                  "default_value": "0",
                  "is_required": false
                },
                {
                  "name": "col_name",
                  "type_annotation": "bool",
                  "default_value": "True",
                  "is_required": false
                }
              ]
            },
            {
              "name": "history_kdj",
              "line_number": 1231,
              "return_type": "pd.DataFrame",
              "docstring": "获取单个股票的历史分时KDJ数据\n\nArgs:\n    stock_code (str): 股票代码，格式如000001.SZ\n    level (str): 分时级别，支持5、15、30、60、d、w、m、y\n    adj_type (str): 除权类型，日线以上支持n（不复权）、f（前复权）、b（后复权）、fr（等比前复权）、br（等比后复权），分钟级仅限n\n    start_time (str): 开始时间，格式为YYYYMMDD或YYYYMMDDhhmmss\n    end_time (str): 结束时间，格式为YYYYMMDD或YYYYMMDDhhmmss\n    limit (int): 最新条数，0表示全部\n    col_name (bool): 是否使用中文列名\n\nReturns:\n    pd.DataFrame: KDJ数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 31,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "stock_code",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "level",
                  "type_annotation": "str",
                  "default_value": "\"d\"",
                  "is_required": false
                },
                {
                  "name": "adj_type",
                  "type_annotation": "str",
                  "default_value": "\"n\"",
                  "is_required": false
                },
                {
                  "name": "start_time",
                  "type_annotation": "str",
                  "default_value": "\"\"",
                  "is_required": false
                },
                {
                  "name": "end_time",
                  "type_annotation": "str",
                  "default_value": "\"\"",
                  "is_required": false
                },
                {
                  "name": "limit",
                  "type_annotation": "int",
                  "default_value": "0",
                  "is_required": false
                },
                {
                  "name": "col_name",
                  "type_annotation": "bool",
                  "default_value": "True",
                  "is_required": false
                }
              ]
            },
            {
              "name": "_get_stock_code_without_suffix",
              "line_number": 1266,
              "return_type": "str",
              "docstring": "去除股票代码中的市场后缀",
              "is_async": false,
              "decorators": [],
              "body_lines": 4,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "stock_code",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_supported_apis",
              "line_number": 1272,
              "return_type": "List[Dict[(str, str)]]",
              "docstring": "获取所有支持的API名称列表，格式为中文名:英文函数名的映射",
              "is_async": false,
              "decorators": [],
              "body_lines": 3,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_api_documentation",
              "line_number": 1277,
              "return_type": "Dict[(str, Any)]",
              "docstring": "获取API的文档信息\n\nArgs:\n    api_name (str): API中文名称\n    \nReturns:\n    Dict[str, Any]: 包含API文档信息的字典，按name, description, api_links, fields顺序排列",
              "is_async": false,
              "decorators": [],
              "body_lines": 30,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "api_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": [
        {
          "name": "json_to_dict",
          "line_number": 56,
          "return_type": null,
          "docstring": "将JSON格式的headers数据转换为字段信息字典\n\nArgs:\n    json_data: JSON格式的headers数据，可能是一个列表的字典，也可能是扁平的列表\n\nReturns:\n    dict: 转换后的字段信息字典，key为字段名，value为包含字段描述、数据类型等信息的字典\n\nRaises:\n    TypeError: 当json_data不是列表时抛出\n    Exception: 其他转换错误",
          "is_async": false,
          "decorators": [],
          "body_lines": 77,
          "complexity": 16,
          "parameters": [
            {
              "name": "json_data",
              "type_annotation": null,
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "dict_to_df",
          "line_number": 136,
          "return_type": null,
          "docstring": "将字段信息字典转换为pandas DataFrame\n\nArgs:\n    field_dict: 字段信息字典，key为字段名，value为包含字段描述、数据类型等信息的字典\n\nReturns:\n    pandas.DataFrame: 转换后的DataFrame，每行代表一个字段的信息\n\nRaises:\n    TypeError: 当field_dict不是字典时抛出\n    ImportError: 当pandas库不可用时抛出\n    Exception: 其他转换错误",
          "is_async": false,
          "decorators": [],
          "body_lines": 70,
          "complexity": 11,
          "parameters": [
            {
              "name": "field_dict",
              "type_annotation": null,
              "default_value": null,
              "is_required": true
            }
          ]
        }
      ]
    },
    {
      "file_path": "adapters/byapi/byapi_mapping_optimized.py",
      "module_name": "adapters.byapi.byapi_mapping_optimized",
      "category": "auxiliary",
      "docstring": "API映射配置文件 - 优化版\n根据optimized_api_data_v2.json中的接口定义，提供API接口的类型、名称、URL、描述及返回字段映射。",
      "lines_of_code": 170,
      "blank_lines": 28,
      "comment_lines": 22,
      "last_modified": "2025-08-29T02:44:05",
      "imports": [
        "json",
        "os"
      ],
      "classes": [],
      "functions": [
        {
          "name": "load_api_data_from_json",
          "line_number": 17,
          "return_type": null,
          "docstring": "从JSON文件加载API数据并构建API_MAPPING_TYPE\n:param json_file_path: JSON文件路径，如果未提供则使用默认路径\n:return: 加载是否成功",
          "is_async": false,
          "decorators": [],
          "body_lines": 71,
          "complexity": 11,
          "parameters": [
            {
              "name": "json_file_path",
              "type_annotation": null,
              "default_value": "None",
              "is_required": false
            }
          ]
        },
        {
          "name": "generate_column_name_mapping",
          "line_number": 91,
          "return_type": null,
          "docstring": "生成字段名称映射字典",
          "is_async": false,
          "decorators": [],
          "body_lines": 12,
          "complexity": 4,
          "parameters": []
        },
        {
          "name": "get_api_types",
          "line_number": 108,
          "return_type": null,
          "docstring": "获取所有API类型",
          "is_async": false,
          "decorators": [],
          "body_lines": 2,
          "complexity": 1,
          "parameters": []
        },
        {
          "name": "get_api_names_by_type",
          "line_number": 112,
          "return_type": null,
          "docstring": "根据API类型获取该类型下的所有API名称",
          "is_async": false,
          "decorators": [],
          "body_lines": 4,
          "complexity": 2,
          "parameters": [
            {
              "name": "api_type",
              "type_annotation": null,
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "get_field_mapping",
          "line_number": 118,
          "return_type": null,
          "docstring": "根据API名称获取字段映射",
          "is_async": false,
          "decorators": [],
          "body_lines": 5,
          "complexity": 3,
          "parameters": [
            {
              "name": "api_name",
              "type_annotation": null,
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "get_api_documentation",
          "line_number": 125,
          "return_type": null,
          "docstring": "根据API名称获取API文档信息",
          "is_async": false,
          "decorators": [],
          "body_lines": 12,
          "complexity": 3,
          "parameters": [
            {
              "name": "api_name",
              "type_annotation": null,
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "get_column_name_mapping",
          "line_number": 139,
          "return_type": null,
          "docstring": "根据API名称获取列名映射",
          "is_async": false,
          "decorators": [],
          "body_lines": 2,
          "complexity": 1,
          "parameters": [
            {
              "name": "api_name",
              "type_annotation": null,
              "default_value": null,
              "is_required": true
            }
          ]
        }
      ]
    },
    {
      "file_path": "tests/acceptance/test_us3_monitoring.py",
      "module_name": "tests.acceptance.test_us3_monitoring",
      "category": "monitoring",
      "docstring": "US3验收测试: 独立监控与质量保证\n\n用户故事:\n作为系统管理员,我希望系统能够自动监控所有数据操作的性能和质量,\n在发生慢查询或数据质量问题时自动告警,以便及时发现和解决问题。\n\n验收场景:\n1. 数据保存操作自动记录到监控数据库\n2. 慢查询自动检测并生成告警\n3. 质量报告包含3个维度的指标 (完整性/新鲜度/准确性)\n4. 数据缺失率超过阈值时自动告警\n5. 监控数据库不可用时降级到本地日志\n6. 监控数据自动清理过期日志\n\n创建日期: 2025-10-12\n版本: 1.0.0",
      "lines_of_code": 371,
      "blank_lines": 65,
      "comment_lines": 28,
      "last_modified": "2025-10-12T00:22:41.667010",
      "imports": [
        "unittest",
        "pandas",
        "sys",
        "os",
        "time",
        "datetime",
        "unified_manager",
        "core.data_classification",
        "monitoring.monitoring_database",
        "monitoring.performance_monitor",
        "monitoring.data_quality_monitor",
        "monitoring.alert_manager"
      ],
      "classes": [
        {
          "name": "TestUS3Monitoring",
          "line_number": 38,
          "base_classes": [
            "unittest.TestCase"
          ],
          "docstring": "US3验收测试",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "setUpClass",
              "line_number": 42,
              "return_type": null,
              "docstring": "测试类初始化",
              "is_async": false,
              "decorators": [
                "classmethod"
              ],
              "body_lines": 11,
              "complexity": 1,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_scenario_1_save_operation_auto_logging",
              "line_number": 55,
              "return_type": null,
              "docstring": "场景1: 数据保存操作自动记录到监控数据库\n\nGiven: 系统已启用监控功能\nWhen: 用户保存Tick数据到TDengine\nThen: 操作详情自动记录到监控数据库\n      - 操作类型: SAVE\n      - 分类: TICK_DATA\n      - 目标数据库: TDengine\n      - 记录数: 1000\n      - 状态: SUCCESS",
              "is_async": false,
              "decorators": [],
              "body_lines": 46,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_scenario_2_slow_query_auto_alert",
              "line_number": 103,
              "return_type": null,
              "docstring": "场景2: 慢查询自动检测并生成告警\n\nGiven: 系统配置慢查询阈值为5秒\nWhen: 执行一个耗时6秒的查询\nThen: 系统自动检测慢查询并生成WARNING级别告警\n      - 告警类型: SLOW_QUERY\n      - 执行时间: 6000ms\n      - 阈值: 5000ms",
              "is_async": false,
              "decorators": [],
              "body_lines": 38,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_scenario_3_quality_report_three_dimensions",
              "line_number": 143,
              "return_type": null,
              "docstring": "场景3: 质量报告包含3个维度的指标\n\nGiven: 系统支持3维度质量检查\nWhen: 用户请求daily_kline表的质量报告\nThen: 报告包含完整性、新鲜度、准确性3个维度的指标",
              "is_async": false,
              "decorators": [],
              "body_lines": 58,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_scenario_4_missing_rate_threshold_alert",
              "line_number": 203,
              "return_type": null,
              "docstring": "场景4: 数据缺失率超过阈值时自动告警\n\nGiven: 系统配置缺失率阈值为5%\nWhen: daily_kline表缺失率达到6%\nThen: 系统自动生成WARNING级别告警\n      - 告警类型: DATA_QUALITY\n      - 缺失率: 6%\n      - 阈值: 5%",
              "is_async": false,
              "decorators": [],
              "body_lines": 40,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_scenario_5_monitoring_db_unavailable_fallback",
              "line_number": 245,
              "return_type": null,
              "docstring": "场景5: 监控数据库不可用时降级到本地日志\n\nGiven: 监控数据库连接失败\nWhen: 用户执行数据保存操作\nThen: 操作正常完成,监控信息降级记录到本地日志\n      - 业务操作不受影响\n      - 监控信息写入本地日志",
              "is_async": false,
              "decorators": [],
              "body_lines": 41,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_scenario_6_monitoring_data_retention",
              "line_number": 288,
              "return_type": null,
              "docstring": "场景6: 监控数据自动清理过期日志\n\nGiven: 系统配置日志保留策略\n      - operation_logs: 30天\n      - performance_metrics: 90天\n      - data_quality_checks: 7天\n      - alert_records: 90天\nWhen: 系统运行定期清理任务\nThen: 超过保留期的日志自动清理\n      - 节省存储空间\n      - 保持查询性能",
              "is_async": false,
              "decorators": [],
              "body_lines": 37,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "tearDownClass",
              "line_number": 328,
              "return_type": null,
              "docstring": "清理测试环境",
              "is_async": false,
              "decorators": [
                "classmethod"
              ],
              "body_lines": 30,
              "complexity": 3,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": []
    },
    {
      "file_path": "tests/acceptance/test_us2_config_driven.py",
      "module_name": "tests.acceptance.test_us2_config_driven",
      "category": "infrastructure",
      "docstring": "T025: US2配置驱动表结构管理验收测试\n\n验证配置驱动表结构管理的6个核心场景：\n1. 添加新表定义 → 自动创建\n2. 添加新列 → 自动添加\n3. 删除/修改列 → 需要确认\n4. 配置语法错误 → 明确错误信息\n5. 不支持的数据库类型 → 错误提示\n6. 表名冲突 → 冲突错误\n\n创建日期: 2025-10-11\n版本: 1.0.0",
      "lines_of_code": 583,
      "blank_lines": 88,
      "comment_lines": 22,
      "last_modified": "2025-10-11T21:42:31.864963",
      "imports": [
        "sys",
        "os",
        "yaml",
        "tempfile",
        "shutil",
        "pathlib",
        "pytest",
        "core.config_driven_table_manager",
        "db_manager.connection_manager"
      ],
      "classes": [
        {
          "name": "TestUS2ConfigDriven",
          "line_number": 33,
          "base_classes": [],
          "docstring": "US2验收测试类",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "setup_class",
              "line_number": 37,
              "return_type": null,
              "docstring": "测试类初始化",
              "is_async": false,
              "decorators": [
                "classmethod"
              ],
              "body_lines": 7,
              "complexity": 1,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "teardown_class",
              "line_number": 47,
              "return_type": null,
              "docstring": "测试类清理",
              "is_async": false,
              "decorators": [
                "classmethod"
              ],
              "body_lines": 4,
              "complexity": 3,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_check_database_availability",
              "line_number": 54,
              "return_type": null,
              "docstring": "检查数据库可用性",
              "is_async": false,
              "decorators": [
                "classmethod"
              ],
              "body_lines": 41,
              "complexity": 9,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_scenario_1_add_new_table_auto_create",
              "line_number": 97,
              "return_type": null,
              "docstring": "场景1: 添加新表定义 → 自动创建\n\n验收标准：\n- 在配置文件中添加新表定义\n- ConfigDrivenTableManager检测到新表\n- 自动创建该表到目标数据库\n- 表结构符合配置定义",
              "is_async": false,
              "decorators": [],
              "body_lines": 126,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_scenario_2_add_new_column_auto_add",
              "line_number": 225,
              "return_type": null,
              "docstring": "场景2: 添加新列 → 自动添加\n\n验收标准：\n- 在现有表配置中添加新列\n- ConfigDrivenTableManager检测到列变化\n- 在safe_mode下自动添加新列\n- 不影响现有数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 17,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_scenario_3_delete_column_needs_confirmation",
              "line_number": 244,
              "return_type": null,
              "docstring": "场景3: 删除/修改列 → 需要确认\n\n验收标准：\n- 尝试删除现有列\n- ConfigDrivenTableManager检测到危险操作\n- 在safe_mode下拒绝操作或要求确认\n- 提供清晰的警告信息",
              "is_async": false,
              "decorators": [],
              "body_lines": 28,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_scenario_4_config_syntax_error_clear_message",
              "line_number": 274,
              "return_type": null,
              "docstring": "场景4: 配置语法错误 → 明确错误信息\n\n验收标准：\n- 提供语法错误的配置文件\n- ConfigDrivenTableManager加载时检测错误\n- 提供明确的错误信息和位置提示\n- 不会导致系统崩溃",
              "is_async": false,
              "decorators": [],
              "body_lines": 63,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_scenario_5_unsupported_database_type_error",
              "line_number": 339,
              "return_type": null,
              "docstring": "场景5: 不支持的数据库类型 → 错误提示\n\n验收标准：\n- 配置文件指定不支持的数据库类型\n- ConfigDrivenTableManager检测到不支持的类型\n- 提供清晰的错误提示\n- 列出支持的数据库类型",
              "is_async": false,
              "decorators": [],
              "body_lines": 68,
              "complexity": 6,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_scenario_6_table_name_conflict_error",
              "line_number": 409,
              "return_type": null,
              "docstring": "场景6: 表名冲突 → 冲突错误\n\n验收标准：\n- 配置文件中存在重复表名\n- ConfigDrivenTableManager检测到冲突\n- 提供清晰的冲突错误信息\n- 指出冲突的表名",
              "is_async": false,
              "decorators": [],
              "body_lines": 82,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_integration_summary",
              "line_number": 493,
              "return_type": null,
              "docstring": "集成测试总结\n\n验证US2的整体功能是否满足验收标准",
              "is_async": false,
              "decorators": [],
              "body_lines": 42,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": [
        {
          "name": "run_tests",
          "line_number": 538,
          "return_type": null,
          "docstring": "运行所有验收测试",
          "is_async": false,
          "decorators": [],
          "body_lines": 40,
          "complexity": 5,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "tests/acceptance/__init__.py",
      "module_name": "tests.acceptance.__init__",
      "category": "unknown",
      "docstring": null,
      "lines_of_code": 1,
      "blank_lines": 1,
      "comment_lines": 0,
      "last_modified": "2025-10-12T15:25:29.983359",
      "imports": [],
      "classes": [],
      "functions": []
    },
    {
      "file_path": "tests/integration/test_us1_acceptance.py",
      "module_name": "tests.integration.test_us1_acceptance",
      "category": "core",
      "docstring": "US1端到端验收测试\n\n验证MVP US1的所有验收标准:\n1. 用户能够通过不超过3行代码完成数据保存和查询操作\n2. 系统支持完整的34个数据分类的自动路由,路由正确率100%\n3. 系统能够在2秒内完成10万条记录的批量保存操作\n4. 实时数据从Redis缓存访问的响应时间不超过10毫秒\n5. 时序数据查询响应时间不超过100毫秒\n6. 数据库故障时自动排队,数据不丢失\n\n创建日期: 2025-10-11\n版本: 1.0.0",
      "lines_of_code": 302,
      "blank_lines": 65,
      "comment_lines": 29,
      "last_modified": "2025-10-12T00:23:20.303965",
      "imports": [
        "sys",
        "os",
        "pandas",
        "numpy",
        "time",
        "datetime",
        "unified_manager",
        "core.data_classification",
        "core.batch_failure_strategy"
      ],
      "classes": [],
      "functions": []
    },
    {
      "file_path": "tests/integration/__init__.py",
      "module_name": "tests.integration.__init__",
      "category": "unknown",
      "docstring": null,
      "lines_of_code": 1,
      "blank_lines": 1,
      "comment_lines": 0,
      "last_modified": "2025-10-12T15:25:29.971446",
      "imports": [],
      "classes": [],
      "functions": []
    },
    {
      "file_path": "tests/integration/test_data_quality_checks.py",
      "module_name": "tests.integration.test_data_quality_checks",
      "category": "monitoring",
      "docstring": "数据质量检查集成测试 (T034)\n\n测试数据质量监控器的3个维度检查和自动告警功能。\n\n验证点:\n1. 完整性检查 (Completeness) → PASS/WARNING/FAIL\n2. 新鲜度检查 (Freshness) → 延迟检测\n3. 准确性检查 (Accuracy) → 无效数据检测\n4. 质量告警 → 超阈值自动告警\n\n创建日期: 2025-10-12",
      "lines_of_code": 245,
      "blank_lines": 42,
      "comment_lines": 9,
      "last_modified": "2025-10-12T00:23:20.422336",
      "imports": [
        "unittest",
        "pandas",
        "sys",
        "os",
        "datetime",
        "unified_manager",
        "core.data_classification",
        "monitoring.data_quality_monitor"
      ],
      "classes": [
        {
          "name": "TestDataQualityChecks",
          "line_number": 29,
          "base_classes": [
            "unittest.TestCase"
          ],
          "docstring": "数据质量检查集成测试",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "setUpClass",
              "line_number": 33,
              "return_type": null,
              "docstring": "测试类初始化",
              "is_async": false,
              "decorators": [
                "classmethod"
              ],
              "body_lines": 8,
              "complexity": 1,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_01_completeness_check_pass",
              "line_number": 43,
              "return_type": null,
              "docstring": "测试1: 完整性检查 - PASS",
              "is_async": false,
              "decorators": [],
              "body_lines": 21,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_02_completeness_check_warning",
              "line_number": 66,
              "return_type": null,
              "docstring": "测试2: 完整性检查 - WARNING",
              "is_async": false,
              "decorators": [],
              "body_lines": 20,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_03_completeness_check_fail",
              "line_number": 88,
              "return_type": null,
              "docstring": "测试3: 完整性检查 - FAIL",
              "is_async": false,
              "decorators": [],
              "body_lines": 20,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_04_freshness_check_pass",
              "line_number": 110,
              "return_type": null,
              "docstring": "测试4: 新鲜度检查 - PASS",
              "is_async": false,
              "decorators": [],
              "body_lines": 22,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_05_freshness_check_warning",
              "line_number": 134,
              "return_type": null,
              "docstring": "测试5: 新鲜度检查 - WARNING",
              "is_async": false,
              "decorators": [],
              "body_lines": 22,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_06_accuracy_check_pass",
              "line_number": 158,
              "return_type": null,
              "docstring": "测试6: 准确性检查 - PASS",
              "is_async": false,
              "decorators": [],
              "body_lines": 21,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_07_accuracy_check_warning",
              "line_number": 181,
              "return_type": null,
              "docstring": "测试7: 准确性检查 - WARNING",
              "is_async": false,
              "decorators": [],
              "body_lines": 21,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_08_quality_thresholds_update",
              "line_number": 204,
              "return_type": null,
              "docstring": "测试8: 质量阈值更新",
              "is_async": false,
              "decorators": [],
              "body_lines": 16,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "tearDownClass",
              "line_number": 223,
              "return_type": null,
              "docstring": "清理测试环境",
              "is_async": false,
              "decorators": [
                "classmethod"
              ],
              "body_lines": 9,
              "complexity": 1,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": []
    },
    {
      "file_path": "tests/integration/test_tdengine_integration.py",
      "module_name": "tests.integration.test_tdengine_integration",
      "category": "core",
      "docstring": "TDengine集成测试\n\n测试TDengine数据访问层的实际读写操作和性能。\n\n创建日期: 2025-10-11\n版本: 1.0.0",
      "lines_of_code": 137,
      "blank_lines": 28,
      "comment_lines": 16,
      "last_modified": "2025-10-12T00:23:20.340530",
      "imports": [
        "sys",
        "os",
        "pandas",
        "numpy",
        "datetime",
        "data_access.tdengine_access",
        "core.data_classification",
        "unified_manager"
      ],
      "classes": [],
      "functions": []
    },
    {
      "file_path": "tests/integration/test_mysql_redis_integration.py",
      "module_name": "tests.integration.test_mysql_redis_integration",
      "category": "core",
      "docstring": "MySQL/Redis集成测试\n\n测试MySQL和Redis数据访问层的实际读写操作和性能。\n\n创建日期: 2025-10-11\n版本: 1.0.0",
      "lines_of_code": 196,
      "blank_lines": 42,
      "comment_lines": 17,
      "last_modified": "2025-10-12T00:23:20.133353",
      "imports": [
        "sys",
        "os",
        "pandas",
        "numpy",
        "datetime",
        "data_access.mysql_access",
        "data_access.redis_access",
        "core.data_classification",
        "unified_manager"
      ],
      "classes": [],
      "functions": []
    },
    {
      "file_path": "tests/integration/test_performance_monitoring.py",
      "module_name": "tests.integration.test_performance_monitoring",
      "category": "monitoring",
      "docstring": "性能监控集成测试 (T033)\n\n测试性能监控器是否正确跟踪查询性能并在慢查询时告警。\n\n验证点:\n1. 正常查询 → 性能指标记录\n2. 慢查询检测 → 自动告警\n3. 性能统计 → 正确汇总\n4. 批量操作性能 → 吞吐量记录\n\n创建日期: 2025-10-12",
      "lines_of_code": 199,
      "blank_lines": 38,
      "comment_lines": 16,
      "last_modified": "2025-10-12T00:23:20.181466",
      "imports": [
        "unittest",
        "pandas",
        "sys",
        "os",
        "time",
        "datetime",
        "unified_manager",
        "core.data_classification",
        "monitoring.performance_monitor"
      ],
      "classes": [
        {
          "name": "TestPerformanceMonitoring",
          "line_number": 30,
          "base_classes": [
            "unittest.TestCase"
          ],
          "docstring": "性能监控集成测试",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "setUpClass",
              "line_number": 34,
              "return_type": null,
              "docstring": "测试类初始化",
              "is_async": false,
              "decorators": [
                "classmethod"
              ],
              "body_lines": 8,
              "complexity": 1,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_01_normal_query_tracking",
              "line_number": 44,
              "return_type": null,
              "docstring": "测试1: 正常查询性能跟踪",
              "is_async": false,
              "decorators": [],
              "body_lines": 34,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_02_slow_query_detection",
              "line_number": 80,
              "return_type": null,
              "docstring": "测试2: 慢查询检测和告警",
              "is_async": false,
              "decorators": [],
              "body_lines": 19,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_03_performance_statistics",
              "line_number": 101,
              "return_type": null,
              "docstring": "测试3: 性能统计汇总",
              "is_async": false,
              "decorators": [],
              "body_lines": 15,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_04_batch_operation_performance",
              "line_number": 118,
              "return_type": null,
              "docstring": "测试4: 批量操作性能记录",
              "is_async": false,
              "decorators": [],
              "body_lines": 33,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_05_connection_time_tracking",
              "line_number": 153,
              "return_type": null,
              "docstring": "测试5: 连接时间跟踪",
              "is_async": false,
              "decorators": [],
              "body_lines": 21,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "tearDownClass",
              "line_number": 177,
              "return_type": null,
              "docstring": "清理测试环境",
              "is_async": false,
              "decorators": [
                "classmethod"
              ],
              "body_lines": 9,
              "complexity": 1,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": []
    },
    {
      "file_path": "tests/integration/test_operation_logging.py",
      "module_name": "tests.integration.test_operation_logging",
      "category": "core",
      "docstring": "操作日志集成测试 (T032)\n\n测试统一管理器的所有操作是否正确记录到监控数据库。\n\n验证点:\n1. SAVE操作 → 操作日志记录\n2. LOAD操作 → 操作日志记录\n3. 失败操作 → 失败日志记录\n4. 操作统计 → 正确计数\n\n创建日期: 2025-10-12",
      "lines_of_code": 191,
      "blank_lines": 42,
      "comment_lines": 22,
      "last_modified": "2025-10-12T00:23:20.235091",
      "imports": [
        "unittest",
        "pandas",
        "sys",
        "os",
        "datetime",
        "typing",
        "unified_manager",
        "core.data_classification",
        "monitoring.monitoring_database"
      ],
      "classes": [
        {
          "name": "TestOperationLogging",
          "line_number": 30,
          "base_classes": [
            "unittest.TestCase"
          ],
          "docstring": "操作日志集成测试",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "setUpClass",
              "line_number": 34,
              "return_type": null,
              "docstring": "测试类初始化",
              "is_async": false,
              "decorators": [
                "classmethod"
              ],
              "body_lines": 11,
              "complexity": 1,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_01_save_operation_logging",
              "line_number": 47,
              "return_type": null,
              "docstring": "测试1: SAVE操作日志记录",
              "is_async": false,
              "decorators": [],
              "body_lines": 27,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_02_load_operation_logging",
              "line_number": 76,
              "return_type": null,
              "docstring": "测试2: LOAD操作日志记录",
              "is_async": false,
              "decorators": [],
              "body_lines": 18,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_03_failed_operation_logging",
              "line_number": 96,
              "return_type": null,
              "docstring": "测试3: 失败操作日志记录",
              "is_async": false,
              "decorators": [],
              "body_lines": 22,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_04_monitoring_statistics",
              "line_number": 120,
              "return_type": null,
              "docstring": "测试4: 监控统计信息",
              "is_async": false,
              "decorators": [],
              "body_lines": 18,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_05_batch_operation_logging",
              "line_number": 140,
              "return_type": null,
              "docstring": "测试5: 批量操作日志记录",
              "is_async": false,
              "decorators": [],
              "body_lines": 26,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "tearDownClass",
              "line_number": 169,
              "return_type": null,
              "docstring": "清理测试环境",
              "is_async": false,
              "decorators": [
                "classmethod"
              ],
              "body_lines": 9,
              "complexity": 1,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": []
    },
    {
      "file_path": "tests/integration/test_postgresql_integration.py",
      "module_name": "tests.integration.test_postgresql_integration",
      "category": "core",
      "docstring": "PostgreSQL集成测试\n\n测试PostgreSQL数据访问层的实际读写操作和性能。\n\n创建日期: 2025-10-11\n版本: 1.0.0",
      "lines_of_code": 159,
      "blank_lines": 33,
      "comment_lines": 12,
      "last_modified": "2025-10-12T00:23:20.269209",
      "imports": [
        "sys",
        "os",
        "pandas",
        "numpy",
        "datetime",
        "data_access.postgresql_access",
        "core.data_classification",
        "unified_manager"
      ],
      "classes": [],
      "functions": []
    },
    {
      "file_path": "tests/unit/test_postgresql_table_creation.py",
      "module_name": "tests.unit.test_postgresql_table_creation",
      "category": "core",
      "docstring": "T022: PostgreSQL表创建单元测试\n\n验证ConfigDrivenTableManager能够正确创建PostgreSQL表,\n包括TimescaleDB Hypertable、Chunk配置、压缩策略等。\n\n创建日期: 2025-10-11\n版本: 1.0.0",
      "lines_of_code": 265,
      "blank_lines": 60,
      "comment_lines": 8,
      "last_modified": "2025-10-11T21:42:53.384735",
      "imports": [
        "sys",
        "os",
        "pytest",
        "core.config_driven_table_manager",
        "db_manager.connection_manager"
      ],
      "classes": [
        {
          "name": "TestPostgreSQLTableCreation",
          "line_number": 24,
          "base_classes": [],
          "docstring": "PostgreSQL表创建测试类",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "setup_class",
              "line_number": 28,
              "return_type": null,
              "docstring": "测试类初始化",
              "is_async": false,
              "decorators": [
                "classmethod"
              ],
              "body_lines": 3,
              "complexity": 1,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_01_postgresql_connection",
              "line_number": 33,
              "return_type": null,
              "docstring": "测试1: PostgreSQL连接测试",
              "is_async": false,
              "decorators": [],
              "body_lines": 17,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_02_timescaledb_extension",
              "line_number": 52,
              "return_type": null,
              "docstring": "测试2: TimescaleDB扩展检查",
              "is_async": false,
              "decorators": [],
              "body_lines": 26,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_03_postgresql_table_count",
              "line_number": 80,
              "return_type": null,
              "docstring": "测试3: 统计PostgreSQL表定义数量",
              "is_async": false,
              "decorators": [],
              "body_lines": 21,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_04_hypertable_structure",
              "line_number": 103,
              "return_type": null,
              "docstring": "测试4: 验证Hypertable结构定义",
              "is_async": false,
              "decorators": [],
              "body_lines": 35,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_05_create_postgresql_tables",
              "line_number": 140,
              "return_type": null,
              "docstring": "测试5: 创建PostgreSQL表",
              "is_async": false,
              "decorators": [],
              "body_lines": 34,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_06_verify_table_exists",
              "line_number": 176,
              "return_type": null,
              "docstring": "测试6: 验证表是否存在",
              "is_async": false,
              "decorators": [],
              "body_lines": 20,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_07_compression_policy",
              "line_number": 198,
              "return_type": null,
              "docstring": "测试7: 验证压缩策略配置",
              "is_async": false,
              "decorators": [],
              "body_lines": 22,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": [
        {
          "name": "run_tests",
          "line_number": 223,
          "return_type": null,
          "docstring": "运行所有测试",
          "is_async": false,
          "decorators": [],
          "body_lines": 37,
          "complexity": 5,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "tests/unit/test_mysql_table_creation.py",
      "module_name": "tests.unit.test_mysql_table_creation",
      "category": "core",
      "docstring": "T023: MySQL表创建单元测试\n\n验证ConfigDrivenTableManager能够正确创建MySQL表,\n包括索引、约束、字符集等配置。\n\n创建日期: 2025-10-11\n版本: 1.0.0",
      "lines_of_code": 287,
      "blank_lines": 66,
      "comment_lines": 9,
      "last_modified": "2025-10-11T21:02:10.796294",
      "imports": [
        "sys",
        "os",
        "pytest",
        "core.config_driven_table_manager",
        "db_manager.connection_manager"
      ],
      "classes": [
        {
          "name": "TestMySQLTableCreation",
          "line_number": 24,
          "base_classes": [],
          "docstring": "MySQL表创建测试类",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "setup_class",
              "line_number": 28,
              "return_type": null,
              "docstring": "测试类初始化",
              "is_async": false,
              "decorators": [
                "classmethod"
              ],
              "body_lines": 3,
              "complexity": 1,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_01_mysql_connection",
              "line_number": 33,
              "return_type": null,
              "docstring": "测试1: MySQL连接测试",
              "is_async": false,
              "decorators": [],
              "body_lines": 16,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_02_mysql_table_count",
              "line_number": 51,
              "return_type": null,
              "docstring": "测试2: 统计MySQL表定义数量",
              "is_async": false,
              "decorators": [],
              "body_lines": 38,
              "complexity": 8,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_03_mysql_table_structure",
              "line_number": 91,
              "return_type": null,
              "docstring": "测试3: 验证MySQL表结构定义",
              "is_async": false,
              "decorators": [],
              "body_lines": 43,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_04_create_mysql_tables",
              "line_number": 136,
              "return_type": null,
              "docstring": "测试4: 创建MySQL表",
              "is_async": false,
              "decorators": [],
              "body_lines": 33,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_05_verify_table_exists",
              "line_number": 171,
              "return_type": null,
              "docstring": "测试5: 验证表是否存在",
              "is_async": false,
              "decorators": [],
              "body_lines": 22,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_06_charset_and_collation",
              "line_number": 195,
              "return_type": null,
              "docstring": "测试6: 验证字符集和排序规则",
              "is_async": false,
              "decorators": [],
              "body_lines": 23,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_07_auto_increment",
              "line_number": 220,
              "return_type": null,
              "docstring": "测试7: 验证自增主键",
              "is_async": false,
              "decorators": [],
              "body_lines": 22,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": [
        {
          "name": "run_tests",
          "line_number": 245,
          "return_type": null,
          "docstring": "运行所有测试",
          "is_async": false,
          "decorators": [],
          "body_lines": 37,
          "complexity": 5,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "tests/unit/__init__.py",
      "module_name": "tests.unit.__init__",
      "category": "unknown",
      "docstring": null,
      "lines_of_code": 1,
      "blank_lines": 1,
      "comment_lines": 0,
      "last_modified": "2025-10-12T15:25:29.967475",
      "imports": [],
      "classes": [],
      "functions": []
    },
    {
      "file_path": "tests/unit/test_config_validation.py",
      "module_name": "tests.unit.test_config_validation",
      "category": "infrastructure",
      "docstring": "T024: 配置验证单元测试\n\n验证table_config.yaml配置文件的完整性和正确性,\n包括配置结构、数据分类覆盖、冲突检测等。\n\n创建日期: 2025-10-11\n版本: 1.0.0",
      "lines_of_code": 322,
      "blank_lines": 79,
      "comment_lines": 14,
      "last_modified": "2025-10-11T21:02:11.096498",
      "imports": [
        "sys",
        "os",
        "yaml",
        "core.config_driven_table_manager",
        "core.data_classification"
      ],
      "classes": [
        {
          "name": "TestConfigValidation",
          "line_number": 24,
          "base_classes": [],
          "docstring": "配置验证测试类",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "setup_class",
              "line_number": 28,
              "return_type": null,
              "docstring": "测试类初始化",
              "is_async": false,
              "decorators": [
                "classmethod"
              ],
              "body_lines": 3,
              "complexity": 1,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_01_config_structure",
              "line_number": 33,
              "return_type": null,
              "docstring": "测试1: 验证配置文件结构",
              "is_async": false,
              "decorators": [],
              "body_lines": 13,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_02_database_config",
              "line_number": 48,
              "return_type": null,
              "docstring": "测试2: 验证数据库配置",
              "is_async": false,
              "decorators": [],
              "body_lines": 19,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_03_table_count",
              "line_number": 69,
              "return_type": null,
              "docstring": "测试3: 验证表数量",
              "is_async": false,
              "decorators": [],
              "body_lines": 20,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_04_classification_coverage",
              "line_number": 91,
              "return_type": null,
              "docstring": "测试4: 验证数据分类覆盖",
              "is_async": false,
              "decorators": [],
              "body_lines": 31,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_05_table_name_uniqueness",
              "line_number": 124,
              "return_type": null,
              "docstring": "测试5: 验证表名唯一性",
              "is_async": false,
              "decorators": [],
              "body_lines": 17,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_06_required_columns",
              "line_number": 143,
              "return_type": null,
              "docstring": "测试6: 验证必需列",
              "is_async": false,
              "decorators": [],
              "body_lines": 23,
              "complexity": 6,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_07_index_definition",
              "line_number": 168,
              "return_type": null,
              "docstring": "测试7: 验证索引定义",
              "is_async": false,
              "decorators": [],
              "body_lines": 31,
              "complexity": 10,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_08_compression_config",
              "line_number": 201,
              "return_type": null,
              "docstring": "测试8: 验证压缩配置",
              "is_async": false,
              "decorators": [],
              "body_lines": 23,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_09_retention_policy",
              "line_number": 226,
              "return_type": null,
              "docstring": "测试9: 验证保留策略",
              "is_async": false,
              "decorators": [],
              "body_lines": 26,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_10_maintenance_config",
              "line_number": 254,
              "return_type": null,
              "docstring": "测试10: 验证维护配置",
              "is_async": false,
              "decorators": [],
              "body_lines": 24,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": [
        {
          "name": "run_tests",
          "line_number": 281,
          "return_type": null,
          "docstring": "运行所有测试",
          "is_async": false,
          "decorators": [],
          "body_lines": 36,
          "complexity": 4,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "tests/unit/test_tdengine_table_creation.py",
      "module_name": "tests.unit.test_tdengine_table_creation",
      "category": "core",
      "docstring": "T021: TDengine表创建单元测试\n\n验证ConfigDrivenTableManager能够正确创建TDengine Super Tables,\n包括标签(Tags)、压缩策略、保留策略等配置。\n\n创建日期: 2025-10-11\n版本: 1.0.0",
      "lines_of_code": 230,
      "blank_lines": 55,
      "comment_lines": 9,
      "last_modified": "2025-10-11T21:02:10.328039",
      "imports": [
        "sys",
        "os",
        "pytest",
        "core.config_driven_table_manager",
        "db_manager.connection_manager"
      ],
      "classes": [
        {
          "name": "TestTDengineTableCreation",
          "line_number": 24,
          "base_classes": [],
          "docstring": "TDengine表创建测试类",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "setup_class",
              "line_number": 28,
              "return_type": null,
              "docstring": "测试类初始化",
              "is_async": false,
              "decorators": [
                "classmethod"
              ],
              "body_lines": 3,
              "complexity": 1,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_01_config_loaded",
              "line_number": 33,
              "return_type": null,
              "docstring": "测试1: 配置文件加载成功",
              "is_async": false,
              "decorators": [],
              "body_lines": 8,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_02_tdengine_connection",
              "line_number": 43,
              "return_type": null,
              "docstring": "测试2: TDengine连接测试",
              "is_async": false,
              "decorators": [],
              "body_lines": 15,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_03_tdengine_table_count",
              "line_number": 60,
              "return_type": null,
              "docstring": "测试3: 统计TDengine表定义数量",
              "is_async": false,
              "decorators": [],
              "body_lines": 18,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_04_super_table_structure",
              "line_number": 80,
              "return_type": null,
              "docstring": "测试4: 验证Super Table结构定义",
              "is_async": false,
              "decorators": [],
              "body_lines": 51,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_05_create_super_table",
              "line_number": 133,
              "return_type": null,
              "docstring": "测试5: 创建Super Table",
              "is_async": false,
              "decorators": [],
              "body_lines": 31,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_06_verify_table_exists",
              "line_number": 166,
              "return_type": null,
              "docstring": "测试6: 验证表是否存在",
              "is_async": false,
              "decorators": [],
              "body_lines": 20,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": [
        {
          "name": "run_tests",
          "line_number": 189,
          "return_type": null,
          "docstring": "运行所有测试",
          "is_async": false,
          "decorators": [],
          "body_lines": 36,
          "complexity": 5,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "web/backend/celeryconfig_wencai.py",
      "module_name": "web.backend.celeryconfig_wencai",
      "category": "infrastructure",
      "docstring": "问财功能Celery配置示例\n\n将以下配置添加到现有的celeryconfig.py文件中\n\n作者: MyStocks Backend Team\n创建日期: 2025-10-17",
      "lines_of_code": 166,
      "blank_lines": 31,
      "comment_lines": 26,
      "last_modified": "2025-10-17T20:41:13.383619",
      "imports": [
        "celery.schedules"
      ],
      "classes": [],
      "functions": []
    },
    {
      "file_path": "web/backend/setup_database.py",
      "module_name": "web.backend.setup_database",
      "category": "infrastructure",
      "docstring": "MyStocks数据库初始化脚本\n功能:\n1. 验证TimescaleDB扩展\n2. 创建所有PostgreSQL表\n3. 创建所有MySQL表",
      "lines_of_code": 259,
      "blank_lines": 48,
      "comment_lines": 19,
      "last_modified": "2025-10-14T23:06:16.889403",
      "imports": [
        "os",
        "sys",
        "pathlib",
        "psycopg2",
        "pymysql",
        "dotenv"
      ],
      "classes": [
        {
          "name": "DatabaseSetup",
          "line_number": 21,
          "base_classes": [],
          "docstring": null,
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 22,
              "return_type": null,
              "docstring": null,
              "is_async": false,
              "decorators": [],
              "body_lines": 17,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "verify_timescaledb",
              "line_number": 42,
              "return_type": null,
              "docstring": "验证TimescaleDB扩展是否已安装",
              "is_async": false,
              "decorators": [],
              "body_lines": 41,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "create_postgresql_tables",
              "line_number": 85,
              "return_type": null,
              "docstring": "创建PostgreSQL表",
              "is_async": false,
              "decorators": [],
              "body_lines": 81,
              "complexity": 8,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "create_mysql_tables",
              "line_number": 168,
              "return_type": null,
              "docstring": "创建MySQL表",
              "is_async": false,
              "decorators": [],
              "body_lines": 53,
              "complexity": 8,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "run",
              "line_number": 223,
              "return_type": null,
              "docstring": "执行完整的数据库设置流程",
              "is_async": false,
              "decorators": [],
              "body_lines": 29,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": []
    },
    {
      "file_path": "web/backend/app/main.py",
      "module_name": "web.backend.app.main",
      "category": "core",
      "docstring": "FastAPI 主应用入口\nMyStocks Web 管理界面后端服务",
      "lines_of_code": 122,
      "blank_lines": 15,
      "comment_lines": 11,
      "last_modified": "2025-10-18T11:47:21.115123",
      "imports": [
        "fastapi",
        "fastapi.middleware.cors",
        "fastapi.staticfiles",
        "fastapi.responses",
        "structlog",
        "time",
        "app.api"
      ],
      "classes": [],
      "functions": [
        {
          "name": "log_requests",
          "line_number": 46,
          "return_type": null,
          "docstring": null,
          "is_async": true,
          "decorators": [
            "app.middleware"
          ],
          "body_lines": 23,
          "complexity": 1,
          "parameters": [
            {
              "name": "request",
              "type_annotation": "Request",
              "default_value": null,
              "is_required": true
            },
            {
              "name": "call_next",
              "type_annotation": null,
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "global_exception_handler",
          "line_number": 73,
          "return_type": null,
          "docstring": null,
          "is_async": true,
          "decorators": [
            "app.exception_handler"
          ],
          "body_lines": 9,
          "complexity": 1,
          "parameters": [
            {
              "name": "request",
              "type_annotation": "Request",
              "default_value": null,
              "is_required": true
            },
            {
              "name": "exc",
              "type_annotation": "Exception",
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "health_check",
          "line_number": 86,
          "return_type": null,
          "docstring": "系统健康检查",
          "is_async": true,
          "decorators": [
            "app.get"
          ],
          "body_lines": 6,
          "complexity": 1,
          "parameters": []
        },
        {
          "name": "root",
          "line_number": 96,
          "return_type": null,
          "docstring": "根路径重定向到 API 文档",
          "is_async": true,
          "decorators": [
            "app.get"
          ],
          "body_lines": 2,
          "complexity": 1,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "web/backend/tests/test_integration_e2e.py",
      "module_name": "web.backend.tests.test_integration_e2e",
      "category": "unknown",
      "docstring": "End-to-End Integration Tests\n端到端集成测试 - 验证完整数据流",
      "lines_of_code": 262,
      "blank_lines": 58,
      "comment_lines": 22,
      "last_modified": "2025-10-14T00:53:57.356748",
      "imports": [
        "pytest",
        "fastapi.testclient",
        "datetime",
        "app.main"
      ],
      "classes": [
        {
          "name": "TestE2EIndicatorCalculation",
          "line_number": 15,
          "base_classes": [],
          "docstring": "端到端指标计算测试 (T027)",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "test_full_indicator_calculation_flow",
              "line_number": 18,
              "return_type": null,
              "docstring": "T027: 完整的指标计算流程测试\n\n测试流程:\n1. 调用 POST /api/indicators/calculate\n2. 验证数据加载 (DataService)\n3. 验证数据质量检查\n4. 验证指标计算\n5. 验证响应格式",
              "is_async": false,
              "decorators": [],
              "body_lines": 80,
              "complexity": 6,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_registry_endpoint",
              "line_number": 100,
              "return_type": null,
              "docstring": "测试指标注册表端点",
              "is_async": false,
              "decorators": [],
              "body_lines": 14,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_invalid_symbol_error_handling",
              "line_number": 116,
              "return_type": null,
              "docstring": "测试无效股票代码的错误处理",
              "is_async": false,
              "decorators": [],
              "body_lines": 16,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_invalid_date_range_error_handling",
              "line_number": 134,
              "return_type": null,
              "docstring": "测试无效日期范围的错误处理",
              "is_async": false,
              "decorators": [],
              "body_lines": 20,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_performance_metrics",
              "line_number": 156,
              "return_type": null,
              "docstring": "测试性能指标",
              "is_async": false,
              "decorators": [],
              "body_lines": 35,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        },
        {
          "name": "TestDataServiceIntegration",
          "line_number": 194,
          "base_classes": [],
          "docstring": "数据服务集成测试",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "test_data_service_with_mock_data",
              "line_number": 197,
              "return_type": null,
              "docstring": "测试DataService的mock数据功能",
              "is_async": false,
              "decorators": [],
              "body_lines": 37,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_symbol_validation",
              "line_number": 236,
              "return_type": null,
              "docstring": "测试股票代码验证",
              "is_async": false,
              "decorators": [],
              "body_lines": 16,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": []
    },
    {
      "file_path": "web/backend/tests/test_indicators.py",
      "module_name": "web.backend.tests.test_indicators",
      "category": "utility",
      "docstring": "Unit and Integration Tests for Indicator Calculation\n测试技术指标计算功能",
      "lines_of_code": 467,
      "blank_lines": 93,
      "comment_lines": 47,
      "last_modified": "2025-10-14T00:46:03.785872",
      "imports": [
        "pytest",
        "numpy",
        "fastapi.testclient",
        "app.services.indicator_calculator",
        "app.services.indicator_registry",
        "app.main"
      ],
      "classes": [
        {
          "name": "TestMACalculation",
          "line_number": 21,
          "base_classes": [],
          "docstring": "测试MA指标计算 (T016)",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "test_calculate_ma",
              "line_number": 24,
              "return_type": null,
              "docstring": "T016: Unit test for MA calculation\n验证 NumPy array → TA-Lib → 正确的MA值",
              "is_async": false,
              "decorators": [],
              "body_lines": 39,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        },
        {
          "name": "TestMultipleMACalculation",
          "line_number": 66,
          "base_classes": [],
          "docstring": "测试批量MA计算 (T017)",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "test_calculate_multiple_mas",
              "line_number": 69,
              "return_type": null,
              "docstring": "T017: Unit test for multiple MAs\n验证批量计算功能",
              "is_async": false,
              "decorators": [],
              "body_lines": 45,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        },
        {
          "name": "TestInsufficientDataHandling",
          "line_number": 117,
          "base_classes": [],
          "docstring": "测试数据点不足处理 (T018)",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "test_insufficient_data_error",
              "line_number": 120,
              "return_type": null,
              "docstring": "T018: Unit test for insufficient data handling\nMA(200) with 50 days → InsufficientDataError",
              "is_async": false,
              "decorators": [],
              "body_lines": 28,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_minimum_data_points_edge_case",
              "line_number": 150,
              "return_type": null,
              "docstring": "测试临界情况: 刚好满足最小数据点要求",
              "is_async": false,
              "decorators": [],
              "body_lines": 22,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        },
        {
          "name": "TestRegistryEndpoint",
          "line_number": 175,
          "base_classes": [],
          "docstring": "测试注册表API端点 (T019)",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "test_get_registry",
              "line_number": 178,
              "return_type": null,
              "docstring": "T019: Integration test for registry endpoint\n验证返回161个指标及其元数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 37,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_get_indicators_by_category",
              "line_number": 217,
              "return_type": null,
              "docstring": "测试按分类获取指标",
              "is_async": false,
              "decorators": [],
              "body_lines": 16,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_get_invalid_category",
              "line_number": 235,
              "return_type": null,
              "docstring": "测试无效的分类",
              "is_async": false,
              "decorators": [],
              "body_lines": 5,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        },
        {
          "name": "TestCalculateEndpoint",
          "line_number": 243,
          "base_classes": [],
          "docstring": "测试指标计算API端点 (T020)",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "test_calculate_indicators_endpoint",
              "line_number": 246,
              "return_type": null,
              "docstring": "T020: Integration test for calculate endpoint\nPOST /api/indicators/calculate with MA → 验证响应schema",
              "is_async": false,
              "decorators": [],
              "body_lines": 46,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_calculate_with_invalid_symbol",
              "line_number": 294,
              "return_type": null,
              "docstring": "测试无效的股票代码",
              "is_async": false,
              "decorators": [],
              "body_lines": 14,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_calculate_with_invalid_date_range",
              "line_number": 310,
              "return_type": null,
              "docstring": "测试无效的日期范围",
              "is_async": false,
              "decorators": [],
              "body_lines": 14,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_calculate_with_future_date",
              "line_number": 326,
              "return_type": null,
              "docstring": "测试未来日期",
              "is_async": false,
              "decorators": [],
              "body_lines": 14,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_calculate_with_unknown_indicator",
              "line_number": 342,
              "return_type": null,
              "docstring": "测试未知指标",
              "is_async": false,
              "decorators": [],
              "body_lines": 14,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        },
        {
          "name": "TestDataQualityValidation",
          "line_number": 359,
          "base_classes": [],
          "docstring": "测试数据质量验证",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "test_validate_ohlc_relationships",
              "line_number": 362,
              "return_type": null,
              "docstring": "测试OHLC关系验证",
              "is_async": false,
              "decorators": [],
              "body_lines": 15,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "test_validate_negative_volume",
              "line_number": 379,
              "return_type": null,
              "docstring": "测试负成交量验证",
              "is_async": false,
              "decorators": [],
              "body_lines": 15,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        },
        {
          "name": "TestMACDCalculation",
          "line_number": 397,
          "base_classes": [],
          "docstring": "测试MACD指标计算",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "test_calculate_macd",
              "line_number": 400,
              "return_type": null,
              "docstring": "验证MACD计算返回三个输出 (macd, signal, hist)",
              "is_async": false,
              "decorators": [],
              "body_lines": 33,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        },
        {
          "name": "TestRSICalculation",
          "line_number": 436,
          "base_classes": [],
          "docstring": "测试RSI指标计算",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "test_calculate_rsi",
              "line_number": 439,
              "return_type": null,
              "docstring": "验证RSI计算结果在0-100范围内",
              "is_async": false,
              "decorators": [],
              "body_lines": 27,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": []
    },
    {
      "file_path": "web/backend/app/tasks/market_data.py",
      "module_name": "web.backend.app.tasks.market_data",
      "category": "monitoring",
      "docstring": "市场数据获取任务\n实现各类市场数据获取功能",
      "lines_of_code": 112,
      "blank_lines": 25,
      "comment_lines": 2,
      "last_modified": "2025-10-16T11:52:12.697688",
      "imports": [
        "logging",
        "typing",
        "datetime"
      ],
      "classes": [],
      "functions": [
        {
          "name": "fetch_realtime_market_data",
          "line_number": 13,
          "return_type": "Dict[(str, Any)]",
          "docstring": "获取实时市场数据\n\nArgs:\n    params: 任务参数\n        - fetch_stocks: 是否获取股票数据\n        - fetch_etfs: 是否获取ETF数据\n\nReturns:\n    执行结果字典",
          "is_async": false,
          "decorators": [],
          "body_lines": 44,
          "complexity": 4,
          "parameters": [
            {
              "name": "params",
              "type_annotation": "Dict[(str, Any)]",
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "fetch_longhubang_data",
          "line_number": 60,
          "return_type": "Dict[(str, Any)]",
          "docstring": "获取龙虎榜数据",
          "is_async": false,
          "decorators": [],
          "body_lines": 23,
          "complexity": 2,
          "parameters": [
            {
              "name": "params",
              "type_annotation": "Dict[(str, Any)]",
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "fetch_capital_flow_data",
          "line_number": 86,
          "return_type": "Dict[(str, Any)]",
          "docstring": "获取资金流向数据",
          "is_async": false,
          "decorators": [],
          "body_lines": 25,
          "complexity": 2,
          "parameters": [
            {
              "name": "params",
              "type_annotation": "Dict[(str, Any)]",
              "default_value": null,
              "is_required": true
            }
          ]
        }
      ]
    },
    {
      "file_path": "web/backend/app/tasks/wencai_tasks.py",
      "module_name": "web.backend.app.tasks.wencai_tasks",
      "category": "core",
      "docstring": "问财数据后台任务\n\n使用Celery实现的后台任务：\n  1. 单个查询刷新任务\n  2. 定时刷新所有查询\n  3. 清理旧数据任务\n\n作者: MyStocks Backend Team\n创建日期: 2025-10-17",
      "lines_of_code": 446,
      "blank_lines": 88,
      "comment_lines": 21,
      "last_modified": "2025-10-18T12:13:46.695275",
      "imports": [
        "logging",
        "typing",
        "datetime",
        "celery",
        "sqlalchemy",
        "app.services.wencai_service",
        "app.core.database",
        "app.core.config"
      ],
      "classes": [],
      "functions": [
        {
          "name": "_get_safe_table_name",
          "line_number": 30,
          "return_type": "str",
          "docstring": "从白名单获取安全的表名，防止 SQL 注入\n\nArgs:\n    query_name: 查询名称（如 'qs_1'）\n\nReturns:\n    安全的表名\n\nRaises:\n    ValueError: 如果 query_name 不在白名单中",
          "is_async": false,
          "decorators": [],
          "body_lines": 16,
          "complexity": 2,
          "parameters": [
            {
              "name": "query_name",
              "type_annotation": "str",
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "refresh_wencai_query",
          "line_number": 55,
          "return_type": "Dict[(str, Any)]",
          "docstring": "刷新单个问财查询（后台任务）\n\nArgs:\n    query_name: 查询名称（如qs_1）\n    pages: 获取页数\n\nReturns:\n    执行结果统计",
          "is_async": false,
          "decorators": [
            "shared_task"
          ],
          "body_lines": 57,
          "complexity": 3,
          "parameters": [
            {
              "name": "self",
              "type_annotation": null,
              "default_value": null,
              "is_required": true
            },
            {
              "name": "query_name",
              "type_annotation": "str",
              "default_value": null,
              "is_required": true
            },
            {
              "name": "pages",
              "type_annotation": "int",
              "default_value": "1",
              "is_required": false
            }
          ]
        },
        {
          "name": "scheduled_refresh_all_queries",
          "line_number": 120,
          "return_type": "Dict[(str, Any)]",
          "docstring": "定时刷新所有查询（每日任务）\n\nArgs:\n    pages: 每个查询获取的页数\n    active_only: 是否只刷新启用的查询\n\nReturns:\n    批量执行结果统计",
          "is_async": false,
          "decorators": [
            "shared_task"
          ],
          "body_lines": 81,
          "complexity": 5,
          "parameters": [
            {
              "name": "pages",
              "type_annotation": "int",
              "default_value": "1",
              "is_required": false
            },
            {
              "name": "active_only",
              "type_annotation": "bool",
              "default_value": "True",
              "is_required": false
            }
          ]
        },
        {
          "name": "cleanup_old_wencai_data",
          "line_number": 208,
          "return_type": "Dict[(str, Any)]",
          "docstring": "清理旧数据（定期维护任务）\n\n删除指定天数之前的数据，释放存储空间\n\nArgs:\n    days: 保留天数（删除N天前的数据）\n    dry_run: 是否只模拟运行（不实际删除）\n\nReturns:\n    清理统计结果",
          "is_async": false,
          "decorators": [
            "shared_task"
          ],
          "body_lines": 111,
          "complexity": 6,
          "parameters": [
            {
              "name": "days",
              "type_annotation": "int",
              "default_value": "30",
              "is_required": false
            },
            {
              "name": "dry_run",
              "type_annotation": "bool",
              "default_value": "False",
              "is_required": false
            }
          ]
        },
        {
          "name": "get_wencai_stats",
          "line_number": 326,
          "return_type": "Dict[(str, Any)]",
          "docstring": "获取问财统计信息（监控任务）\n\n统计所有查询的数据情况\n\nReturns:\n    统计信息",
          "is_async": false,
          "decorators": [
            "shared_task"
          ],
          "body_lines": 89,
          "complexity": 5,
          "parameters": []
        },
        {
          "name": "trigger_refresh_all",
          "line_number": 422,
          "return_type": null,
          "docstring": "手动触发刷新所有查询\n\nReturns:\n    Celery AsyncResult",
          "is_async": false,
          "decorators": [],
          "body_lines": 8,
          "complexity": 1,
          "parameters": []
        },
        {
          "name": "trigger_cleanup",
          "line_number": 433,
          "return_type": null,
          "docstring": "手动触发清理任务\n\nArgs:\n    days: 保留天数\n    dry_run: 是否模拟运行\n\nReturns:\n    Celery AsyncResult",
          "is_async": false,
          "decorators": [],
          "body_lines": 12,
          "complexity": 1,
          "parameters": [
            {
              "name": "days",
              "type_annotation": "int",
              "default_value": "30",
              "is_required": false
            },
            {
              "name": "dry_run",
              "type_annotation": "bool",
              "default_value": "False",
              "is_required": false
            }
          ]
        }
      ]
    },
    {
      "file_path": "web/backend/app/tasks/data_sync.py",
      "module_name": "web.backend.app.tasks.data_sync",
      "category": "monitoring",
      "docstring": "数据同步任务\n实现各类数据同步功能",
      "lines_of_code": 139,
      "blank_lines": 29,
      "comment_lines": 5,
      "last_modified": "2025-10-16T11:52:12.370498",
      "imports": [
        "logging",
        "typing",
        "datetime"
      ],
      "classes": [],
      "functions": [
        {
          "name": "sync_daily_stock_data",
          "line_number": 13,
          "return_type": "Dict[(str, Any)]",
          "docstring": "同步每日股票数据\n\nArgs:\n    params: 任务参数\n        - data_source: 数据源 (akshare, baostock等)\n        - include_basic: 是否包含基础数据\n        - include_kline: 是否包含K线数据\n\nReturns:\n    执行结果字典",
          "is_async": false,
          "decorators": [],
          "body_lines": 48,
          "complexity": 4,
          "parameters": [
            {
              "name": "params",
              "type_annotation": "Dict[(str, Any)]",
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "sync_basic_stock_info",
          "line_number": 64,
          "return_type": "Dict[(str, Any)]",
          "docstring": "同步股票基础信息\n\nArgs:\n    params: 任务参数\n        - data_source: 数据源\n        - include_delisted: 是否包含退市股票\n\nReturns:\n    执行结果字典",
          "is_async": false,
          "decorators": [],
          "body_lines": 36,
          "complexity": 2,
          "parameters": [
            {
              "name": "params",
              "type_annotation": "Dict[(str, Any)]",
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "sync_financial_statements",
          "line_number": 103,
          "return_type": "Dict[(str, Any)]",
          "docstring": "同步财务报表数据\n\nArgs:\n    params: 任务参数\n        - data_source: 数据源\n        - report_types: 报表类型列表\n\nReturns:\n    执行结果字典",
          "is_async": false,
          "decorators": [],
          "body_lines": 35,
          "complexity": 2,
          "parameters": [
            {
              "name": "params",
              "type_annotation": "Dict[(str, Any)]",
              "default_value": null,
              "is_required": true
            }
          ]
        }
      ]
    },
    {
      "file_path": "web/backend/app/tasks/__init__.py",
      "module_name": "web.backend.app.tasks.__init__",
      "category": "unknown",
      "docstring": "任务模块\n包含所有可执行的任务实现",
      "lines_of_code": 12,
      "blank_lines": 2,
      "comment_lines": 0,
      "last_modified": "2025-10-16T11:52:12.234834",
      "imports": [],
      "classes": [],
      "functions": []
    },
    {
      "file_path": "web/backend/app/models/task.py",
      "module_name": "web.backend.app.models.task",
      "category": "infrastructure",
      "docstring": "任务管理数据模型\n定义任务的数据结构和状态",
      "lines_of_code": 105,
      "blank_lines": 18,
      "comment_lines": 0,
      "last_modified": "2025-10-16T11:46:14.646166",
      "imports": [
        "enum",
        "datetime",
        "typing",
        "pydantic"
      ],
      "classes": [
        {
          "name": "TaskType",
          "line_number": 12,
          "base_classes": [
            "str",
            "Enum"
          ],
          "docstring": "任务类型枚举",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "TaskStatus",
          "line_number": 22,
          "base_classes": [
            "str",
            "Enum"
          ],
          "docstring": "任务状态枚举",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "TaskPriority",
          "line_number": 32,
          "base_classes": [
            "int",
            "Enum"
          ],
          "docstring": "任务优先级",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "TaskSchedule",
          "line_number": 41,
          "base_classes": [
            "BaseModel"
          ],
          "docstring": "任务调度配置",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "TaskConfig",
          "line_number": 51,
          "base_classes": [
            "BaseModel"
          ],
          "docstring": "任务配置",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "TaskExecution",
          "line_number": 71,
          "base_classes": [
            "BaseModel"
          ],
          "docstring": "任务执行记录",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "TaskStatistics",
          "line_number": 85,
          "base_classes": [
            "BaseModel"
          ],
          "docstring": "任务统计信息",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "TaskResponse",
          "line_number": 98,
          "base_classes": [
            "BaseModel"
          ],
          "docstring": "任务响应模型",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        }
      ],
      "functions": []
    },
    {
      "file_path": "web/backend/app/models/market_data.py",
      "module_name": "web.backend.app.models.market_data",
      "category": "infrastructure",
      "docstring": "市场数据模型 (SQLAlchemy ORM)\n\n包含4个核心实体:\n- FundFlow: 个股资金流向\n- ETFData: ETF基金数据\n- ChipRaceData: 竞价抢筹数据\n- LongHuBangData: 龙虎榜数据",
      "lines_of_code": 190,
      "blank_lines": 23,
      "comment_lines": 0,
      "last_modified": "2025-10-14T23:14:22.063583",
      "imports": [
        "sqlalchemy",
        "sqlalchemy.ext.declarative",
        "datetime"
      ],
      "classes": [
        {
          "name": "FundFlow",
          "line_number": 17,
          "base_classes": [
            "Base"
          ],
          "docstring": "个股资金流向表",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "to_dict",
              "line_number": 39,
              "return_type": null,
              "docstring": "转换为字典",
              "is_async": false,
              "decorators": [],
              "body_lines": 14,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        },
        {
          "name": "ETFData",
          "line_number": 56,
          "base_classes": [
            "Base"
          ],
          "docstring": "ETF实时数据表",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "to_dict",
              "line_number": 83,
              "return_type": null,
              "docstring": "转换为字典",
              "is_async": false,
              "decorators": [],
              "body_lines": 20,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        },
        {
          "name": "ChipRaceData",
          "line_number": 106,
          "base_classes": [
            "Base"
          ],
          "docstring": "竞价抢筹数据表",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "to_dict",
              "line_number": 131,
              "return_type": null,
              "docstring": "转换为字典",
              "is_async": false,
              "decorators": [],
              "body_lines": 18,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        },
        {
          "name": "LongHuBangData",
          "line_number": 152,
          "base_classes": [
            "Base"
          ],
          "docstring": "龙虎榜详细数据表",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "to_dict",
              "line_number": 174,
              "return_type": null,
              "docstring": "转换为字典",
              "is_async": false,
              "decorators": [],
              "body_lines": 15,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": []
    },
    {
      "file_path": "web/backend/app/models/wencai_data.py",
      "module_name": "web.backend.app.models.wencai_data",
      "category": "infrastructure",
      "docstring": "问财数据ORM模型\n\n定义问财查询和结果的数据库模型\n\n作者: MyStocks Backend Team\n创建日期: 2025-10-17",
      "lines_of_code": 117,
      "blank_lines": 24,
      "comment_lines": 6,
      "last_modified": "2025-10-17T20:30:52.307072",
      "imports": [
        "datetime",
        "typing",
        "sqlalchemy",
        "sqlalchemy.ext.declarative",
        "app.core.database"
      ],
      "classes": [
        {
          "name": "WencaiQuery",
          "line_number": 24,
          "base_classes": [
            "Base"
          ],
          "docstring": "问财查询定义表\n\n存储预定义的查询语句配置",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__repr__",
              "line_number": 58,
              "return_type": null,
              "docstring": null,
              "is_async": false,
              "decorators": [],
              "body_lines": 1,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "to_dict",
              "line_number": 61,
              "return_type": null,
              "docstring": "转换为字典",
              "is_async": false,
              "decorators": [],
              "body_lines": 10,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        },
        {
          "name": "WencaiResultBase",
          "line_number": 74,
          "base_classes": [],
          "docstring": "问财查询结果基类（抽象类）\n\n用于动态创建查询结果表（wencai_qs_1 ~ wencai_qs_9）\n注意：实际的结果表会根据问财API返回的数据动态创建，\n      因为不同查询返回的字段不同\n\n共同字段：\n- id: 主键\n- fetch_time: 数据获取时间\n- 取数区间: 查询时间范围\n- 其他字段: 根据问财API返回动态添加",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__tablename__",
              "line_number": 90,
              "return_type": null,
              "docstring": "动态表名",
              "is_async": false,
              "decorators": [
                "declared_attr"
              ],
              "body_lines": 3,
              "complexity": 1,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "__table_args__",
              "line_number": 100,
              "return_type": null,
              "docstring": "表配置",
              "is_async": false,
              "decorators": [
                "declared_attr"
              ],
              "body_lines": 10,
              "complexity": 1,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": []
    },
    {
      "file_path": "web/backend/app/models/__init__.py",
      "module_name": "web.backend.app.models.__init__",
      "category": "infrastructure",
      "docstring": null,
      "lines_of_code": 1,
      "blank_lines": 1,
      "comment_lines": 0,
      "last_modified": "2025-10-14T23:33:58.762613",
      "imports": [],
      "classes": [],
      "functions": []
    },
    {
      "file_path": "web/backend/app/models/indicator_config.py",
      "module_name": "web.backend.app.models.indicator_config",
      "category": "infrastructure",
      "docstring": "SQLAlchemy Model for Indicator Configurations\n指标配置的数据库模型",
      "lines_of_code": 88,
      "blank_lines": 14,
      "comment_lines": 0,
      "last_modified": "2025-10-14T00:38:09.247697",
      "imports": [
        "sqlalchemy",
        "sqlalchemy.ext.declarative",
        "datetime"
      ],
      "classes": [
        {
          "name": "IndicatorConfiguration",
          "line_number": 12,
          "base_classes": [
            "Base"
          ],
          "docstring": "用户指标配置表\n\n对应 table_config.yaml 中的 indicator_configurations 表",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__repr__",
              "line_number": 71,
              "return_type": null,
              "docstring": null,
              "is_async": false,
              "decorators": [],
              "body_lines": 4,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "to_dict",
              "line_number": 77,
              "return_type": null,
              "docstring": "转换为字典格式",
              "is_async": false,
              "decorators": [],
              "body_lines": 10,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": []
    },
    {
      "file_path": "web/backend/app/adapters/akshare_extension.py",
      "module_name": "web.backend.app.adapters.akshare_extension",
      "category": "auxiliary",
      "docstring": "Akshare适配器扩展模块\n添加4个新方法支持股票数据扩展功能\n\n数据源: 东方财富网 (通过Akshare)\n新增方法:\n1. get_etf_spot() - ETF实时行情\n2. get_stock_fund_flow() - 个股资金流向\n3. get_stock_lhb_detail() - 龙虎榜详细数据\n4. get_dividend_data() - 分红配送数据",
      "lines_of_code": 263,
      "blank_lines": 34,
      "comment_lines": 16,
      "last_modified": "2025-10-16T14:13:04.262053",
      "imports": [
        "akshare",
        "pandas",
        "typing",
        "logging"
      ],
      "classes": [
        {
          "name": "AkshareExtension",
          "line_number": 20,
          "base_classes": [],
          "docstring": "Akshare适配器扩展类",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "get_etf_spot",
              "line_number": 24,
              "return_type": "pd.DataFrame",
              "docstring": "获取ETF基金实时行情数据 - 东方财富网\n\nReturns:\n    pd.DataFrame: ETF实时数据\n        columns: symbol, name, latest_price, change_percent, change_amount,\n                volume, amount, open_price, high_price, low_price, prev_close,\n                turnover_rate, total_market_cap, circulating_market_cap",
              "is_async": false,
              "decorators": [
                "staticmethod"
              ],
              "body_lines": 35,
              "complexity": 4,
              "parameters": []
            },
            {
              "name": "get_stock_fund_flow",
              "line_number": 62,
              "return_type": "Dict",
              "docstring": "获取个股资金流向数据 - 东方财富网\n\nArgs:\n    symbol: 股票代码 (如: 600519.SH)\n    timeframe: 时间维度 (\"1\"=今日, \"3\"=3日, \"5\"=5日, \"10\"=10日)\n\nReturns:\n    Dict: 资金流向数据\n        {\n            \"main_net_inflow\": 主力净流入额,\n            \"main_net_inflow_rate\": 主力净流入占比,\n            \"super_large_net_inflow\": 超大单净流入额,\n            \"large_net_inflow\": 大单净流入额,\n            \"medium_net_inflow\": 中单净流入额,\n            \"small_net_inflow\": 小单净流入额\n        }",
              "is_async": false,
              "decorators": [
                "staticmethod"
              ],
              "body_lines": 58,
              "complexity": 5,
              "parameters": [
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "timeframe",
                  "type_annotation": "str",
                  "default_value": "\"1\"",
                  "is_required": false
                }
              ]
            },
            {
              "name": "get_stock_lhb_detail",
              "line_number": 123,
              "return_type": "pd.DataFrame",
              "docstring": "获取指定日期龙虎榜详细数据 - 东方财富网\n\nArgs:\n    date: 日期 (格式: YYYYMMDD 或 YYYY-MM-DD)\n\nReturns:\n    pd.DataFrame: 龙虎榜数据\n        columns: symbol, name, reason, buy_amount, sell_amount, net_amount,\n                turnover_rate, institution_buy, institution_sell",
              "is_async": false,
              "decorators": [
                "staticmethod"
              ],
              "body_lines": 48,
              "complexity": 6,
              "parameters": [
                {
                  "name": "date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_dividend_data",
              "line_number": 174,
              "return_type": "pd.DataFrame",
              "docstring": "获取股票分红配送数据 - 东方财富网\n\nArgs:\n    symbol: 股票代码 (如: 600519.SH)\n\nReturns:\n    pd.DataFrame: 分红配送数据\n        columns: symbol, announce_date, ex_dividend_date, record_date,\n                dividend_ratio, bonus_share_ratio, transfer_ratio,\n                allotment_ratio, allotment_price",
              "is_async": false,
              "decorators": [
                "staticmethod"
              ],
              "body_lines": 41,
              "complexity": 5,
              "parameters": [
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_sector_fund_flow",
              "line_number": 218,
              "return_type": "pd.DataFrame",
              "docstring": "获取行业/概念板块资金流向 - 东方财富网\n\nArgs:\n    date: 日期 (格式: YYYY-MM-DD), 默认为最新交易日\n\nReturns:\n    pd.DataFrame: 板块资金流向数据",
              "is_async": false,
              "decorators": [
                "staticmethod"
              ],
              "body_lines": 32,
              "complexity": 4,
              "parameters": [
                {
                  "name": "date",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            }
          ]
        }
      ],
      "functions": [
        {
          "name": "get_akshare_extension",
          "line_number": 257,
          "return_type": "AkshareExtension",
          "docstring": "获取Akshare扩展单例",
          "is_async": false,
          "decorators": [],
          "body_lines": 5,
          "complexity": 2,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "web/backend/app/adapters/tqlex_adapter.py",
      "module_name": "web.backend.app.adapters.tqlex_adapter",
      "category": "auxiliary",
      "docstring": "通达信TQLEX数据源适配器\n实现竞价抢筹数据获取接口\n\n数据分类: DataClassification.TRADING_ANALYSIS (衍生数据-交易分析)\n存储目标: PostgreSQL+TimescaleDB",
      "lines_of_code": 219,
      "blank_lines": 44,
      "comment_lines": 4,
      "last_modified": "2025-10-15T12:47:29.594572",
      "imports": [
        "os",
        "requests",
        "pandas",
        "typing",
        "functools",
        "time",
        "logging"
      ],
      "classes": [
        {
          "name": "TqlexDataSource",
          "line_number": 19,
          "base_classes": [],
          "docstring": "通达信TQLEX数据源实现",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 27,
              "return_type": null,
              "docstring": "初始化TQLEX数据源\n\nArgs:\n    token: TQLEX接口认证token (如未提供,从环境变量读取)",
              "is_async": false,
              "decorators": [],
              "body_lines": 24,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "token",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "_retry_api_call",
              "line_number": 53,
              "return_type": null,
              "docstring": "API调用重试装饰器 (复用akshare_adapter的模式)",
              "is_async": false,
              "decorators": [],
              "body_lines": 14,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "func",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_chip_race_open",
              "line_number": 69,
              "return_type": "pd.DataFrame",
              "docstring": "获取早盘抢筹数据\n\nArgs:\n    date: 日期 (格式: YYYY-MM-DD), 默认为最新交易日\n\nReturns:\n    pd.DataFrame: 早盘抢筹数据\n        columns: symbol, name, latest_price, change_percent, prev_close,\n                open_price, race_amount, race_amplitude, race_commission,\n                race_transaction, race_ratio",
              "is_async": false,
              "decorators": [],
              "body_lines": 56,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "date",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "get_chip_race_end",
              "line_number": 127,
              "return_type": "pd.DataFrame",
              "docstring": "获取尾盘抢筹数据\n\nArgs:\n    date: 日期 (格式: YYYY-MM-DD), 默认为最新交易日\n\nReturns:\n    pd.DataFrame: 尾盘抢筹数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 53,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "date",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "get_chip_race_combined",
              "line_number": 182,
              "return_type": "pd.DataFrame",
              "docstring": "获取完整的竞价抢筹数据(早盘+尾盘)\n\nArgs:\n    date: 日期 (格式: YYYY-MM-DD), 默认为最新交易日\n\nReturns:\n    pd.DataFrame: 合并的抢筹数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 24,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "date",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            }
          ]
        }
      ],
      "functions": [
        {
          "name": "get_tqlex_adapter",
          "line_number": 213,
          "return_type": "TqlexDataSource",
          "docstring": "获取TQLEX适配器单例",
          "is_async": false,
          "decorators": [],
          "body_lines": 5,
          "complexity": 2,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "web/backend/app/adapters/__init__.py",
      "module_name": "web.backend.app.adapters.__init__",
      "category": "auxiliary",
      "docstring": null,
      "lines_of_code": 1,
      "blank_lines": 1,
      "comment_lines": 0,
      "last_modified": "2025-10-14T23:33:58.762613",
      "imports": [],
      "classes": [],
      "functions": []
    },
    {
      "file_path": "web/backend/app/adapters/wencai_adapter.py",
      "module_name": "web.backend.app.adapters.wencai_adapter",
      "category": "auxiliary",
      "docstring": "问财数据源适配器\n\n功能:\n  1. 调用问财(iwencai.com) Web API获取股票筛选数据\n  2. 数据解析和清理\n  3. 错误处理和重试机制\n  4. 实现IDataSource接口（如果需要）\n\n作者: MyStocks Backend Team\n创建日期: 2025-10-17",
      "lines_of_code": 361,
      "blank_lines": 78,
      "comment_lines": 18,
      "last_modified": "2025-10-18T12:20:01.413471",
      "imports": [
        "re",
        "time",
        "logging",
        "typing",
        "datetime",
        "pandas",
        "requests",
        "requests.adapters",
        "urllib3.util.retry"
      ],
      "classes": [
        {
          "name": "WencaiDataSource",
          "line_number": 31,
          "base_classes": [],
          "docstring": "问财数据源适配器\n\n负责与问财API交互，获取股票筛选数据",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 44,
              "return_type": null,
              "docstring": "初始化问财数据源\n\nArgs:\n    timeout: API请求超时时间（秒）\n    retry_count: 失败重试次数",
              "is_async": false,
              "decorators": [],
              "body_lines": 15,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "timeout",
                  "type_annotation": "int",
                  "default_value": "DEFAULT_TIMEOUT",
                  "is_required": false
                },
                {
                  "name": "retry_count",
                  "type_annotation": "int",
                  "default_value": "DEFAULT_RETRY_COUNT",
                  "is_required": false
                }
              ]
            },
            {
              "name": "_create_session",
              "line_number": 65,
              "return_type": "requests.Session",
              "docstring": "创建带重试机制的HTTP会话\n\nReturns:\n    配置好的requests.Session对象",
              "is_async": false,
              "decorators": [],
              "body_lines": 21,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "fetch_data",
              "line_number": 88,
              "return_type": "pd.DataFrame",
              "docstring": "从问财获取数据\n\nArgs:\n    query: 查询语句（自然语言）\n    pages: 获取页数\n\nReturns:\n    包含股票数据的DataFrame\n\nRaises:\n    requests.RequestException: 请求失败\n    ValueError: 数据解析失败",
              "is_async": false,
              "decorators": [],
              "body_lines": 45,
              "complexity": 6,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "query",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "pages",
                  "type_annotation": "int",
                  "default_value": "DEFAULT_PAGES",
                  "is_required": false
                }
              ]
            },
            {
              "name": "_fetch_single_page",
              "line_number": 139,
              "return_type": "pd.DataFrame",
              "docstring": "获取单页数据\n\nArgs:\n    query: 查询语句\n    page: 页码\n\nReturns:\n    单页数据DataFrame\n\nRaises:\n    requests.RequestException: 请求失败\n    ValueError: 响应数据格式错误",
              "is_async": false,
              "decorators": [],
              "body_lines": 77,
              "complexity": 6,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "query",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "page",
                  "type_annotation": "int",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "clean_data",
              "line_number": 222,
              "return_type": "pd.DataFrame",
              "docstring": "清理数据：处理列名和数据格式\n\nArgs:\n    data: 原始数据DataFrame\n\nReturns:\n    清理后的DataFrame",
              "is_async": false,
              "decorators": [],
              "body_lines": 48,
              "complexity": 7,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_handle_duplicate_columns",
              "line_number": 273,
              "return_type": "pd.DataFrame",
              "docstring": "处理重复的列名\n\nArgs:\n    df: 输入DataFrame\n\nReturns:\n    列名唯一化后的DataFrame",
              "is_async": false,
              "decorators": [
                "staticmethod"
              ],
              "body_lines": 22,
              "complexity": 2,
              "parameters": [
                {
                  "name": "df",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "validate_query",
              "line_number": 297,
              "return_type": "bool",
              "docstring": "验证查询语句是否有效\n\nArgs:\n    query: 查询语句\n\nReturns:\n    是否有效",
              "is_async": false,
              "decorators": [],
              "body_lines": 20,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "query",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "close",
              "line_number": 319,
              "return_type": null,
              "docstring": "关闭HTTP会话",
              "is_async": false,
              "decorators": [],
              "body_lines": 4,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": [
        {
          "name": "get_query_text",
          "line_number": 340,
          "return_type": "Optional[str]",
          "docstring": "根据查询名称获取查询文本\n\nArgs:\n    query_name: 查询名称（如'qs_1'）\n\nReturns:\n    查询文本，如果不存在返回None",
          "is_async": false,
          "decorators": [],
          "body_lines": 10,
          "complexity": 1,
          "parameters": [
            {
              "name": "query_name",
              "type_annotation": "str",
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "get_all_queries",
          "line_number": 353,
          "return_type": "Dict[(str, str)]",
          "docstring": "获取所有预定义查询\n\nReturns:\n    查询名称到查询文本的映射",
          "is_async": false,
          "decorators": [],
          "body_lines": 7,
          "complexity": 1,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "web/backend/app/services/backtest_engine.py",
      "module_name": "web.backend.app.services.backtest_engine",
      "category": "auxiliary",
      "docstring": "回测引擎 - 支持策略回测和性能评估\n\n复用现有组件:\n- DataService: 获取历史OHLCV数据\n- StrategyRegistry: 获取策略实例",
      "lines_of_code": 291,
      "blank_lines": 49,
      "comment_lines": 16,
      "last_modified": "2025-10-14T23:11:18.364280",
      "imports": [
        "dataclasses",
        "typing",
        "pandas",
        "numpy",
        "logging"
      ],
      "classes": [
        {
          "name": "BacktestConfig",
          "line_number": 18,
          "base_classes": [],
          "docstring": "回测配置",
          "decorators": [
            "dataclass"
          ],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "BacktestResult",
          "line_number": 28,
          "base_classes": [],
          "docstring": "回测结果",
          "decorators": [
            "dataclass"
          ],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "BacktestEngine",
          "line_number": 44,
          "base_classes": [],
          "docstring": "回测引擎",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 47,
              "return_type": null,
              "docstring": null,
              "is_async": false,
              "decorators": [],
              "body_lines": 1,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "config",
                  "type_annotation": "BacktestConfig",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "run_backtest",
              "line_number": 50,
              "return_type": "BacktestResult",
              "docstring": "运行单策略回测\n\nArgs:\n    strategy_id: 策略ID\n    symbol: 股票代码\n    start_date: 回测开始日期\n    end_date: 回测结束日期\n    strategy_params: 策略参数\n\nReturns:\n    BacktestResult: 回测结果",
              "is_async": false,
              "decorators": [],
              "body_lines": 50,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "strategy_id",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "start_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "end_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "strategy_params",
                  "type_annotation": "Dict[(str, Any)]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "_simulate_trades",
              "line_number": 109,
              "return_type": "pd.DataFrame",
              "docstring": "模拟交易执行",
              "is_async": false,
              "decorators": [],
              "body_lines": 49,
              "complexity": 6,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "signals_df",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_calculate_metrics",
              "line_number": 160,
              "return_type": "BacktestResult",
              "docstring": "计算回测指标",
              "is_async": false,
              "decorators": [],
              "body_lines": 59,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "backtest_id",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "strategy_id",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "trades_df",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "signals_df",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_calculate_equity_curve",
              "line_number": 228,
              "return_type": "pd.DataFrame",
              "docstring": "计算权益曲线",
              "is_async": false,
              "decorators": [],
              "body_lines": 14,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "signals_df",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "trades_df",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_calculate_max_drawdown",
              "line_number": 248,
              "return_type": "float",
              "docstring": "计算最大回撤",
              "is_async": false,
              "decorators": [],
              "body_lines": 8,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "equity_curve",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_empty_result",
              "line_number": 258,
              "return_type": "BacktestResult",
              "docstring": "返回空回测结果",
              "is_async": false,
              "decorators": [],
              "body_lines": 15,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "strategy_id",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "backtest_id",
                  "type_annotation": "str",
                  "default_value": "\"unknown\"",
                  "is_required": false
                }
              ]
            }
          ]
        }
      ],
      "functions": [
        {
          "name": "get_backtest_engine",
          "line_number": 285,
          "return_type": "BacktestEngine",
          "docstring": "获取回测引擎单例",
          "is_async": false,
          "decorators": [],
          "body_lines": 5,
          "complexity": 2,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "web/backend/app/services/indicator_calculator.py",
      "module_name": "web.backend.app.services.indicator_calculator",
      "category": "monitoring",
      "docstring": "Indicator Calculator Service\n基于TA-Lib的技术指标计算服务",
      "lines_of_code": 377,
      "blank_lines": 68,
      "comment_lines": 23,
      "last_modified": "2025-10-14T00:45:27.975010",
      "imports": [
        "numpy",
        "talib",
        "typing",
        "logging",
        "indicator_registry"
      ],
      "classes": [
        {
          "name": "InsufficientDataError",
          "line_number": 15,
          "base_classes": [
            "Exception"
          ],
          "docstring": "数据点不足错误",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "IndicatorCalculationError",
          "line_number": 20,
          "base_classes": [
            "Exception"
          ],
          "docstring": "指标计算错误",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "IndicatorCalculator",
          "line_number": 25,
          "base_classes": [],
          "docstring": "技术指标计算器\n\n封装TA-Lib函数,提供统一的指标计算接口\n支持批量计算和错误处理",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 33,
              "return_type": null,
              "docstring": "初始化计算器",
              "is_async": false,
              "decorators": [],
              "body_lines": 2,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "calculate_indicator",
              "line_number": 37,
              "return_type": "Dict[(str, np.ndarray)]",
              "docstring": "计算单个指标\n\nArgs:\n    abbreviation: 指标缩写 (如 \"SMA\", \"RSI\")\n    ohlcv_data: OHLCV数据字典\n        {\n            \"open\": np.array([...]),\n            \"high\": np.array([...]),\n            \"low\": np.array([...]),\n            \"close\": np.array([...]),\n            \"volume\": np.array([...])\n        }\n    parameters: 指标参数字典\n\nReturns:\n    指标计算结果字典 {\"output_name\": np.array([...])}\n\nRaises:\n    InsufficientDataError: 数据点不足\n    IndicatorCalculationError: 计算失败",
              "is_async": false,
              "decorators": [],
              "body_lines": 50,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "abbreviation",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "ohlcv_data",
                  "type_annotation": "Dict[(str, np.ndarray)]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "parameters",
                  "type_annotation": "Dict[(str, Any)]",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_call_talib_function",
              "line_number": 94,
              "return_type": "Dict[(str, np.ndarray)]",
              "docstring": "调用TA-Lib函数计算指标\n\nReturns:\n    {output_name: result_array}",
              "is_async": false,
              "decorators": [],
              "body_lines": 152,
              "complexity": 24,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "abbreviation",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "ohlcv_data",
                  "type_annotation": "Dict[(str, np.ndarray)]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "parameters",
                  "type_annotation": "Dict[(str, Any)]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "indicator_meta",
                  "type_annotation": "Dict[(str, Any)]",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "calculate_multiple_indicators",
              "line_number": 254,
              "return_type": "Dict[(str, Dict[(str, Any)])]",
              "docstring": "批量计算多个指标\n\nArgs:\n    indicators: 指标列表\n        [\n            {\"abbreviation\": \"SMA\", \"parameters\": {\"timeperiod\": 20}},\n            {\"abbreviation\": \"RSI\", \"parameters\": {\"timeperiod\": 14}}\n        ]\n    ohlcv_data: OHLCV数据字典\n\nReturns:\n    {\n        \"SMA\": {\n            \"values\": {\"sma\": np.array([...])},\n            \"parameters\": {\"timeperiod\": 20},\n            \"panel_type\": \"overlay\",\n            \"reference_lines\": None\n        },\n        \"RSI\": {\n            \"values\": {\"rsi\": np.array([...])},\n            \"parameters\": {\"timeperiod\": 14},\n            \"panel_type\": \"oscillator\",\n            \"reference_lines\": [30, 70]\n        }\n    }",
              "is_async": false,
              "decorators": [],
              "body_lines": 65,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "indicators",
                  "type_annotation": "List[Dict[(str, Any)]]",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "ohlcv_data",
                  "type_annotation": "Dict[(str, np.ndarray)]",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "validate_data_quality",
              "line_number": 325,
              "return_type": "tuple[(bool, Optional[str])]",
              "docstring": "验证OHLCV数据质量\n\nArgs:\n    ohlcv_data: OHLCV数据字典\n\nReturns:\n    (是否有效, 错误消息)",
              "is_async": false,
              "decorators": [],
              "body_lines": 39,
              "complexity": 9,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "ohlcv_data",
                  "type_annotation": "Dict[(str, np.ndarray)]",
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": [
        {
          "name": "get_indicator_calculator",
          "line_number": 371,
          "return_type": "IndicatorCalculator",
          "docstring": "获取指标计算器单例",
          "is_async": false,
          "decorators": [],
          "body_lines": 5,
          "complexity": 2,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "web/backend/app/services/indicator_registry.py",
      "module_name": "web.backend.app.services.indicator_registry",
      "category": "utility",
      "docstring": "Indicator Registry Service\n管理所有161个TA-Lib技术指标的元数据注册表",
      "lines_of_code": 475,
      "blank_lines": 40,
      "comment_lines": 11,
      "last_modified": "2025-10-14T08:26:17.985620",
      "imports": [
        "talib",
        "typing",
        "enum"
      ],
      "classes": [
        {
          "name": "IndicatorCategory",
          "line_number": 10,
          "base_classes": [
            "str",
            "Enum"
          ],
          "docstring": "指标分类",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "PanelType",
          "line_number": 19,
          "base_classes": [
            "str",
            "Enum"
          ],
          "docstring": "显示面板类型",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "IndicatorRegistry",
          "line_number": 25,
          "base_classes": [],
          "docstring": "指标注册表\n\n在应用启动时加载所有161个TA-Lib指标的元数据\n提供指标查询、验证和元数据访问功能",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 33,
              "return_type": null,
              "docstring": "初始化注册表并加载所有指标元数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 3,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_load_indicators",
              "line_number": 38,
              "return_type": null,
              "docstring": "从TA-Lib加载所有161个指标的元数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 335,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_indicator",
              "line_number": 375,
              "return_type": "Optional[Dict[(str, Any)]]",
              "docstring": "获取指定指标的元数据\n\nArgs:\n    abbreviation: 指标缩写名称 (如 \"MA\", \"RSI\")\n\nReturns:\n    指标元数据字典,如果不存在返回None",
              "is_async": false,
              "decorators": [],
              "body_lines": 10,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "abbreviation",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_all_indicators",
              "line_number": 387,
              "return_type": "Dict[(str, Dict[(str, Any)])]",
              "docstring": "获取所有指标的元数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 2,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_indicators_by_category",
              "line_number": 391,
              "return_type": "Dict[(str, Dict[(str, Any)])]",
              "docstring": "按分类获取指标\n\nArgs:\n    category: 指标分类\n\nReturns:\n    该分类下的所有指标",
              "is_async": false,
              "decorators": [],
              "body_lines": 14,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "category",
                  "type_annotation": "IndicatorCategory",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "validate_indicator",
              "line_number": 407,
              "return_type": "tuple[(bool, Optional[str])]",
              "docstring": "验证指标及其参数\n\nArgs:\n    abbreviation: 指标缩写\n    parameters: 参数字典\n\nReturns:\n    (是否有效, 错误消息)",
              "is_async": false,
              "decorators": [],
              "body_lines": 37,
              "complexity": 12,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "abbreviation",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "parameters",
                  "type_annotation": "Dict[(str, Any)]",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_min_data_points",
              "line_number": 446,
              "return_type": "int",
              "docstring": "计算指标所需的最小数据点数\n\nArgs:\n    abbreviation: 指标缩写\n    parameters: 参数字典\n\nReturns:\n    最小数据点数",
              "is_async": false,
              "decorators": [],
              "body_lines": 16,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "abbreviation",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "parameters",
                  "type_annotation": "Dict[(str, Any)]",
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": [
        {
          "name": "get_indicator_registry",
          "line_number": 469,
          "return_type": "IndicatorRegistry",
          "docstring": "获取指标注册表单例",
          "is_async": false,
          "decorators": [],
          "body_lines": 5,
          "complexity": 2,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "web/backend/app/services/tdx_service.py",
      "module_name": "web.backend.app.services.tdx_service",
      "category": "monitoring",
      "docstring": "TDX数据服务\n提供对TDX适配器的封装和缓存支持",
      "lines_of_code": 295,
      "blank_lines": 46,
      "comment_lines": 11,
      "last_modified": "2025-10-15T22:28:29.256315",
      "imports": [
        "sys",
        "os",
        "logging",
        "typing",
        "datetime",
        "pandas",
        "adapters.tdx_adapter"
      ],
      "classes": [
        {
          "name": "TdxService",
          "line_number": 21,
          "base_classes": [],
          "docstring": "TDX数据服务\n\n功能:\n- 封装TDX适配器\n- 提供实时行情查询\n- 提供历史K线查询(多周期)\n- 提供指数行情查询\n- 数据格式标准化",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 33,
              "return_type": null,
              "docstring": "初始化TDX服务",
              "is_async": false,
              "decorators": [],
              "body_lines": 7,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_real_time_quote",
              "line_number": 42,
              "return_type": "Dict",
              "docstring": "获取实时行情\n\nArgs:\n    symbol: 股票代码(6位数字)\n\nReturns:\n    Dict: 实时行情数据,包含计算后的涨跌幅等字段",
              "is_async": false,
              "decorators": [],
              "body_lines": 35,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_stock_kline",
              "line_number": 79,
              "return_type": "Dict",
              "docstring": "获取股票K线数据\n\nArgs:\n    symbol: 股票代码(6位数字)\n    start_date: 开始日期 (YYYY-MM-DD)\n    end_date: 结束日期 (YYYY-MM-DD)\n    period: K线周期 ('1m', '5m', '15m', '30m', '1h', '1d')\n\nReturns:\n    Dict: 包含K线数据列表和元信息",
              "is_async": false,
              "decorators": [],
              "body_lines": 57,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "start_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "end_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "period",
                  "type_annotation": "str",
                  "default_value": "\"1d\"",
                  "is_required": false
                }
              ]
            },
            {
              "name": "get_index_quote",
              "line_number": 144,
              "return_type": "Dict",
              "docstring": "获取指数实时行情\n\nArgs:\n    symbol: 指数代码(6位数字)\n\nReturns:\n    Dict: 指数行情数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 34,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_index_kline",
              "line_number": 180,
              "return_type": "Dict",
              "docstring": "获取指数K线数据\n\nArgs:\n    symbol: 指数代码(6位数字)\n    start_date: 开始日期\n    end_date: 结束日期\n    period: K线周期\n\nReturns:\n    Dict: 指数K线数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 55,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "start_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "end_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "period",
                  "type_annotation": "str",
                  "default_value": "\"1d\"",
                  "is_required": false
                }
              ]
            },
            {
              "name": "check_connection",
              "line_number": 243,
              "return_type": "Dict",
              "docstring": "检查TDX连接状态\n\nReturns:\n    Dict: 连接状态信息",
              "is_async": false,
              "decorators": [],
              "body_lines": 36,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": [
        {
          "name": "get_tdx_service",
          "line_number": 286,
          "return_type": "TdxService",
          "docstring": "获取TDX服务单例\n用于依赖注入",
          "is_async": false,
          "decorators": [],
          "body_lines": 8,
          "complexity": 2,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "web/backend/app/services/market_data_service.py",
      "module_name": "web.backend.app.services.market_data_service",
      "category": "infrastructure",
      "docstring": "市场数据服务 (MarketDataService)\n\n业务逻辑层,负责:\n1. 数据获取: 调用adapters获取外部数据\n2. 数据存储: 保存到PostgreSQL+TimescaleDB\n3. 数据查询: 从数据库读取历史数据\n4. 数据刷新: 定时更新最新数据\n\n复用组件:\n- akshare_extension: ETF/资金流向/龙虎榜数据\n- tqlex_adapter: 竞价抢筹数据",
      "lines_of_code": 516,
      "blank_lines": 95,
      "comment_lines": 18,
      "last_modified": "2025-10-16T14:05:22.291335",
      "imports": [
        "sqlalchemy",
        "sqlalchemy.orm",
        "datetime",
        "typing",
        "pandas",
        "logging",
        "os",
        "app.models.market_data",
        "app.adapters.akshare_extension",
        "app.adapters.tqlex_adapter"
      ],
      "classes": [
        {
          "name": "MarketDataService",
          "line_number": 29,
          "base_classes": [],
          "docstring": "市场数据服务",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 32,
              "return_type": null,
              "docstring": "初始化数据库连接",
              "is_async": false,
              "decorators": [],
              "body_lines": 14,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_build_db_url",
              "line_number": 48,
              "return_type": "str",
              "docstring": "从环境变量构建数据库URL",
              "is_async": false,
              "decorators": [],
              "body_lines": 8,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "fetch_and_save_fund_flow",
              "line_number": 60,
              "return_type": "Dict[(str, Any)]",
              "docstring": "获取并保存资金流向数据\n\nArgs:\n    symbol: 股票代码\n    timeframe: 时间维度 (1/3/5/10天)\n\nReturns:\n    保存结果字典",
              "is_async": false,
              "decorators": [],
              "body_lines": 59,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "timeframe",
                  "type_annotation": "str",
                  "default_value": "\"1\"",
                  "is_required": false
                }
              ]
            },
            {
              "name": "query_fund_flow",
              "line_number": 125,
              "return_type": "List[FundFlow]",
              "docstring": "查询资金流向历史数据\n\nArgs:\n    symbol: 股票代码\n    timeframe: 时间维度\n    start_date: 开始日期\n    end_date: 结束日期\n\nReturns:\n    FundFlow对象列表",
              "is_async": false,
              "decorators": [],
              "body_lines": 30,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "timeframe",
                  "type_annotation": "str",
                  "default_value": "\"1\"",
                  "is_required": false
                },
                {
                  "name": "start_date",
                  "type_annotation": "Optional[date]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "end_date",
                  "type_annotation": "Optional[date]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "fetch_and_save_etf_spot",
              "line_number": 165,
              "return_type": "Dict[(str, Any)]",
              "docstring": "获取并保存ETF实时数据(全市场)\n\nReturns:\n    保存结果字典",
              "is_async": false,
              "decorators": [],
              "body_lines": 83,
              "complexity": 13,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "query_etf_spot",
              "line_number": 250,
              "return_type": "List[ETFData]",
              "docstring": "查询ETF数据\n\nArgs:\n    symbol: ETF代码\n    keyword: 关键词搜索\n    limit: 返回数量限制\n\nReturns:\n    ETFData对象列表",
              "is_async": false,
              "decorators": [],
              "body_lines": 32,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "keyword",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "limit",
                  "type_annotation": "int",
                  "default_value": "50",
                  "is_required": false
                }
              ]
            },
            {
              "name": "fetch_and_save_chip_race",
              "line_number": 291,
              "return_type": "Dict[(str, Any)]",
              "docstring": "获取并保存竞价抢筹数据\n\nArgs:\n    race_type: 抢筹类型 (open/end)\n    trade_date: 交易日期\n\nReturns:\n    保存结果字典",
              "is_async": false,
              "decorators": [],
              "body_lines": 66,
              "complexity": 6,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "race_type",
                  "type_annotation": "str",
                  "default_value": "\"open\"",
                  "is_required": false
                },
                {
                  "name": "trade_date",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "query_chip_race",
              "line_number": 363,
              "return_type": "List[ChipRaceData]",
              "docstring": "查询竞价抢筹数据\n\nArgs:\n    race_type: 抢筹类型\n    trade_date: 交易日期\n    min_race_amount: 最小抢筹金额\n    limit: 返回数量限制\n\nReturns:\n    ChipRaceData对象列表",
              "is_async": false,
              "decorators": [],
              "body_lines": 30,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "race_type",
                  "type_annotation": "str",
                  "default_value": "\"open\"",
                  "is_required": false
                },
                {
                  "name": "trade_date",
                  "type_annotation": "Optional[date]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "min_race_amount",
                  "type_annotation": "Optional[float]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "limit",
                  "type_annotation": "int",
                  "default_value": "100",
                  "is_required": false
                }
              ]
            },
            {
              "name": "fetch_and_save_lhb_detail",
              "line_number": 403,
              "return_type": "Dict[(str, Any)]",
              "docstring": "获取并保存龙虎榜数据\n\nArgs:\n    trade_date: 交易日期 (YYYY-MM-DD)\n\nReturns:\n    保存结果字典",
              "is_async": false,
              "decorators": [],
              "body_lines": 58,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "trade_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "query_lhb_detail",
              "line_number": 463,
              "return_type": "List[LongHuBangData]",
              "docstring": "查询龙虎榜数据\n\nArgs:\n    symbol: 股票代码\n    start_date: 开始日期\n    end_date: 结束日期\n    min_net_amount: 最小净买入额\n    limit: 返回数量限制\n\nReturns:\n    LongHuBangData对象列表",
              "is_async": false,
              "decorators": [],
              "body_lines": 33,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "start_date",
                  "type_annotation": "Optional[date]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "end_date",
                  "type_annotation": "Optional[date]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "min_net_amount",
                  "type_annotation": "Optional[float]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "limit",
                  "type_annotation": "int",
                  "default_value": "100",
                  "is_required": false
                }
              ]
            }
          ]
        }
      ],
      "functions": [
        {
          "name": "get_market_data_service",
          "line_number": 510,
          "return_type": "MarketDataService",
          "docstring": "获取市场数据服务单例",
          "is_async": false,
          "decorators": [],
          "body_lines": 5,
          "complexity": 2,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "web/backend/app/services/data_service.py",
      "module_name": "web.backend.app.services.data_service",
      "category": "core",
      "docstring": "Data Service for Technical Analysis\n股票数据服务 - 为技术指标计算提供OHLCV数据\n\nIntegrates with MyStocksUnifiedManager to load historical price data\nIncludes automatic data fetching via Akshare adapter when data is missing",
      "lines_of_code": 466,
      "blank_lines": 94,
      "comment_lines": 34,
      "last_modified": "2025-10-14T17:49:05.634007",
      "imports": [
        "pandas",
        "numpy",
        "datetime",
        "typing",
        "logging",
        "sys",
        "os",
        "core.data_classification",
        "unified_manager"
      ],
      "classes": [
        {
          "name": "StockDataNotFoundError",
          "line_number": 44,
          "base_classes": [
            "Exception"
          ],
          "docstring": "股票数据未找到错误",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "InvalidDateRangeError",
          "line_number": 49,
          "base_classes": [
            "Exception"
          ],
          "docstring": "无效日期范围错误",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "DataService",
          "line_number": 54,
          "base_classes": [],
          "docstring": "数据服务\n\n提供股票OHLCV数据加载功能,集成MyStocksUnifiedManager",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 61,
              "return_type": null,
              "docstring": "初始化数据服务\n\nArgs:\n    auto_fetch: 当数据库无数据时,是否自动从Akshare获取 (默认True)",
              "is_async": false,
              "decorators": [],
              "body_lines": 24,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "auto_fetch",
                  "type_annotation": "bool",
                  "default_value": "True",
                  "is_required": false
                }
              ]
            },
            {
              "name": "get_daily_ohlcv",
              "line_number": 87,
              "return_type": "Tuple[(pd.DataFrame, Dict[(str, np.ndarray)])]",
              "docstring": "获取日线OHLCV数据\n\nArgs:\n    symbol: 股票代码 (如 '600519.SH')\n    start_date: 开始日期\n    end_date: 结束日期\n\nReturns:\n    Tuple[pd.DataFrame, Dict[str, np.ndarray]]:\n        - 原始DataFrame (包含日期列)\n        - OHLCV数组字典 (用于TA-Lib计算)\n\nRaises:\n    InvalidDateRangeError: 日期范围无效\n    StockDataNotFoundError: 未找到数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 62,
              "complexity": 9,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "start_date",
                  "type_annotation": "datetime",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "end_date",
                  "type_annotation": "datetime",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_fetch_and_save_from_akshare",
              "line_number": 156,
              "return_type": "pd.DataFrame",
              "docstring": "从Akshare获取数据并保存到数据库\n\nArgs:\n    symbol: 股票代码 (如 '600519.SH')\n    start_date: 开始日期\n    end_date: 结束日期\n\nReturns:\n    pd.DataFrame: 下载并保存的数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 63,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "start_date",
                  "type_annotation": "datetime",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "end_date",
                  "type_annotation": "datetime",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_load_from_unified_manager",
              "line_number": 226,
              "return_type": "pd.DataFrame",
              "docstring": "从UnifiedManager加载数据\n\nArgs:\n    symbol: 股票代码\n    start_date: 开始日期\n    end_date: 结束日期\n\nReturns:\n    pd.DataFrame: 日线数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 43,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "start_date",
                  "type_annotation": "datetime",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "end_date",
                  "type_annotation": "datetime",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_generate_mock_data",
              "line_number": 276,
              "return_type": "pd.DataFrame",
              "docstring": "生成模拟数据 (用于开发测试)\n\nArgs:\n    symbol: 股票代码\n    start_date: 开始日期\n    end_date: 结束日期\n    base_price: 基准价格\n\nReturns:\n    pd.DataFrame: 模拟的日线数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 53,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "start_date",
                  "type_annotation": "datetime",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "end_date",
                  "type_annotation": "datetime",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "base_price",
                  "type_annotation": "float",
                  "default_value": "100.0",
                  "is_required": false
                }
              ]
            },
            {
              "name": "_dataframe_to_ohlcv_arrays",
              "line_number": 337,
              "return_type": "Dict[(str, np.ndarray)]",
              "docstring": "将DataFrame转换为TA-Lib所需的NumPy数组格式\n\nArgs:\n    df: 包含OHLCV数据的DataFrame\n\nReturns:\n    Dict[str, np.ndarray]: OHLCV数组字典",
              "is_async": false,
              "decorators": [],
              "body_lines": 16,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "df",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_symbol_name",
              "line_number": 355,
              "return_type": "str",
              "docstring": "获取股票名称\n\nArgs:\n    symbol: 股票代码\n\nReturns:\n    str: 股票名称",
              "is_async": false,
              "decorators": [],
              "body_lines": 27,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "validate_symbol_format",
              "line_number": 384,
              "return_type": "bool",
              "docstring": "验证股票代码格式\n\nArgs:\n    symbol: 股票代码\n\nReturns:\n    bool: 是否有效\n\nExamples:\n    - 600519.SH (上海主板)\n    - 000001.SZ (深圳主板)\n    - 300XXX.SZ (创业板)\n    - 688XXX.SH (科创板)",
              "is_async": false,
              "decorators": [],
              "body_lines": 34,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_available_date_range",
              "line_number": 420,
              "return_type": "Optional[Tuple[(datetime, datetime)]]",
              "docstring": "获取股票可用的数据日期范围\n\nArgs:\n    symbol: 股票代码\n\nReturns:\n    Optional[Tuple[datetime, datetime]]: (最早日期, 最晚日期) 或 None",
              "is_async": false,
              "decorators": [],
              "body_lines": 33,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": [
        {
          "name": "get_data_service",
          "line_number": 460,
          "return_type": "DataService",
          "docstring": "获取数据服务单例",
          "is_async": false,
          "decorators": [],
          "body_lines": 5,
          "complexity": 2,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "web/backend/app/services/wencai_service.py",
      "module_name": "web.backend.app.services.wencai_service",
      "category": "infrastructure",
      "docstring": "问财数据服务\n\n业务逻辑层：\n  1. 数据获取和清理\n  2. 去重和存储\n  3. 查询结果管理\n  4. 历史数据统计\n\n作者: MyStocks Backend Team\n创建日期: 2025-10-17",
      "lines_of_code": 449,
      "blank_lines": 74,
      "comment_lines": 25,
      "last_modified": "2025-10-18T12:18:06.666962",
      "imports": [
        "logging",
        "typing",
        "datetime",
        "pandas",
        "sqlalchemy",
        "sqlalchemy.orm",
        "sqlalchemy",
        "app.adapters.wencai_adapter",
        "app.models.wencai_data",
        "app.core.database",
        "app.core.config"
      ],
      "classes": [
        {
          "name": "WencaiService",
          "line_number": 47,
          "base_classes": [],
          "docstring": "问财数据服务\n\n提供问财数据的完整业务逻辑",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 54,
              "return_type": null,
              "docstring": "初始化服务\n\nArgs:\n    db: 数据库会话（可选，用于ORM操作）",
              "is_async": false,
              "decorators": [],
              "body_lines": 14,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "db",
                  "type_annotation": "Session",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "_get_safe_table_name",
              "line_number": 71,
              "return_type": "str",
              "docstring": "从白名单获取安全的表名，防止 SQL 注入\n\nArgs:\n    query_name: 查询名称（如 'qs_1'）\n\nReturns:\n    安全的表名\n\nRaises:\n    ValueError: 如果 query_name 不在白名单中",
              "is_async": false,
              "decorators": [
                "staticmethod"
              ],
              "body_lines": 16,
              "complexity": 2,
              "parameters": [
                {
                  "name": "query_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_all_queries",
              "line_number": 89,
              "return_type": "List[Dict[(str, Any)]]",
              "docstring": "获取所有查询列表\n\nReturns:\n    查询信息列表",
              "is_async": false,
              "decorators": [],
              "body_lines": 12,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_query_by_name",
              "line_number": 103,
              "return_type": "Optional[Dict[(str, Any)]]",
              "docstring": "根据名称获取查询\n\nArgs:\n    query_name: 查询名称\n\nReturns:\n    查询信息，不存在返回None",
              "is_async": false,
              "decorators": [],
              "body_lines": 17,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "query_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "fetch_and_save",
              "line_number": 122,
              "return_type": "Dict[(str, Any)]",
              "docstring": "获取并保存查询结果（核心方法）\n\nArgs:\n    query_name: 查询名称\n    pages: 获取页数\n\nReturns:\n    执行结果统计\n\nRaises:\n    ValueError: 查询不存在或参数无效\n    Exception: 数据获取或保存失败",
              "is_async": false,
              "decorators": [],
              "body_lines": 73,
              "complexity": 7,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "query_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "pages",
                  "type_annotation": "int",
                  "default_value": "1",
                  "is_required": false
                }
              ]
            },
            {
              "name": "_save_to_database",
              "line_number": 201,
              "return_type": "Dict[(str, Any)]",
              "docstring": "保存数据到MySQL并去重\n\nArgs:\n    data: 清理后的数据\n    query_name: 查询名称\n\nReturns:\n    保存结果统计",
              "is_async": false,
              "decorators": [],
              "body_lines": 80,
              "complexity": 6,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data",
                  "type_annotation": "pd.DataFrame",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "query_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_query_results",
              "line_number": 287,
              "return_type": "Dict[(str, Any)]",
              "docstring": "获取查询结果\n\nArgs:\n    query_name: 查询名称\n    limit: 返回条数\n    offset: 偏移量\n\nReturns:\n    查询结果",
              "is_async": false,
              "decorators": [],
              "body_lines": 60,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "query_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "limit",
                  "type_annotation": "int",
                  "default_value": "100",
                  "is_required": false
                },
                {
                  "name": "offset",
                  "type_annotation": "int",
                  "default_value": "0",
                  "is_required": false
                }
              ]
            },
            {
              "name": "get_query_history",
              "line_number": 354,
              "return_type": "Dict[(str, Any)]",
              "docstring": "获取查询历史统计\n\nArgs:\n    query_name: 查询名称\n    days: 查询天数\n\nReturns:\n    历史统计数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 70,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "query_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "days",
                  "type_annotation": "int",
                  "default_value": "7",
                  "is_required": false
                }
              ]
            },
            {
              "name": "close",
              "line_number": 430,
              "return_type": null,
              "docstring": "关闭资源",
              "is_async": false,
              "decorators": [],
              "body_lines": 4,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": [
        {
          "name": "get_wencai_service",
          "line_number": 438,
          "return_type": "WencaiService",
          "docstring": "获取WencaiService实例\n\nArgs:\n    db: 数据库会话\n\nReturns:\n    WencaiService实例",
          "is_async": false,
          "decorators": [],
          "body_lines": 10,
          "complexity": 1,
          "parameters": [
            {
              "name": "db",
              "type_annotation": "Session",
              "default_value": "None",
              "is_required": false
            }
          ]
        }
      ]
    },
    {
      "file_path": "web/backend/app/services/task_manager.py",
      "module_name": "web.backend.app.services.task_manager",
      "category": "monitoring",
      "docstring": "任务管理服务\n提供任务调度、执行和监控功能",
      "lines_of_code": 359,
      "blank_lines": 71,
      "comment_lines": 13,
      "last_modified": "2025-10-16T11:46:58.081567",
      "imports": [
        "uuid",
        "asyncio",
        "logging",
        "datetime",
        "typing",
        "collections",
        "concurrent.futures",
        "pathlib",
        "json",
        "app.models.task"
      ],
      "classes": [
        {
          "name": "TaskManager",
          "line_number": 24,
          "base_classes": [],
          "docstring": "任务管理器核心类",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 27,
              "return_type": null,
              "docstring": null,
              "is_async": false,
              "decorators": [],
              "body_lines": 10,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "log_dir",
                  "type_annotation": "str",
                  "default_value": "\"/tmp/mystocks_tasks\"",
                  "is_required": false
                }
              ]
            },
            {
              "name": "register_task",
              "line_number": 39,
              "return_type": "TaskResponse",
              "docstring": "注册新任务",
              "is_async": false,
              "decorators": [],
              "body_lines": 31,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "task_config",
                  "type_annotation": "TaskConfig",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "unregister_task",
              "line_number": 72,
              "return_type": "TaskResponse",
              "docstring": "注销任务",
              "is_async": false,
              "decorators": [],
              "body_lines": 29,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "task_id",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "register_function",
              "line_number": 103,
              "return_type": null,
              "docstring": "注册任务函数",
              "is_async": false,
              "decorators": [],
              "body_lines": 3,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "function_name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "function",
                  "type_annotation": "Callable",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "execute_task",
              "line_number": 108,
              "return_type": "TaskExecution",
              "docstring": "执行任务",
              "is_async": true,
              "decorators": [],
              "body_lines": 72,
              "complexity": 8,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "task_id",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "params",
                  "type_annotation": "Optional[Dict[(str, Any)]]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "start_task",
              "line_number": 182,
              "return_type": "TaskResponse",
              "docstring": "启动任务(异步)",
              "is_async": true,
              "decorators": [],
              "body_lines": 29,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "task_id",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "params",
                  "type_annotation": "Optional[Dict[(str, Any)]]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "stop_task",
              "line_number": 213,
              "return_type": "TaskResponse",
              "docstring": "停止任务",
              "is_async": false,
              "decorators": [],
              "body_lines": 25,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "task_id",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_task",
              "line_number": 240,
              "return_type": "Optional[TaskConfig]",
              "docstring": "获取任务配置",
              "is_async": false,
              "decorators": [],
              "body_lines": 2,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "task_id",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "list_tasks",
              "line_number": 244,
              "return_type": "List[TaskConfig]",
              "docstring": "列出所有任务",
              "is_async": false,
              "decorators": [],
              "body_lines": 10,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "task_type",
                  "type_annotation": "Optional[TaskType]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "tags",
                  "type_annotation": "Optional[List[str]]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "get_execution",
              "line_number": 256,
              "return_type": "Optional[TaskExecution]",
              "docstring": "获取执行记录",
              "is_async": false,
              "decorators": [],
              "body_lines": 2,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "execution_id",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "list_executions",
              "line_number": 260,
              "return_type": "List[TaskExecution]",
              "docstring": "列出执行记录",
              "is_async": false,
              "decorators": [],
              "body_lines": 10,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "task_id",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                },
                {
                  "name": "limit",
                  "type_annotation": "int",
                  "default_value": "100",
                  "is_required": false
                }
              ]
            },
            {
              "name": "get_statistics",
              "line_number": 272,
              "return_type": "Dict[(str, TaskStatistics)]",
              "docstring": "获取统计信息",
              "is_async": false,
              "decorators": [],
              "body_lines": 4,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "task_id",
                  "type_annotation": "Optional[str]",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            },
            {
              "name": "_update_statistics",
              "line_number": 278,
              "return_type": null,
              "docstring": "更新统计信息",
              "is_async": false,
              "decorators": [],
              "body_lines": 25,
              "complexity": 6,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "task_id",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "execution",
                  "type_annotation": "TaskExecution",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "export_config",
              "line_number": 305,
              "return_type": null,
              "docstring": "导出任务配置",
              "is_async": false,
              "decorators": [],
              "body_lines": 10,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "output_path",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "import_config",
              "line_number": 317,
              "return_type": "TaskResponse",
              "docstring": "导入任务配置",
              "is_async": false,
              "decorators": [],
              "body_lines": 23,
              "complexity": 4,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "config_path",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "cleanup_old_executions",
              "line_number": 342,
              "return_type": null,
              "docstring": "清理旧的执行记录",
              "is_async": false,
              "decorators": [],
              "body_lines": 12,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "days",
                  "type_annotation": "int",
                  "default_value": "7",
                  "is_required": false
                }
              ]
            }
          ]
        }
      ],
      "functions": []
    },
    {
      "file_path": "web/backend/app/services/task_scheduler.py",
      "module_name": "web.backend.app.services.task_scheduler",
      "category": "monitoring",
      "docstring": "任务调度器\n基于APScheduler实现定时任务调度",
      "lines_of_code": 205,
      "blank_lines": 30,
      "comment_lines": 6,
      "last_modified": "2025-10-16T11:51:39.888392",
      "imports": [
        "logging",
        "datetime",
        "typing",
        "apscheduler.schedulers.asyncio",
        "apscheduler.triggers.cron",
        "apscheduler.triggers.interval",
        "apscheduler.triggers.date",
        "apscheduler.jobstores.memory",
        "apscheduler.executors.pool",
        "app.models.task",
        "app.services.task_manager"
      ],
      "classes": [
        {
          "name": "TaskScheduler",
          "line_number": 22,
          "base_classes": [],
          "docstring": "任务调度器",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 25,
              "return_type": null,
              "docstring": null,
              "is_async": false,
              "decorators": [],
              "body_lines": 21,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "start",
              "line_number": 49,
              "return_type": null,
              "docstring": "启动调度器",
              "is_async": false,
              "decorators": [],
              "body_lines": 4,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "shutdown",
              "line_number": 55,
              "return_type": null,
              "docstring": "关闭调度器",
              "is_async": false,
              "decorators": [],
              "body_lines": 4,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "wait",
                  "type_annotation": "bool",
                  "default_value": "True",
                  "is_required": false
                }
              ]
            },
            {
              "name": "schedule_task",
              "line_number": 61,
              "return_type": "bool",
              "docstring": "调度任务",
              "is_async": false,
              "decorators": [],
              "body_lines": 33,
              "complexity": 6,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "task_config",
                  "type_annotation": "TaskConfig",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "unschedule_task",
              "line_number": 96,
              "return_type": "bool",
              "docstring": "取消任务调度",
              "is_async": false,
              "decorators": [],
              "body_lines": 11,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "task_id",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "pause_task",
              "line_number": 109,
              "return_type": "bool",
              "docstring": "暂停任务调度",
              "is_async": false,
              "decorators": [],
              "body_lines": 10,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "task_id",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "resume_task",
              "line_number": 121,
              "return_type": "bool",
              "docstring": "恢复任务调度",
              "is_async": false,
              "decorators": [],
              "body_lines": 10,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "task_id",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_scheduled_jobs",
              "line_number": 133,
              "return_type": "List[Dict]",
              "docstring": "获取所有已调度的任务",
              "is_async": false,
              "decorators": [],
              "body_lines": 10,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_create_trigger",
              "line_number": 145,
              "return_type": null,
              "docstring": "创建APScheduler触发器",
              "is_async": false,
              "decorators": [],
              "body_lines": 47,
              "complexity": 9,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "schedule",
                  "type_annotation": "TaskSchedule",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "_execute_scheduled_task",
              "line_number": 194,
              "return_type": null,
              "docstring": "执行调度的任务",
              "is_async": true,
              "decorators": [],
              "body_lines": 6,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "task_id",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": []
    },
    {
      "file_path": "web/backend/app/api/auth.py",
      "module_name": "web.backend.app.api.auth",
      "category": "core",
      "docstring": "认证相关 API",
      "lines_of_code": 200,
      "blank_lines": 24,
      "comment_lines": 8,
      "last_modified": "2025-10-14T13:08:25.575047",
      "imports": [
        "fastapi",
        "fastapi.security",
        "typing",
        "datetime",
        "app.core.security",
        "app.core.config"
      ],
      "classes": [],
      "functions": [
        {
          "name": "get_users_db",
          "line_number": 41,
          "return_type": null,
          "docstring": "获取用户数据库",
          "is_async": false,
          "decorators": [],
          "body_lines": 2,
          "complexity": 1,
          "parameters": []
        },
        {
          "name": "get_current_user",
          "line_number": 45,
          "return_type": "User",
          "docstring": "获取当前用户",
          "is_async": true,
          "decorators": [],
          "body_lines": 29,
          "complexity": 5,
          "parameters": [
            {
              "name": "credentials",
              "type_annotation": "HTTPAuthorizationCredentials",
              "default_value": "Depends()",
              "is_required": false
            }
          ]
        },
        {
          "name": "get_current_active_user",
          "line_number": 78,
          "return_type": "User",
          "docstring": "获取当前活跃用户",
          "is_async": true,
          "decorators": [],
          "body_lines": 6,
          "complexity": 2,
          "parameters": [
            {
              "name": "current_user",
              "type_annotation": "User",
              "default_value": "Depends()",
              "is_required": false
            }
          ]
        },
        {
          "name": "login_for_access_token",
          "line_number": 89,
          "return_type": "Dict[(str, Any)]",
          "docstring": "用户登录获取访问令牌\n支持 OAuth2 标准的 form data 格式",
          "is_async": true,
          "decorators": [
            "router.post"
          ],
          "body_lines": 30,
          "complexity": 2,
          "parameters": [
            {
              "name": "username",
              "type_annotation": "str",
              "default_value": "Form()",
              "is_required": false
            },
            {
              "name": "password",
              "type_annotation": "str",
              "default_value": "Form()",
              "is_required": false
            }
          ]
        },
        {
          "name": "logout",
          "line_number": 125,
          "return_type": "Dict[(str, Any)]",
          "docstring": "用户登出",
          "is_async": true,
          "decorators": [
            "router.post"
          ],
          "body_lines": 8,
          "complexity": 1,
          "parameters": [
            {
              "name": "current_user",
              "type_annotation": "User",
              "default_value": "Depends()",
              "is_required": false
            }
          ]
        },
        {
          "name": "read_users_me",
          "line_number": 138,
          "return_type": "User",
          "docstring": "获取当前用户信息",
          "is_async": true,
          "decorators": [
            "router.get"
          ],
          "body_lines": 4,
          "complexity": 1,
          "parameters": [
            {
              "name": "current_user",
              "type_annotation": "User",
              "default_value": "Depends()",
              "is_required": false
            }
          ]
        },
        {
          "name": "refresh_token",
          "line_number": 147,
          "return_type": "Dict[(str, Any)]",
          "docstring": "刷新访问令牌",
          "is_async": true,
          "decorators": [
            "router.post"
          ],
          "body_lines": 14,
          "complexity": 1,
          "parameters": [
            {
              "name": "current_user",
              "type_annotation": "User",
              "default_value": "Depends()",
              "is_required": false
            }
          ]
        },
        {
          "name": "get_users",
          "line_number": 166,
          "return_type": "Dict[(str, Any)]",
          "docstring": "获取用户列表（仅管理员）",
          "is_async": true,
          "decorators": [
            "router.get"
          ],
          "body_lines": 21,
          "complexity": 3,
          "parameters": [
            {
              "name": "current_user",
              "type_annotation": "User",
              "default_value": "Depends()",
              "is_required": false
            }
          ]
        },
        {
          "name": "check_permission",
          "line_number": 191,
          "return_type": "bool",
          "docstring": "检查用户权限",
          "is_async": false,
          "decorators": [],
          "body_lines": 9,
          "complexity": 1,
          "parameters": [
            {
              "name": "user_role",
              "type_annotation": "str",
              "default_value": null,
              "is_required": true
            },
            {
              "name": "required_role",
              "type_annotation": "str",
              "default_value": null,
              "is_required": true
            }
          ]
        }
      ]
    },
    {
      "file_path": "web/backend/app/api/metrics.py",
      "module_name": "web.backend.app.api.metrics",
      "category": "monitoring",
      "docstring": "Prometheus监控指标端点\n提供系统运行指标用于Prometheus采集",
      "lines_of_code": 144,
      "blank_lines": 30,
      "comment_lines": 20,
      "last_modified": "2025-10-16T09:50:54.462720",
      "imports": [
        "fastapi",
        "prometheus_client",
        "time"
      ],
      "classes": [],
      "functions": [
        {
          "name": "metrics",
          "line_number": 68,
          "return_type": null,
          "docstring": "Prometheus metrics端点\n\n返回Prometheus格式的监控指标",
          "is_async": true,
          "decorators": [
            "router.get"
          ],
          "body_lines": 39,
          "complexity": 2,
          "parameters": []
        },
        {
          "name": "record_request_metric",
          "line_number": 112,
          "return_type": null,
          "docstring": "记录请求指标\n\nArgs:\n    method: HTTP方法\n    endpoint: 端点路径\n    status_code: 响应状态码\n    duration: 请求耗时（秒）",
          "is_async": false,
          "decorators": [],
          "body_lines": 21,
          "complexity": 1,
          "parameters": [
            {
              "name": "method",
              "type_annotation": "str",
              "default_value": null,
              "is_required": true
            },
            {
              "name": "endpoint",
              "type_annotation": "str",
              "default_value": null,
              "is_required": true
            },
            {
              "name": "status_code",
              "type_annotation": "int",
              "default_value": null,
              "is_required": true
            },
            {
              "name": "duration",
              "type_annotation": "float",
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "record_cache_hit",
          "line_number": 136,
          "return_type": null,
          "docstring": "记录缓存命中",
          "is_async": false,
          "decorators": [],
          "body_lines": 2,
          "complexity": 1,
          "parameters": []
        },
        {
          "name": "record_cache_miss",
          "line_number": 141,
          "return_type": null,
          "docstring": "记录缓存未命中",
          "is_async": false,
          "decorators": [],
          "body_lines": 2,
          "complexity": 1,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "web/backend/app/api/market.py",
      "module_name": "web.backend.app.api.market",
      "category": "infrastructure",
      "docstring": "市场数据API路由\n\n提供RESTful接口:\n- GET /api/market/fund-flow - 查询资金流向\n- POST /api/market/fund-flow/refresh - 刷新资金流向数据\n- GET /api/market/etf/list - 查询ETF列表\n- POST /api/market/etf/refresh - 刷新ETF数据\n- GET /api/market/chip-race - 查询竞价抢筹\n- POST /api/market/chip-race/refresh - 刷新抢筹数据\n- GET /api/market/lhb - 查询龙虎榜\n- POST /api/market/lhb/refresh - 刷新龙虎榜数据",
      "lines_of_code": 353,
      "blank_lines": 73,
      "comment_lines": 10,
      "last_modified": "2025-10-16T09:17:31.645285",
      "imports": [
        "fastapi",
        "typing",
        "datetime",
        "pymysql",
        "app.schemas.market_schemas",
        "app.services.market_data_service"
      ],
      "classes": [],
      "functions": [
        {
          "name": "get_fund_flow",
          "line_number": 38,
          "return_type": null,
          "docstring": "查询个股资金流向历史数据\n\n**参数说明:**\n- symbol: 股票代码 (如: 600519.SH)\n- timeframe: 1=今日, 3=3日, 5=5日, 10=10日\n- start_date/end_date: 时间范围筛选\n\n**返回:** 资金流向列表",
          "is_async": true,
          "decorators": [
            "router.get"
          ],
          "body_lines": 15,
          "complexity": 2,
          "parameters": [
            {
              "name": "symbol",
              "type_annotation": "str",
              "default_value": "Query()",
              "is_required": false
            },
            {
              "name": "timeframe",
              "type_annotation": "str",
              "default_value": "Query()",
              "is_required": false
            },
            {
              "name": "start_date",
              "type_annotation": "Optional[date]",
              "default_value": "Query()",
              "is_required": false
            },
            {
              "name": "end_date",
              "type_annotation": "Optional[date]",
              "default_value": "Query()",
              "is_required": false
            },
            {
              "name": "service",
              "type_annotation": "MarketDataService",
              "default_value": "Depends()",
              "is_required": false
            }
          ]
        },
        {
          "name": "refresh_fund_flow",
          "line_number": 63,
          "return_type": null,
          "docstring": "从数据源刷新资金流向数据并保存到数据库\n\n**数据源:** 东方财富网 (via akshare)",
          "is_async": true,
          "decorators": [
            "router.post"
          ],
          "body_lines": 11,
          "complexity": 2,
          "parameters": [
            {
              "name": "symbol",
              "type_annotation": "str",
              "default_value": "Query()",
              "is_required": false
            },
            {
              "name": "timeframe",
              "type_annotation": "str",
              "default_value": "Query()",
              "is_required": false
            },
            {
              "name": "service",
              "type_annotation": "MarketDataService",
              "default_value": "Depends()",
              "is_required": false
            }
          ]
        },
        {
          "name": "get_etf_list",
          "line_number": 84,
          "return_type": null,
          "docstring": "查询ETF实时行情数据\n\n**查询方式:**\n- 指定symbol: 返回单个ETF数据\n- 指定keyword: 模糊搜索名称/代码\n- 不指定条件: 返回全市场ETF(按涨跌幅排序)\n\n**返回:** ETF数据列表",
          "is_async": true,
          "decorators": [
            "router.get"
          ],
          "body_lines": 15,
          "complexity": 2,
          "parameters": [
            {
              "name": "symbol",
              "type_annotation": "Optional[str]",
              "default_value": "Query()",
              "is_required": false
            },
            {
              "name": "keyword",
              "type_annotation": "Optional[str]",
              "default_value": "Query()",
              "is_required": false
            },
            {
              "name": "limit",
              "type_annotation": "int",
              "default_value": "Query()",
              "is_required": false
            },
            {
              "name": "service",
              "type_annotation": "MarketDataService",
              "default_value": "Depends()",
              "is_required": false
            }
          ]
        },
        {
          "name": "refresh_etf_data",
          "line_number": 108,
          "return_type": null,
          "docstring": "刷新全市场ETF实时数据\n\n**数据源:** 东方财富网 (via akshare)\n**更新频率:** 建议每5分钟调用一次",
          "is_async": true,
          "decorators": [
            "router.post"
          ],
          "body_lines": 12,
          "complexity": 2,
          "parameters": [
            {
              "name": "service",
              "type_annotation": "MarketDataService",
              "default_value": "Depends()",
              "is_required": false
            }
          ]
        },
        {
          "name": "get_chip_race",
          "line_number": 128,
          "return_type": null,
          "docstring": "查询竞价抢筹数据\n\n**类型说明:**\n- open: 早盘抢筹(集合竞价)\n- end: 尾盘抢筹(收盘竞价)\n\n**返回:** 按抢筹金额倒序排列",
          "is_async": true,
          "decorators": [
            "router.get"
          ],
          "body_lines": 14,
          "complexity": 2,
          "parameters": [
            {
              "name": "race_type",
              "type_annotation": "str",
              "default_value": "Query()",
              "is_required": false
            },
            {
              "name": "trade_date",
              "type_annotation": "Optional[date]",
              "default_value": "Query()",
              "is_required": false
            },
            {
              "name": "min_race_amount",
              "type_annotation": "Optional[float]",
              "default_value": "Query()",
              "is_required": false
            },
            {
              "name": "limit",
              "type_annotation": "int",
              "default_value": "Query()",
              "is_required": false
            },
            {
              "name": "service",
              "type_annotation": "MarketDataService",
              "default_value": "Depends()",
              "is_required": false
            }
          ]
        },
        {
          "name": "refresh_chip_race",
          "line_number": 152,
          "return_type": null,
          "docstring": "刷新竞价抢筹数据\n\n**数据源:** 通达信TQLEX\n**更新时机:**\n- open: 9:30之后\n- end: 15:05之后",
          "is_async": true,
          "decorators": [
            "router.post"
          ],
          "body_lines": 14,
          "complexity": 2,
          "parameters": [
            {
              "name": "race_type",
              "type_annotation": "str",
              "default_value": "Query()",
              "is_required": false
            },
            {
              "name": "trade_date",
              "type_annotation": "Optional[str]",
              "default_value": "Query()",
              "is_required": false
            },
            {
              "name": "service",
              "type_annotation": "MarketDataService",
              "default_value": "Depends()",
              "is_required": false
            }
          ]
        },
        {
          "name": "get_lhb_detail",
          "line_number": 176,
          "return_type": null,
          "docstring": "查询龙虎榜详细数据\n\n**筛选条件:**\n- symbol: 查询指定股票的历史龙虎榜记录\n- start_date/end_date: 时间范围\n- min_net_amount: 净买入额下限(元)\n\n**返回:** 按日期倒序排列",
          "is_async": true,
          "decorators": [
            "router.get"
          ],
          "body_lines": 15,
          "complexity": 2,
          "parameters": [
            {
              "name": "symbol",
              "type_annotation": "Optional[str]",
              "default_value": "Query()",
              "is_required": false
            },
            {
              "name": "start_date",
              "type_annotation": "Optional[date]",
              "default_value": "Query()",
              "is_required": false
            },
            {
              "name": "end_date",
              "type_annotation": "Optional[date]",
              "default_value": "Query()",
              "is_required": false
            },
            {
              "name": "min_net_amount",
              "type_annotation": "Optional[float]",
              "default_value": "Query()",
              "is_required": false
            },
            {
              "name": "limit",
              "type_annotation": "int",
              "default_value": "Query()",
              "is_required": false
            },
            {
              "name": "service",
              "type_annotation": "MarketDataService",
              "default_value": "Depends()",
              "is_required": false
            }
          ]
        },
        {
          "name": "refresh_lhb_detail",
          "line_number": 202,
          "return_type": null,
          "docstring": "刷新指定日期的龙虎榜数据\n\n**数据源:** 东方财富网 (via akshare)\n**更新时机:** 每日20:00之后\n**说明:** 龙虎榜数据次日公布",
          "is_async": true,
          "decorators": [
            "router.post"
          ],
          "body_lines": 13,
          "complexity": 2,
          "parameters": [
            {
              "name": "trade_date",
              "type_annotation": "str",
              "default_value": "Query()",
              "is_required": false
            },
            {
              "name": "service",
              "type_annotation": "MarketDataService",
              "default_value": "Depends()",
              "is_required": false
            }
          ]
        },
        {
          "name": "get_market_quotes",
          "line_number": 224,
          "return_type": null,
          "docstring": "获取实时市场行情数据\n\n**参数**:\n- symbols: 股票代码列表（可选）。不指定则返回热门股票行情\n\n**数据源**: TDX实时行情\n**返回**: 实时行情列表",
          "is_async": true,
          "decorators": [
            "router.get"
          ],
          "body_lines": 42,
          "complexity": 6,
          "parameters": [
            {
              "name": "symbols",
              "type_annotation": "Optional[str]",
              "default_value": "Query()",
              "is_required": false
            }
          ]
        },
        {
          "name": "get_stock_list",
          "line_number": 272,
          "return_type": null,
          "docstring": "获取股票基本信息列表\n\n**查询条件**:\n- search: 关键词搜索（代码或名称）\n- industry: 按行业筛选\n- market: 按市场筛选（SH/SZ）\n- limit: 返回数量限制\n\n**数据源**: MySQL stock_info表\n**返回**: 股票列表",
          "is_async": true,
          "decorators": [
            "router.get"
          ],
          "body_lines": 63,
          "complexity": 5,
          "parameters": [
            {
              "name": "limit",
              "type_annotation": "int",
              "default_value": "Query()",
              "is_required": false
            },
            {
              "name": "search",
              "type_annotation": "Optional[str]",
              "default_value": "Query()",
              "is_required": false
            },
            {
              "name": "industry",
              "type_annotation": "Optional[str]",
              "default_value": "Query()",
              "is_required": false
            },
            {
              "name": "market",
              "type_annotation": "Optional[str]",
              "default_value": "Query()",
              "is_required": false
            }
          ]
        },
        {
          "name": "health_check",
          "line_number": 346,
          "return_type": null,
          "docstring": "API健康检查",
          "is_async": true,
          "decorators": [
            "router.get"
          ],
          "body_lines": 6,
          "complexity": 1,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "web/backend/app/api/system.py",
      "module_name": "web.backend.app.api.system",
      "category": "infrastructure",
      "docstring": "系统管理API端点\n提供系统设置、数据库连接测试、运行日志查询等功能",
      "lines_of_code": 732,
      "blank_lines": 85,
      "comment_lines": 33,
      "last_modified": "2025-10-16T10:31:32.917494",
      "imports": [
        "fastapi",
        "pydantic",
        "typing",
        "datetime",
        "pymysql",
        "psycopg2",
        "redis",
        "taos",
        "os",
        "json",
        "pathlib"
      ],
      "classes": [
        {
          "name": "ConnectionTestRequest",
          "line_number": 118,
          "base_classes": [
            "BaseModel"
          ],
          "docstring": "数据库连接测试请求",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "ConnectionTestResponse",
          "line_number": 125,
          "base_classes": [
            "BaseModel"
          ],
          "docstring": "数据库连接测试响应",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "SystemLog",
          "line_number": 385,
          "base_classes": [
            "BaseModel"
          ],
          "docstring": "系统日志模型",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "LogQueryResponse",
          "line_number": 398,
          "base_classes": [
            "BaseModel"
          ],
          "docstring": "日志查询响应",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        }
      ],
      "functions": [
        {
          "name": "system_health",
          "line_number": 21,
          "return_type": null,
          "docstring": "系统健康检查端点\n\n返回:\n- 数据库连接状态\n- 系统运行时间\n- 服务状态",
          "is_async": true,
          "decorators": [
            "router.get"
          ],
          "body_lines": 44,
          "complexity": 4,
          "parameters": []
        },
        {
          "name": "get_datasources",
          "line_number": 69,
          "return_type": null,
          "docstring": "获取已配置的数据源列表\n\n返回所有可用的数据源配置信息",
          "is_async": true,
          "decorators": [
            "router.get"
          ],
          "body_lines": 46,
          "complexity": 1,
          "parameters": []
        },
        {
          "name": "test_database_connection",
          "line_number": 133,
          "return_type": null,
          "docstring": "测试数据库连接\n\n支持的数据库类型:\n- mysql: MySQL/MariaDB\n- postgresql: PostgreSQL\n- tdengine: TDengine\n- redis: Redis",
          "is_async": true,
          "decorators": [
            "router.post"
          ],
          "body_lines": 247,
          "complexity": 29,
          "parameters": [
            {
              "name": "request",
              "type_annotation": "ConnectionTestRequest",
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "get_system_logs_from_db",
          "line_number": 407,
          "return_type": "List[SystemLog]",
          "docstring": "从PostgreSQL监控数据库获取系统日志\n\nArgs:\n    filter_errors: 是否只返回有问题的日志 (WARNING, ERROR, CRITICAL)\n    limit: 返回条数限制\n    offset: 偏移量\n    level: 日志级别筛选\n    category: 日志分类筛选\n\nReturns:\n    系统日志列表",
          "is_async": false,
          "decorators": [],
          "body_lines": 96,
          "complexity": 9,
          "parameters": [
            {
              "name": "filter_errors",
              "type_annotation": "bool",
              "default_value": "False",
              "is_required": false
            },
            {
              "name": "limit",
              "type_annotation": "int",
              "default_value": "100",
              "is_required": false
            },
            {
              "name": "offset",
              "type_annotation": "int",
              "default_value": "0",
              "is_required": false
            },
            {
              "name": "level",
              "type_annotation": "Optional[str]",
              "default_value": "None",
              "is_required": false
            },
            {
              "name": "category",
              "type_annotation": "Optional[str]",
              "default_value": "None",
              "is_required": false
            }
          ]
        },
        {
          "name": "get_mock_system_logs",
          "line_number": 512,
          "return_type": "List[SystemLog]",
          "docstring": "生成模拟的系统日志（用于演示和数据库不可用时的备用）",
          "is_async": false,
          "decorators": [],
          "body_lines": 110,
          "complexity": 2,
          "parameters": [
            {
              "name": "filter_errors",
              "type_annotation": "bool",
              "default_value": "False",
              "is_required": false
            },
            {
              "name": "limit",
              "type_annotation": "int",
              "default_value": "100",
              "is_required": false
            }
          ]
        },
        {
          "name": "get_system_logs",
          "line_number": 626,
          "return_type": null,
          "docstring": "获取系统运行日志\n\n参数:\n- filter_errors: 是否只显示有问题的日志 (WARNING/ERROR/CRITICAL)\n- limit: 返回条数限制 (1-1000)\n- offset: 偏移量，用于分页\n- level: 日志级别筛选\n- category: 日志分类筛选\n\n返回:\n- 系统运行日志列表，包含时间戳、级别、分类、操作、消息等信息\n\n示例:\n- GET /api/system/logs - 获取所有日志\n- GET /api/system/logs?filter_errors=true - 只获取有问题的日志\n- GET /api/system/logs?level=ERROR - 只获取ERROR级别日志\n- GET /api/system/logs?category=database - 只获取数据库相关日志",
          "is_async": true,
          "decorators": [
            "router.get"
          ],
          "body_lines": 47,
          "complexity": 4,
          "parameters": [
            {
              "name": "filter_errors",
              "type_annotation": "bool",
              "default_value": "Query()",
              "is_required": false
            },
            {
              "name": "limit",
              "type_annotation": "int",
              "default_value": "Query()",
              "is_required": false
            },
            {
              "name": "offset",
              "type_annotation": "int",
              "default_value": "Query()",
              "is_required": false
            },
            {
              "name": "level",
              "type_annotation": "Optional[str]",
              "default_value": "Query()",
              "is_required": false
            },
            {
              "name": "category",
              "type_annotation": "Optional[str]",
              "default_value": "Query()",
              "is_required": false
            }
          ]
        },
        {
          "name": "get_logs_summary",
          "line_number": 683,
          "return_type": null,
          "docstring": "获取日志统计摘要\n\n返回:\n- 总日志数\n- 各级别日志数量\n- 各分类日志数量\n- 最近错误数",
          "is_async": true,
          "decorators": [
            "router.get"
          ],
          "body_lines": 48,
          "complexity": 6,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "web/backend/app/api/wencai.py",
      "module_name": "web.backend.app.api.wencai",
      "category": "core",
      "docstring": "问财API路由\n\n提供问财股票筛选功能的RESTful API端点\n\n作者: MyStocks Backend Team\n创建日期: 2025-10-17",
      "lines_of_code": 441,
      "blank_lines": 75,
      "comment_lines": 15,
      "last_modified": "2025-10-18T15:52:21.515600",
      "imports": [
        "logging",
        "typing",
        "datetime",
        "fastapi",
        "sqlalchemy.orm",
        "app.core.database",
        "app.services.wencai_service",
        "app.schemas.wencai_schemas"
      ],
      "classes": [],
      "functions": [
        {
          "name": "get_all_queries",
          "line_number": 50,
          "return_type": "WencaiQueryListResponse",
          "docstring": "获取所有查询列表\n\n返回所有预定义的问财查询配置（qs_1 ~ qs_9）",
          "is_async": true,
          "decorators": [
            "router.get"
          ],
          "body_lines": 20,
          "complexity": 2,
          "parameters": [
            {
              "name": "db",
              "type_annotation": "Session",
              "default_value": "Depends()",
              "is_required": false
            }
          ]
        },
        {
          "name": "get_query_by_name",
          "line_number": 81,
          "return_type": "WencaiQueryInfo",
          "docstring": "获取指定查询信息\n\nArgs:\n    query_name: 查询名称（如qs_1）\n\nReturns:\n    查询配置详情",
          "is_async": true,
          "decorators": [
            "router.get"
          ],
          "body_lines": 29,
          "complexity": 4,
          "parameters": [
            {
              "name": "query_name",
              "type_annotation": "str",
              "default_value": null,
              "is_required": true
            },
            {
              "name": "db",
              "type_annotation": "Session",
              "default_value": "Depends()",
              "is_required": false
            }
          ]
        },
        {
          "name": "execute_query",
          "line_number": 122,
          "return_type": "WencaiQueryResponse",
          "docstring": "执行问财查询\n\n从问财API获取数据，清理、去重后保存到MySQL\n\nArgs:\n    request: 查询请求（包含query_name和pages）\n\nReturns:\n    查询执行结果统计",
          "is_async": true,
          "decorators": [
            "router.post"
          ],
          "body_lines": 34,
          "complexity": 3,
          "parameters": [
            {
              "name": "request",
              "type_annotation": "WencaiQueryRequest",
              "default_value": null,
              "is_required": true
            },
            {
              "name": "db",
              "type_annotation": "Session",
              "default_value": "Depends()",
              "is_required": false
            }
          ]
        },
        {
          "name": "get_query_results",
          "line_number": 168,
          "return_type": "WencaiResultsResponse",
          "docstring": "获取查询结果\n\n从数据库获取指定查询的最新结果\n\nArgs:\n    query_name: 查询名称\n    limit: 返回条数（1-1000）\n    offset: 偏移量（用于分页）\n\nReturns:\n    查询结果列表",
          "is_async": true,
          "decorators": [
            "router.get"
          ],
          "body_lines": 32,
          "complexity": 2,
          "parameters": [
            {
              "name": "query_name",
              "type_annotation": "str",
              "default_value": null,
              "is_required": true
            },
            {
              "name": "limit",
              "type_annotation": "int",
              "default_value": "Query()",
              "is_required": false
            },
            {
              "name": "offset",
              "type_annotation": "int",
              "default_value": "Query()",
              "is_required": false
            },
            {
              "name": "db",
              "type_annotation": "Session",
              "default_value": "Depends()",
              "is_required": false
            }
          ]
        },
        {
          "name": "refresh_query",
          "line_number": 214,
          "return_type": "WencaiRefreshResponse",
          "docstring": "刷新查询数据（后台任务）\n\n在后台异步执行数据刷新，立即返回任务状态\n\nArgs:\n    query_name: 查询名称\n    pages: 获取页数\n    background_tasks: FastAPI后台任务管理器\n\nReturns:\n    任务状态响应",
          "is_async": true,
          "decorators": [
            "router.post"
          ],
          "body_lines": 48,
          "complexity": 4,
          "parameters": [
            {
              "name": "query_name",
              "type_annotation": "str",
              "default_value": null,
              "is_required": true
            },
            {
              "name": "background_tasks",
              "type_annotation": "BackgroundTasks",
              "default_value": null,
              "is_required": true
            },
            {
              "name": "pages",
              "type_annotation": "int",
              "default_value": "Query()",
              "is_required": false
            },
            {
              "name": "db",
              "type_annotation": "Session",
              "default_value": "Depends()",
              "is_required": false
            }
          ]
        },
        {
          "name": "get_query_history",
          "line_number": 276,
          "return_type": "WencaiHistoryResponse",
          "docstring": "获取查询历史\n\n统计指定天数内的查询数据情况\n\nArgs:\n    query_name: 查询名称\n    days: 查询天数（1-30）\n\nReturns:\n    历史统计数据",
          "is_async": true,
          "decorators": [
            "router.get"
          ],
          "body_lines": 30,
          "complexity": 2,
          "parameters": [
            {
              "name": "query_name",
              "type_annotation": "str",
              "default_value": null,
              "is_required": true
            },
            {
              "name": "days",
              "type_annotation": "int",
              "default_value": "Query()",
              "is_required": false
            },
            {
              "name": "db",
              "type_annotation": "Session",
              "default_value": "Depends()",
              "is_required": false
            }
          ]
        },
        {
          "name": "execute_custom_query",
          "line_number": 319,
          "return_type": "WencaiCustomQueryResponse",
          "docstring": "执行自定义查询\n\n用户可以输入任意自然语言查询，直接获取结果\n\nArgs:\n    request: 自定义查询请求（包含query_text和pages）\n\nReturns:\n    查询结果（不保存到数据库）",
          "is_async": true,
          "decorators": [
            "router.post"
          ],
          "body_lines": 59,
          "complexity": 4,
          "parameters": [
            {
              "name": "request",
              "type_annotation": "WencaiCustomQueryRequest",
              "default_value": null,
              "is_required": true
            },
            {
              "name": "db",
              "type_annotation": "Session",
              "default_value": "Depends()",
              "is_required": false
            }
          ]
        },
        {
          "name": "health_check",
          "line_number": 389,
          "return_type": null,
          "docstring": "健康检查\n\n检查服务是否正常运行\n\nReturns:\n    健康状态",
          "is_async": true,
          "decorators": [
            "router.get"
          ],
          "body_lines": 13,
          "complexity": 1,
          "parameters": []
        },
        {
          "name": "_refresh_query_task",
          "line_number": 409,
          "return_type": null,
          "docstring": "后台刷新任务\n\nArgs:\n    query_name: 查询名称\n    pages: 获取页数",
          "is_async": true,
          "decorators": [],
          "body_lines": 31,
          "complexity": 2,
          "parameters": [
            {
              "name": "query_name",
              "type_annotation": "str",
              "default_value": null,
              "is_required": true
            },
            {
              "name": "pages",
              "type_annotation": "int",
              "default_value": "1",
              "is_required": false
            }
          ]
        }
      ]
    },
    {
      "file_path": "web/backend/app/api/indicators.py",
      "module_name": "web.backend.app.api.indicators",
      "category": "unknown",
      "docstring": "Indicator Calculation API Endpoints\n技术指标计算API路由",
      "lines_of_code": 689,
      "blank_lines": 107,
      "comment_lines": 29,
      "last_modified": "2025-10-15T13:33:48.691890",
      "imports": [
        "fastapi",
        "typing",
        "numpy",
        "time",
        "structlog",
        "app.schemas.indicator_request",
        "app.schemas.indicator_response",
        "app.services.indicator_registry",
        "app.services.indicator_calculator",
        "app.services.data_service"
      ],
      "classes": [],
      "functions": [
        {
          "name": "get_indicator_registry_endpoint",
          "line_number": 46,
          "return_type": null,
          "docstring": "获取指标注册表\n\n返回所有可用的技术指标及其元数据",
          "is_async": true,
          "decorators": [
            "router.get"
          ],
          "body_lines": 47,
          "complexity": 4,
          "parameters": []
        },
        {
          "name": "get_indicators_by_category",
          "line_number": 97,
          "return_type": null,
          "docstring": "获取指定分类的指标\n\n- **category**: 指标分类 (trend, momentum, volatility, volume, candlestick)",
          "is_async": true,
          "decorators": [
            "router.get"
          ],
          "body_lines": 48,
          "complexity": 5,
          "parameters": [
            {
              "name": "category",
              "type_annotation": "str",
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "calculate_indicators",
          "line_number": 149,
          "return_type": null,
          "docstring": "计算技术指标\n\n根据股票代码、日期范围和指标列表,计算技术指标值\n\n**请求示例**:\n```json\n{\n    \"symbol\": \"600519.SH\",\n    \"start_date\": \"2024-01-01\",\n    \"end_date\": \"2024-12-31\",\n    \"indicators\": [\n        {\"abbreviation\": \"SMA\", \"parameters\": {\"timeperiod\": 20}},\n        {\"abbreviation\": \"RSI\", \"parameters\": {\"timeperiod\": 14}}\n    ],\n    \"use_cache\": true\n}\n```",
          "is_async": true,
          "decorators": [
            "router.post"
          ],
          "body_lines": 182,
          "complexity": 11,
          "parameters": [
            {
              "name": "request",
              "type_annotation": "IndicatorCalculateRequest",
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "create_indicator_config",
          "line_number": 335,
          "return_type": null,
          "docstring": "创建指标配置\n\n保存用户的常用指标组合配置,方便下次快速加载\n\n**请求示例**:\n```json\n{\n    \"name\": \"我的常用配置\",\n    \"indicators\": [\n        {\"abbreviation\": \"SMA\", \"parameters\": {\"timeperiod\": 20}},\n        {\"abbreviation\": \"RSI\", \"parameters\": {\"timeperiod\": 14}}\n    ]\n}\n```",
          "is_async": true,
          "decorators": [
            "router.post"
          ],
          "body_lines": 80,
          "complexity": 4,
          "parameters": [
            {
              "name": "request",
              "type_annotation": "IndicatorConfigCreateRequest",
              "default_value": null,
              "is_required": true
            },
            {
              "name": "user_id",
              "type_annotation": "int",
              "default_value": "1",
              "is_required": false
            }
          ]
        },
        {
          "name": "list_indicator_configs",
          "line_number": 422,
          "return_type": null,
          "docstring": "获取用户的指标配置列表\n\n返回当前用户的所有已保存指标配置",
          "is_async": true,
          "decorators": [
            "router.get"
          ],
          "body_lines": 59,
          "complexity": 2,
          "parameters": [
            {
              "name": "user_id",
              "type_annotation": "int",
              "default_value": "1",
              "is_required": false
            }
          ]
        },
        {
          "name": "get_indicator_config",
          "line_number": 487,
          "return_type": null,
          "docstring": "获取指定的指标配置详情\n\n- **config_id**: 配置ID",
          "is_async": true,
          "decorators": [
            "router.get"
          ],
          "body_lines": 57,
          "complexity": 4,
          "parameters": [
            {
              "name": "config_id",
              "type_annotation": "int",
              "default_value": null,
              "is_required": true
            },
            {
              "name": "user_id",
              "type_annotation": "int",
              "default_value": "1",
              "is_required": false
            }
          ]
        },
        {
          "name": "update_indicator_config",
          "line_number": 551,
          "return_type": null,
          "docstring": "更新指标配置\n\n可以更新配置名称和/或指标列表\n\n- **config_id**: 配置ID",
          "is_async": true,
          "decorators": [
            "router.put"
          ],
          "body_lines": 80,
          "complexity": 7,
          "parameters": [
            {
              "name": "config_id",
              "type_annotation": "int",
              "default_value": null,
              "is_required": true
            },
            {
              "name": "request",
              "type_annotation": "IndicatorConfigUpdateRequest",
              "default_value": null,
              "is_required": true
            },
            {
              "name": "user_id",
              "type_annotation": "int",
              "default_value": "1",
              "is_required": false
            }
          ]
        },
        {
          "name": "delete_indicator_config",
          "line_number": 639,
          "return_type": null,
          "docstring": "删除指标配置\n\n- **config_id**: 配置ID",
          "is_async": true,
          "decorators": [
            "router.delete"
          ],
          "body_lines": 46,
          "complexity": 4,
          "parameters": [
            {
              "name": "config_id",
              "type_annotation": "int",
              "default_value": null,
              "is_required": true
            },
            {
              "name": "user_id",
              "type_annotation": "int",
              "default_value": "1",
              "is_required": false
            }
          ]
        }
      ]
    },
    {
      "file_path": "web/backend/app/api/tdx.py",
      "module_name": "web.backend.app.api.tdx",
      "category": "core",
      "docstring": "TDX数据API路由\n\n提供RESTful接口:\n- GET /api/tdx/quote/{symbol} - 获取实时行情\n- GET /api/tdx/kline - 获取历史K线(多周期)\n- GET /api/tdx/index/quote/{symbol} - 获取指数行情\n- GET /api/tdx/index/kline - 获取指数K线\n- GET /api/tdx/health - 健康检查\n\n所有接口均需JWT认证",
      "lines_of_code": 358,
      "blank_lines": 55,
      "comment_lines": 18,
      "last_modified": "2025-10-15T21:53:22.388230",
      "imports": [
        "fastapi",
        "typing",
        "datetime",
        "app.schemas.tdx_schemas",
        "app.services.tdx_service",
        "app.core.security"
      ],
      "classes": [],
      "functions": [
        {
          "name": "get_stock_quote",
          "line_number": 38,
          "return_type": null,
          "docstring": "获取股票实时行情\n\n**参数:**\n- symbol: 6位数字股票代码(如: 600519)\n\n**返回:**\n- 实时行情数据,包含最新价、涨跌幅、五档行情等\n\n**示例:**\n```\nGET /api/tdx/quote/600519\n```\n\n**认证:** 需要JWT令牌",
          "is_async": true,
          "decorators": [
            "router.get"
          ],
          "body_lines": 39,
          "complexity": 6,
          "parameters": [
            {
              "name": "symbol",
              "type_annotation": "str",
              "default_value": null,
              "is_required": true
            },
            {
              "name": "current_user",
              "type_annotation": "User",
              "default_value": "Depends()",
              "is_required": false
            },
            {
              "name": "service",
              "type_annotation": "TdxService",
              "default_value": "Depends()",
              "is_required": false
            }
          ]
        },
        {
          "name": "get_stock_kline",
          "line_number": 92,
          "return_type": null,
          "docstring": "获取股票K线数据\n\n**参数:**\n- symbol: 6位数字股票代码(如: 600519)\n- start_date: 开始日期(可选,默认为30天前)\n- end_date: 结束日期(可选,默认为今天)\n- period: K线周期\n  - 1m: 1分钟\n  - 5m: 5分钟\n  - 15m: 15分钟\n  - 30m: 30分钟\n  - 1h: 1小时\n  - 1d: 日线(默认)\n\n**返回:**\n- K线数据列表,包含开高低收成交量等\n\n**示例:**\n```\nGET /api/tdx/kline?symbol=600519&period=5m&start_date=2025-10-01&end_date=2025-10-15\n```\n\n**认证:** 需要JWT令牌",
          "is_async": true,
          "decorators": [
            "router.get"
          ],
          "body_lines": 77,
          "complexity": 9,
          "parameters": [
            {
              "name": "symbol",
              "type_annotation": "str",
              "default_value": "Query()",
              "is_required": false
            },
            {
              "name": "start_date",
              "type_annotation": "Optional[str]",
              "default_value": "Query()",
              "is_required": false
            },
            {
              "name": "end_date",
              "type_annotation": "Optional[str]",
              "default_value": "Query()",
              "is_required": false
            },
            {
              "name": "period",
              "type_annotation": "str",
              "default_value": "Query()",
              "is_required": false
            },
            {
              "name": "current_user",
              "type_annotation": "User",
              "default_value": "Depends()",
              "is_required": false
            },
            {
              "name": "service",
              "type_annotation": "TdxService",
              "default_value": "Depends()",
              "is_required": false
            }
          ]
        },
        {
          "name": "get_index_quote",
          "line_number": 187,
          "return_type": null,
          "docstring": "获取指数实时行情\n\n**参数:**\n- symbol: 6位数字指数代码\n  - 000001: 上证指数\n  - 399001: 深证成指\n  - 399006: 创业板指\n\n**返回:**\n- 指数实时点位、涨跌幅等数据\n\n**示例:**\n```\nGET /api/tdx/index/quote/000001\n```\n\n**认证:** 需要JWT令牌",
          "is_async": true,
          "decorators": [
            "router.get"
          ],
          "body_lines": 42,
          "complexity": 6,
          "parameters": [
            {
              "name": "symbol",
              "type_annotation": "str",
              "default_value": null,
              "is_required": true
            },
            {
              "name": "current_user",
              "type_annotation": "User",
              "default_value": "Depends()",
              "is_required": false
            },
            {
              "name": "service",
              "type_annotation": "TdxService",
              "default_value": "Depends()",
              "is_required": false
            }
          ]
        },
        {
          "name": "get_index_kline",
          "line_number": 244,
          "return_type": null,
          "docstring": "获取指数K线数据\n\n**参数:**\n- symbol: 6位数字指数代码\n- start_date: 开始日期(可选,默认为90天前)\n- end_date: 结束日期(可选,默认为今天)\n- period: K线周期(同股票K线)\n\n**返回:**\n- 指数K线数据列表\n\n**示例:**\n```\nGET /api/tdx/index/kline?symbol=000001&period=1d&start_date=2025-01-01\n```\n\n**认证:** 需要JWT令牌",
          "is_async": true,
          "decorators": [
            "router.get"
          ],
          "body_lines": 70,
          "complexity": 9,
          "parameters": [
            {
              "name": "symbol",
              "type_annotation": "str",
              "default_value": "Query()",
              "is_required": false
            },
            {
              "name": "start_date",
              "type_annotation": "Optional[str]",
              "default_value": "Query()",
              "is_required": false
            },
            {
              "name": "end_date",
              "type_annotation": "Optional[str]",
              "default_value": "Query()",
              "is_required": false
            },
            {
              "name": "period",
              "type_annotation": "str",
              "default_value": "Query()",
              "is_required": false
            },
            {
              "name": "current_user",
              "type_annotation": "User",
              "default_value": "Depends()",
              "is_required": false
            },
            {
              "name": "service",
              "type_annotation": "TdxService",
              "default_value": "Depends()",
              "is_required": false
            }
          ]
        },
        {
          "name": "health_check",
          "line_number": 332,
          "return_type": null,
          "docstring": "TDX服务健康检查\n\n**返回:**\n- 服务状态和TDX连接信息\n\n**示例:**\n```\nGET /api/tdx/health\n```\n\n**注意:** 此接口不需要认证",
          "is_async": true,
          "decorators": [
            "router.get"
          ],
          "body_lines": 23,
          "complexity": 2,
          "parameters": [
            {
              "name": "service",
              "type_annotation": "TdxService",
              "default_value": "Depends()",
              "is_required": false
            }
          ]
        }
      ]
    },
    {
      "file_path": "web/backend/app/api/tasks.py",
      "module_name": "web.backend.app.api.tasks",
      "category": "unknown",
      "docstring": "任务管理API路由\n提供RESTful API接口用于任务管理",
      "lines_of_code": 207,
      "blank_lines": 31,
      "comment_lines": 0,
      "last_modified": "2025-10-16T11:47:22.964291",
      "imports": [
        "fastapi",
        "typing",
        "structlog",
        "app.models.task",
        "app.services.task_manager"
      ],
      "classes": [],
      "functions": [
        {
          "name": "register_task",
          "line_number": 21,
          "return_type": null,
          "docstring": "注册新任务",
          "is_async": true,
          "decorators": [
            "router.post"
          ],
          "body_lines": 9,
          "complexity": 3,
          "parameters": [
            {
              "name": "task_config",
              "type_annotation": "TaskConfig",
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "unregister_task",
          "line_number": 34,
          "return_type": null,
          "docstring": "注销任务",
          "is_async": true,
          "decorators": [
            "router.delete"
          ],
          "body_lines": 9,
          "complexity": 3,
          "parameters": [
            {
              "name": "task_id",
              "type_annotation": "str",
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "list_tasks",
          "line_number": 47,
          "return_type": null,
          "docstring": "列出所有任务",
          "is_async": true,
          "decorators": [
            "router.get"
          ],
          "body_lines": 8,
          "complexity": 2,
          "parameters": [
            {
              "name": "task_type",
              "type_annotation": "Optional[TaskType]",
              "default_value": "None",
              "is_required": false
            },
            {
              "name": "tags",
              "type_annotation": "Optional[str]",
              "default_value": "Query()",
              "is_required": false
            }
          ]
        },
        {
          "name": "get_task",
          "line_number": 62,
          "return_type": null,
          "docstring": "获取任务详情",
          "is_async": true,
          "decorators": [
            "router.get"
          ],
          "body_lines": 11,
          "complexity": 4,
          "parameters": [
            {
              "name": "task_id",
              "type_annotation": "str",
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "start_task",
          "line_number": 77,
          "return_type": null,
          "docstring": "启动任务",
          "is_async": true,
          "decorators": [
            "router.post"
          ],
          "body_lines": 11,
          "complexity": 4,
          "parameters": [
            {
              "name": "task_id",
              "type_annotation": "str",
              "default_value": null,
              "is_required": true
            },
            {
              "name": "params",
              "type_annotation": "Optional[Dict[(str, Any)]]",
              "default_value": "Body()",
              "is_required": false
            }
          ]
        },
        {
          "name": "stop_task",
          "line_number": 95,
          "return_type": null,
          "docstring": "停止任务",
          "is_async": true,
          "decorators": [
            "router.post"
          ],
          "body_lines": 11,
          "complexity": 4,
          "parameters": [
            {
              "name": "task_id",
              "type_annotation": "str",
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "list_executions",
          "line_number": 110,
          "return_type": null,
          "docstring": "列出执行记录",
          "is_async": true,
          "decorators": [
            "router.get"
          ],
          "body_lines": 7,
          "complexity": 2,
          "parameters": [
            {
              "name": "task_id",
              "type_annotation": "Optional[str]",
              "default_value": "None",
              "is_required": false
            },
            {
              "name": "limit",
              "type_annotation": "int",
              "default_value": "Query()",
              "is_required": false
            }
          ]
        },
        {
          "name": "get_execution",
          "line_number": 124,
          "return_type": null,
          "docstring": "获取执行记录详情",
          "is_async": true,
          "decorators": [
            "router.get"
          ],
          "body_lines": 11,
          "complexity": 4,
          "parameters": [
            {
              "name": "execution_id",
              "type_annotation": "str",
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "get_statistics",
          "line_number": 139,
          "return_type": null,
          "docstring": "获取任务统计信息",
          "is_async": true,
          "decorators": [
            "router.get"
          ],
          "body_lines": 7,
          "complexity": 2,
          "parameters": [
            {
              "name": "task_id",
              "type_annotation": "Optional[str]",
              "default_value": "None",
              "is_required": false
            }
          ]
        },
        {
          "name": "import_config",
          "line_number": 150,
          "return_type": null,
          "docstring": "导入任务配置",
          "is_async": true,
          "decorators": [
            "router.post"
          ],
          "body_lines": 11,
          "complexity": 4,
          "parameters": [
            {
              "name": "config_path",
              "type_annotation": "str",
              "default_value": "Body()",
              "is_required": false
            }
          ]
        },
        {
          "name": "export_config",
          "line_number": 165,
          "return_type": null,
          "docstring": "导出任务配置",
          "is_async": true,
          "decorators": [
            "router.post"
          ],
          "body_lines": 7,
          "complexity": 2,
          "parameters": [
            {
              "name": "output_path",
              "type_annotation": "str",
              "default_value": "Body()",
              "is_required": false
            }
          ]
        },
        {
          "name": "cleanup_executions",
          "line_number": 176,
          "return_type": null,
          "docstring": "清理旧的执行记录",
          "is_async": true,
          "decorators": [
            "router.delete"
          ],
          "body_lines": 11,
          "complexity": 2,
          "parameters": [
            {
              "name": "days",
              "type_annotation": "int",
              "default_value": "Query()",
              "is_required": false
            }
          ]
        },
        {
          "name": "health_check",
          "line_number": 191,
          "return_type": null,
          "docstring": "任务管理器健康检查",
          "is_async": true,
          "decorators": [
            "router.get"
          ],
          "body_lines": 15,
          "complexity": 2,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "web/backend/app/api/data.py",
      "module_name": "web.backend.app.api.data",
      "category": "core",
      "docstring": "数据查询 API",
      "lines_of_code": 358,
      "blank_lines": 62,
      "comment_lines": 33,
      "last_modified": "2025-10-16T09:18:02.080238",
      "imports": [
        "fastapi",
        "typing",
        "pandas",
        "datetime",
        "app.core.database",
        "app.core.security"
      ],
      "classes": [],
      "functions": [
        {
          "name": "get_stocks_basic",
          "line_number": 16,
          "return_type": "Dict[(str, Any)]",
          "docstring": "获取股票基本信息列表",
          "is_async": true,
          "decorators": [
            "router.get"
          ],
          "body_lines": 47,
          "complexity": 6,
          "parameters": [
            {
              "name": "limit",
              "type_annotation": "int",
              "default_value": "Query()",
              "is_required": false
            },
            {
              "name": "search",
              "type_annotation": "Optional[str]",
              "default_value": "Query()",
              "is_required": false
            },
            {
              "name": "industry",
              "type_annotation": "Optional[str]",
              "default_value": "Query()",
              "is_required": false
            },
            {
              "name": "market",
              "type_annotation": "Optional[str]",
              "default_value": "Query()",
              "is_required": false
            },
            {
              "name": "current_user",
              "type_annotation": "User",
              "default_value": "Depends()",
              "is_required": false
            }
          ]
        },
        {
          "name": "get_daily_kline",
          "line_number": 72,
          "return_type": "Dict[(str, Any)]",
          "docstring": "获取股票日线数据",
          "is_async": true,
          "decorators": [
            "router.get"
          ],
          "body_lines": 73,
          "complexity": 9,
          "parameters": [
            {
              "name": "symbol",
              "type_annotation": "str",
              "default_value": "Query()",
              "is_required": false
            },
            {
              "name": "start_date",
              "type_annotation": "Optional[str]",
              "default_value": "Query()",
              "is_required": false
            },
            {
              "name": "end_date",
              "type_annotation": "Optional[str]",
              "default_value": "Query()",
              "is_required": false
            },
            {
              "name": "limit",
              "type_annotation": "int",
              "default_value": "Query()",
              "is_required": false
            },
            {
              "name": "current_user",
              "type_annotation": "User",
              "default_value": "Depends()",
              "is_required": false
            }
          ]
        },
        {
          "name": "get_market_overview",
          "line_number": 154,
          "return_type": "Dict[(str, Any)]",
          "docstring": "获取市场概览数据",
          "is_async": true,
          "decorators": [
            "router.get"
          ],
          "body_lines": 57,
          "complexity": 4,
          "parameters": [
            {
              "name": "current_user",
              "type_annotation": "User",
              "default_value": "Depends()",
              "is_required": false
            }
          ]
        },
        {
          "name": "search_stocks",
          "line_number": 216,
          "return_type": "Dict[(str, Any)]",
          "docstring": "股票搜索接口",
          "is_async": true,
          "decorators": [
            "router.get"
          ],
          "body_lines": 55,
          "complexity": 6,
          "parameters": [
            {
              "name": "keyword",
              "type_annotation": "str",
              "default_value": "Query()",
              "is_required": false
            },
            {
              "name": "limit",
              "type_annotation": "int",
              "default_value": "Query()",
              "is_required": false
            },
            {
              "name": "current_user",
              "type_annotation": "User",
              "default_value": "Depends()",
              "is_required": false
            }
          ]
        },
        {
          "name": "get_kline",
          "line_number": 280,
          "return_type": "Dict[(str, Any)]",
          "docstring": "获取股票K线数据（stocks/daily的别名）",
          "is_async": true,
          "decorators": [
            "router.get"
          ],
          "body_lines": 5,
          "complexity": 1,
          "parameters": [
            {
              "name": "symbol",
              "type_annotation": "str",
              "default_value": "Query()",
              "is_required": false
            },
            {
              "name": "start_date",
              "type_annotation": "Optional[str]",
              "default_value": "Query()",
              "is_required": false
            },
            {
              "name": "end_date",
              "type_annotation": "Optional[str]",
              "default_value": "Query()",
              "is_required": false
            },
            {
              "name": "limit",
              "type_annotation": "int",
              "default_value": "Query()",
              "is_required": false
            },
            {
              "name": "current_user",
              "type_annotation": "User",
              "default_value": "Depends()",
              "is_required": false
            }
          ]
        },
        {
          "name": "get_financial_data",
          "line_number": 296,
          "return_type": "Dict[(str, Any)]",
          "docstring": "获取股票财务数据\n\n**报表类型**:\n- balance: 资产负债表\n- income: 利润表\n- cashflow: 现金流量表\n\n**数据源**: AkShare财务数据",
          "is_async": true,
          "decorators": [
            "router.get"
          ],
          "body_lines": 56,
          "complexity": 8,
          "parameters": [
            {
              "name": "symbol",
              "type_annotation": "str",
              "default_value": "Query()",
              "is_required": false
            },
            {
              "name": "report_type",
              "type_annotation": "str",
              "default_value": "Query()",
              "is_required": false
            },
            {
              "name": "period",
              "type_annotation": "str",
              "default_value": "Query()",
              "is_required": false
            },
            {
              "name": "limit",
              "type_annotation": "int",
              "default_value": "Query()",
              "is_required": false
            },
            {
              "name": "current_user",
              "type_annotation": "User",
              "default_value": "Depends()",
              "is_required": false
            }
          ]
        }
      ]
    },
    {
      "file_path": "web/backend/app/strategies/strategy_base.py",
      "module_name": "web.backend.app.strategies.strategy_base",
      "category": "auxiliary",
      "docstring": "策略基类和策略注册表\n\n复用现有组件:\n- indicator_calculator (161个TA-Lib指标) - EXISTING\n- data_service (OHLCV数据加载) - EXISTING",
      "lines_of_code": 120,
      "blank_lines": 24,
      "comment_lines": 1,
      "last_modified": "2025-10-14T23:10:43.966602",
      "imports": [
        "abc",
        "typing",
        "enum",
        "pandas",
        "numpy",
        "datetime",
        "logging"
      ],
      "classes": [
        {
          "name": "StrategyCategory",
          "line_number": 19,
          "base_classes": [
            "Enum"
          ],
          "docstring": "策略分类",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "StrategyBase",
          "line_number": 27,
          "base_classes": [
            "ABC"
          ],
          "docstring": "策略基类\n\n所有策略必须继承此类并实现execute()方法",
          "decorators": [],
          "is_abstract": true,
          "methods": [
            {
              "name": "__init__",
              "line_number": 34,
              "return_type": null,
              "docstring": null,
              "is_async": false,
              "decorators": [],
              "body_lines": 4,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "strategy_id",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "name",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "description",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "category",
                  "type_annotation": "StrategyCategory",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "execute",
              "line_number": 41,
              "return_type": "pd.DataFrame",
              "docstring": "执行策略生成交易信号\n\nArgs:\n    symbol: 股票代码\n    start_date: 开始日期\n    end_date: 结束日期\n    parameters: 策略参数\n\nReturns:\n    pd.DataFrame: 信号DataFrame\n        columns: ['date', 'signal', 'price', 'reason']\n        signal: 1=买入, -1=卖出, 0=持有",
              "is_async": false,
              "decorators": [
                "abstractmethod"
              ],
              "body_lines": 15,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "start_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "end_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "parameters",
                  "type_annotation": "Dict[(str, Any)]",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_default_parameters",
              "line_number": 64,
              "return_type": "Dict[(str, Any)]",
              "docstring": "获取默认参数",
              "is_async": false,
              "decorators": [],
              "body_lines": 2,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        },
        {
          "name": "StrategyRegistry",
          "line_number": 69,
          "base_classes": [],
          "docstring": "策略注册表 (单例模式)",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__new__",
              "line_number": 75,
              "return_type": null,
              "docstring": null,
              "is_async": false,
              "decorators": [],
              "body_lines": 3,
              "complexity": 2,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "register_strategy",
              "line_number": 80,
              "return_type": null,
              "docstring": "注册策略",
              "is_async": false,
              "decorators": [],
              "body_lines": 4,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "strategy_class",
                  "type_annotation": "type[StrategyBase]",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_strategy",
              "line_number": 89,
              "return_type": "Optional[StrategyBase]",
              "docstring": "获取策略实例",
              "is_async": false,
              "decorators": [],
              "body_lines": 4,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "strategy_id",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "list_strategies",
              "line_number": 95,
              "return_type": "List[Dict[(str, Any)]]",
              "docstring": "列出所有策略",
              "is_async": false,
              "decorators": [],
              "body_lines": 12,
              "complexity": 2,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": [
        {
          "name": "get_strategy_registry",
          "line_number": 114,
          "return_type": "StrategyRegistry",
          "docstring": "获取策略注册表单例",
          "is_async": false,
          "decorators": [],
          "body_lines": 5,
          "complexity": 2,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "web/backend/app/strategies/__init__.py",
      "module_name": "web.backend.app.strategies.__init__",
      "category": "unknown",
      "docstring": null,
      "lines_of_code": 1,
      "blank_lines": 1,
      "comment_lines": 0,
      "last_modified": "2025-10-14T23:33:58.762613",
      "imports": [],
      "classes": [],
      "functions": []
    },
    {
      "file_path": "web/backend/app/core/database.py",
      "module_name": "web.backend.app.core.database",
      "category": "infrastructure",
      "docstring": "数据库连接管理\n复用现有 MyStocks 数据库连接",
      "lines_of_code": 257,
      "blank_lines": 31,
      "comment_lines": 12,
      "last_modified": "2025-10-18T10:34:33.606551",
      "imports": [
        "structlog",
        "typing",
        "sqlalchemy",
        "sqlalchemy.ext.declarative",
        "sqlalchemy.orm",
        "redis",
        "pandas",
        "app.core.config"
      ],
      "classes": [
        {
          "name": "DatabaseService",
          "line_number": 153,
          "base_classes": [],
          "docstring": "数据库服务类",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "__init__",
              "line_number": 156,
              "return_type": null,
              "docstring": null,
              "is_async": false,
              "decorators": [],
              "body_lines": 4,
              "complexity": 1,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "query_stocks_basic",
              "line_number": 162,
              "return_type": "pd.DataFrame",
              "docstring": "查询股票基本信息",
              "is_async": false,
              "decorators": [],
              "body_lines": 17,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "limit",
                  "type_annotation": "int",
                  "default_value": "100",
                  "is_required": false
                }
              ]
            },
            {
              "name": "query_daily_kline",
              "line_number": 181,
              "return_type": "pd.DataFrame",
              "docstring": "查询日线数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 29,
              "complexity": 3,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "symbol",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "start_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "end_date",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "get_cache_data",
              "line_number": 212,
              "return_type": "Optional[Any]",
              "docstring": "获取缓存数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 14,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "key",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "set_cache_data",
              "line_number": 228,
              "return_type": "bool",
              "docstring": "设置缓存数据",
              "is_async": false,
              "decorators": [],
              "body_lines": 14,
              "complexity": 5,
              "parameters": [
                {
                  "name": "self",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "key",
                  "type_annotation": "str",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "data",
                  "type_annotation": "Any",
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "ttl",
                  "type_annotation": "int",
                  "default_value": "None",
                  "is_required": false
                }
              ]
            }
          ]
        }
      ],
      "functions": [
        {
          "name": "get_mysql_engine",
          "line_number": 28,
          "return_type": null,
          "docstring": "获取 MySQL 数据库引擎",
          "is_async": false,
          "decorators": [],
          "body_lines": 12,
          "complexity": 2,
          "parameters": []
        },
        {
          "name": "get_postgresql_engine",
          "line_number": 42,
          "return_type": null,
          "docstring": "获取 PostgreSQL 数据库引擎",
          "is_async": false,
          "decorators": [],
          "body_lines": 12,
          "complexity": 2,
          "parameters": []
        },
        {
          "name": "get_tdengine_engine",
          "line_number": 56,
          "return_type": null,
          "docstring": "获取 TDengine 数据库引擎",
          "is_async": false,
          "decorators": [],
          "body_lines": 17,
          "complexity": 3,
          "parameters": []
        },
        {
          "name": "get_mysql_session",
          "line_number": 75,
          "return_type": "Session",
          "docstring": "获取 MySQL 会话",
          "is_async": false,
          "decorators": [],
          "body_lines": 5,
          "complexity": 2,
          "parameters": []
        },
        {
          "name": "get_postgresql_session",
          "line_number": 82,
          "return_type": "Session",
          "docstring": "获取 PostgreSQL 会话",
          "is_async": false,
          "decorators": [],
          "body_lines": 5,
          "complexity": 2,
          "parameters": []
        },
        {
          "name": "get_redis_client",
          "line_number": 89,
          "return_type": null,
          "docstring": "获取 Redis 客户端",
          "is_async": false,
          "decorators": [],
          "body_lines": 20,
          "complexity": 3,
          "parameters": []
        },
        {
          "name": "close_all_connections",
          "line_number": 111,
          "return_type": null,
          "docstring": "关闭所有数据库连接",
          "is_async": false,
          "decorators": [],
          "body_lines": 9,
          "complexity": 4,
          "parameters": []
        },
        {
          "name": "get_db",
          "line_number": 248,
          "return_type": "Session",
          "docstring": "获取数据库会话（用于FastAPI依赖注入）",
          "is_async": false,
          "decorators": [],
          "body_lines": 6,
          "complexity": 1,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "web/backend/app/core/security.py",
      "module_name": "web.backend.app.core.security",
      "category": "core",
      "docstring": "安全认证和权限管理",
      "lines_of_code": 189,
      "blank_lines": 32,
      "comment_lines": 11,
      "last_modified": "2025-10-15T07:17:51.789960",
      "imports": [
        "datetime",
        "typing",
        "jwt",
        "bcrypt",
        "pydantic",
        "fastapi",
        "fastapi.security",
        "app.core.config"
      ],
      "classes": [
        {
          "name": "Token",
          "line_number": 18,
          "base_classes": [
            "BaseModel"
          ],
          "docstring": "JWT Token 模型",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "TokenData",
          "line_number": 25,
          "base_classes": [
            "BaseModel"
          ],
          "docstring": "Token 数据模型",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "User",
          "line_number": 31,
          "base_classes": [
            "BaseModel"
          ],
          "docstring": "用户模型",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "UserInDB",
          "line_number": 39,
          "base_classes": [
            "User"
          ],
          "docstring": "数据库中的用户模型",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        }
      ],
      "functions": [
        {
          "name": "verify_password",
          "line_number": 43,
          "return_type": "bool",
          "docstring": "验证密码 - 直接使用 bcrypt，避免 passlib 兼容性问题",
          "is_async": false,
          "decorators": [],
          "body_lines": 9,
          "complexity": 2,
          "parameters": [
            {
              "name": "plain_password",
              "type_annotation": "str",
              "default_value": null,
              "is_required": true
            },
            {
              "name": "hashed_password",
              "type_annotation": "str",
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "get_password_hash",
          "line_number": 54,
          "return_type": "str",
          "docstring": "生成密码哈希 - 使用纯bcrypt",
          "is_async": false,
          "decorators": [],
          "body_lines": 4,
          "complexity": 1,
          "parameters": [
            {
              "name": "password",
              "type_annotation": "str",
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "create_access_token",
          "line_number": 60,
          "return_type": "str",
          "docstring": "创建 JWT 访问令牌",
          "is_async": false,
          "decorators": [],
          "body_lines": 12,
          "complexity": 2,
          "parameters": [
            {
              "name": "data",
              "type_annotation": "Dict[(str, Any)]",
              "default_value": null,
              "is_required": true
            },
            {
              "name": "expires_delta",
              "type_annotation": "Optional[timedelta]",
              "default_value": "None",
              "is_required": false
            }
          ]
        },
        {
          "name": "verify_token",
          "line_number": 74,
          "return_type": "Optional[TokenData]",
          "docstring": "验证 JWT 令牌",
          "is_async": false,
          "decorators": [],
          "body_lines": 15,
          "complexity": 3,
          "parameters": [
            {
              "name": "token",
              "type_annotation": "str",
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "authenticate_user",
          "line_number": 97,
          "return_type": "Optional[UserInDB]",
          "docstring": "验证用户身份\n\n这里应该连接数据库查询用户信息\n暂时使用模拟数据",
          "is_async": false,
          "decorators": [],
          "body_lines": 37,
          "complexity": 3,
          "parameters": [
            {
              "name": "username",
              "type_annotation": "str",
              "default_value": null,
              "is_required": true
            },
            {
              "name": "password",
              "type_annotation": "str",
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "check_permission",
          "line_number": 136,
          "return_type": "bool",
          "docstring": "检查用户权限",
          "is_async": false,
          "decorators": [],
          "body_lines": 7,
          "complexity": 1,
          "parameters": [
            {
              "name": "user_role",
              "type_annotation": "str",
              "default_value": null,
              "is_required": true
            },
            {
              "name": "required_role",
              "type_annotation": "str",
              "default_value": null,
              "is_required": true
            }
          ]
        },
        {
          "name": "get_current_user",
          "line_number": 145,
          "return_type": "User",
          "docstring": "获取当前用户\n依赖注入，用于路由保护",
          "is_async": true,
          "decorators": [],
          "body_lines": 38,
          "complexity": 3,
          "parameters": [
            {
              "name": "token",
              "type_annotation": "str",
              "default_value": "Depends()",
              "is_required": false
            }
          ]
        },
        {
          "name": "get_current_active_user",
          "line_number": 185,
          "return_type": "User",
          "docstring": "获取当前活跃用户",
          "is_async": true,
          "decorators": [],
          "body_lines": 4,
          "complexity": 2,
          "parameters": [
            {
              "name": "current_user",
              "type_annotation": "User",
              "default_value": "Depends()",
              "is_required": false
            }
          ]
        }
      ]
    },
    {
      "file_path": "web/backend/app/core/config.py",
      "module_name": "web.backend.app.core.config",
      "category": "infrastructure",
      "docstring": "应用配置管理",
      "lines_of_code": 99,
      "blank_lines": 22,
      "comment_lines": 13,
      "last_modified": "2025-10-18T12:41:28.863195",
      "imports": [
        "pydantic_settings",
        "typing",
        "os"
      ],
      "classes": [
        {
          "name": "Settings",
          "line_number": 9,
          "base_classes": [
            "BaseSettings"
          ],
          "docstring": "应用配置",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        }
      ],
      "functions": [
        {
          "name": "get_mysql_connection_string",
          "line_number": 84,
          "return_type": "str",
          "docstring": null,
          "is_async": false,
          "decorators": [],
          "body_lines": 1,
          "complexity": 1,
          "parameters": []
        },
        {
          "name": "get_postgresql_connection_string",
          "line_number": 90,
          "return_type": "str",
          "docstring": null,
          "is_async": false,
          "decorators": [],
          "body_lines": 1,
          "complexity": 1,
          "parameters": []
        },
        {
          "name": "get_tdengine_connection_string",
          "line_number": 93,
          "return_type": "str",
          "docstring": null,
          "is_async": false,
          "decorators": [],
          "body_lines": 1,
          "complexity": 1,
          "parameters": []
        },
        {
          "name": "get_redis_connection_string",
          "line_number": 96,
          "return_type": "str",
          "docstring": null,
          "is_async": false,
          "decorators": [],
          "body_lines": 3,
          "complexity": 2,
          "parameters": []
        }
      ]
    },
    {
      "file_path": "web/backend/app/schemas/indicator_response.py",
      "module_name": "web.backend.app.schemas.indicator_response",
      "category": "infrastructure",
      "docstring": "Pydantic Response Schemas for Indicator API\n定义指标计算API的响应数据模型",
      "lines_of_code": 428,
      "blank_lines": 31,
      "comment_lines": 0,
      "last_modified": "2025-10-14T18:03:13.905692",
      "imports": [
        "pydantic",
        "typing",
        "datetime"
      ],
      "classes": [
        {
          "name": "IndicatorValueOutput",
          "line_number": 10,
          "base_classes": [
            "BaseModel"
          ],
          "docstring": "单个指标的输出值\n\nExample:\n    {\n        \"output_name\": \"sma\",\n        \"values\": [10.5, 11.2, 10.8, ...],\n        \"display_name\": \"SMA(20)\"\n    }",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "IndicatorResult",
          "line_number": 35,
          "base_classes": [
            "BaseModel"
          ],
          "docstring": "单个指标的计算结果\n\nExample:\n    {\n        \"abbreviation\": \"SMA\",\n        \"parameters\": {\"timeperiod\": 20},\n        \"outputs\": [\n            {\n                \"output_name\": \"sma\",\n                \"values\": [10.5, 11.2, ...],\n                \"display_name\": \"SMA(20)\"\n            }\n        ],\n        \"panel_type\": \"overlay\",\n        \"reference_lines\": null,\n        \"error\": null\n    }",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "OHLCVData",
          "line_number": 81,
          "base_classes": [
            "BaseModel"
          ],
          "docstring": "OHLCV K线数据\n\nExample:\n    {\n        \"dates\": [\"2024-01-01\", \"2024-01-02\", ...],\n        \"open\": [10.5, 10.8, ...],\n        \"high\": [11.0, 11.5, ...],\n        \"low\": [10.2, 10.5, ...],\n        \"close\": [10.8, 11.2, ...],\n        \"volume\": [1000000, 1200000, ...],\n        \"turnover\": [10800000, 12544000, ...]\n    }",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "IndicatorCalculateResponse",
          "line_number": 126,
          "base_classes": [
            "BaseModel"
          ],
          "docstring": "指标计算响应\n\nExample:\n    {\n        \"symbol\": \"600519.SH\",\n        \"symbol_name\": \"贵州茅台\",\n        \"start_date\": \"2024-01-01\",\n        \"end_date\": \"2024-12-31\",\n        \"ohlcv\": {\n            \"dates\": [...],\n            \"open\": [...],\n            ...\n        },\n        \"indicators\": [\n            {\n                \"abbreviation\": \"SMA\",\n                \"parameters\": {\"timeperiod\": 20},\n                \"outputs\": [...],\n                \"panel_type\": \"overlay\",\n                \"reference_lines\": null,\n                \"error\": null\n            }\n        ],\n        \"calculation_time_ms\": 15.5,\n        \"cached\": false\n    }",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "IndicatorMetadata",
          "line_number": 190,
          "base_classes": [
            "BaseModel"
          ],
          "docstring": "指标元数据\n\nExample:\n    {\n        \"abbreviation\": \"SMA\",\n        \"full_name\": \"Simple Moving Average\",\n        \"chinese_name\": \"简单移动平均线\",\n        \"category\": \"trend\",\n        \"description\": \"计算收盘价的算术平均值\",\n        \"panel_type\": \"overlay\",\n        \"parameters\": [\n            {\n                \"name\": \"timeperiod\",\n                \"type\": \"int\",\n                \"default\": 20,\n                \"min\": 2,\n                \"max\": 200,\n                \"description\": \"周期\"\n            }\n        ],\n        \"outputs\": [\n            {\n                \"name\": \"sma\",\n                \"description\": \"SMA值\"\n            }\n        ],\n        \"reference_lines\": null,\n        \"min_data_points_formula\": \"timeperiod\"\n    }",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "IndicatorRegistryResponse",
          "line_number": 264,
          "base_classes": [
            "BaseModel"
          ],
          "docstring": "指标注册表响应\n\nExample:\n    {\n        \"total_count\": 161,\n        \"categories\": {\n            \"trend\": 15,\n            \"momentum\": 20,\n            \"volatility\": 10,\n            \"volume\": 8,\n            \"candlestick\": 61\n        },\n        \"indicators\": [\n            {...},\n            {...}\n        ]\n    }",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "IndicatorConfigResponse",
          "line_number": 299,
          "base_classes": [
            "BaseModel"
          ],
          "docstring": "指标配置响应\n\nExample:\n    {\n        \"id\": 1,\n        \"user_id\": 123,\n        \"name\": \"我的常用配置\",\n        \"indicators\": [\n            {\"abbreviation\": \"MA\", \"parameters\": {\"timeperiod\": 20}},\n            {\"abbreviation\": \"RSI\", \"parameters\": {\"timeperiod\": 14}}\n        ],\n        \"created_at\": \"2024-01-01T10:00:00\",\n        \"updated_at\": \"2024-01-02T15:30:00\",\n        \"last_used_at\": \"2024-01-03T09:00:00\"\n    }",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "IndicatorConfigListResponse",
          "line_number": 347,
          "base_classes": [
            "BaseModel"
          ],
          "docstring": "指标配置列表响应\n\nExample:\n    {\n        \"total_count\": 5,\n        \"configs\": [\n            {...},\n            {...}\n        ]\n    }",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "ErrorDetail",
          "line_number": 371,
          "base_classes": [
            "BaseModel"
          ],
          "docstring": "错误详情\n\nExample:\n    {\n        \"error_code\": \"INSUFFICIENT_DATA\",\n        \"error_message\": \"指标 SMA(200) 需要至少 200 个数据点\",\n        \"details\": {\n            \"indicator\": \"SMA\",\n            \"required_points\": 200,\n            \"actual_points\": 150\n        }\n    }",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "APIResponse",
          "line_number": 400,
          "base_classes": [
            "BaseModel"
          ],
          "docstring": "通用API响应包装器\n\nExample:\n    {\n        \"success\": true,\n        \"data\": {...},\n        \"error\": null,\n        \"timestamp\": \"2024-01-01T10:00:00\"\n    }",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        }
      ],
      "functions": []
    },
    {
      "file_path": "web/backend/app/schemas/wencai_schemas.py",
      "module_name": "web.backend.app.schemas.wencai_schemas",
      "category": "utility",
      "docstring": "问财API请求/响应Schema\n\n定义问财功能的Pydantic数据模型，用于API请求验证和响应序列化\n\n作者: MyStocks Backend Team\n创建日期: 2025-10-17",
      "lines_of_code": 410,
      "blank_lines": 62,
      "comment_lines": 14,
      "last_modified": "2025-10-18T15:46:32.266686",
      "imports": [
        "re",
        "typing",
        "datetime",
        "pydantic"
      ],
      "classes": [
        {
          "name": "WencaiQueryRequest",
          "line_number": 22,
          "base_classes": [
            "BaseModel"
          ],
          "docstring": "执行问财查询请求\n\n用于POST /api/market/wencai/query",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "validate_query_name",
              "line_number": 44,
              "return_type": null,
              "docstring": "验证查询名称格式 - 只允许 qs_1 到 qs_9",
              "is_async": false,
              "decorators": [
                "validator"
              ],
              "body_lines": 7,
              "complexity": 2,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "v",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        },
        {
          "name": "WencaiCustomQueryRequest",
          "line_number": 62,
          "base_classes": [
            "BaseModel"
          ],
          "docstring": "自定义查询请求\n\n用于POST /api/market/wencai/custom-query",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "WencaiRefreshRequest",
          "line_number": 92,
          "base_classes": [
            "BaseModel"
          ],
          "docstring": "刷新查询数据请求（可选参数）\n\n用于POST /api/market/wencai/refresh/{query_name}",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "WencaiQueryInfo",
          "line_number": 114,
          "base_classes": [
            "BaseModel"
          ],
          "docstring": "查询信息\n\n用于GET /api/market/wencai/queries",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "WencaiQueryListResponse",
          "line_number": 143,
          "base_classes": [
            "BaseModel"
          ],
          "docstring": "查询列表响应\n\n用于GET /api/market/wencai/queries",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "WencaiQueryResponse",
          "line_number": 171,
          "base_classes": [
            "BaseModel"
          ],
          "docstring": "查询执行响应\n\n用于POST /api/market/wencai/query",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "WencaiCustomQueryResponse",
          "line_number": 204,
          "base_classes": [
            "BaseModel"
          ],
          "docstring": "自定义查询响应\n\n用于POST /api/market/wencai/custom-query",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "WencaiResultItem",
          "line_number": 238,
          "base_classes": [
            "BaseModel"
          ],
          "docstring": "单条查询结果\n\n注意：由于不同查询返回的字段不同，这里使用动态字典",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "WencaiResultsResponse",
          "line_number": 261,
          "base_classes": [
            "BaseModel"
          ],
          "docstring": "查询结果列表响应\n\n用于GET /api/market/wencai/results/{query_name}",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "WencaiRefreshResponse",
          "line_number": 291,
          "base_classes": [
            "BaseModel"
          ],
          "docstring": "刷新任务响应\n\n用于POST /api/market/wencai/refresh/{query_name}",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "WencaiHistoryItem",
          "line_number": 313,
          "base_classes": [
            "BaseModel"
          ],
          "docstring": "历史数据项",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "WencaiHistoryResponse",
          "line_number": 331,
          "base_classes": [
            "BaseModel"
          ],
          "docstring": "历史数据响应\n\n用于GET /api/market/wencai/history/{query_name}",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "WencaiErrorResponse",
          "line_number": 363,
          "base_classes": [
            "BaseModel"
          ],
          "docstring": "错误响应\n\n统一的错误格式",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "WencaiStatsResponse",
          "line_number": 392,
          "base_classes": [
            "BaseModel"
          ],
          "docstring": "统计信息响应（可选，用于监控面板）",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        }
      ],
      "functions": []
    },
    {
      "file_path": "web/backend/app/schemas/tdx_schemas.py",
      "module_name": "web.backend.app.schemas.tdx_schemas",
      "category": "unknown",
      "docstring": "TDX数据API的Pydantic模型定义",
      "lines_of_code": 161,
      "blank_lines": 19,
      "comment_lines": 1,
      "last_modified": "2025-10-15T21:52:10.025266",
      "imports": [
        "pydantic",
        "typing",
        "datetime"
      ],
      "classes": [
        {
          "name": "RealTimeQuoteResponse",
          "line_number": 9,
          "base_classes": [
            "BaseModel"
          ],
          "docstring": "实时行情响应模型",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "KlineDataPoint",
          "line_number": 53,
          "base_classes": [
            "BaseModel"
          ],
          "docstring": "K线数据点模型",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "KlineResponse",
          "line_number": 77,
          "base_classes": [
            "BaseModel"
          ],
          "docstring": "K线数据响应模型",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "IndexQuoteResponse",
          "line_number": 105,
          "base_classes": [
            "BaseModel"
          ],
          "docstring": "指数行情响应模型",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "ErrorResponse",
          "line_number": 139,
          "base_classes": [
            "BaseModel"
          ],
          "docstring": "错误响应模型",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "TdxHealthResponse",
          "line_number": 155,
          "base_classes": [
            "BaseModel"
          ],
          "docstring": "TDX服务健康检查响应",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        }
      ],
      "functions": []
    },
    {
      "file_path": "web/backend/app/schemas/market_schemas.py",
      "module_name": "web.backend.app.schemas.market_schemas",
      "category": "utility",
      "docstring": "市场数据API Schemas (Pydantic模型)\n\n用于FastAPI请求验证和响应序列化:\n- FundFlow: 个股资金流向\n- ETFData: ETF基金数据\n- ChipRace: 竞价抢筹数据\n- LongHuBang: 龙虎榜数据",
      "lines_of_code": 175,
      "blank_lines": 34,
      "comment_lines": 5,
      "last_modified": "2025-10-14T23:17:36.519181",
      "imports": [
        "pydantic",
        "typing",
        "datetime",
        "decimal"
      ],
      "classes": [
        {
          "name": "FundFlowRequest",
          "line_number": 18,
          "base_classes": [
            "BaseModel"
          ],
          "docstring": "资金流向查询请求",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "validate_timeframe",
              "line_number": 27,
              "return_type": null,
              "docstring": null,
              "is_async": false,
              "decorators": [
                "field_validator",
                "classmethod"
              ],
              "body_lines": 3,
              "complexity": 2,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "v",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        },
        {
          "name": "FundFlowResponse",
          "line_number": 33,
          "base_classes": [
            "BaseModel"
          ],
          "docstring": "资金流向响应",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "ETFDataRequest",
          "line_number": 53,
          "base_classes": [
            "BaseModel"
          ],
          "docstring": "ETF数据查询请求",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "validate_symbol",
              "line_number": 61,
              "return_type": null,
              "docstring": null,
              "is_async": false,
              "decorators": [
                "field_validator",
                "classmethod"
              ],
              "body_lines": 3,
              "complexity": 3,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "v",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        },
        {
          "name": "ETFDataResponse",
          "line_number": 67,
          "base_classes": [
            "BaseModel"
          ],
          "docstring": "ETF数据响应",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "ChipRaceRequest",
          "line_number": 93,
          "base_classes": [
            "BaseModel"
          ],
          "docstring": "竞价抢筹查询请求",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "validate_race_type",
              "line_number": 102,
              "return_type": null,
              "docstring": null,
              "is_async": false,
              "decorators": [
                "field_validator",
                "classmethod"
              ],
              "body_lines": 3,
              "complexity": 2,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "v",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        },
        {
          "name": "ChipRaceResponse",
          "line_number": 108,
          "base_classes": [
            "BaseModel"
          ],
          "docstring": "竞价抢筹响应",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "LongHuBangRequest",
          "line_number": 132,
          "base_classes": [
            "BaseModel"
          ],
          "docstring": "龙虎榜查询请求",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "LongHuBangResponse",
          "line_number": 141,
          "base_classes": [
            "BaseModel"
          ],
          "docstring": "龙虎榜响应",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "PaginatedResponse",
          "line_number": 162,
          "base_classes": [
            "BaseModel"
          ],
          "docstring": "分页响应",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        },
        {
          "name": "MessageResponse",
          "line_number": 170,
          "base_classes": [
            "BaseModel"
          ],
          "docstring": "通用消息响应",
          "decorators": [],
          "is_abstract": false,
          "methods": []
        }
      ],
      "functions": []
    },
    {
      "file_path": "web/backend/app/schemas/indicator_request.py",
      "module_name": "web.backend.app.schemas.indicator_request",
      "category": "unknown",
      "docstring": "Pydantic Request Schemas for Indicator API\n定义指标计算API的请求数据模型",
      "lines_of_code": 224,
      "blank_lines": 25,
      "comment_lines": 6,
      "last_modified": "2025-10-14T12:46:08.254059",
      "imports": [
        "pydantic",
        "typing",
        "datetime",
        "re"
      ],
      "classes": [
        {
          "name": "IndicatorSpec",
          "line_number": 11,
          "base_classes": [
            "BaseModel"
          ],
          "docstring": "单个指标规格\n\nExample:\n    {\"abbreviation\": \"SMA\", \"parameters\": {\"timeperiod\": 20}}",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "abbreviation_must_be_uppercase",
              "line_number": 30,
              "return_type": null,
              "docstring": "指标缩写必须为大写",
              "is_async": false,
              "decorators": [
                "validator"
              ],
              "body_lines": 4,
              "complexity": 2,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "v",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "parameters_must_be_valid",
              "line_number": 37,
              "return_type": null,
              "docstring": "参数值必须为有效类型",
              "is_async": false,
              "decorators": [
                "validator"
              ],
              "body_lines": 8,
              "complexity": 3,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "v",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        },
        {
          "name": "IndicatorCalculateRequest",
          "line_number": 48,
          "base_classes": [
            "BaseModel"
          ],
          "docstring": "指标计算请求\n\nExample:\n    {\n        \"symbol\": \"600519.SH\",\n        \"start_date\": \"2024-01-01\",\n        \"end_date\": \"2024-12-31\",\n        \"indicators\": [\n            {\"abbreviation\": \"SMA\", \"parameters\": {\"timeperiod\": 20}},\n            {\"abbreviation\": \"RSI\", \"parameters\": {\"timeperiod\": 14}}\n        ],\n        \"use_cache\": true\n    }",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "symbol_must_be_valid_format",
              "line_number": 90,
              "return_type": null,
              "docstring": "验证股票代码格式",
              "is_async": false,
              "decorators": [
                "validator"
              ],
              "body_lines": 8,
              "complexity": 2,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "v",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "end_date_must_not_be_future",
              "line_number": 101,
              "return_type": null,
              "docstring": "结束日期不能晚于今天",
              "is_async": false,
              "decorators": [
                "validator"
              ],
              "body_lines": 7,
              "complexity": 2,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "v",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "end_date_must_be_after_start_date",
              "line_number": 111,
              "return_type": null,
              "docstring": "结束日期必须晚于开始日期",
              "is_async": false,
              "decorators": [
                "validator"
              ],
              "body_lines": 15,
              "complexity": 4,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "v",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "values",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            },
            {
              "name": "indicators_must_not_have_duplicates",
              "line_number": 129,
              "return_type": null,
              "docstring": "检查指标列表中是否有完全相同的指标(包括参数)",
              "is_async": false,
              "decorators": [
                "validator"
              ],
              "body_lines": 23,
              "complexity": 5,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "v",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        },
        {
          "name": "IndicatorConfigCreateRequest",
          "line_number": 155,
          "base_classes": [
            "BaseModel"
          ],
          "docstring": "创建指标配置请求\n\nExample:\n    {\n        \"name\": \"我的常用配置\",\n        \"indicators\": [\n            {\"abbreviation\": \"MA\", \"parameters\": {\"timeperiod\": 20}},\n            {\"abbreviation\": \"RSI\", \"parameters\": {\"timeperiod\": 14}}\n        ]\n    }",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "name_must_not_be_empty",
              "line_number": 182,
              "return_type": null,
              "docstring": "配置名称不能为空或只包含空格",
              "is_async": false,
              "decorators": [
                "validator"
              ],
              "body_lines": 4,
              "complexity": 2,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "v",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        },
        {
          "name": "IndicatorConfigUpdateRequest",
          "line_number": 189,
          "base_classes": [
            "BaseModel"
          ],
          "docstring": "更新指标配置请求\n\nExample:\n    {\n        \"name\": \"我的新配置名称\",\n        \"indicators\": [...]\n    }",
          "decorators": [],
          "is_abstract": false,
          "methods": [
            {
              "name": "name_must_not_be_empty_if_provided",
              "line_number": 213,
              "return_type": null,
              "docstring": "如果提供了配置名称,不能为空或只包含空格",
              "is_async": false,
              "decorators": [
                "validator"
              ],
              "body_lines": 4,
              "complexity": 3,
              "parameters": [
                {
                  "name": "cls",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                },
                {
                  "name": "v",
                  "type_annotation": null,
                  "default_value": null,
                  "is_required": true
                }
              ]
            }
          ]
        }
      ],
      "functions": []
    }
  ]
}