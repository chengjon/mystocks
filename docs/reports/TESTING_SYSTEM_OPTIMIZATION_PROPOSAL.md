# MyStocks æµ‹è¯•ä½“ç³»ä¼˜åŒ–å»ºè®®

**æ—¥æœŸ**: 2026-01-19
**ç‰ˆæœ¬**: v1.0
**ä½œè€…**: Claude Code

---

## ğŸ“‹ æ‰§è¡Œæ‘˜è¦

åŸºäºå¯¹ç°æœ‰æµ‹è¯•ä½“ç³»çš„å…¨é¢åˆ†æï¼Œæœ¬æŠ¥å‘Šæå‡º **15é¡¹ä¼˜åŒ–å»ºè®®**ï¼Œåˆ†ä¸º 4 ä¸ªä¼˜å…ˆçº§å±‚æ¬¡ï¼Œé¢„è®¡å¯å°†æµ‹è¯•é€šè¿‡ç‡ä»å½“å‰ ~13% æå‡è‡³ **80%+**ï¼Œå¹¶å»ºç«‹å¯æŒç»­çš„è´¨é‡ä¿éšœä½“ç³»ã€‚

---

## ğŸ“Š ç°çŠ¶åˆ†æ

### æµ‹è¯•ä½“ç³»æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    MyStocks æµ‹è¯•ä½“ç³»ç°çŠ¶                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚   å•å…ƒæµ‹è¯•    â”‚  â”‚   é›†æˆæµ‹è¯•    â”‚  â”‚   E2Eæµ‹è¯•    â”‚          â”‚
â”‚  â”‚  pytest      â”‚  â”‚  pytest      â”‚  â”‚  Playwright  â”‚          â”‚
â”‚  â”‚  è¦†ç›–ç‡:13%  â”‚  â”‚  éƒ¨åˆ†å®ç°     â”‚  â”‚  é€šè¿‡ç‡:7.7% â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚   æ€§èƒ½æµ‹è¯•    â”‚  â”‚   CI/CD      â”‚  â”‚   ç›‘æ§ç³»ç»Ÿ    â”‚          â”‚
â”‚  â”‚  Locust      â”‚  â”‚  GitHub      â”‚  â”‚  LGTM Stack  â”‚          â”‚
â”‚  â”‚  è·¯ç”±å·²å¯¹é½   â”‚  â”‚  Actions     â”‚  â”‚  å·²éƒ¨ç½²      â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å…³é”®æŒ‡æ ‡

| æŒ‡æ ‡ | å½“å‰å€¼ | ç›®æ ‡å€¼ | å·®è· |
|------|--------|--------|------|
| å•å…ƒæµ‹è¯•è¦†ç›–ç‡ | 13.11% | 80% | **-66.89%** |
| E2Eæµ‹è¯•é€šè¿‡ç‡ | 7.7% (1/13) | 95% | **-87.3%** |
| åç«¯APIæµ‹è¯•é€šè¿‡ç‡ | 100% (101/101) | 100% | âœ… è¾¾æ ‡ |
| æ€§èƒ½æµ‹è¯•è·¯ç”±å¯¹é½ | 100% | 100% | âœ… è¾¾æ ‡ |
| CI/CDæµæ°´çº¿ | éƒ¨åˆ†å®ç° | å®Œæ•´ | éœ€å®Œå–„ |

### å·²å®Œæˆçš„ä¼˜åŒ– (Phase 4)

| ä¼˜åŒ–é¡¹ | çŠ¶æ€ | å½±å“ |
|--------|------|------|
| APIè·¯ç”±åŒå‰ç¼€ä¿®å¤ | âœ… | 101æµ‹è¯•é€šè¿‡ |
| Playwrightç«¯å£ç»Ÿä¸€ (3020) | âœ… | E2Eé…ç½®ä¸€è‡´ |
| Locustè·¯ç”±å¯¹é½ | âœ… | æ€§èƒ½æµ‹è¯•å¯ç”¨ |
| PM2é…ç½®ä¼˜åŒ– | âœ… | éƒ¨ç½²æ›´å¯é  |
| WebSocket Mockå·¥å…· | âœ… | å®æ—¶æµ‹è¯•å¯è¡Œ |
| ArtDecoè§†è§‰å›å½’æµ‹è¯• | âœ… | UIè´¨é‡ä¿éšœ |

---

## ğŸ¯ ä¼˜åŒ–å»ºè®®

### P0 - ç´§æ€¥ (æœ¬å‘¨å†…)

#### 1. ä¿®å¤å‰ç«¯apiClient.tsåŠ è½½å¤±è´¥

**é—®é¢˜**: E2Eæµ‹è¯•æ˜¾ç¤ºæ‰€æœ‰å‰ç«¯é¡µé¢ç©ºç™½ï¼Œæ ¹å› æ˜¯ `apiClient.ts` æ¨¡å—åŠ è½½å¤±è´¥

**ç°çŠ¶**:
```
ç—‡çŠ¶: HTTP 200ä½†å†…å®¹ä¸ºç©º
åŸå› : apiClient.tsåŠ è½½å¤±è´¥å¯¼è‡´Vueåº”ç”¨å´©æºƒ
å½±å“: æ‰€æœ‰åŠŸèƒ½ä¸å¯ç”¨ (0/8é¡µé¢æµ‹è¯•é€šè¿‡)
```

**å»ºè®®**:
```bash
# è¯Šæ–­æ­¥éª¤
cd web/frontend
npx tsc --noEmit src/api/apiClient.ts
pm2 logs mystocks-frontend --err --lines 100

# ä¿®å¤åéªŒè¯
curl -I http://localhost:3020/src/api/apiClient.ts
# é¢„æœŸ: HTTP 200
```

**é¢„æœŸæ”¶ç›Š**: E2Eå‰ç«¯æµ‹è¯•é€šè¿‡ç‡ä» 0% â†’ 80%+

---

#### 2. ç»Ÿä¸€æµ‹è¯•é…ç½®ä¸­å¿ƒ

**é—®é¢˜**: å¤šä¸ªPlaywrighté…ç½®æ–‡ä»¶ç«¯å£ä¸ä¸€è‡´ï¼Œå®¹æ˜“å‡ºé”™

**ç°çŠ¶**:
```
tests/e2e/playwright.config.ts      â†’ 3020 (å·²ä¿®å¤)
config/playwright.e2e.config.ts     â†’ 3020 (å·²ä¿®å¤)
web/frontend/playwright.config.ts   â†’ 5173 (æœªç»Ÿä¸€)
web/frontend/playwright.config.js   â†’ æœªçŸ¥
```

**å»ºè®®**:
1. åˆ›å»ºç»Ÿä¸€é…ç½®æ–‡ä»¶ `config/test-env.yaml`
2. æ‰€æœ‰æµ‹è¯•é…ç½®ä»æ­¤æ–‡ä»¶è¯»å–
3. æ”¯æŒç¯å¢ƒå˜é‡è¦†ç›–

```yaml
# config/test-env.yaml
test_environment:
  frontend:
    url: ${FRONTEND_URL:-http://localhost:3020}
    timeout: 60000
  backend:
    url: ${BACKEND_URL:-http://localhost:8000}
    timeout: 30000
  playwright:
    browser: chromium
    headless: true
    retries: 2
```

**é¢„æœŸæ”¶ç›Š**: æ¶ˆé™¤é…ç½®ä¸ä¸€è‡´å¯¼è‡´çš„æµ‹è¯•å¤±è´¥

---

### P1 - é«˜ä¼˜å…ˆçº§ (2å‘¨å†…)

#### 3. æå‡å•å…ƒæµ‹è¯•è¦†ç›–ç‡

**é—®é¢˜**: å½“å‰è¦†ç›–ç‡ 13.11%ï¼Œè¿œä½äº 80% ç›®æ ‡

**å»ºè®®åˆ†é˜¶æ®µæå‡**:

| é˜¶æ®µ | ç›®æ ‡è¦†ç›–ç‡ | é‡ç‚¹æ¨¡å— | æ—¶é—´ |
|------|-----------|----------|------|
| Phase 1 | 30% | æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ (src/core/) | 1å‘¨ |
| Phase 2 | 50% | æ•°æ®è®¿é—®å±‚ (src/data_access/) | 2å‘¨ |
| Phase 3 | 70% | APIå±‚ (web/backend/app/api/) | 3å‘¨ |
| Phase 4 | 80% | æœåŠ¡å±‚ (web/backend/app/services/) | 4å‘¨ |

**ä¼˜å…ˆè¦†ç›–æ¨¡å—**:
```
1. src/core/unified_manager.py (å…¥å£ç‚¹)
2. src/data_access/tdengine_access.py (é«˜é¢‘æ•°æ®)
3. src/data_access/postgresql_access.py (é€šç”¨æ•°æ®)
4. web/backend/app/api/auth.py (è®¤è¯)
5. web/backend/app/api/market.py (å¸‚åœºæ•°æ®)
```

**é¢„æœŸæ”¶ç›Š**: è¦†ç›–ç‡ 13% â†’ 80%

---

#### 4. å®Œå–„CI/CDæµæ°´çº¿

**é—®é¢˜**: CI/CDæµæ°´çº¿éƒ¨åˆ†å®ç°ï¼Œç¼ºå°‘å®Œæ•´çš„è´¨é‡é—¨ç¦

**ç°çŠ¶**:
```yaml
# å·²æœ‰
- ä»£ç è´¨é‡æ£€æŸ¥ (Black, MyPy, Ruff, Bandit)
- é‡åŒ–ç­–ç•¥éªŒè¯
- å®‰å…¨æ‰«æ

# ç¼ºå¤±
- è‡ªåŠ¨åŒ–æµ‹è¯•æ‰§è¡Œ
- è¦†ç›–ç‡é—¨ç¦
- E2Eæµ‹è¯•é›†æˆ
- æ€§èƒ½æµ‹è¯•é›†æˆ
```

**å»ºè®®æ–°å¢æµæ°´çº¿æ­¥éª¤**:

```yaml
# .github/workflows/test-coverage.yml
name: Test Coverage

on: [push, pull_request]

jobs:
  unit-tests:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Run Unit Tests
        run: |
          pytest --cov=src --cov=web/backend/app \
                 --cov-report=xml \
                 --cov-fail-under=30
      - name: Upload Coverage
        uses: codecov/codecov-action@v3

  e2e-tests:
    runs-on: ubuntu-latest
    steps:
      - name: Run E2E Tests
        run: |
          npx playwright test --project=chromium
      - name: Upload Screenshots
        if: failure()
        uses: actions/upload-artifact@v3
        with:
          name: e2e-screenshots
          path: test-results/

  performance-tests:
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/main'
    steps:
      - name: Run Locust Tests
        run: |
          locust -f tests/performance/locustfile.py \
                 --headless -u 10 -r 2 -t 60s
```

**è´¨é‡é—¨ç¦æ ‡å‡†**:

| æŒ‡æ ‡ | é˜ˆå€¼ | å¤±è´¥åŠ¨ä½œ |
|------|------|----------|
| å•å…ƒæµ‹è¯•è¦†ç›–ç‡ | â‰¥30% (Phase 1) | é˜»æ­¢åˆå¹¶ |
| E2Eæµ‹è¯•é€šè¿‡ç‡ | â‰¥80% | é˜»æ­¢åˆå¹¶ |
| APIå“åº”æ—¶é—´ P95 | <2ç§’ | è­¦å‘Š |
| å®‰å…¨æ¼æ´ | 0ä¸ªé«˜å± | é˜»æ­¢åˆå¹¶ |

**é¢„æœŸæ”¶ç›Š**: è‡ªåŠ¨åŒ–è´¨é‡ä¿éšœï¼Œé˜²æ­¢å›å½’

---

#### 5. å»ºç«‹æµ‹è¯•æ•°æ®å·¥å‚

**é—®é¢˜**: æµ‹è¯•æ•°æ®åˆ†æ•£ï¼Œç¼ºä¹ç»Ÿä¸€ç®¡ç†

**å»ºè®®**:
```python
# tests/factories/market_data_factory.py
from factory import Factory, Faker, LazyAttribute

class StockQuoteFactory(Factory):
    class Meta:
        model = dict

    symbol = Faker('random_element', elements=['000001', '600000', '000858'])
    name = LazyAttribute(lambda o: f"Stock_{o.symbol}")
    price = Faker('pyfloat', min_value=1, max_value=1000, right_digits=2)
    change = Faker('pyfloat', min_value=-10, max_value=10, right_digits=2)
    volume = Faker('random_int', min=1000, max=10000000)
    timestamp = Faker('date_time_this_month')

class KlineDataFactory(Factory):
    class Meta:
        model = dict

    symbol = Faker('random_element', elements=['000001', '600000'])
    open = Faker('pyfloat', min_value=10, max_value=100, right_digits=2)
    high = LazyAttribute(lambda o: o.open * 1.05)
    low = LazyAttribute(lambda o: o.open * 0.95)
    close = LazyAttribute(lambda o: o.open * (1 + random.uniform(-0.03, 0.03)))
    volume = Faker('random_int', min=10000, max=1000000)
```

**é¢„æœŸæ”¶ç›Š**: æµ‹è¯•æ•°æ®ä¸€è‡´æ€§ï¼Œå‡å°‘ç¡¬ç¼–ç 

---

### P2 - ä¸­ä¼˜å…ˆçº§ (1ä¸ªæœˆå†…)

#### 6. å¢å¼ºE2Eæµ‹è¯•ç¨³å®šæ€§

**é—®é¢˜**: E2Eæµ‹è¯•ä¸ç¨³å®šï¼Œä¾èµ–å¤–éƒ¨æœåŠ¡

**å»ºè®®**:

1. **Mockåç«¯API**:
```typescript
// tests/helpers/api-mock.ts
export async function mockBackendAPI(page: Page) {
  await page.route('**/api/v1/**', async (route) => {
    const url = route.request().url();

    if (url.includes('/market/overview')) {
      await route.fulfill({
        status: 200,
        body: JSON.stringify(MockData.marketOverview)
      });
    } else if (url.includes('/auth/login')) {
      await route.fulfill({
        status: 200,
        body: JSON.stringify(MockData.loginResponse)
      });
    }
  });
}
```

2. **æ·»åŠ é‡è¯•æœºåˆ¶**:
```typescript
// playwright.config.ts
export default defineConfig({
  retries: process.env.CI ? 3 : 1,
  expect: {
    timeout: 10000,
    toHaveScreenshot: {
      maxDiffPixelRatio: 0.05  // å…è®¸5%å·®å¼‚
    }
  }
});
```

3. **éš”ç¦»æµ‹è¯•ç¯å¢ƒ**:
```bash
# ä½¿ç”¨Docker Composeå¯åŠ¨éš”ç¦»ç¯å¢ƒ
docker-compose -f docker-compose.test.yml up -d
```

**é¢„æœŸæ”¶ç›Š**: E2Eæµ‹è¯•ç¨³å®šæ€§ä» ~50% â†’ 95%+

---

#### 7. æ€§èƒ½æµ‹è¯•åŸºçº¿å»ºç«‹

**é—®é¢˜**: ç¼ºä¹æ€§èƒ½åŸºçº¿ï¼Œæ— æ³•æ£€æµ‹æ€§èƒ½é€€åŒ–

**å»ºè®®**:

1. **å»ºç«‹æ€§èƒ½åŸºçº¿**:
```python
# tests/performance/baselines.py
PERFORMANCE_BASELINES = {
    "api_response_time": {
        "/api/v1/market/overview": {"p50": 200, "p95": 500, "p99": 1000},
        "/api/v1/market/kline": {"p50": 300, "p95": 800, "p99": 1500},
        "/api/v1/auth/login": {"p50": 100, "p95": 300, "p99": 500},
    },
    "throughput": {
        "min_rps": 100,  # æœ€å°è¯·æ±‚/ç§’
        "target_rps": 500,
    },
    "error_rate": {
        "max_error_rate": 0.01,  # æœ€å¤§1%é”™è¯¯ç‡
    }
}
```

2. **è‡ªåŠ¨åŒ–æ€§èƒ½å›å½’æ£€æµ‹**:
```python
# tests/performance/regression_check.py
def check_performance_regression(current_metrics, baselines):
    regressions = []
    for endpoint, baseline in baselines.items():
        current = current_metrics.get(endpoint, {})
        if current.get('p95', 0) > baseline['p95'] * 1.2:  # 20%é€€åŒ–é˜ˆå€¼
            regressions.append({
                'endpoint': endpoint,
                'baseline_p95': baseline['p95'],
                'current_p95': current['p95'],
                'regression': f"{(current['p95']/baseline['p95']-1)*100:.1f}%"
            })
    return regressions
```

**é¢„æœŸæ”¶ç›Š**: è‡ªåŠ¨æ£€æµ‹æ€§èƒ½é€€åŒ–ï¼Œé˜²æ­¢ä¸Šçº¿åé—®é¢˜

---

#### 8. æµ‹è¯•æŠ¥å‘Šå¢å¼º

**é—®é¢˜**: æµ‹è¯•æŠ¥å‘Šåˆ†æ•£ï¼Œç¼ºä¹ç»Ÿä¸€è§†å›¾

**å»ºè®®**:

1. **ç»Ÿä¸€æµ‹è¯•æŠ¥å‘Šæ ¼å¼**:
```json
{
  "report_id": "test-2026-01-19-001",
  "timestamp": "2026-01-19T10:00:00Z",
  "summary": {
    "total_tests": 150,
    "passed": 120,
    "failed": 20,
    "skipped": 10,
    "pass_rate": "80%"
  },
  "coverage": {
    "line": "45%",
    "branch": "38%",
    "function": "52%"
  },
  "performance": {
    "avg_response_time": "250ms",
    "p95_response_time": "800ms",
    "throughput": "450 rps"
  },
  "e2e": {
    "total": 13,
    "passed": 10,
    "failed": 3,
    "screenshots": ["path/to/screenshot1.png"]
  }
}
```

2. **Grafanaæµ‹è¯•ä»ªè¡¨æ¿**:
- æµ‹è¯•é€šè¿‡ç‡è¶‹åŠ¿
- è¦†ç›–ç‡å˜åŒ–
- æ€§èƒ½æŒ‡æ ‡
- å¤±è´¥æµ‹è¯•åˆ†æ

**é¢„æœŸæ”¶ç›Š**: æµ‹è¯•å¯è§†åŒ–ï¼Œå¿«é€Ÿå®šä½é—®é¢˜

---

### P3 - ä½ä¼˜å…ˆçº§ (3ä¸ªæœˆå†…)

#### 9. å¥‘çº¦æµ‹è¯• (Contract Testing)

**é—®é¢˜**: å‰åç«¯æ¥å£å˜æ›´å®¹æ˜“å¯¼è‡´é›†æˆé—®é¢˜

**å»ºè®®**:
```python
# tests/contract/api_contracts.py
from pact import Consumer, Provider

pact = Consumer('frontend').has_pact_with(Provider('backend'))

@pact.given('market overview exists')
@pact.upon_receiving('a request for market overview')
@pact.with_request('GET', '/api/v1/market/overview')
@pact.will_respond_with(200, body={
    'code': 200,
    'data': {
        'indices': Like([]),
        'top_gainers': Like([]),
        'top_losers': Like([])
    }
})
def test_market_overview_contract():
    pass
```

**é¢„æœŸæ”¶ç›Š**: å‰åç«¯æ¥å£ä¸€è‡´æ€§ä¿éšœ

---

#### 10. å˜å¼‚æµ‹è¯• (Mutation Testing)

**é—®é¢˜**: æµ‹è¯•è´¨é‡éš¾ä»¥è¯„ä¼°

**å»ºè®®**:
```bash
# ä½¿ç”¨mutmutè¿›è¡Œå˜å¼‚æµ‹è¯•
pip install mutmut
mutmut run --paths-to-mutate=src/core/
mutmut results
```

**é¢„æœŸæ”¶ç›Š**: è¯„ä¼°æµ‹è¯•æœ‰æ•ˆæ€§ï¼Œå‘ç°æµ‹è¯•ç›²åŒº

---

#### 11. æ··æ²Œå·¥ç¨‹æµ‹è¯•

**é—®é¢˜**: ç³»ç»Ÿå®¹é”™èƒ½åŠ›æœªéªŒè¯

**å»ºè®®**:
```python
# tests/chaos/fault_injection.py
class ChaosTests:
    def test_database_connection_failure(self):
        """æ¨¡æ‹Ÿæ•°æ®åº“è¿æ¥å¤±è´¥"""
        with mock.patch('src.data_access.postgresql_access.connect') as mock_conn:
            mock_conn.side_effect = ConnectionError("Database unavailable")
            # éªŒè¯ç³»ç»Ÿä¼˜é›…é™çº§

    def test_high_latency(self):
        """æ¨¡æ‹Ÿé«˜å»¶è¿Ÿ"""
        with mock.patch('aiohttp.ClientSession.get') as mock_get:
            mock_get.return_value.__aenter__.return_value.status = 200
            mock_get.return_value.__aenter__.return_value.json = asyncio.coroutine(
                lambda: asyncio.sleep(5) or {}
            )
            # éªŒè¯è¶…æ—¶å¤„ç†
```

**é¢„æœŸæ”¶ç›Š**: æå‡ç³»ç»ŸéŸ§æ€§

---

#### 12. å®‰å…¨æµ‹è¯•å¢å¼º

**é—®é¢˜**: å®‰å…¨æµ‹è¯•è¦†ç›–ä¸è¶³

**å»ºè®®**:
```yaml
# .github/workflows/security.yml
security-scan:
  steps:
    - name: SAST Scan
      uses: github/codeql-action/analyze@v2

    - name: Dependency Scan
      run: |
        pip install safety
        safety check -r requirements.txt

    - name: DAST Scan
      run: |
        docker run -t owasp/zap2docker-stable zap-baseline.py \
          -t http://localhost:8000
```

**é¢„æœŸæ”¶ç›Š**: å®‰å…¨æ¼æ´æ—©æœŸå‘ç°

---

#### 13. å¯è®¿é—®æ€§æµ‹è¯•

**é—®é¢˜**: ç¼ºä¹å¯è®¿é—®æ€§éªŒè¯

**å»ºè®®**:
```typescript
// tests/accessibility/a11y.spec.ts
import { test, expect } from '@playwright/test';
import AxeBuilder from '@axe-core/playwright';

test('é¡µé¢åº”ç¬¦åˆWCAG 2.1 AAæ ‡å‡†', async ({ page }) => {
  await page.goto('/');

  const results = await new AxeBuilder({ page })
    .withTags(['wcag2a', 'wcag2aa'])
    .analyze();

  expect(results.violations).toHaveLength(0);
});
```

**é¢„æœŸæ”¶ç›Š**: æå‡ç”¨æˆ·ä½“éªŒï¼Œç¬¦åˆåˆè§„è¦æ±‚

---

#### 14. æµ‹è¯•ç¯å¢ƒç®¡ç†

**é—®é¢˜**: æµ‹è¯•ç¯å¢ƒé…ç½®å¤æ‚ï¼Œéš¾ä»¥å¤ç°

**å»ºè®®**:
```yaml
# docker-compose.test.yml
version: '3.8'
services:
  test-db:
    image: postgres:17
    environment:
      POSTGRES_DB: mystocks_test
      POSTGRES_USER: test
      POSTGRES_PASSWORD: test
    ports:
      - "5433:5432"

  test-tdengine:
    image: tdengine/tdengine:3.3
    ports:
      - "6041:6041"

  test-redis:
    image: redis:7
    ports:
      - "6380:6379"

  test-backend:
    build: ./web/backend
    depends_on:
      - test-db
      - test-tdengine
      - test-redis
    environment:
      DATABASE_URL: postgresql://test:test@test-db:5432/mystocks_test
      TDENGINE_HOST: test-tdengine
      REDIS_HOST: test-redis
    ports:
      - "8001:8000"

  test-frontend:
    build: ./web/frontend
    depends_on:
      - test-backend
    environment:
      VITE_API_BASE_URL: http://test-backend:8000
    ports:
      - "3021:3020"
```

**é¢„æœŸæ”¶ç›Š**: ä¸€é”®å¯åŠ¨æµ‹è¯•ç¯å¢ƒï¼Œç¯å¢ƒä¸€è‡´æ€§

---

#### 15. æµ‹è¯•æ–‡æ¡£å®Œå–„

**é—®é¢˜**: æµ‹è¯•æ–‡æ¡£åˆ†æ•£ï¼Œæ–°äººä¸Šæ‰‹å›°éš¾

**å»ºè®®**:
```
docs/testing/
â”œâ”€â”€ README.md                    # æµ‹è¯•ä½“ç³»æ€»è§ˆ
â”œâ”€â”€ QUICK_START.md               # å¿«é€Ÿå¼€å§‹æŒ‡å—
â”œâ”€â”€ UNIT_TESTING_GUIDE.md        # å•å…ƒæµ‹è¯•æŒ‡å—
â”œâ”€â”€ INTEGRATION_TESTING_GUIDE.md # é›†æˆæµ‹è¯•æŒ‡å—
â”œâ”€â”€ E2E_TESTING_GUIDE.md         # E2Eæµ‹è¯•æŒ‡å—
â”œâ”€â”€ PERFORMANCE_TESTING_GUIDE.md # æ€§èƒ½æµ‹è¯•æŒ‡å—
â”œâ”€â”€ CI_CD_GUIDE.md               # CI/CDé…ç½®æŒ‡å—
â”œâ”€â”€ TROUBLESHOOTING.md           # å¸¸è§é—®é¢˜æ’æŸ¥
â””â”€â”€ BEST_PRACTICES.md            # æœ€ä½³å®è·µ
```

**é¢„æœŸæ”¶ç›Š**: é™ä½å­¦ä¹ æˆæœ¬ï¼Œæå‡å›¢é˜Ÿæ•ˆç‡

---

## ğŸ“… å®æ–½è·¯çº¿å›¾

```
2026-01 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Week 1  â”‚ P0: ä¿®å¤apiClient.ts â”‚ P0: ç»Ÿä¸€æµ‹è¯•é…ç½® â”‚
Week 2  â”‚ P1: è¦†ç›–ç‡Phase1(30%) â”‚ P1: CI/CDæµæ°´çº¿ â”‚
Week 3  â”‚ P1: è¦†ç›–ç‡Phase2(50%) â”‚ P1: æµ‹è¯•æ•°æ®å·¥å‚ â”‚
Week 4  â”‚ P2: E2Eç¨³å®šæ€§å¢å¼º â”‚ P2: æ€§èƒ½åŸºçº¿å»ºç«‹ â”‚

2026-02 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Week 1-2â”‚ P1: è¦†ç›–ç‡Phase3(70%) â”‚ P2: æµ‹è¯•æŠ¥å‘Šå¢å¼º â”‚
Week 3-4â”‚ P1: è¦†ç›–ç‡Phase4(80%) â”‚ P2: æµ‹è¯•ç¯å¢ƒç®¡ç† â”‚

2026-03 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Week 1-4â”‚ P3: å¥‘çº¦æµ‹è¯• â”‚ P3: å®‰å…¨æµ‹è¯• â”‚ P3: å¯è®¿é—®æ€§æµ‹è¯• â”‚
```

---

## ğŸ“Š é¢„æœŸæ”¶ç›Š

| æŒ‡æ ‡ | å½“å‰ | ç›®æ ‡ | æå‡ |
|------|------|------|------|
| å•å…ƒæµ‹è¯•è¦†ç›–ç‡ | 13% | 80% | **+67%** |
| E2Eæµ‹è¯•é€šè¿‡ç‡ | 7.7% | 95% | **+87.3%** |
| CI/CDè‡ªåŠ¨åŒ– | éƒ¨åˆ† | å®Œæ•´ | **100%** |
| æµ‹è¯•æ‰§è¡Œæ—¶é—´ | ~5min | ~3min | **-40%** |
| å›å½’æ£€æµ‹èƒ½åŠ› | ä½ | é«˜ | **æ˜¾è‘—æå‡** |
| æ–°äººä¸Šæ‰‹æ—¶é—´ | ~2å‘¨ | ~3å¤© | **-80%** |

---

## âœ… æ€»ç»“

æœ¬ä¼˜åŒ–æ–¹æ¡ˆèšç„¦äºï¼š

1. **ç´§æ€¥ä¿®å¤** (P0): è§£å†³é˜»å¡æ€§é—®é¢˜ï¼Œæ¢å¤E2Eæµ‹è¯•èƒ½åŠ›
2. **è´¨é‡æå‡** (P1): æå‡è¦†ç›–ç‡ï¼Œå®Œå–„CI/CD
3. **ç¨³å®šæ€§å¢å¼º** (P2): Mockæœºåˆ¶ï¼Œæ€§èƒ½åŸºçº¿
4. **é•¿æœŸæ¼”è¿›** (P3): å¥‘çº¦æµ‹è¯•ï¼Œæ··æ²Œå·¥ç¨‹ï¼Œå®‰å…¨æµ‹è¯•

**æ ¸å¿ƒåŸåˆ™**:
- æ¸è¿›å¼æ”¹è¿›ï¼Œé¿å…å¤§çˆ†ç‚¸å¼é‡æ„
- è‡ªåŠ¨åŒ–ä¼˜å…ˆï¼Œå‡å°‘äººå·¥å¹²é¢„
- å¯è§‚æµ‹æ€§ï¼Œå¿«é€Ÿå®šä½é—®é¢˜
- æ–‡æ¡£é©±åŠ¨ï¼Œé™ä½å­¦ä¹ æˆæœ¬

---

**æŠ¥å‘Šç”Ÿæˆ**: 2026-01-19
**ä½œè€…**: Claude Code
**çŠ¶æ€**: å¾…è¯„å®¡
