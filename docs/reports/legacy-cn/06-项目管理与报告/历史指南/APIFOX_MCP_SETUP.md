# Apifox MCP é›†æˆæŒ‡å— - Claude Code

> âœ… **å·²é…ç½®**: Apifox MCP æœåŠ¡å™¨å·²æ·»åŠ åˆ°é¡¹ç›®
> ğŸ¯ **åŠŸèƒ½**: è®© Claude Code ç›´æ¥è®¿é—® Apifox API æ–‡æ¡£
> ğŸ“‹ **Site ID**: 4478210

---

## ğŸš€ é…ç½®å®Œæˆ

### å½“å‰é…ç½® (`.mcp.json`)

```json
{
  "mcpServers": {
    "apifox-api-docs": {
      "command": "npx",
      "args": [
        "-y",
        "apifox-mcp-server@latest",
        "--site-id=4478210"
      ]
    }
  }
}
```

### VS Code vs Claude Code é…ç½®å¯¹æ¯”

| é¡¹ç›® | VS Code | Claude Code |
|------|---------|-------------|
| **é…ç½®æ–‡ä»¶** | `settings.json` | `.mcp.json` (é¡¹ç›®æ ¹ç›®å½•) |
| **Command** | `cmd /c npx` (Windows) | `npx` (è·¨å¹³å°) |
| **æœåŠ¡å™¨åç§°** | å¯å«ä¸­æ–‡ç©ºæ ¼ | å»ºè®®ç”¨è‹±æ–‡çŸ­æ¨ªçº¿ |
| **è‡ªåŠ¨å¯åŠ¨** | VS Code å¯åŠ¨æ—¶ | Claude Code å¯åŠ¨æ—¶ |

**å…³é”®å·®å¼‚**:
- âŒ **ç§»é™¤** `cmd` å’Œ `/c` (Windows ç‰¹å®šï¼ŒClaude Code è·¨å¹³å°)
- âœ… **ç›´æ¥ä½¿ç”¨** `npx` å‘½ä»¤
- âœ… **ä¿ç•™** `-y` (è‡ªåŠ¨ç¡®è®¤å®‰è£…)
- âœ… **ä¿ç•™** `--site-id=4478210` (ä½ çš„ Apifox ç«™ç‚¹ ID)

---

## ğŸ“‹ ä½¿ç”¨æ­¥éª¤

### 1. é‡å¯ Claude Code ä¼šè¯

é…ç½®ä¿®æ”¹åéœ€è¦é‡å¯ Claude Code æ‰èƒ½åŠ è½½æ–°çš„ MCP æœåŠ¡å™¨ï¼š

```bash
# å¦‚æœä½¿ç”¨å‘½ä»¤è¡Œå¯åŠ¨ Claude Code
exit  # é€€å‡ºå½“å‰ä¼šè¯
claude  # é‡æ–°å¯åŠ¨

# æˆ–è€…åœ¨æ–°ç»ˆç«¯å¯åŠ¨
cd /opt/claude/mystocks_spec
claude
```

### 2. éªŒè¯ MCP æœåŠ¡å™¨è¿æ¥

å¯åŠ¨åï¼ŒClaude Code ä¼šè‡ªåŠ¨è¿æ¥ Apifox MCP æœåŠ¡å™¨ã€‚ä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼éªŒè¯ï¼š

**æ–¹å¼ 1: æŸ¥çœ‹å¯åŠ¨æ—¥å¿—**
```
[MCP] Connecting to apifox-api-docs...
[MCP] Connected: apifox-api-docs
```

**æ–¹å¼ 2: è¯¢é—® Claude**
```
ä½ ï¼šåˆ—å‡ºå½“å‰å¯ç”¨çš„ MCP å·¥å…·
Claudeï¼šæˆ‘å¯ä»¥è®¿é—®ä»¥ä¸‹ Apifox API æ–‡æ¡£å·¥å…·...
```

### 3. ä½¿ç”¨ Apifox API æ–‡æ¡£

ä¸€æ—¦è¿æ¥æˆåŠŸï¼ŒClaude Code å¯ä»¥ï¼š

**æŸ¥è¯¢ API ä¿¡æ¯**:
```
ä½ ï¼šæŸ¥çœ‹æˆ‘çš„ Apifox é¡¹ç›®ä¸­æœ‰å“ªäº› API ç«¯ç‚¹ï¼Ÿ
ä½ ï¼šè·å– /api/users ç«¯ç‚¹çš„è¯¦ç»†æ–‡æ¡£
ä½ ï¼šè¿™ä¸ª API éœ€è¦å“ªäº›è¯·æ±‚å‚æ•°ï¼Ÿ
```

**ç”Ÿæˆä»£ç **:
```
ä½ ï¼šæ ¹æ® Apifox æ–‡æ¡£ç”Ÿæˆè°ƒç”¨ /api/login çš„ Python ä»£ç 
ä½ ï¼šä¸ºæ‰€æœ‰ç”¨æˆ·ç®¡ç† API ç”Ÿæˆ TypeScript æ¥å£å®šä¹‰
```

**API å¯¹æ¯”**:
```
ä½ ï¼šå¯¹æ¯” Apifox æ–‡æ¡£å’Œå½“å‰é¡¹ç›®çš„ API å®ç°
ä½ ï¼šæ£€æŸ¥å“ªäº› API è¿˜æ²¡æœ‰å®ç°
```

---

## ğŸ”§ é«˜çº§é…ç½®

### æ·»åŠ ç¯å¢ƒå˜é‡ (å¯é€‰)

å¦‚æœ Apifox API éœ€è¦è®¤è¯ï¼Œå¯ä»¥æ·»åŠ ç¯å¢ƒå˜é‡ï¼š

```json
{
  "mcpServers": {
    "apifox-api-docs": {
      "command": "npx",
      "args": [
        "-y",
        "apifox-mcp-server@latest",
        "--site-id=4478210"
      ],
      "env": {
        "APIFOX_API_KEY": "your-api-key-here"
      }
    }
  }
}
```

### é…ç½®å¤šä¸ª Apifox é¡¹ç›®

```json
{
  "mcpServers": {
    "apifox-project-1": {
      "command": "npx",
      "args": [
        "-y",
        "apifox-mcp-server@latest",
        "--site-id=4478210"
      ]
    },
    "apifox-project-2": {
      "command": "npx",
      "args": [
        "-y",
        "apifox-mcp-server@latest",
        "--site-id=9876543"
      ]
    }
  }
}
```

### æŒ‡å®š npx ç‰ˆæœ¬ (å¯é€‰)

å¦‚æœéœ€è¦é”å®šç‰¹å®šç‰ˆæœ¬ï¼š

```json
{
  "mcpServers": {
    "apifox-api-docs": {
      "command": "npx",
      "args": [
        "-y",
        "apifox-mcp-server@1.0.0",
        "--site-id=4478210"
      ]
    }
  }
}
```

---

## ğŸ› æ•…éšœæ’æŸ¥

### é—®é¢˜ 1: MCP æœåŠ¡å™¨æ— æ³•è¿æ¥

**ç—‡çŠ¶**: å¯åŠ¨ Claude Code æ—¶çœ‹åˆ°è¿æ¥é”™è¯¯
```
[MCP] Failed to connect to apifox-api-docs
```

**è§£å†³æ–¹æ¡ˆ**:

1. **æ£€æŸ¥ Node.js å’Œ npx å¯ç”¨æ€§**
```bash
node --version  # åº”æ˜¾ç¤º v14+ æˆ–æ›´é«˜
npx --version   # åº”æ˜¾ç¤º npx ç‰ˆæœ¬
```

2. **æ‰‹åŠ¨æµ‹è¯• MCP æœåŠ¡å™¨**
```bash
npx -y apifox-mcp-server@latest --site-id=4478210
# åº”è¯¥å¯åŠ¨æœåŠ¡å™¨å¹¶æ˜¾ç¤ºåˆå§‹åŒ–ä¿¡æ¯
```

3. **æ£€æŸ¥ç½‘ç»œè¿æ¥**
```bash
curl https://registry.npmjs.org/apifox-mcp-server
# ç¡®ä¿å¯ä»¥è®¿é—® npm registry
```

### é—®é¢˜ 2: æ‰¾ä¸åˆ° site-id

**ç—‡çŠ¶**: MCP æœåŠ¡å™¨å¯åŠ¨ä½†æ— æ³•è·å– API æ–‡æ¡£
```
Error: Site 4478210 not found
```

**è§£å†³æ–¹æ¡ˆ**:

1. **éªŒè¯ Site ID**
   - ç™»å½• Apifox Web ç•Œé¢
   - æ‰“å¼€é¡¹ç›®è®¾ç½®
   - ç¡®è®¤ "ç«™ç‚¹ ID" æˆ– "Site ID"

2. **æ£€æŸ¥è®¿é—®æƒé™**
   - ç¡®ä¿è¯¥ç«™ç‚¹æ˜¯å…¬å¼€çš„æˆ–ä½ æœ‰è®¿é—®æƒé™
   - å¦‚æœæ˜¯ç§æœ‰é¡¹ç›®ï¼Œéœ€è¦é…ç½® API Key

### é—®é¢˜ 3: npx æ¯æ¬¡éƒ½é‡æ–°ä¸‹è½½

**ç—‡çŠ¶**: å¯åŠ¨å¾ˆæ…¢ï¼Œæ¯æ¬¡éƒ½æ˜¾ç¤º "Installing apifox-mcp-server..."

**è§£å†³æ–¹æ¡ˆ**: é¢„å®‰è£…åˆ°å…¨å±€

```bash
npm install -g apifox-mcp-server@latest

# ä¿®æ”¹é…ç½®ä½¿ç”¨å…¨å±€å®‰è£…
{
  "mcpServers": {
    "apifox-api-docs": {
      "command": "apifox-mcp-server",
      "args": [
        "--site-id=4478210"
      ]
    }
  }
}
```

### é—®é¢˜ 4: Windows è·¯å¾„é—®é¢˜

**ç—‡çŠ¶**: Windows ç¯å¢ƒä¸‹æ— æ³•å¯åŠ¨

**è§£å†³æ–¹æ¡ˆ 1**: ä½¿ç”¨å®Œæ•´è·¯å¾„
```json
{
  "mcpServers": {
    "apifox-api-docs": {
      "command": "C:\\Program Files\\nodejs\\npx.cmd",
      "args": [
        "-y",
        "apifox-mcp-server@latest",
        "--site-id=4478210"
      ]
    }
  }
}
```

**è§£å†³æ–¹æ¡ˆ 2**: ä½¿ç”¨ WSL (æ¨è)
- Claude Code åœ¨ WSL2 ç¯å¢ƒä¸­è¿è¡Œæ›´ç¨³å®š
- è·¨å¹³å°å…¼å®¹æ€§æ›´å¥½

---

## ğŸ’¡ ä½¿ç”¨åœºæ™¯ç¤ºä¾‹

### åœºæ™¯ 1: API å®ç°æ£€æŸ¥

**ä»»åŠ¡**: æ£€æŸ¥ Apifox æ–‡æ¡£ä¸­çš„ API æ˜¯å¦éƒ½å·²å®ç°

```
ä½ ï¼šæŸ¥çœ‹ Apifox é¡¹ç›®ä¸­æ‰€æœ‰çš„ API ç«¯ç‚¹åˆ—è¡¨

Claudeï¼š[åˆ—å‡ºæ‰€æœ‰ API]

ä½ ï¼šå¯¹æ¯”è¿™äº› API å’Œæˆ‘é¡¹ç›®ä¸­ /opt/claude/mystocks_spec/web/backend/app/api/ ç›®å½•ä¸‹å·²å®ç°çš„è·¯ç”±

Claudeï¼š[åˆ†æå¹¶åˆ—å‡ºæœªå®ç°çš„ API]
```

### åœºæ™¯ 2: ç”Ÿæˆå®¢æˆ·ç«¯ SDK

**ä»»åŠ¡**: æ ¹æ® Apifox æ–‡æ¡£ç”Ÿæˆ TypeScript å®¢æˆ·ç«¯

```
ä½ ï¼šæ ¹æ® Apifox æ–‡æ¡£ç”Ÿæˆå®Œæ•´çš„ TypeScript API å®¢æˆ·ç«¯ï¼ŒåŒ…æ‹¬ï¼š
1. æ‰€æœ‰æ¥å£çš„ç±»å‹å®šä¹‰
2. HTTP å®¢æˆ·ç«¯å°è£…
3. é”™è¯¯å¤„ç†
4. è¯·æ±‚/å“åº”æ‹¦æˆªå™¨

Claudeï¼š[ç”Ÿæˆå®Œæ•´çš„ TypeScript å®¢æˆ·ç«¯ä»£ç ]
```

### åœºæ™¯ 3: API æ–‡æ¡£å¯¹æ¯”

**ä»»åŠ¡**: å¯¹æ¯” Apifox æ–‡æ¡£å’Œ FastAPI è‡ªåŠ¨ç”Ÿæˆçš„ OpenAPI æ–‡æ¡£

```
ä½ ï¼šå¯¹æ¯” Apifox æ–‡æ¡£å’Œ http://localhost:8000/openapi.json ä¸­çš„ API å®šä¹‰ï¼Œæ‰¾å‡ºå·®å¼‚

Claudeï¼š[åˆ—å‡ºå·®å¼‚å¹¶æä¾›åŒæ­¥å»ºè®®]
```

### åœºæ™¯ 4: æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆ

**ä»»åŠ¡**: æ ¹æ® API æ–‡æ¡£ç”Ÿæˆè‡ªåŠ¨åŒ–æµ‹è¯•

```
ä½ ï¼šä¸º Apifox ä¸­çš„æ‰€æœ‰è®¤è¯ç›¸å…³ API ç”Ÿæˆ pytest æµ‹è¯•ç”¨ä¾‹ï¼ŒåŒ…æ‹¬ï¼š
1. æ­£å¸¸åœºæ™¯æµ‹è¯•
2. å¼‚å¸¸åœºæ™¯æµ‹è¯•
3. è¾¹ç•Œæ¡ä»¶æµ‹è¯•

Claudeï¼š[ç”Ÿæˆå®Œæ•´çš„æµ‹è¯•å¥—ä»¶]
```

---

## ğŸ“Š Apifox MCP åŠŸèƒ½æ¦‚è§ˆ

| åŠŸèƒ½ | æè¿° | ä½¿ç”¨åœºæ™¯ |
|------|------|----------|
| **API åˆ—è¡¨æŸ¥è¯¢** | è·å–é¡¹ç›®æ‰€æœ‰ API ç«¯ç‚¹ | é¡¹ç›®æ¦‚è§ˆã€å®ç°æ£€æŸ¥ |
| **ç«¯ç‚¹è¯¦æƒ…** | è·å–å•ä¸ª API çš„å®Œæ•´æ–‡æ¡£ | ä»£ç ç”Ÿæˆã€æµ‹è¯•ç¼–å†™ |
| **æ•°æ®æ¨¡å‹** | è·å–è¯·æ±‚/å“åº”æ¨¡å‹å®šä¹‰ | ç±»å‹å®šä¹‰ã€æ•°æ®éªŒè¯ |
| **ç¤ºä¾‹ä»£ç ** | è·å– API è°ƒç”¨ç¤ºä¾‹ | å¿«é€Ÿé›†æˆã€å­¦ä¹ å‚è€ƒ |
| **è®¤è¯ä¿¡æ¯** | è·å– API è®¤è¯è¦æ±‚ | å®‰å…¨å®ç°ã€æƒé™ç®¡ç† |

---

## ğŸ¯ ä¸é¡¹ç›®å…¶ä»– MCP æœåŠ¡å™¨é…åˆ

ä½ çš„é¡¹ç›®å¯èƒ½è¿˜ä¼šä½¿ç”¨å…¶ä»– MCP æœåŠ¡å™¨ï¼Œå¯ä»¥ä¸€èµ·é…ç½®ï¼š

```json
{
  "mcpServers": {
    "apifox-api-docs": {
      "command": "npx",
      "args": ["-y", "apifox-mcp-server@latest", "--site-id=4478210"]
    },
    "task-master-ai": {
      "command": "npx",
      "args": ["-y", "task-master-ai"],
      "env": {
        "ANTHROPIC_API_KEY": "your-key"
      }
    },
    "context7": {
      "command": "npx",
      "args": ["-y", "@context7/mcp-server"]
    }
  }
}
```

**ååŒä½¿ç”¨åœºæ™¯**:
1. **Apifox MCP**: æä¾› API æ–‡æ¡£
2. **Task Master**: ç®¡ç† API å®ç°ä»»åŠ¡
3. **Context7**: æŸ¥è¯¢ç¬¬ä¸‰æ–¹åº“æ–‡æ¡£

---

## âœ… é…ç½®æ£€æŸ¥æ¸…å•

éªŒè¯ Apifox MCP é…ç½®æ˜¯å¦æ­£ç¡®ï¼š

- [ ] `.mcp.json` æ–‡ä»¶ä½äºé¡¹ç›®æ ¹ç›®å½•
- [ ] `command` å­—æ®µä¸º `npx` (ä¸æ˜¯ `cmd`)
- [ ] åŒ…å« `-y` å‚æ•° (è‡ªåŠ¨ç¡®è®¤)
- [ ] `--site-id` å‚æ•°æ­£ç¡®
- [ ] Node.js ç‰ˆæœ¬ >= 14
- [ ] å¯ä»¥è®¿é—® npm registry
- [ ] Claude Code å·²é‡å¯ä»¥åŠ è½½æ–°é…ç½®
- [ ] å¯åŠ¨æ—¥å¿—æ˜¾ç¤º MCP è¿æ¥æˆåŠŸ

---

## ğŸ“š ç›¸å…³èµ„æº

- **Apifox å®˜æ–¹æ–‡æ¡£**: https://apifox.com/help/
- **Apifox MCP æœåŠ¡å™¨**: https://github.com/apifox/apifox-mcp-server
- **Claude Code MCP æ–‡æ¡£**: https://docs.claude.com/en/docs/claude-code/mcp-servers
- **MCP åè®®è§„èŒƒ**: https://modelcontextprotocol.io/

---

## ğŸ”„ æ›´æ–°å’Œç»´æŠ¤

### æ›´æ–° Apifox MCP æœåŠ¡å™¨

```bash
# æ–¹å¼ 1: è‡ªåŠ¨æ›´æ–° (ä½¿ç”¨ @latest)
# é…ç½®ä¸­å·²ä½¿ç”¨ @latestï¼Œæ¯æ¬¡å¯åŠ¨ä¼šè‡ªåŠ¨æ£€æŸ¥æ›´æ–°

# æ–¹å¼ 2: æ‰‹åŠ¨æ›´æ–°å…¨å±€å®‰è£…
npm update -g apifox-mcp-server
```

### æŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯

```bash
npx apifox-mcp-server --version
```

---

**æœ€åæ›´æ–°**: 2025-11-10
**çŠ¶æ€**: âœ… å·²é…ç½®å®Œæˆ
**Site ID**: 4478210
**ä¸‹ä¸€æ­¥**: é‡å¯ Claude Code å¼€å§‹ä½¿ç”¨
