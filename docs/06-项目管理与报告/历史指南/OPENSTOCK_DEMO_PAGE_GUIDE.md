# OpenStock 功能演示页面使用指南

## 📍 访问方式

页面已集成到系统中，访问方式：

1. **通过导航菜单**:
   - 登录系统后，在左侧菜单找到 "OpenStock 功能演示"
   - 点击即可访问

2. **直接访问**:
   - URL: `http://localhost:3000/openstock-demo`
   - 需要先登录系统

## 🎯 页面功能

演示页面集中展示了所有从 OpenStock 迁移的功能，分为 6 个标签页：

### 1. 🔍 股票搜索

**功能说明**:
- 支持 A 股和美股搜索
- 支持按股票代码或名称搜索
- 智能市场识别（自动/A股/美股）

**使用步骤**:
1. 在搜索框输入关键词（如："茅台"、"600000"、"AAPL"）
2. 选择市场类型（建议选"自动"）
3. 点击"搜索"按钮
4. 查看搜索结果表格
5. 可以直接点击"获取行情"、"获取新闻"或"加入自选"

**测试建议**:
```
A股测试: 茅台、浦发、600000、000001
美股测试: AAPL、TSLA、GOOGL（需配置 Finnhub API）
```

### 2. 📈 实时行情

**功能说明**:
- 查询股票实时行情数据
- 显示价格、涨跌幅、成交量等信息
- 支持 A 股和美股

**使用步骤**:
1. 输入股票代码（如："600000"）
2. 选择市场类型（A股/美股）
3. 点击"查询行情"
4. 查看详细行情数据

**数据说明**:
- 🔴 红色表示上涨
- 🟢 绿色表示下跌
- 显示实时价格、涨跌幅、开高低收等完整数据

### 3. 📰 股票新闻

**功能说明**:
- 获取指定股票的相关新闻
- 支持选择时间范围（3天/7天/15天）
- 显示新闻标题、摘要、来源和链接

**使用步骤**:
1. 输入股票代码
2. 选择市场类型
3. 选择时间范围
4. 点击"查询新闻"
5. 查看新闻列表，点击链接查看详情

**注意事项**:
- A 股新闻来源：东方财富
- 美股新闻来源：Finnhub（需 API Key）

### 4. ⭐ 自选股管理

**功能说明**:
- 管理个人自选股列表
- 添加、删除、查询自选股
- 为自选股添加备注

**使用步骤**:
1. 点击"刷新自选股"查看当前列表
2. 从搜索结果添加自选股
3. 在列表中直接编辑备注
4. 点击"查看行情"快速跳转
5. 点击"删除"从列表移除

**数据存储**:
- 数据保存在 PostgreSQL 数据库
- 每个用户独立的自选股列表
- 重启系统后数据不会丢失

### 5. 📊 TradingView 图表

**功能说明**:
- 生成 TradingView 图表配置
- 支持自定义主题（深色/浅色）
- 自动转换股票代码格式

**使用步骤**:
1. 输入股票代码
2. 选择市场类型（A股/美股）
3. 选择主题（深色/浅色）
4. 点击"加载图表"
5. 查看控制台输出的配置

**集成说明**:
- 当前仅演示配置生成
- 实际渲染需要引入 TradingView JS 库
- 配置已按 TradingView 标准格式生成

### 6. ✅ 测试状态

**功能说明**:
- 显示各功能模块的测试状态
- 提供集成建议

**使用此页面**:
- 查看哪些功能已测试
- 了解建议的集成位置
- 规划功能分配方案

## 🧪 测试流程

### 快速测试（5分钟）

1. **登录系统**
   ```
   用户名: admin
   密码: admin123
   ```

2. **搜索测试**
   - 搜索 "茅台"
   - 点击结果中的"获取行情"

3. **自选股测试**
   - 搜索 "600000"
   - 点击"加入自选"
   - 切换到"自选股管理"标签
   - 查看是否添加成功

4. **新闻测试**
   - 切换到"股票新闻"标签
   - 输入 "600000"，点击"查询新闻"
   - 查看新闻列表

### 完整测试（15分钟）

参考 `OPENSTOCK_QUICKSTART.md` 中的测试用例。

## 📱 功能集成建议

测试完成后，可以将这些功能分散集成到以下页面：

### 1. 首页/仪表盘
- ✅ 全局搜索框（股票搜索）
- ✅ 自选股快捷查看
- ✅ 重要新闻展示

### 2. 市场行情页
- ✅ 股票搜索
- ✅ 实时行情卡片
- ✅ 批量添加自选股

### 3. 股票详情页
- ✅ TradingView 图表
- ✅ 实时行情数据
- ✅ 相关新闻列表
- ✅ 加入/移除自选股

### 4. 独立自选股页面
- ✅ 完整的自选股管理
- ✅ 批量操作功能
- ✅ 自选股行情监控

### 5. 新闻资讯页
- ✅ 市场新闻
- ✅ 个股新闻
- ✅ 新闻搜索

## 🎨 UI 定制

演示页面提供了基础 UI，可以根据需求调整：

### 颜色主题
```vue
<!-- 修改 OpenStockDemo.vue 中的样式 -->
.price-up { color: #f56c6c; }  /* 上涨颜色 */
.price-down { color: #67c23a; } /* 下跌颜色 */
```

### 布局调整
- 可以将标签页改为侧边栏导航
- 可以调整卡片大小和间距
- 可以自定义表格列宽

## 🔧 常见问题

### Q: 搜索返回空结果？
**A**: 检查：
1. 是否已登录
2. 后端服务是否运行
3. AKShare 是否安装（A股搜索）

### Q: 美股搜索不工作？
**A**: 需要配置 Finnhub API Key:
```bash
# 在 .env 文件中添加
FINNHUB_API_KEY=your_api_key
```

### Q: 自选股添加失败？
**A**: 检查：
1. PostgreSQL 数据库连接
2. 用户是否已登录
3. 查看浏览器控制台错误

### Q: TradingView 图表不显示？
**A**: 可能原因：
1. **网络问题**: TradingView CDN (https://s3.tradingview.com) 在中国大陆可能被屏蔽或访问较慢
2. **库加载失败**: 打开浏览器控制台（F12）查看是否有 `tv.js` 加载错误

**解决方案**:
- 使用 VPN 或代理访问
- 查看详细故障排查指南: `TRADINGVIEW_TROUBLESHOOTING.md`
- 使用替代方案：系统的"技术分析"页面（基于 ECharts，完全国内可用）

## 📊 性能优化建议

1. **搜索缓存**
   - 后端已实现 LRU 缓存
   - 相同搜索词会直接返回缓存结果

2. **自选股加载**
   - 建议只在首次进入时加载
   - 后续通过增量更新

3. **行情刷新**
   - 建议添加定时刷新功能
   - 避免频繁手动查询

## 🚀 下一步

1. **测试所有功能**: 确保每个标签页都正常工作
2. **记录问题**: 发现问题及时记录
3. **规划集成**: 决定哪些功能集成到哪个页面
4. **UI 优化**: 根据实际需求调整样式
5. **功能扩展**: 基于反馈添加新功能

## 📞 获取帮助

- API 文档: http://localhost:8000/api/docs
- 迁移指南: `OPENSTOCK_MIGRATION_GUIDE.md`
- 快速开始: `OPENSTOCK_QUICKSTART.md`
- 迁移总结: `OPENSTOCK_MIGRATION_SUMMARY.md`
- TradingView 故障排查: `TRADINGVIEW_TROUBLESHOOTING.md`

---

**页面版本**: v1.0
**最后更新**: 2025-10-20
