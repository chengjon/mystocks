# MyStocks å¼€å‘æŒ‡å—

## ğŸ“‹ æ¦‚è¿°

æ¬¢è¿åŠ å…¥MyStocksé‡åŒ–äº¤æ˜“å¹³å°å¼€å‘å›¢é˜Ÿï¼æœ¬æŒ‡å—å°†å¸®åŠ©ä½ å¿«é€Ÿä¸Šæ‰‹é¡¹ç›®å¼€å‘ï¼ŒæŒæ¡åˆ†æ”¯ç®¡ç†ã€CI/CDæµç¨‹å’Œæœ€ä½³å®è·µã€‚

## ğŸ¯ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒå‡†å¤‡

1. **å…‹éš†é¡¹ç›®**
   ```bash
   git clone https://github.com/your-org/mystocks.git
   cd mystocks
   ```

2. **å®‰è£…ä¾èµ–**
   ```bash
   # Pythonç¯å¢ƒ
   pip install -r requirements.txt
   pip install -r requirements-dev.txt

   # å‰ç«¯ä¾èµ–
   cd web/frontend && npm install
   ```

3. **å®‰è£…pre-commit hooks**
   ```bash
   pre-commit install
   pre-commit run --all-files
   ```

### éªŒè¯ç¯å¢ƒ
```bash
# è¿è¡Œæœ¬åœ°CIæ£€æŸ¥
./scripts/ci/local_ci_check.sh

# å¯åŠ¨å¼€å‘ç¯å¢ƒ
docker-compose -f docker-compose.test.yml up -d
```

## ğŸ“‚ åˆ†æ”¯ç­–ç•¥

### åˆ†æ”¯æ¨¡å‹

æˆ‘ä»¬é‡‡ç”¨ **Git Flow** å˜ä½“åˆ†æ”¯æ¨¡å‹ï¼š

```
main (ç”Ÿäº§åˆ†æ”¯)
â”œâ”€â”€ develop (å¼€å‘ä¸»åˆ†æ”¯)
â”‚   â”œâ”€â”€ feature/* (åŠŸèƒ½åˆ†æ”¯)
â”‚   â”œâ”€â”€ release/* (å‘å¸ƒåˆ†æ”¯)
â”‚   â””â”€â”€ hotfix/* (çƒ­ä¿®å¤åˆ†æ”¯)
â””â”€â”€ experiment/* (å®éªŒåˆ†æ”¯)
```

### åˆ†æ”¯å‘½åè§„èŒƒ

| åˆ†æ”¯ç±»å‹ | å‘½åæ ¼å¼ | ç¤ºä¾‹ | ç”Ÿå‘½å‘¨æœŸ |
|---------|---------|------|---------|
| åŠŸèƒ½åˆ†æ”¯ | `feature/åŠŸèƒ½æè¿°-kebab-case` | `feature/user-authentication` | å¼€å‘å®Œæˆååˆå¹¶åˆ°develop |
| å‘å¸ƒåˆ†æ”¯ | `release/vç‰ˆæœ¬å·` | `release/v1.2.0` | å‘å¸ƒå‡†å¤‡ï¼Œæµ‹è¯•å®Œæˆååˆå¹¶åˆ°main |
| çƒ­ä¿®å¤åˆ†æ”¯ | `hotfix/é—®é¢˜æè¿°` | `hotfix/critical-security-fix` | ç´§æ€¥ä¿®å¤ï¼Œä¿®å¤ååŒæ—¶åˆå¹¶åˆ°mainå’Œdevelop |
| å®éªŒåˆ†æ”¯ | `experiment/å®éªŒåç§°` | `experiment/new-trading-strategy` | æŠ€æœ¯éªŒè¯ï¼Œä¸åˆå¹¶åˆ°ä¸»åˆ†æ”¯ |

### å¼€å‘å·¥ä½œæµ

#### 1. å¼€å§‹æ–°åŠŸèƒ½å¼€å‘

```bash
# ç¡®ä¿æœ¬åœ°developåˆ†æ”¯æœ€æ–°
git checkout develop
git pull origin develop

# åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
git checkout -b feature/new-quantization-strategy

# å¼€å‘ä»£ç ...
# æäº¤æ—¶ä¼šè‡ªåŠ¨è§¦å‘pre-commitæ£€æŸ¥
git add .
git commit -m "feat: å®ç°æ–°çš„é‡åŒ–ç­–ç•¥ç®—æ³•"

# æ¨é€åˆ°è¿œç¨‹
git push origin feature/new-quantization-strategy
```

#### 2. åˆ›å»ºPull Request

```bash
# ä½¿ç”¨GitHub CLIåˆ›å»ºPR
gh pr create \
  --title "feat: æ–°é‡åŒ–ç­–ç•¥" \
  --body "å®ç°XXé‡åŒ–ç­–ç•¥ï¼ŒåŒ…å«å›æµ‹éªŒè¯" \
  --base develop \
  --head feature/new-quantization-strategy
```

#### 3. ä»£ç å®¡æŸ¥ä¸åˆå¹¶

- âœ… CIæµæ°´çº¿å¿…é¡»å…¨éƒ¨é€šè¿‡
- âœ… è‡³å°‘1äººå®¡æŸ¥é€šè¿‡ï¼ˆé‡åŒ–ç­–ç•¥éœ€è¦é¢†åŸŸä¸“å®¶å®¡æŸ¥ï¼‰
- âœ… è§£å†³æ‰€æœ‰mergeå†²çª
- âœ… ç¬¦åˆåˆ†æ”¯ä¿æŠ¤è§„åˆ™

#### 4. å‘å¸ƒæµç¨‹

```bash
# ä»developåˆ›å»ºreleaseåˆ†æ”¯
git checkout develop
git pull origin develop
git checkout -b release/v1.2.0

# æœ€ç»ˆæµ‹è¯•å’Œç‰ˆæœ¬æ›´æ–°
# æµ‹è¯•å®Œæˆååˆå¹¶åˆ°main
git checkout main
git merge release/v1.2.0
git tag -a v1.2.0 -m "Release v1.2.0"
git push origin main --tags
```

## ğŸ”„ CI/CD æµç¨‹

### æµæ°´çº¿æ¦‚è¿°

æˆ‘ä»¬çš„CI/CDé‡‡ç”¨åˆ†å±‚éªŒè¯æ¶æ„ï¼š

```
Git Push/PR
    â†“
æœ¬åœ°pre-commitæ£€æŸ¥
    â†“
GitHub Actionsæµæ°´çº¿:
â”œâ”€â”€ ä»£ç è´¨é‡æ£€æŸ¥ (Black, MyPy, Ruff, Bandit)
â”œâ”€â”€ é‡åŒ–ç­–ç•¥éªŒè¯ (è¯­æ³•æ£€æŸ¥ + åŠŸèƒ½æµ‹è¯•)
â”œâ”€â”€ å®‰å…¨æ‰«æ (æ•°æ®æ³„éœ² + SQLæ³¨å…¥æ£€æŸ¥)
â”œâ”€â”€ é›†æˆæµ‹è¯• (API + å‰ç«¯E2E)
â”œâ”€â”€ æ€§èƒ½æµ‹è¯• (Lighthouse + å“åº”æ—¶é—´)
â”œâ”€â”€ éƒ¨ç½²æµ‹è¯•ç¯å¢ƒ (è‡ªåŠ¨)
â””â”€â”€ ç”Ÿäº§éƒ¨ç½² (æ‰‹åŠ¨å®¡æ‰¹)
```

### æœ¬åœ°å¼€å‘æ£€æŸ¥

#### pre-commit hooks

é¡¹ç›®é…ç½®äº†ä»¥ä¸‹è‡ªåŠ¨æ£€æŸ¥ï¼š

- **Black**: ä»£ç æ ¼å¼åŒ–
- **isort**: å¯¼å…¥æ’åº
- **MyPy**: ç±»å‹æ£€æŸ¥
- **æœ¬åœ°CI**: å¿«é€Ÿè´¨é‡éªŒè¯
- **é‡åŒ–ç­–ç•¥**: è¯­æ³•æ£€æŸ¥

#### æ‰‹åŠ¨æœ¬åœ°æ£€æŸ¥

```bash
# è¿è¡Œå®Œæ•´æœ¬åœ°CI
./scripts/ci/local_ci_check.sh

# åªæ£€æŸ¥Pythonä»£ç è´¨é‡
black --check src/ web/backend/app/
mypy src/ --ignore-missing-imports

# æ£€æŸ¥é‡åŒ–ç­–ç•¥
python -c "
import sys
sys.path.insert(0, 'src')
# ç­–ç•¥æ£€æŸ¥ä»£ç 
"
```

### GitHub Actions æµæ°´çº¿

#### è§¦å‘æ¡ä»¶

| äº‹ä»¶ | åˆ†æ”¯ | è§¦å‘æµæ°´çº¿ |
|------|------|-----------|
| Push | main, develop | code-quality, test-coverage, comprehensive-testing |
| PR | main, develop | æ‰€æœ‰æµæ°´çº¿ + quantum-strategy-validation |
| Schedule | daily | monitoring-validation |
| Manual | any | deploy (æŒ‡å®šç¯å¢ƒ) |

#### ä¸»è¦æµæ°´çº¿

1. **code-quality.yml**: ä»£ç è´¨é‡æ£€æŸ¥
   - Black, MyPy, Ruff, Bandit
   - æ•°æ®å®‰å…¨æ£€æŸ¥
   - é‡åŒ–ç­–ç•¥éªŒè¯

2. **test-coverage.yml**: æµ‹è¯•è¦†ç›–ç‡
   - å•å…ƒæµ‹è¯• + é›†æˆæµ‹è¯•
   - E2Eæµ‹è¯•
   - è¦†ç›–ç‡æŠ¥å‘Š

3. **quantum-strategy-validation.yml**: é‡åŒ–ç­–ç•¥ä¸“é¡¹éªŒè¯
   - ç­–ç•¥è¯­æ³•æ£€æŸ¥
   - å›æµ‹å¼•æ“éªŒè¯
   - æ€§èƒ½åŸºå‡†æµ‹è¯•

4. **deploy.yml**: éƒ¨ç½²æµæ°´çº¿
   - æµ‹è¯•ç¯å¢ƒè‡ªåŠ¨éƒ¨ç½²
   - ç”Ÿäº§ç¯å¢ƒæ‰‹åŠ¨å®¡æ‰¹

5. **monitoring-validation.yml**: ç›‘æ§éªŒè¯
   - ç”Ÿäº§æŒ‡æ ‡æ”¶é›†
   - è´¨é‡é—¨ç¦æ£€æŸ¥
   - è‡ªåŠ¨å‘Šè­¦

### è´¨é‡é—¨ç¦æ ‡å‡†

| æŒ‡æ ‡ | é˜ˆå€¼ | è¯´æ˜ |
|------|------|------|
| ä»£ç è¦†ç›–ç‡ | â‰¥80% | æ ¸å¿ƒä¸šåŠ¡ä»£ç è¦†ç›–ç‡ |
| APIå“åº”æ—¶é—´ | <2ç§’ | 95th percentile |
| é”™è¯¯ç‡ | <5% | 5åˆ†é’Ÿå†…é”™è¯¯è¯·æ±‚æ¯”ä¾‹ |
| å®‰å…¨æ¼æ´ | 0ä¸ª | é«˜å±å®‰å…¨æ¼æ´ |
| é‡åŒ–ç­–ç•¥éªŒè¯ | 100% | ç­–ç•¥è¯­æ³•å’Œé€»è¾‘æ£€æŸ¥ |

## ğŸš€ éƒ¨ç½²æµç¨‹

### æµ‹è¯•ç¯å¢ƒéƒ¨ç½²

**è§¦å‘**: æ¨é€åˆ°developåˆ†æ”¯è‡ªåŠ¨éƒ¨ç½²

```bash
# æ„å»ºæµ‹è¯•é•œåƒ
docker build -f web/backend/Dockerfile -t mystocks-backend:test ./web/backend
docker build -f web/frontend/Dockerfile -t mystocks-frontend:test ./web/frontend

# å¯åŠ¨æµ‹è¯•ç¯å¢ƒ
docker-compose -f docker-compose.test.yml up -d

# è¿è¡Œéƒ¨ç½²åæµ‹è¯•
curl http://localhost:8001/health
```

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

**è§¦å‘**: æ‰‹åŠ¨è§¦å‘GitHub Actionsï¼Œé€‰æ‹©ç”Ÿäº§ç¯å¢ƒ

1. **é¢„éƒ¨ç½²æ£€æŸ¥**
   - æ‰€æœ‰CIæµæ°´çº¿é€šè¿‡
   - æ€§èƒ½å’Œå®‰å…¨è¯„åˆ†è¾¾æ ‡
   - äººå·¥ç¡®è®¤éƒ¨ç½²

2. **éƒ¨ç½²æ‰§è¡Œ**
   ```bash
   # ä½¿ç”¨éƒ¨ç½²è„šæœ¬
   ./scripts/deploy/deploy.sh production

   # æˆ–å›æ»š
   ./scripts/deploy/deploy.sh rollback production
   ```

3. **éƒ¨ç½²éªŒè¯**
   - å¥åº·æ£€æŸ¥é€šè¿‡
   - æ ¸å¿ƒåŠŸèƒ½éªŒè¯
   - ç›‘æ§å‘Šè­¦æ­£å¸¸

## ğŸ“Š ç›‘æ§ä¸å‘Šè­¦

### å…³é”®æŒ‡æ ‡ç›‘æ§

| æŒ‡æ ‡ç±»å‹ | ç›‘æ§å†…å®¹ | å‘Šè­¦é˜ˆå€¼ |
|---------|---------|----------|
| æ€§èƒ½æŒ‡æ ‡ | APIå“åº”æ—¶é—´, CPU/å†…å­˜ä½¿ç”¨ç‡ | å“åº”æ—¶é—´>2ç§’, CPU>80% |
| å®‰å…¨æŒ‡æ ‡ | é”™è¯¯ç‡, å®‰å…¨æ¼æ´ | é”™è¯¯ç‡>5%, å‘ç°é«˜å±æ¼æ´ |
| ä¸šåŠ¡æŒ‡æ ‡ | ç”¨æˆ·ä½“éªŒè¯„åˆ†, ç­–ç•¥æˆåŠŸç‡ | è¯„åˆ†<70, æˆåŠŸç‡<90% |
| ç³»ç»ŸæŒ‡æ ‡ | æœåŠ¡å¯ç”¨æ€§, æ•°æ®åº“è¿æ¥ | æœåŠ¡å®•æœº, è¿æ¥å¤±è´¥ |

### ç›‘æ§é¢æ¿

- **Grafanaä»ªè¡¨æ¿**: `http://localhost:3000`
  - APIæ€§èƒ½ç›‘æ§
  - ç³»ç»Ÿèµ„æºç›‘æ§
  - ç”¨æˆ·ä½“éªŒç›‘æ§
  - é‡åŒ–ç­–ç•¥ç›‘æ§

- **Prometheus**: `http://localhost:9090`
  - æŒ‡æ ‡æŸ¥è¯¢å’Œå‘Šè­¦è§„åˆ™

### å‘Šè­¦é€šçŸ¥

- **å³æ—¶å‘Šè­¦**: ä¸¥é‡é—®é¢˜é€šè¿‡Webhookå‘é€
- **æ—¥æŠ¥æŠ¥å‘Š**: æ¯æ—¥è´¨é‡æŠ¥å‘Š
- **å‘¨æŠ¥åˆ†æ**: æ€§èƒ½è¶‹åŠ¿åˆ†æ

## ğŸ› ï¸ å¼€å‘å·¥å…·

### IDEé…ç½®

#### VS Codeæ¨èé…ç½®
```json
{
  "python.formatting.provider": "black",
  "python.linting.enabled": true,
  "python.linting.mypyEnabled": true,
  "editor.formatOnSave": true,
  "editor.codeActionsOnSave": {
    "source.organizeImports": true
  }
}
```

#### PyCharmé…ç½®
1. **ä»£ç æ ¼å¼åŒ–**: è®¾ç½®Blackä¸ºé»˜è®¤æ ¼å¼åŒ–å·¥å…·
2. **ç±»å‹æ£€æŸ¥**: å¯ç”¨MyPy
3. **è¿è¡Œé…ç½®**: æ·»åŠ pytestè¿è¡Œé…ç½®

### è°ƒè¯•æŠ€å·§

#### æœ¬åœ°è°ƒè¯•
```bash
# å¯åŠ¨è°ƒè¯•æœåŠ¡å™¨
python -m uvicorn app.main:app --reload --debug

# å¯ç”¨è°ƒè¯•æ—¥å¿—
export LOG_LEVEL=DEBUG
python app/main.py
```

#### æ•°æ®åº“è°ƒè¯•
```bash
# è¿æ¥æµ‹è¯•æ•°æ®åº“
psql -h localhost -p 5433 -U mystocks_test -d mystocks_test

# æŸ¥çœ‹æ…¢æŸ¥è¯¢
SELECT * FROM pg_stat_activity WHERE state = 'active';
```

#### å‰ç«¯è°ƒè¯•
```bash
cd web/frontend
npm run serve -- --mode development
# è®¿é—® http://localhost:8080
```

## ğŸ“š ä»£ç è§„èŒƒ

### Pythonä»£ç è§„èŒƒ

- **æ ¼å¼åŒ–**: ä½¿ç”¨Blackï¼Œè¡Œé•¿åº¦120å­—ç¬¦
- **å¯¼å…¥**: ä½¿ç”¨isortï¼ŒæŒ‰ç±»å‹åˆ†ç»„
- **ç±»å‹æ³¨è§£**: æ‰€æœ‰å‡½æ•°å‚æ•°å’Œè¿”å›å€¼å¿…é¡»æ ‡æ³¨ç±»å‹
- **æ–‡æ¡£**: å…¬å…±å‡½æ•°å¿…é¡»æœ‰docstring
- **å‘½å**: è›‡å½¢å‘½åæ³•ï¼Œç§æœ‰æ–¹æ³•ä»¥ä¸‹åˆ’çº¿å¼€å¤´

### å‰ç«¯ä»£ç è§„èŒƒ

- **æ ¼å¼åŒ–**: ä½¿ç”¨Prettier
- **Linting**: ä½¿ç”¨ESLint + TypeScriptè§„åˆ™
- **ç»„ä»¶**: ä½¿ç”¨Vue 3 Composition API
- **çŠ¶æ€ç®¡ç†**: ä½¿ç”¨Pinia
- **æ ·å¼**: ä½¿ç”¨Tailwind CSS

### é‡åŒ–ç­–ç•¥è§„èŒƒ

- **æ–‡ä»¶ç»“æ„**: `src/strategies/strategy_name/`
- **å‘½åè§„èŒƒ**: ç±»åä½¿ç”¨PascalCase
- **æµ‹è¯•è¦†ç›–**: ç­–ç•¥æ ¸å¿ƒé€»è¾‘å¿…é¡»æœ‰å•å…ƒæµ‹è¯•
- **æ–‡æ¡£**: ç­–ç•¥å‚æ•°å’Œé€»è¾‘å¿…é¡»æœ‰è¯¦ç»†è¯´æ˜

## ğŸš¨ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### pre-commitæ£€æŸ¥å¤±è´¥
```bash
# æŸ¥çœ‹å¤±è´¥è¯¦æƒ…
pre-commit run --verbose

# è·³è¿‡æ£€æŸ¥ (ä»…ç´§æ€¥æƒ…å†µ)
git commit --no-verify -m "ç´§æ€¥ä¿®å¤"
```

#### CIæµæ°´çº¿å¤±è´¥
1. æ£€æŸ¥GitHub Actionsæ—¥å¿—
2. æœ¬åœ°é‡ç°é—®é¢˜
3. æŸ¥çœ‹å…·ä½“é”™è¯¯ä¿¡æ¯
4. ä¿®å¤åé‡æ–°æ¨é€

#### éƒ¨ç½²å¤±è´¥
1. æ£€æŸ¥éƒ¨ç½²æ—¥å¿—
2. éªŒè¯ç¯å¢ƒé…ç½®
3. è”ç³»DevOpså›¢é˜Ÿ
4. å¦‚éœ€å›æ»šï¼Œä½¿ç”¨rollbackå‘½ä»¤

### è·å–å¸®åŠ©

- **ğŸ“– æ–‡æ¡£**: æŸ¥çœ‹é¡¹ç›®docsç›®å½•
- **ğŸ’¬ è®¨è®º**: åœ¨GitHub Issuesä¸­æé—®
- **ğŸ‘¥ å›¢é˜Ÿ**: è”ç³»é¡¹ç›®ç»´æŠ¤è€…
- **ğŸ”§ å·¥å…·**: ä½¿ç”¨é¡¹ç›®æä¾›çš„è„šæœ¬å’Œå·¥å…·

## ğŸ¯ æœ€ä½³å®è·µ

### ä»£ç æäº¤

1. **å°æ­¥æäº¤**: é¿å…å¤§å—ä¿®æ”¹
2. **æ¸…æ™°æè¿°**: æäº¤ä¿¡æ¯è¦è¯´æ˜åšäº†ä»€ä¹ˆå’Œä¸ºä»€ä¹ˆ
3. **å…³è”Issue**: æäº¤æ—¶å…³è”ç›¸å…³Issue

### ä»£ç å®¡æŸ¥

1. **è‡ªæŸ¥**: æäº¤å‰è‡ªå·±æ£€æŸ¥ä»£ç 
2. **æµ‹è¯•**: ç¡®ä¿æ‰€æœ‰æµ‹è¯•é€šè¿‡
3. **æ–‡æ¡£**: æ›´æ–°ç›¸å…³æ–‡æ¡£
4. **å®¡æŸ¥**: è€å¿ƒç­‰å¾…å®¡æŸ¥å¹¶åŠæ—¶å“åº”

### æ€§èƒ½ä¼˜åŒ–

1. **ç›‘æ§**: å…³æ³¨æ€§èƒ½æŒ‡æ ‡å˜åŒ–
2. **åŸºå‡†**: å»ºç«‹æ€§èƒ½åŸºå‡†æµ‹è¯•
3. **ä¼˜åŒ–**: å®šæœŸreviewå’Œä¼˜åŒ–ä»£ç 
4. **æµ‹è¯•**: ç¡®ä¿ä¼˜åŒ–ä¸å½±å“åŠŸèƒ½

### å®‰å…¨æ„è¯†

1. **éªŒè¯**: æ‰€æœ‰è¾“å…¥éƒ½è¦éªŒè¯
2. **åŠ å¯†**: æ•æ„Ÿæ•°æ®è¦åŠ å¯†å­˜å‚¨
3. **å®¡è®¡**: å®šæœŸè¿›è¡Œå®‰å…¨å®¡è®¡
4. **æ›´æ–°**: åŠæ—¶æ›´æ–°ä¾èµ–åŒ…

---

## ğŸ“ è”ç³»æˆ‘ä»¬

- **é¡¹ç›®ä¸»é¡µ**: https://github.com/your-org/mystocks
- **æ–‡æ¡£ç«™ç‚¹**: https://docs.mystocks.local
- **æŠ€æœ¯æ”¯æŒ**: dev-support@mystocks.local

**ç¥ä½ åœ¨MyStockså¼€å‘ä¸­å–å¾—æˆåŠŸï¼ğŸš€**