# Git Worktreeåä½œå†²çªé¢„é˜²è§„èŒƒ

**æ–‡æ¡£ç‰ˆæœ¬**: v2.0
**åˆ›å»ºæ—¥æœŸ**: 2025-12-29
**é—®é¢˜æ¥æº**: Worker CLIåé¦ˆçš„å®žé™…é—®é¢˜
**æœ€åŽæ›´æ–°**: 2025-12-30
**ç»´æŠ¤è€…**: Main CLI

---

## ðŸ“‹ æ–‡æ¡£ç›®çš„

æœ¬æ–‡æ¡£è§£å†³4ä¸ªå…³é”®çš„Git Worktreeåä½œé—®é¢˜ï¼š

1. **Pre-commité…ç½®å†²çª**ï¼šä¸»CLIå’ŒWorker CLIåŒæ—¶ä¿®æ”¹pre-commité…ç½®å¯¼è‡´åˆå¹¶å†²çª
2. **ä»»åŠ¡åˆ†é…å†²çª**ï¼šå¤šä¸ªCLIä¿®æ”¹åŒä¸€æ–‡ä»¶å¯¼è‡´åä½œå†²çª
3. **ä¸»CLIå¿˜è®°åŒæ­¥å·²å®Œæˆworktree**ï¼šä¸»CLIåœ¨å¼€å§‹æ–°å·¥ä½œå‰å¿˜è®°åˆå¹¶å·²å®Œæˆçš„worktree
4. **ä»»åŠ¡æ–‡æ¡£æ–¹å¼**ï¼šä½¿ç”¨README.md vs TASK.md + TASK-REPORT.mdå¯¼è‡´å†²çª

**æ ¸å¿ƒåŽŸåˆ™**:
- âœ… **æ˜Žç¡®æ‰€æœ‰æƒ**ï¼šæ¯ä¸ªæ–‡ä»¶æœ‰æ˜Žç¡®çš„æ‹¥æœ‰è€…
- âœ… **èŒè´£åˆ†ç¦»**ï¼šæ¯ä¸ªCLIæœ‰æ¸…æ™°çš„èŒè´£èŒƒå›´
- âœ… **é…ç½®é›†ä¸­ç®¡ç†**ï¼špre-commité…ç½®åœ¨ä¸»ä»“åº“ç»Ÿä¸€ç®¡ç†
- âœ… **æ–‡ä»¶ç»„ç»‡æ ‡å‡†åŒ–**ï¼šé€šè¿‡ç›®å½•ç»“æž„é¿å…å†²çª
- âœ… **ä»»åŠ¡æ–‡æ¡£åˆ†ç¦»**ï¼šTASK.mdï¼ˆä»»åŠ¡è¯´æ˜Žï¼‰ä¸ŽTASK-REPORT.mdï¼ˆè¿›åº¦æŠ¥å‘Šï¼‰åˆ†ç¦»

---

## ðŸš¨ é—®é¢˜1ï¼šPre-commité…ç½®å†²çª

### **é—®é¢˜æè¿°**

**åœºæ™¯**ï¼š
```
æ—¶é—´çº¿ï¼š
Day 1 10:00 - ä¸»CLIä¿®æ”¹ä¸»ä»“åº“çš„.pre-commit-config.yaml
Day 1 14:00 - Worker CLI-1ä¿®æ”¹è‡ªå·±worktreeçš„.pre-commit-config.yaml
Day 1 18:00 - Worker CLI-2ä¿®æ”¹è‡ªå·±worktreeçš„.pre-commit-config.yaml
Day 2 10:00 - åˆå¹¶æ—¶äº§ç”Ÿå†²çª
```

**æ ¹æœ¬åŽŸå› **:
- `.pre-commit-config.yaml`åœ¨æ‰€æœ‰ä»“åº“ä¸­éƒ½æœ‰
- å„ä¸ªCLIæ ¹æ®è‡ªå·±çš„éœ€æ±‚ä¿®æ”¹é…ç½®
- Gitæ— æ³•è‡ªåŠ¨åˆå¹¶é…ç½®æ–‡ä»¶çš„ä¿®æ”¹

### **è§£å†³æ–¹æ¡ˆ**

#### **æ–¹æ¡ˆAï¼šPre-commité…ç½®åªç”±ä¸»CLIç®¡ç†** âœ… **å¼ºçƒˆæŽ¨è**

**åŽŸåˆ™**:
- âœ… ä¸»ä»“åº“ï¼š`.pre-commit-config.yaml`ç”±ä¸»CLIç»´æŠ¤
- âœ… Worker CLIï¼šç»§æ‰¿ä¸»ä»“åº“çš„pre-commité…ç½®ï¼Œ**ä¸ä¿®æ”¹**
- âœ… çŽ¯å¢ƒå˜é‡ç»•è¿‡ï¼šWorker CLIä½¿ç”¨`DISABLE_DIR_STRUCTURE_CHECK=1`

**å®žæ–½æ­¥éª¤**ï¼š

**1. ä¸»CLIèŒè´£**ï¼ˆåœ¨ä¸»ä»“åº“`/opt/claude/mystocks_spec`ï¼‰:
```bash
# ä¸»CLIå”¯ä¸€è´Ÿè´£ç»´æŠ¤pre-commité…ç½®
cd /opt/claude/mystocks_spec

# ä¿®æ”¹.pre-commit-config.yaml
vim .pre-commit-config.yaml

# æäº¤ä¿®æ”¹
git add .pre-commit-config.yaml
git commit -m "chore(pre-commit): update configuration for all CLIs"
```

**2. Worker CLIèŒè´£**ï¼ˆåœ¨worktreeä¸­ï¼‰:
```bash
# Worker CLIä¸ä¿®æ”¹.pre-commit-config.yaml
# ä½¿ç”¨çŽ¯å¢ƒå˜é‡ç»•è¿‡ä¸é€‚ç”¨çš„æ£€æŸ¥

# æ–¹å¼1: ç»•è¿‡ç›®å½•ç»“æž„æ£€æŸ¥ï¼ˆæŽ¨èï¼‰
DISABLE_DIR_STRUCTURE_CHECK=1 git commit -m "message"

# æ–¹å¼2: å®Œå…¨è·³è¿‡hooksï¼ˆä»…ç´§æ€¥æƒ…å†µï¼‰
git commit --no-verify -m "message"
```

---

## ðŸš¨ é—®é¢˜2ï¼šä»»åŠ¡åˆ†é…å†²çª

### **é—®é¢˜æè¿°**

**åœºæ™¯**ï¼š
```
æ—¶é—´çº¿ï¼š
Day 1 10:00 - CLI-1ä¿®æ”¹äº†web/frontend/src/components/Chart.vue
Day 1 14:00 - CLI-6ä¹Ÿåœ¨ä»£ç è´¨é‡æ£€æŸ¥ä¸­ä¿®æ”¹äº†åŒä¸€æ–‡ä»¶
Day 2 10:00 - åˆå¹¶æ—¶äº§ç”Ÿå†²çªï¼šBoth modified
```

**æ ¹æœ¬åŽŸå› **:
- æ–‡ä»¶æ‰€æœ‰æƒä¸æ˜Žç¡®
- èŒè´£èŒƒå›´é‡å 
- ç¼ºå°‘åè°ƒæœºåˆ¶

### **è§£å†³æ–¹æ¡ˆ**

#### **æ ¸å¿ƒåŽŸåˆ™ï¼šæ¸…æ™°çš„æ–‡ä»¶æ‰€æœ‰æƒ**

```
æ–‡ä»¶æ‰€æœ‰æƒè§„åˆ™ï¼š
1. æ¯ä¸ªæ–‡ä»¶æœ‰æ˜Žç¡®çš„æ‹¥æœ‰è€…
2. æ‹¥æœ‰è€…è´Ÿè´£ä¿®æ”¹ï¼Œå…¶ä»–äººåªè¯»
3. è·¨CLIä¿®æ”¹éœ€è¦ä¸»CLIåè°ƒ
4. ä½¿ç”¨ç›®å½•ç»“æž„ç‰©ç†éš”ç¦»
```

#### **è§£å†³æ–¹æ¡ˆAï¼šç›®å½•èŒè´£åˆ’åˆ†** âœ… **å¼ºçƒˆæŽ¨è**

**åŽŸåˆ™**ï¼šé€šè¿‡ç›®å½•ç»“æž„ç‰©ç†éš”ç¦»ï¼Œé¿å…å†²çª

**å®Œæ•´ç›®å½•æ‰€æœ‰æƒè¡¨**ï¼š

| ç›®å½• | æ‹¥æœ‰è€…CLI | è¯´æ˜Ž | å…¶ä»–CLI |
|------|----------|------|---------|
| `src/` | ä¸»CLIï¼ˆä¸»ä»“åº“ï¼‰ | æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ | âŒ ä¸å¯ä¿®æ”¹ |
| `web/frontend/src/components/Charts/` | CLI-1 | Kçº¿å›¾ç»„ä»¶ | âŒ åªè¯» |
| `web/frontend/src/api/klineApi.ts` | CLI-1 | Kçº¿å›¾API | âŒ åªè¯» |
| `web/frontend/src/api/indicatorApi.ts` | CLI-1 | æŒ‡æ ‡API | âŒ åªè¯» |
| `docs/api/contracts/` | CLI-2 | APIå¥‘çº¦æ–‡æ¡£ | âŒ åªè¯» |
| `src/gpu/` | CLI-5 | GPUç›¸å…³ä»£ç  | âŒ åªè¯» |
| `scripts/maintenance/` | CLI-6 | è´¨é‡ä¿è¯è„šæœ¬ | âŒ åªè¯» |
| `tests/` | CLI-6 | æµ‹è¯•æ–‡ä»¶ | âŒ åªè¯» |
| `web/backend/app/schemas/` | CLI-2 | æ•°æ®æ¨¡å¼å®šä¹‰ | âŒ åªè¯» |
| `.pre-commit-config.yaml` | ä¸»CLI | Pre-commité…ç½® | âŒ åªè¯» |
| `pyproject.toml` | ä¸»CLI | é¡¹ç›®é…ç½® | âŒ åªè¯» |

**å…±äº«æ–‡ä»¶ï¼ˆåè°ƒä¿®æ”¹ï¼‰**ï¼š
- `README.md` - ä¸»CLIå’ŒWorker CLIåè°ƒ
- `CLAUDE.md` - ä¸»CLIç»´æŠ¤ï¼ŒWorker CLIå»ºè®®
- `.env.example` - ä¸»CLIç»´æŠ¤

---

## ðŸš¨ é—®é¢˜3ï¼šä¸»CLIå¿˜è®°åŒæ­¥å·²å®Œæˆworktree (2025-12-30å®žæˆ˜æ¡ˆä¾‹)

### **é—®é¢˜æè¿°**

**åœºæ™¯**ï¼š
```
æ—¶é—´çº¿ï¼š
2025-12-29 14:00 - CLI-2å®ŒæˆAPIå¥‘çº¦ç®¡ç†å¹³å°ï¼Œæäº¤åˆ°phase6-api-contract-standardizationåˆ†æ”¯
2025-12-29 18:00 - CLI-3å®ŒæˆKçº¿å›¾å¯è§†åŒ–ï¼Œæäº¤åˆ°cli3-kline-chartåˆ†æ”¯
2025-12-29 20:00 - CLI-5å®ŒæˆGPUç›‘æŽ§ï¼Œæäº¤åˆ°cli5-gpu-monitoringåˆ†æ”¯
2025-12-30 00:00 - ä¸»CLIå¼€å§‹API&Webé›†æˆå·¥ä½œï¼Œç›´æŽ¥å°è¯•ä½¿ç”¨å¥‘çº¦ç®¡ç†å·¥å…·
2025-12-30 00:05 - âŒ å¤±è´¥ï¼šå¥‘çº¦ç®¡ç†å·¥å…·ç›®å½•ä¸å­˜åœ¨
2025-12-30 00:10 - âš ï¸  å‘çŽ°é—®é¢˜ï¼šä¸»CLIå¿˜è®°å…ˆpullå·²å®Œæˆçš„worktreeä»£ç 
```

**æ ¹æœ¬åŽŸå› **:
- ä¸»CLIåœ¨å¼€å§‹æ–°å·¥ä½œå‰ï¼Œ**å¿˜è®°**ç³»ç»Ÿæ€§æ£€æŸ¥å¹¶åˆå¹¶æ‰€æœ‰worker CLIçš„å·²å®Œæˆå·¥ä½œ
- ä¸»CLIå·¥ä½œæµç¨‹ç¼ºå°‘æ˜Žç¡®çš„"Pre-flightæ£€æŸ¥æ¸…å•"
- å¯¼è‡´ä¸»CLIå°è¯•ä½¿ç”¨ä¸å­˜åœ¨çš„å·¥å…·/ä»£ç ï¼Œæµªè´¹æ—¶é—´åˆ›å»ºä¸´æ—¶è§£å†³æ–¹æ¡ˆ

### **è§£å†³æ–¹æ¡ˆ**

#### **æ–¹æ¡ˆAï¼šä¸»CLI Pre-flightæ£€æŸ¥æ¸…å•** âœ… **å¼ºåˆ¶æ‰§è¡Œ**

**åŽŸåˆ™**: ä¸»CLIå¼€å§‹ä»»ä½•æ–°å·¥ä½œå‰ï¼Œå¿…é¡»å¼ºåˆ¶æ‰§è¡Œä»¥ä¸‹æ£€æŸ¥æ¸…å•

**åœ¨ä¸»CLIç›®å½•ä¸‹å·¥ä½œå‰å¿…é¡»æ‰§è¡Œ**ï¼š
```bash
#!/bin/bash
# ä¸»CLI Pre-flight æ£€æŸ¥æ¸…å•
# ä½¿ç”¨åœºæ™¯ï¼šä¸»CLIå‡†å¤‡å¼€å§‹æ–°å·¥ä½œï¼Œæˆ–åœ¨worktreeåˆ é™¤å‰

echo "ðŸ” ä¸»CLI Pre-flight æ£€æŸ¥æ¸…å•"
echo "================================"

# 1. æ£€æŸ¥æ‰€æœ‰worktreeçŠ¶æ€
echo "1ï¸âƒ£  æ£€æŸ¥æ‰€æœ‰worktreeçŠ¶æ€..."
git worktree list

# 2. æ£€æŸ¥è¿œç¨‹åˆ†æ”¯æ˜¯å¦æœ‰æ–°æäº¤
echo "2ï¸âƒ£  æ£€æŸ¥è¿œç¨‹åˆ†æ”¯..."
git fetch --all
git log HEAD..origin/main --oneline

# 3. å¦‚æžœæœ‰worktreeï¼Œæ£€æŸ¥å®ƒä»¬çš„åˆ†æ”¯çŠ¶æ€
echo "3ï¸âƒ£  æ£€æŸ¥worktreeåˆ†æ”¯çŠ¶æ€..."
for worktree in $(git worktree list | grep -v '\[main\]' | awk '{print $1}'); do
    branch=$(cd $worktree && git branch --show-current)
    echo "   - $worktree ($branch)"
    (cd $worktree && git status --short)
done

# 4. è¯¢é—®ç”¨æˆ·æ“ä½œ
echo ""
echo "âš ï¸  å‘çŽ°æœªå¤„ç†çš„worktreeæˆ–è¿œç¨‹æ›´æ–°ï¼Œè¯·é€‰æ‹©ï¼š"
echo "1. åˆå¹¶æ‰€æœ‰å·²å®Œæˆåˆ†æ”¯åˆ°mainï¼Œç„¶åŽåˆ é™¤worktree"
echo "2. ä»…æ‹‰å–è¿œç¨‹æ›´æ–°ï¼Œä¸å¤„ç†worktree"
echo "3. å–æ¶ˆï¼Œæ‰‹åŠ¨å¤„ç†"
read -p "é€‰æ‹© [1/2/3]: " choice

case $choice in
    1)
        echo "ðŸ”„ å¼€å§‹åˆå¹¶å·²å®Œæˆåˆ†æ”¯..."
        # å®žçŽ°è§ MAIN_CLI_WORKFLOW_STANDARDS.md
        ;;
    2)
        echo "ðŸ“¥ ä»…æ‹‰å–è¿œç¨‹æ›´æ–°..."
        git pull origin main
        ;;
    3)
        echo "âŒ å–æ¶ˆæ“ä½œ"
        exit 1
        ;;
esac
```

**ä¸»CLIå·¥ä½œæµç¨‹æ›´æ–°**ï¼ˆæ·»åŠ åˆ°å¼€å§‹ä»»ä½•å·¥ä½œå‰ï¼‰ï¼š
```markdown
## Step 0: Pre-flightæ£€æŸ¥ï¼ˆå¼ºåˆ¶æ‰§è¡Œï¼‰

åœ¨å¼€å§‹ä»»ä½•æ–°å·¥ä½œå‰ï¼Œå¿…é¡»æ‰§è¡Œï¼š

1. âœ… æ£€æŸ¥æ‰€æœ‰worktreeçŠ¶æ€
   ```bash
   git worktree list
   ```

2. âœ… æ£€æŸ¥è¿œç¨‹åˆ†æ”¯æ–°æäº¤
   ```bash
   git fetch --all
   git log HEAD..origin/main --oneline
   ```

3. âœ… å¦‚æžœæœ‰å·²å®Œæˆçš„worktreeï¼š
   - ç¡®è®¤worker CLIå·²æäº¤å¹¶æŽ¨é€
   - åˆå¹¶åˆ†æ”¯åˆ°main
   - åˆ é™¤worktree
   - ç„¶åŽæ‰å¼€å§‹æ–°å·¥ä½œ

4. âœ… å¦‚æžœä»…æœ‰è¿œç¨‹æ›´æ–°ï¼š
   - æ‹‰å–æ›´æ–°
   - è§£å†³å†²çª
   - ç„¶åŽæ‰å¼€å§‹æ–°å·¥ä½œ
```

**ä¸ºä»€ä¹ˆè¿™å¾ˆé‡è¦**:
- âŒ **ä¸æ‰§è¡Œ** â†’ ä¸»CLIä½¿ç”¨è¿‡æ—¶ä»£ç /å·¥å…·ï¼Œæµªè´¹æ—¶é—´ï¼Œå¯èƒ½å¼•å…¥bug
- âœ… **æ‰§è¡Œ** â†’ ä¸»CLIå§‹ç»ˆä½¿ç”¨æœ€æ–°ä»£ç ï¼Œé¿å…é‡å¤åŠ³åŠ¨ï¼Œç¡®ä¿åä½œä¸€è‡´æ€§

---

## ðŸš¨ é—®é¢˜4ï¼šä»»åŠ¡æ–‡æ¡£æ–¹å¼ (2025-12-30å®žæˆ˜æ¡ˆä¾‹)

### **é—®é¢˜æè¿°**

**æ—§æ–¹å¼é—®é¢˜**ï¼š
```
æ—¶é—´çº¿ï¼š
2025-12-29 10:00 - CLI-1åˆ›å»ºä»»åŠ¡ï¼Œå†™å…¥README.mdï¼ˆCLI-1 Phase 3 Kçº¿å›¾ä»»åŠ¡ï¼‰
2025-12-29 14:00 - CLI-2åˆ›å»ºä»»åŠ¡ï¼Œå†™å…¥README.mdï¼ˆCLI-2 APIå¥‘çº¦ä»»åŠ¡ï¼‰
2025-12-30 00:00 - ä¸»CLIå°è¯•åˆå¹¶phase6-api-contract-standardizationåˆ†æ”¯
2025-12-30 00:05 - âŒ å†²çªï¼šREADME.md Both modified
2025-12-30 00:10 - âš ï¸  æ ¹æœ¬åŽŸå› ï¼šå¤šä¸ªCLIä½¿ç”¨åŒä¸€æ–‡ä»¶ï¼ˆREADME.mdï¼‰è®°å½•ä»»åŠ¡å’Œè¿›åº¦
```

**æ ¹æœ¬åŽŸå› **:
- README.mdæ˜¯ä¸»ä»“åº“çš„å…±äº«æ–‡æ¡£
- å¤šä¸ªCLIåŒæ—¶ä¿®æ”¹README.mdè®°å½•å„è‡ªçš„ä»»åŠ¡å’Œè¿›åº¦
- Gitæ— æ³•è‡ªåŠ¨åˆå¹¶åŒä¸€æ–‡ä»¶çš„å¤šä¸ªç‰ˆæœ¬
- åˆå¹¶æ—¶å¿…ç„¶äº§ç”Ÿå†²çª

### **è§£å†³æ–¹æ¡ˆ**

#### **æ–¹æ¡ˆAï¼šä½¿ç”¨TASK.md + TASK-REPORT.mdæ–¹å¼** âœ… **å¼ºçƒˆæŽ¨è**

**åŽŸåˆ™**:
- âœ… æ¯ä¸ªworktreeæœ‰ç‹¬ç«‹çš„TASK.mdï¼ˆä»»åŠ¡è¯´æ˜Žï¼‰
- âœ… æ¯ä¸ªworktreeæœ‰ç‹¬ç«‹çš„TASK-REPORT.mdï¼ˆè¿›åº¦æŠ¥å‘Šï¼‰
- âœ… å¤šé˜¶æ®µä»»åŠ¡ç”¨TASK-1.md, TASK-2.mdå’ŒTASK-1-REPORT.md, TASK-2-REPORT.md
- âœ… README.mdä¿ç•™ç»™é¡¹ç›®çº§ä»‹ç»ï¼Œä¸æ”¾å…¥CLIç‰¹å®šä»»åŠ¡

**ä»»åŠ¡æ–‡æ¡£ç»“æž„**ï¼š

| æ–‡ä»¶ç±»åž‹ | å‘½åè§„èŒƒ | ç”¨é€” | æ‹¥æœ‰è€… | åˆå¹¶æ—¶å½±å“ |
|---------|---------|------|--------|-----------|
| ä»»åŠ¡è¯´æ˜Ž | TASK.md, TASK-1.md, TASK-2.md | ä¸»CLIç”Ÿæˆä»»åŠ¡æ–‡æ¡£ | ä¸»CLI | æ— å†²çªï¼ˆworktreeå†…ï¼‰ |
| è¿›åº¦æŠ¥å‘Š | TASK-REPORT.md | Worker CLIæ›´æ–°è¿›åº¦ | Worker CLI | æ— å†²çªï¼ˆworktreeå†…ï¼‰ |
| å®ŒæˆæŠ¥å‘Š | TASK-*-REPORT.md | Worker CLIæ±‡æŠ¥å®Œæˆ | Worker CLI | æ— å†²çªï¼ˆworktreeå†…ï¼‰ |

**ä½¿ç”¨æµç¨‹**ï¼š

**1. ä¸»CLIåˆ›å»ºä»»åŠ¡**ï¼š
```bash
cd /opt/claude/mystocks_cli_x
cat > TASK.md << 'EOF'
# CLI-X ä»»åŠ¡æ–‡æ¡£

**Worker CLI**: CLI-X (æè¿°)
**Branch**: branch-name
**Worktree**: /path/to/worktree/
**Phase**: æè¿°é˜¶æ®µ
**é¢„è®¡å·¥ä½œé‡**: Xå¤©

---

## ðŸŽ¯ æ ¸å¿ƒèŒè´£

æè¿°è¿™ä¸ªCLIçš„æ ¸å¿ƒèŒè´£å’Œç›®æ ‡

---

## ðŸ“‹ ä»»åŠ¡æ¸…å•

### é˜¶æ®µ1: XXX (T1.1-T1.3, Xå¤©)

#### T1.1: ä»»åŠ¡æ ‡é¢˜ (Xå¤©)

**ç›®æ ‡**: æè¿°ä»»åŠ¡ç›®æ ‡

**éªŒæ”¶æ ‡å‡†**:
- [ ] æ ‡å‡†1
- [ ] æ ‡å‡†2

**é¢„è®¡å®Œæˆ**: YYYY-MM-DD
EOF
```

**2. Worker CLIåˆ›å»ºè¿›åº¦æŠ¥å‘Š**ï¼š
```bash
cd /opt/claude/mystocks_cli_x
cat > TASK-REPORT.md << 'EOF'
# CLI-X ä»»åŠ¡è¿›åº¦æŠ¥å‘Š

**Worker CLI**: CLI-X
**ä»»åŠ¡æ–‡æ¡£**: TASK.md
**å½“å‰é˜¶æ®µ**: T+0h
**æŠ¥å‘Šæ—¶é—´**: YYYY-MM-DD HH:MM

---

## âœ… å·²å®Œæˆ

- [ ] ä»»åŠ¡1: æè¿° - å®Œæˆæ—¶é—´: YYYY-MM-DD HH:MM

---

## ðŸ”„ è¿›è¡Œä¸­

- [ ] ä»»åŠ¡2: æè¿° - å½“å‰è¿›åº¦: 0%

---

## ðŸš§ é˜»å¡žé—®é¢˜

æ— 

---

## ðŸ“ˆ è¿›åº¦ç»Ÿè®¡

- **å·²å®Œæˆä»»åŠ¡**: 0/Y (0%)
- **é¢„è®¡å®Œæˆæ—¶é—´**: YYYY-MM-DD
EOF
```

**3. Worker CLIç”Ÿæˆå®ŒæˆæŠ¥å‘Š**ï¼š
```bash
cd /opt/claude/mystocks_cli_x
cat > TASK-1-REPORT.md << 'EOF'
# ä»»åŠ¡å®ŒæˆæŠ¥å‘Š - ç¬¬ä¸€é˜¶æ®µ

**Worker CLI**: CLI-X
**ä»»åŠ¡æ–‡æ¡£**: TASK-1.md
**æŠ¥å‘Šæ–‡æ¡£**: TASK-1-REPORT.md
**å®Œæˆæ—¶é—´**: YYYY-MM-DD HH:MM

---

## âœ… éªŒæ”¶æ ‡å‡†

- [x] æ ‡å‡†1: æè¿°å®Œæˆæƒ…å†µ
- [x] æ ‡å‡†2: æè¿°å®Œæˆæƒ…å†µ

---

## ðŸ“¦ äº¤ä»˜ç‰©

- ä»£ç : Xä¸ªæ–‡ä»¶ï¼ŒYè¡Œä»£ç 
- æµ‹è¯•: Xä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œé€šè¿‡çŽ‡Y%

---

## âœ… ç­‰å¾…ä¸»CLIéªŒæ”¶

è¯·ä¸»CLIéªŒæ”¶ç¬¬ä¸€é˜¶æ®µäº¤ä»˜ç‰©å¹¶åˆå¹¶åˆ°mainåˆ†æ”¯
EOF
```

**4. ä¸»CLIåˆå¹¶æ—¶**ï¼š
```bash
# ä¸»CLIåˆå¹¶åˆ†æ”¯æ—¶ï¼Œæ— README.mdå†²çª
git merge cli-x-branch

# âœ… TASK.mdåœ¨worktreeç›®å½•ï¼Œä¸å½±å“ä¸»ä»“åº“
# âœ… TASK-REPORT.mdåœ¨worktreeç›®å½•ï¼Œä¸å½±å“ä¸»ä»“åº“
# âœ… ä¸»ä»“åº“çš„README.mdä¿æŒå¹²å‡€ï¼Œä»…åŒ…å«é¡¹ç›®çº§ä»‹ç»
```

**æ–‡ä»¶ç»„ç»‡å¯¹æ¯”**ï¼š

| æ–¹å¼ | ä»»åŠ¡è¯´æ˜Ž | è¿›åº¦æŠ¥å‘Š | åˆå¹¶å†²çª | ä»»åŠ¡åŽ†å² | æŽ¨è |
|------|---------|---------|----------|----------|------|
| âŒ æ—§æ–¹å¼ | README.md | README.md | å¿…ç„¶å†²çª | éš¾ä»¥ä¿ç•™ | âŒ ä¸æŽ¨è |
| âœ… æ–°æ–¹å¼ | TASK.md | TASK-REPORT.md | æ— å†²çª | TASK-1.md, TASK-2.md... | âœ… å¼ºçƒˆæŽ¨è |

**å®žæ–½æ£€æŸ¥æ¸…å•**ï¼š
- [ ] æ›´æ–°ä¸»CLIå·¥ä½œæµç¨‹æ–‡æ¡£ï¼Œä½¿ç”¨TASK.mdæ–¹å¼
- [ ] æ›´æ–°Worker CLIå·¥ä½œæµç¨‹ï¼Œä½¿ç”¨TASK-REPORT.mdæ–¹å¼
- [ ] åˆ›å»ºTASK.mdæ¨¡æ¿
- [ ] åœ¨worktreeåˆ›å»ºæ—¶è‡ªåŠ¨ç”ŸæˆTASK.md
- [ ] åˆå¹¶åˆ†æ”¯æ—¶æ£€æŸ¥æ— README.mdå†²çª

**ç›¸å…³æ–‡æ¡£**ï¼š
- [ä»»åŠ¡æ–‡æ¡£æ¨¡æ¿](./TASK_TEMPLATE.md) - è¯¦ç»†çš„TASK.mdå’ŒTASK-REPORT.mdæ¨¡æ¿
- [ä¸»CLIå·¥ä½œè§„èŒƒ](./MAIN_CLI_WORKFLOW_STANDARDS.md) - ä¸»CLIä»»åŠ¡åˆ†é…æ–¹æ³•
- [Worker CLIå·¥ä½œæµç¨‹](./CLI_WORKFLOW_GUIDE.md) - Worker CLIå¦‚ä½•ä½¿ç”¨è¿™äº›æ¨¡æ¿

---

## ðŸš¨ é—®é¢˜5ï¼šä¾èµ–åŒæ­¥é—®é¢˜ (JavaScript/TypeScript)

### **é—®é¢˜æè¿°**

**åœºæ™¯**ï¼š
```
åœ¨å¤šä¸ªworktreeä¸­å·¥ä½œæ—¶ï¼Œnode_moduleså¯èƒ½ä¼šä¸åŒæ­¥ï¼š
- Worktree-1å®‰è£…äº†ä¾èµ–A@1.0.0
- Worktree-2å®‰è£…äº†ä¾èµ–A@1.2.0
- å¯¼è‡´ç‰ˆæœ¬å†²çªï¼Œéš¾ä»¥ç®¡ç†
```

**æ ¹æœ¬åŽŸå› **:
- æ¯ä¸ªworktreeç‹¬ç«‹çš„node_modules
- ä¾èµ–ç‰ˆæœ¬ä¸ä¸€è‡´
- ç£ç›˜ç©ºé—´æµªè´¹

### **è§£å†³æ–¹æ¡ˆ**

#### **æ–¹æ¡ˆAï¼šä½¿ç”¨ç¬¦å·é“¾æŽ¥å…±äº«node_modules** âœ… **å¼ºçƒˆæŽ¨è**

**å®žæ–½æ­¥éª¤**ï¼š

```bash
# 1. åˆ›å»ºå…±äº«çš„node_modulesç›®å½•
mkdir -p ~/shared/node_modules

# 2. åˆ é™¤çŽ°æœ‰worktreeçš„node_moduleså¹¶é“¾æŽ¥åˆ°å…±äº«ç›®å½•
cd ~/projects/project-worktree-1
rm -rf node_modules
ln -s ~/shared/node_modules ./node_modules

# å¯¹å…¶ä»–worktreeæ‰§è¡Œç›¸åŒæ“ä½œ
cd ~/projects/project-worktree-2
rm -rf node_modules
ln -s ~/shared/node_modules ./node_modules

# 3. åœ¨ä¸€ä¸ªä½ç½®å®‰è£…ä¾èµ–
cd ~/shared
npm install
```

**ä¼˜åŠ¿**:
- âœ… æ‰€æœ‰worktreeå…±äº«ç›¸åŒçš„ä¾èµ–ç‰ˆæœ¬
- âœ… èŠ‚çœç£ç›˜ç©ºé—´
- âœ… é¿å…ç‰ˆæœ¬å†²çª
- âœ… ä¾èµ–æ›´æ–°æ›´ç®€å•

**æ³¨æ„äº‹é¡¹**:
- âš ï¸ ç¡®ä¿æ‰€æœ‰worktreeçš„package.jsonå…¼å®¹
- âš ï¸ å®‰è£…æ–°ä¾èµ–æ—¶åœ¨å…±äº«ç›®å½•æ‰§è¡Œ
- âš ï¸ åˆ é™¤worktreeå‰å…ˆå–æ¶ˆé“¾æŽ¥

**ç›¸å…³æ–‡æ¡£**:
- [ä¸»CLIå·¥ä½œè§„èŒƒ](./MAIN_CLI_WORKFLOW_STANDARDS.md) - Pre-flightæ£€æŸ¥
- [æ–‡ä»¶æ‰€æœ‰æƒè¯´æ˜Ž](./MAIN_CLI_WORKFLOW_STANDARDS.md#phase-05-æ–‡ä»¶æ‰€æœ‰æƒå’ŒèŒè´£èŒƒå›´ç¡®è®¤)

---

## ðŸŽ¯ æ€»ç»“

### **Pre-commité…ç½®å†²çª**

**é—®é¢˜**ï¼šä¸»CLIå’ŒWorker CLIåŒæ—¶ä¿®æ”¹pre-commité…ç½®
**è§£å†³**ï¼š
- âœ… Pre-commité…ç½®åªç”±ä¸»CLIç®¡ç†
- âœ… Worker CLIä½¿ç”¨çŽ¯å¢ƒå˜é‡ç»•è¿‡ï¼ˆ`DISABLE_DIR_STRUCTURE_CHECK=1`ï¼‰
- âœ… ä¸ä¿®æ”¹ç»§æ‰¿çš„é…ç½®æ–‡ä»¶

### **ä»»åŠ¡åˆ†é…å†²çª**

**é—®é¢˜**ï¼šå¤šä¸ªCLIä¿®æ”¹åŒä¸€æ–‡ä»¶
**è§£å†³**ï¼š
- âœ… åˆ›å»ºæ–‡ä»¶æ‰€æœ‰æƒæ˜ å°„ï¼ˆ`.FILE_OWNERSHIP`ï¼‰
- âœ… æ˜Žç¡®èŒè´£èŒƒå›´ï¼ˆç›®å½•ç‰©ç†éš”ç¦»ï¼‰
- âœ… å»ºç«‹åè°ƒæœºåˆ¶ï¼ˆè·¨CLIä¿®æ”¹ç”³è¯·ï¼‰
- âœ… å†²çªæ£€æµ‹è„šæœ¬ï¼ˆ`check_file_conflicts.sh`ï¼‰

### **ä¸»CLIå¿˜è®°åŒæ­¥å·²å®Œæˆworktree** â­ **æ–°å¢žï¼ˆ2025-12-30å®žæˆ˜ï¼‰**

**é—®é¢˜**ï¼šä¸»CLIåœ¨å¼€å§‹æ–°å·¥ä½œå‰å¿˜è®°åˆå¹¶å·²å®Œæˆçš„worktree
**è§£å†³**ï¼š
- âœ… å¼ºåˆ¶æ‰§è¡ŒPre-flightæ£€æŸ¥æ¸…å•
- âœ… æ£€æŸ¥æ‰€æœ‰worktreeçŠ¶æ€å’Œè¿œç¨‹åˆ†æ”¯
- âœ… åˆå¹¶å·²å®Œæˆåˆ†æ”¯åŽå†å¼€å§‹æ–°å·¥ä½œ
- âœ… ç¡®ä¿ä¸»CLIå§‹ç»ˆä½¿ç”¨æœ€æ–°ä»£ç å’Œå·¥å…·

### **ä»»åŠ¡æ–‡æ¡£æ–¹å¼** â­ **æ›´æ–°ï¼ˆ2025-12-30å®žæˆ˜ï¼‰**

**é—®é¢˜**ï¼šä½¿ç”¨README.mdè®°å½•ä»»åŠ¡å’Œè¿›åº¦å¯¼è‡´åˆå¹¶å†²çª
**è§£å†³**ï¼š
- âœ… ä½¿ç”¨ç‹¬ç«‹çš„TASK.mdä»»åŠ¡æ–‡æ¡£ï¼ˆä½äºŽworktreeæ ¹ç›®å½•ï¼‰
- âœ… ä½¿ç”¨ç‹¬ç«‹çš„TASK-REPORT.mdè¿›åº¦æŠ¥å‘Šï¼ˆä½äºŽworktreeæ ¹ç›®å½•ï¼‰
- âœ… å¤šé˜¶æ®µä»»åŠ¡ç”¨TASK-1.md, TASK-2.mdå’ŒTASK-1-REPORT.md, TASK-2-REPORT.md
- âœ… README.mdä¿ç•™ç»™é¡¹ç›®çº§ä»‹ç»ï¼Œä¸æ”¾CLIç‰¹å®šä»»åŠ¡
- âœ… ä»»åŠ¡æ–‡æ¡£ä¸åˆå¹¶åˆ°ä¸»ä»“åº“ï¼Œé¿å…å†²çª

### **ä¾èµ–åŒæ­¥é—®é¢˜** â­ **æ–°å¢žï¼ˆ2025-12-30ï¼‰**

**é—®é¢˜**ï¼šJavaScript/TypeScripté¡¹ç›®ä¸­node_modulesä¸åŒæ­¥
**è§£å†³**ï¼š
- âœ… ä½¿ç”¨ç¬¦å·é“¾æŽ¥å…±äº«node_modules
- âœ… ç»Ÿä¸€ä¾èµ–ç‰ˆæœ¬ç®¡ç†
- âœ… èŠ‚çœç£ç›˜ç©ºé—´

### **æ‰§è¡Œä¼˜å…ˆçº§**

**ç«‹å³æ‰§è¡Œï¼ˆä»Šå¤©ï¼‰**ï¼š
1. âœ… åˆ›å»º`.FILE_OWNERSHIP`æ–‡ä»¶
2. âœ… æ›´æ–°`MAIN_CLI_WORKFLOW_STANDARDS.md`ï¼ˆæ·»åŠ Pre-flightæ£€æŸ¥ï¼‰
3. âœ… åˆ›å»ºå†²çªæ£€æµ‹è„šæœ¬
4. âœ… æ›´æ–°TASK_TEMPLATE.mdï¼ˆTASK.md + TASK-REPORT.mdï¼‰
5. âœ… æäº¤åˆ°Git

**åŽç»­æ‰§è¡Œ**ï¼š
1. åœ¨æ¯æ¬¡åˆ†é…æ–°ä»»åŠ¡å‰æ£€æŸ¥æ–‡ä»¶æ‰€æœ‰æƒ
2. å®šæœŸè¿è¡Œå†²çªæ£€æµ‹è„šæœ¬
3. åè°ƒè·¨CLIä¿®æ”¹éœ€æ±‚
4. **ä¸»CLIå¼€å§‹ä»»ä½•å·¥ä½œå‰å¼ºåˆ¶æ‰§è¡ŒPre-flightæ£€æŸ¥** â­
5. **æ‰€æœ‰æ–°ä»»åŠ¡ä½¿ç”¨TASK.mdå’ŒTASK-REPORT.md** â­
6. **JavaScript/TypeScripté¡¹ç›®ä½¿ç”¨node_moduleså…±äº«** â­

---

## ðŸ”— ç›¸å…³æ–‡æ¡£

### æ ¸å¿ƒæ–‡æ¡£
- [ä¸»CLIå·¥ä½œè§„èŒƒ](./MAIN_CLI_WORKFLOW_STANDARDS.md) - Pre-flightæ£€æŸ¥ã€ä»»åŠ¡åˆ†é…
- [Worker CLIå·¥ä½œæµç¨‹](./CLI_WORKFLOW_GUIDE.md) - å¦‚ä½•ä½¿ç”¨TASK.mdå’ŒTASK-REPORT.md
- [ä»»åŠ¡æ–‡æ¡£æ¨¡æ¿](./TASK_TEMPLATE.md) - è¯¦ç»†çš„TASK.mdå’ŒTASK-REPORT.mdæ¨¡æ¿

### Gitå‘½ä»¤å‚è€ƒ
- [Git Worktreeå‘½ä»¤æ‰‹å†Œ](./GIT_WORKTREE_MAIN_CLI_MANUAL.md) - å®Œæ•´çš„Git Worktreeå‘½ä»¤
- [Gitè¿œç¨‹åç§°æ ‡å‡†](./GIT_REMOTE_NAME_STANDARD.md) - è¿œç¨‹é…ç½®

---

**æ–‡æ¡£ç‰ˆæœ¬**: v2.0
**åˆ›å»ºæ—¥æœŸ**: 2025-12-29
**æœ€åŽæ›´æ–°**: 2025-12-30ï¼ˆæ·»åŠ é—®é¢˜4å’Œé—®é¢˜5ï¼‰
**ç»´æŠ¤è€…**: Main CLI
**æ›´æ–°é¢‘çŽ‡**: æ¯æ¬¡åˆ†é…æ–°ä»»åŠ¡æ—¶æ›´æ–°

**æ ¸å¿ƒåŽŸåˆ™**: æ˜Žç¡®æ‰€æœ‰æƒ + èŒè´£åˆ†ç¦» + åè°ƒæœºåˆ¶ + Pre-flightæ£€æŸ¥ + ç‹¬ç«‹ä»»åŠ¡æ–‡æ¡£ + ä¾èµ–åŒæ­¥ = é›¶å†²çªåä½œ
