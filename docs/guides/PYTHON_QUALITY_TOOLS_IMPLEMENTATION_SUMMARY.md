# Python ä»£ç è´¨é‡æ£€æŸ¥ä¸ä¿®å¤å·¥å…· - å®æ–½æ€»ç»“

## âœ… å®Œæˆçš„é…ç½®

### 1. **pyproject.toml** - ç»Ÿä¸€é…ç½®æ–‡ä»¶

**æ›´æ–°å†…å®¹**:
- âœ… Black è¡Œé•¿åº¦: 88 â†’ **120**
- âœ… isort è¡Œé•¿åº¦: 88 â†’ **120**
- âœ… æ–°å¢ Ruff å®Œæ•´é…ç½® (æ—¥å¸¸å¼€å‘ - æ•ˆç‡ä¼˜å…ˆ)
- âœ… Pylint è¡Œé•¿åº¦: 88 â†’ **120**
- âœ… ä¿ç•™ Bandit å’Œ Safety é…ç½®

**å…³é”®é…ç½®**:
```toml
[tool.black]
line-length = 120

[tool.ruff]
line-length = 120
select = ["E", "W", "F", "PT", "I"]
fix = true

[tool.pylint.format]
max-line-length = 120
```

---

### 2. **.pylint.test.rc** - æµ‹è¯•ä»£ç ä¸“ç”¨é…ç½®

**åˆ›å»ºæ–‡ä»¶**: `.pylint.test.rc`

**é…ç½®ç‰¹ç‚¹**:
- âœ… **ç¦ç”¨æ‰€æœ‰ï¼Œå¯ç”¨æ ¸å¿ƒ**: `disable = all` + `enable = [...]`
- âœ… **pytest ä¸“å±è§„åˆ™**: PT001-PT025
- âœ… **æ›´å®½æ¾çš„é˜ˆå€¼**: max-args=15, max-locals=25, max-statements=100
- âœ… **èšç„¦æµ‹è¯•è´¨é‡**: æœªç”¨å¯¼å…¥ã€å˜é‡è¿‡å¤šã€å¤æ‚åº¦è¿‡é«˜ç­‰

**ä½¿ç”¨æ–¹æ³•**:
```bash
pylint --rcfile=.pylint.test.rc tests/
```

---

### 3. **.pre-commit-config.yaml** - ä¼˜åŒ–çš„ Hook é¡ºåº

**æ›´æ–°å†…å®¹**:
- âœ… **æ‰§è¡Œé¡ºåºä¼˜åŒ–**: Ruff (fix) â†’ Black â†’ Ruff (check) â†’ MyPy â†’ Bandit â†’ Safety
- âœ… **ç»Ÿä¸€è¡Œé•¿åº¦**: æ‰€æœ‰å·¥å…·ä½¿ç”¨ 120
- âœ… **æ–‡ä»¶èŒƒå›´é™åˆ¶**: ä»…æ£€æŸ¥ `src/` å’Œ `tests/`
- âœ… **æ·»åŠ  Safety ä¾èµ–æ£€æŸ¥**

**Hook é“¾**:
```yaml
1. Ruff (Lint & Fix)         - å¿«é€Ÿä¿®å¤
2. Black (Formatter)          - å…œåº•æ ¼å¼åŒ–
3. Ruff (Check only)          - äºŒæ¬¡æ ¡éªŒ
4. MyPy (Type Check)          - ç±»å‹æ£€æŸ¥
5. Bandit (Security Scan)      - å®‰å…¨æ‰«æ
6. Safety (Dependency Check)  - ä¾èµ–å®‰å…¨
7-9. é€šç”¨æ–‡ä»¶æ£€æŸ¥ã€å¯†é’¥æ£€æµ‹ã€Pythonè¯­æ³•æ£€æŸ¥
```

---

### 4. **å·¥ä½œæµæ–‡æ¡£**

**åˆ›å»ºæ–‡ä»¶**:
1. `docs/guides/PYTHON_QUALITY_ASSURANCE_WORKFLOW.md` - å®Œæ•´å·¥ä½œæµç¨‹
2. `docs/guides/PYTHON_QUALITY_TOOLS_QUICK_REFERENCE.md` - å¿«é€Ÿå‚è€ƒ

---

## ğŸ¯ å››é˜¶æ®µè´¨é‡ä¿è¯æµç¨‹

### é˜¶æ®µ 1: æ—¥å¸¸å¼€å‘ (æ•ˆç‡ä¼˜å…ˆ)

**å·¥å…·**: Ruff
**è§¦å‘**: æ¯æ¬¡ä¿å­˜
**å‘½ä»¤**: `ruff check --fix .`

---

### é˜¶æ®µ 2: æäº¤å‰æ£€æŸ¥ (æ ¼å¼å…œåº•)

**å·¥å…·**: Pre-commit Hooks
**è§¦å‘**: git commit è‡ªåŠ¨è¿è¡Œ
**å‘½ä»¤**: `pre-commit run --all-files`

---

### é˜¶æ®µ 3: å®šæœŸæ·±åº¦åˆ†æ (Pylint)

**å·¥å…·**: Pylint (æµ‹è¯•ä¸“ç”¨é…ç½®)
**è§¦å‘**: æ¯å‘¨/æ¯è¿­ä»£æœ«
**å‘½ä»¤**: `pylint --rcfile=.pylint.test.rc tests/`

---

### é˜¶æ®µ 4: CI/CD é›†æˆ (å¿«é€Ÿå¤±è´¥)

**å·¥å…·é¡ºåº**: Ruff â†’ Black â†’ MyPy â†’ Bandit â†’ Safety
**ç­–ç•¥**: å¿«é€Ÿå¤±è´¥ + å®Œæ•´æ£€æŸ¥ + Pylint è®°å½•æŠ¥å‘Š

---

## ğŸ›¡ï¸ å®‰å…¨å·¥å…·ä¿ç•™

âœ… **Bandit** - ä»£ç å®‰å…¨æ‰«æ
âœ… **Safety** - ä¾èµ–å®‰å…¨æ£€æŸ¥
âœ… **ä¸å¯æ›¿ä»£**: æ˜¯æµ‹è¯•æµç¨‹ä¸­çš„å®‰å…¨é˜²çº¿

---

## ğŸ“Š å…³é”®æŒ‡æ ‡

| æŒ‡æ ‡ | å€¼ |
|------|-----|
| ç»Ÿä¸€è¡Œé•¿åº¦ | 120 å­—ç¬¦ |
| Ruff ç‰ˆæœ¬ | 0.9.10 |
| Black ç‰ˆæœ¬ | 25.11.0 |
| Pylint ç‰ˆæœ¬ | 4.0.3 |
| Pre-commit hooks | 9 ä¸ªæ£€æŸ¥æ­¥éª¤ |

---

## âœ… éªŒè¯ç»“æœ

```bash
# Ruff é…ç½®éªŒè¯
$ ruff check pyproject.toml --select=E,W,F,PT,I
All checks passed! âœ…

# Pylint æµ‹è¯•é…ç½®éªŒè¯
$ pylint --rcfile=.pylint.test.rc --generate-rcfile
[é…ç½®æ–‡ä»¶ç”ŸæˆæˆåŠŸ] âœ…
```

---

## ğŸ“š æ–‡æ¡£ç´¢å¼•

1. **å®Œæ•´å·¥ä½œæµç¨‹**: `docs/guides/PYTHON_QUALITY_ASSURANCE_WORKFLOW.md`
2. **å¿«é€Ÿå‚è€ƒ**: `docs/guides/PYTHON_QUALITY_TOOLS_QUICK_REFERENCE.md`
3. **Ruff é…ç½®**: `pyproject.toml` (ç¬¬ 162-270 è¡Œ)
4. **Pylint æµ‹è¯•é…ç½®**: `.pylint.test.rc`
5. **Pre-commit é…ç½®**: `.pre-commit-config.yaml`
6. **å®‰å…¨é…ç½®**: `config/.security.yml`

---

## ğŸ‰ ä¼˜åŒ–æˆæœ

### æ•ˆç‡æå‡
- âœ… **æ—¥å¸¸å¼€å‘**: Ruff ä¸€ç«™å¼å¤„ç†ï¼Œæ— éœ€æ‰‹åŠ¨è¿è¡Œå¤šä¸ªå·¥å…·
- âœ… **æäº¤å‰**: Pre-commit è‡ªåŠ¨åŒ–ï¼Œ9 ä¸ªæ­¥éª¤çº¦ 1-2 åˆ†é’Ÿ
- âœ… **CI/CD**: å¿«é€Ÿå¤±è´¥ç­–ç•¥ï¼Œä¸æµªè´¹ CI æ—¶é—´

### è´¨é‡ä¿è¯
- âœ… **æ ¼å¼ç»Ÿä¸€**: æ‰€æœ‰å·¥å…·ä½¿ç”¨ 120 å­—ç¬¦è¡Œé•¿åº¦
- âœ… **ç±»å‹å®‰å…¨**: MyPy ä¸¥æ ¼ç±»å‹æ£€æŸ¥
- âœ… **ä»£ç è´¨é‡**: Pylint å®šæœŸæ·±åº¦åˆ†æ
- âœ… **å®‰å…¨é˜²çº¿**: Bandit + Safety ä¸å¯æ›¿ä»£

### å…¼å®¹æ€§
- âœ… **æ— å†²çª**: Ruff å’Œ Black ç»Ÿä¸€é…ç½®
- âœ… **æµ‹è¯•å‹å¥½**: æµ‹è¯•ä»£ç ç‰¹æ®Šè§„åˆ™è±å…
- âœ… **CI ä¼˜åŒ–**: å¿«é€Ÿå¤±è´¥ + è®°å½•æŠ¥å‘Š

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### é¦–æ¬¡è®¾ç½®

```bash
# 1. å®‰è£…å¼€å‘ä¾èµ–
pip install -e ".[dev]"

# 2. å®‰è£… pre-commit hooks
pre-commit install

# 3. (å¯é€‰) å®‰è£… pylint-pytest æ’ä»¶
pip install pylint-pytest

# 4. éªŒè¯å®‰è£…
ruff --version && black --version && pylint --version
```

### æ—¥å¸¸ä½¿ç”¨

```bash
# æ—¥å¸¸å¼€å‘
ruff check --fix .

# æäº¤ä»£ç  (pre-commit è‡ªåŠ¨è¿è¡Œ)
git add .
git commit -m "message"

# æ¯å‘¨åˆ†æ
pylint --rcfile=.pylint.test.rc --output=report.html --output-format=html tests/
```

---

## ğŸ“‹ åç»­å»ºè®®

1. **ç«‹å³å®æ–½**: æ›´æ–°æ‰€æœ‰å¼€å‘è€…çš„ pre-commit hooks
2. **æ–‡æ¡£åŒæ­¥**: å›¢é˜ŸåŸ¹è®­æ–°çš„å·¥ä½œæµç¨‹
3. **CI/CD æ›´æ–°**: åº”ç”¨æ–°çš„æ£€æŸ¥é¡ºåº
4. **å®šæœŸå®¡æŸ¥**: æ¯å‘¨æŸ¥çœ‹ Pylint æŠ¥å‘Šï¼Œä¿®å¤é«˜ä¼˜å…ˆçº§é—®é¢˜

---

**å®æ–½æ—¥æœŸ**: 2025-12-23
**å·¥å…·é“¾ç‰ˆæœ¬**: Ruff 0.9.10, Black 25.11.0, Pylint 4.0.3
**é…ç½®ç­–ç•¥**: Ruff ä¼˜å…ˆ + Black å…œåº• + Pylint æ·±åº¦å®¡æŸ¥
