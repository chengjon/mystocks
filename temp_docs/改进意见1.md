以下是我对现有 5 层分类的完整性评估分析和建议，请认真评估，根据我的分析和建议，确定最终的对于现有数据分类的优化和改进方案。

现有分类（TICK_DATA、MINUTE_KLINE、DAILY_KLINE、SYMBOLS_INFO、REALTIME_POSITIONS）覆盖了基础行情数据和持仓数据，但从量化系统的全流程需求来看，存在明显缺口，具体表现为：
覆盖场景有限：
仅包含 “行情数据”（TICK、分钟线、日线）、“标的基本信息”（SYMBOLS_INFO）和 “实时持仓”（REALTIME_POSITIONS）；
缺失量化系统核心依赖的衍生数据（如因子数据、回测结果）、基本面数据（财务报表、分红送配）、事件数据（公告、政策）等。
无法满足策略开发全流程：
策略研发需要行业 / 概念分类（你提到的需求）、指数成分股等数据；
回测环节需要历史持仓、交易记录等数据；
实盘环节需要订单状态、资金流水等数据。
结论：现有 5 层分类无法满足完整量化系统的需求，需扩展。

二、新增数据（行业 / 概念 / 指数成分）的分类方案
 “行业分类”“概念分类”“指数成份” 属于标的关联的静态 / 半静态属性数据，建议新增独立分类，原因如下：
为何不纳入现有分类？
SYMBOLS_INFO 通常包含标的基础属性（如代码、名称、上市日期、交易所等），若纳入行业 / 概念，会导致该分类过于臃肿，且行业 / 概念可能频繁更新（如新增概念标签），与静态基础信息的更新频率不一致；
行业 / 概念 / 指数成分属于 “标的维度的扩展属性”，需独立存储和更新（例如每天更新一次指数成分股调整），与行情数据（高频更新）、持仓数据（实时更新）的生命周期不同。

建议新增的分类：
SYMBOL_CLASSIFICATIONS：统一管理标的的分类属性，包含：
行业分类（如申万一级 / 二级行业、证监会行业）；
概念分类（如 AI、新能源、国企改革）；
指数成分（如是否为沪深 300、中证 500 成分股）；
其他分类（如是否为 ST、融资融券标的、北交所 / 科创板等市场分层）。
该分类可由基础的行业分类/概念分类结合指数成分来设计为 “多维度键值对” 结构，例如：
json
{
  "symbol": "600000.SH",
  "classifications": {
    "industry": ["银行", "申万一级"],
    "concept": ["金融科技", "跨境支付"],
    "index": ["上证50", "沪深300"]
  },
  "update_time": "2025-10-10 08:00:00",
  "from_source": ["通达信","证监会行业"]
}

三、如何设计分类体系以支持未来扩展？
为避免频繁修改枚举类型（违反 “开闭原则”），建议从 **“基础分类 + 扩展分类”** 两个层面设计，兼顾稳定性和灵活性：
1. 枚举类型的基础框架（核心不可变）
保留 5 层核心分类作为基础框架，同时新增必要的核心分类，形成 “高内聚” 的基础枚举：
python
运行
from enum import Enum

class DataClassification(Enum):
    # 行情数据（高频动态）
    TICK_DATA = "逐笔成交/盘口数据"
    MINUTE_KLINE = "分钟线数据"
    DAILY_KLINE = "日线数据"
    WEEKLY_KLINE = "周线数据"  # 补充遗漏的周期数据
    MONTHLY_KLINE = "月线数据"
    
    # 标的基础信息（中低频静态）
    SYMBOLS_INFO = "标的基础信息（代码、名称、上市日期等）"
    SYMBOL_CLASSIFICATIONS = "标的分类（行业、概念、指数成分等）"  # 新增
    
    # 持仓与交易（实时动态）
    REALTIME_POSITIONS = "实时持仓数据"
    ORDER_STATUS = "订单状态数据"  # 补充
    TRANSACTION_RECORDS = "成交记录数据"  # 补充
    
    # 衍生数据（中低频动态）
    FACTOR_DATA = "因子数据（如MACD、PE、动量因子等）"  # 新增
    BACKTEST_RESULTS = "回测结果数据"  # 新增
    
    # 基本面与事件数据（低频静态/半静态）
    FUNDAMENTAL_DATA = "财务报表、分红送配等"  # 新增
    EVENT_DATA = "公告、政策、业绩预告等"  # 新增

2. 扩展机制（灵活支持新增需求）
对于细分场景或临时需求，通过 **“二级标签”或“元数据”** 扩展，而非修改枚举：
例如在 SYMBOL_CLASSIFICATIONS 中，通过二级标签区分 “行业”“概念”“指数成分”；
对于新的分类维度（如 “地域分类”“股东性质”），只需在二级标签中新增，无需修改基础枚举。

3. 技术层面的扩展性保障
存储层：为基础分类设计独立的表 / 集合（如 tick_data、symbol_classifications），避免混存；
接口层：数据访问接口按分类封装（如 get_tick_data()、get_classifications()），新增分类时只需新增接口，不影响原有逻辑；
配置层：通过配置文件（如 JSON/YAML）定义分类的元信息（更新频率、存储策略、权限等），例如：
yaml
SYMBOL_CLASSIFICATIONS:
  update_frequency: "daily"  # 每日更新
  storage_engine: "postgresql"
  retention_days: 365

总结
现有 5 层分类不完整，需补充核心分类（如因子、订单、基本面数据等）；
行业 / 概念 / 指数成分建议新增 SYMBOL_CLASSIFICATIONS 分类，独立管理标的扩展属性；
通过 “基础枚举 + 二级标签 + 元数据配置” 的方式支持扩展，既保证核心分类的稳定性，又能灵活应对新增需求。
这种设计既符合量化系统 “数据类型多、更新频率差异大” 的特点，也能支撑从策略研发到实盘交易的全流程数据需求。

之前设计的 5 大数据分类体系已经覆盖了量化系统的核心数据类型，且结合了存储引擎的特性进行匹配，整体结构清晰合理。不过，从国内 A 股量化系统的全流程需求来看，还可以补充一些细分数据类型，同时部分分类可以进一步优化。以下是具体建议：

一、需补充的重要数据类型
1. 市场数据 (Market Data) 补充
盘口快照数据（Order Book Snapshots）：
虽然 “深度数据” 已包含订单簿，但 A 股的 Level-2 数据（逐笔委托、十档行情）通常需要单独存储，建议明确纳入，仍适用 TDengine（高频时序特性）。
指数行情数据（Index Quotes）：
现有 K 线数据主要针对个股，指数（如沪深 300、中证 500）的分时 / 日线数据需单独分类，可归入 “分钟 K 线”“日线数据” 子项，或新增子项明确区分。

2. 参考数据 (Reference Data) 补充
基本面数据（Fundamental Data）：
国内 A 股量化策略常依赖财务数据（如营收、净利润、PE/PB）、分红送配、股东持股等，属于 “相对静态但定期更新” 的参考数据，适合 MySQL 存储，建议新增子项。
市场规则数据（Market Rules）：
如涨跌幅限制、停牌规则、退市标准等，属于系统级参考数据，影响策略逻辑，可归入 “交易日历” 子项或新增子项，存储于 MySQL。
财务报表数据在量化管理系统中属于结构化与非结构化结合、更新频率低但查询复杂的关键数据，其存储方案需兼顾 “结构化字段查询”“全文检索” 和 “长期归档” 需求。结合你的分类体系，建议按以下方式处理：
A.存储位置：归入「参考数据 (Reference Data)」大类
财务报表数据符合参考数据的核心特征：
相对静态：国内 A 股财报按季度 / 年度更新（频率远低于行情数据）；
关系型结构：包含资产负债表、利润表、现金流量表等结构化字段（如营收、净利润、资产负债率）；
频繁关联查询：常与股票基本信息、行业分类等参考数据关联分析（如 “某行业平均毛利率”）。
因此，将其归入「参考数据」大类下的 **“基本面数据” 子项 ** 最为合适，与你已规划的 “股票信息”“行业分类” 等形成关联。
B.具体存储方案：混合存储架构
财务报表数据包含两类内容，需分开存储以优化性能：
1）结构化财务指标（核心）→ MySQL
内容：财报中的数值型字段（如营业收入、净利润、每股收益 EPS、资产负债率等）、时间维度（报告期、发布日期）、审计意见类型等。
分析：
结构化财务指标可以从多个数据源获得（如akshare, tushare, sina, efiance等, 以及外部的wind, Choice等。），便于mysql保存。
且MySQL 支持复杂的关系查询（如跨报告期对比、同行业公司指标聚合）；
结构化字段适合建立索引（如按股票代码 + 报告期索引，加速查询）；
与 “股票信息”“行业分类” 等参考数据在同一数据库，便于 JOIN 操作（如查询 “创业板公司近 3 年平均 ROE”）。
2）非结构化财报原文（辅助）→ 对象存储（如 MinIO）+ MySQL 索引
分析：
财报原文体积大（单份 PDF 可能数 MB），不适合存入 MySQL（会导致表膨胀，影响性能），PDF 格式的完整财报原文、XBRL 结构化标签文件等，本项目暂不支持保存或解析。
财务数据与其他数据的关联设计
所有财务数据通过 symbol（股票代码）和 report_period（报告期）与股票信息关联，便于跨表查询（如 “查询某行业公司的平均资产负债率”），或者获取公司全称、所属行业等基础信息；
与衍生数据联动：结构化财务指标可作为「衍生数据」中 “量化因子” 的计算来源（如基于净利润增长率构建成长因子）；财务指标与衍生数据中的 “量化因子” 形成数据流：财务指标 → 因子计算 → 策略信号，逻辑清晰。
数据质量保障：在元数据中新增财务数据的质量监控指标，确保财报数据的完整性（如是否有遗漏报告期）和时效性（如是否在规定时间内完成更新）。

3. 衍生数据 (Derived Data) 补充
回测结果数据（Backtest Results）：
包含策略回测的收益曲线、最大回撤、换手率等统计指标，属于计算密集型衍生数据，但结构上可能包含非时序信息（如参数组合），建议新增子项，仍用 PostgreSQL + TimescaleDB。
风险指标数据（Risk Metrics）：
如 VaR（风险价值）、夏普比率、行业暴露度等，由衍生数据进一步计算得到，适合与 “量化因子” 并列，辅助策略评估。

4. 交易数据 (Transaction Data) 补充
资金流水数据（Fund Flows）：
记录账户资金的转入 / 转出、手续费、分红到账等，与订单 / 成交数据关联紧密但独立，需长期存储，适合 PostgreSQL，建议新增子项。
委托队列数据（Order Queue）：
针对实盘交易的未成交委托队列（如限价单排队状态），实时性要求高，可归入 “实时持仓” 子项或单独用 Redis 存储。

二、分类优化建议
1. 参考数据 (Reference Data) 细化
将 “分类信息” 拆分为 “行业分类”“概念分类”（更贴合 A 股常用场景），避免子项过于笼统。
新增 “市场分层信息”：如区分主板、创业板、科创板、北交所股票的属性（涨跌幅、门槛等），归入参考数据。

2. 元数据 (Meta Data) 扩展
新增 “数据质量指标”：记录各类数据的完整性、延迟率（如 Tick 数据是否有缺失），用于系统监控，适合 MySQL 存储。
新增 “用户配置数据”：如用户自定义的标的组合、看板设置等，属于元数据范畴，可归入 “系统配置” 或单独子项。

3. 存储引擎匹配优化
衍生数据中的 “模型输出” 若包含深度学习模型的权重文件等二进制数据，建议部分使用对象存储（如 MinIO），而非全量存入 PostgreSQL。
参考数据中的 “基本面数据” 若包含 PDF 财报原文，可结合 MySQL（存储结构化字段）+ 对象存储（存储文件）的混合方案。

三、完善后的分类体系
## 5大数据分类体系

#### 第1类：市场数据 (Market Data)
- Tick数据 → TDengine
- 分钟K线 → TDengine
- 日线数据 → PostgreSQL + TimescaleDB
- 深度数据（订单簿） → TDengine
- 盘口快照（Level-2） → TDengine
- 指数行情数据 → TDengine + PostgreSQL（分时+日线）

#### 第2类：参考数据 (Reference Data)
- 股票信息 → MySQL
- 行业分类 → MySQL
- 概念分类 → MySQL
- 成分股信息 → MySQL
- 交易日历 → MySQL
- 基本面数据 
  - 财务指标（结构化）→ MySQL （如营收、净利润、EPS、ROE等）
  - 分红送配数据 → MySQL（分红比例、除权除息日等）
  - 股东数据 → MySQL（大股东持股变动、机构持仓等）
- 市场规则数据 → MySQL

#### 第3类：衍生数据 (Derived Data)
- 技术指标 → PostgreSQL + TimescaleDB
- 量化因子 → PostgreSQL + TimescaleDB（含基于财务指标的因子，如PE分位数、净利润增长率）
- 模型输出 → PostgreSQL + TimescaleDB（结构化）+ 对象存储（二进制）
- 交易信号 → PostgreSQL + TimescaleDB
- 回测结果数据 → PostgreSQL + TimescaleDB
- 风险指标数据 → PostgreSQL + TimescaleDB

#### 第4类：交易数据 (Transaction Data)
- 订单记录 → PostgreSQL
- 成交记录 → PostgreSQL
- 持仓记录 → PostgreSQL
- 实时持仓 → Redis
- 实时账户 → Redis
- 资金流水数据 → PostgreSQL
- 委托队列数据 → Redis

#### 第5类：元数据 (Meta Data)
- 数据源状态 → MySQL（含财务数据更新状态、完整性校验结果）
- 任务调度 → MySQL
- 策略参数 → MySQL
- 系统配置 → MySQL
- 数据质量指标 → MySQL（含财务数据缺失率、更新延迟等）
- 用户配置数据 → MySQL


根据以上分析，我重新整理了以下优化方案（你也可以自行整理，以免我整理的不够恰当）：

国内 A 股量化管理系统数据分类优化方案
一、现有 5 层分类完整性评估
1.1 现有分类覆盖范围
现有分类（TICK_DATA、MINUTE_KLINE、DAILY_KLINE、SYMBOLS_INFO、REALTIME_POSITIONS）仅覆盖基础行情数据与实时持仓数据，具体包括：
行情数据：逐笔成交（Tick）、分钟线、日线等高频时序数据；
标的基础信息：股票代码、名称、上市日期等静态属性；
实时持仓：当前账户持仓状态数据。
1.2 核心缺口分析
从量化系统 “策略研发→回测验证→实盘交易” 全流程需求来看，存在三大类关键缺口：
缺口类型  缺失数据示例  影响场景
衍生数据缺口  量化因子（如 PE 分位数）、回测结果、风险指标  策略因子构建、回测效果评估
基本面数据缺口 财务报表、分红送配、股东持仓  基本面选股、财务风险预警
交易关联数据缺口  订单状态、成交记录、资金流水  实盘交易监控、历史订单回溯
1.3 结论
现有 5 层分类无法满足完整量化系统的全流程需求，需从 “分类维度扩展”“数据类型补充”“存储策略匹配” 三方面优化。
二、新增数据分类方案（核心优化点）
2.1 标的分类数据：新增SYMBOL_CLASSIFICATIONS分类
2.1.1 新增必要性
“行业分类”“概念分类”“指数成分” 等数据不适合归入现有SYMBOLS_INFO，核心原因：
更新频率差异：SYMBOLS_INFO（如上市日期）静态不变，而行业 / 概念标签（如新增 “AI 算力” 概念）需每日更新；
数据维度差异：分类数据属于 “多维度扩展属性”（如一只股票可对应多个行业 / 概念），混入基础信息会导致表结构臃肿；
查询场景差异：分类数据常需批量筛选（如 “筛选所有新能源概念的沪深 300 成分股”），独立存储可优化索引效率。
2.1.2 数据结构设计（多维度键值对）
json
{
  "symbol": "600000.SH",          // 股票代码（关联标的基础信息）
  "classifications": {
    "industry": [                  // 行业分类（支持多标准）
      {"name": "银行", "standard": "申万一级"},
      {"name": "货币金融服务", "standard": "证监会行业"}
    ],
    "concept": ["金融科技", "跨境支付"],  // 概念标签
    "index": ["上证50", "沪深300"],       // 指数成分
    "market_layer": "沪市主板"            // 市场分层（新增维度）
  },
  "update_time": "2025-10-10 08:00:00",  // 最后更新时间
  "data_source": "通达信+证监会行业库"    // 数据来源（保障可信度）
}
2.1.3 存储策略
存储引擎：MySQL（支持复杂关联查询，适配多维度筛选）；
更新频率：每日收盘后增量更新（同步行业 / 概念 / 指数成分调整）；
索引设计：联合索引(symbol, update_time)（支持按股票查询最新分类，按分类批量查股票）。
2.2 财务数据：归入 “参考数据 - 基本面数据” 子项
2.2.1 分类逻辑
财务数据符合参考数据 “相对静态、关系型结构、频繁关联查询” 的核心特征，且需与股票基础信息、行业分类联动分析（如 “创业板银行股平均 ROE”），故归入 “参考数据 - 基本面数据”，细分为 3 个子类：
财务数据子类  数据内容  存储引擎  核心用途
结构化财务指标 营收、净利润、EPS、资产负债率等 MySQL 因子计算（如净利润增长率）、财务选股
分红送配数据  分红比例、除权除息日、送股数量 MySQL 复权行情计算、股息率策略
股东数据  大股东增减持、机构持仓变化 MySQL 资金动向分析、机构重仓股策略
2.2.2 存储优化（混合架构）
结构化数据：MySQL 存储，设计联合索引(symbol, report_period)（支持跨报告期对比、同行业聚合）；
非结构化数据（如 PDF 财报原文）：暂不纳入本系统存储范围（若后续需支持，可采用 “MySQL 索引 + MinIO 对象存储”，索引表记录文件路径、哈希值、页数，避免 MySQL 表膨胀）。
三、全量数据分类体系（优化后）
3.1 分类框架总览
基于 “高频时序优先时序数据库、关系型数据优先 MySQL、实时热数据优先 Redis” 的原则，优化后形成 5 大类、23 个子项的完整分类体系，覆盖量化全流程需求：
一级分类  二级子项  存储引擎  核心特征  典型用途
1. 市场数据 Tick 数据 TDengine  超高频（毫秒级）、时序写入密集 盘口分析、高频交易策略
分钟 K 线  TDengine  高频（分钟级）、时间范围查询多 日内策略、短期趋势分析
日线 / 周线 / 月线  PostgreSQL+TimescaleDB  中低频、历史回溯多 中长期趋势策略、技术分析
深度数据（订单簿） TDengine  高频、实时订单队列 盘口流动性分析、订单簿策略
盘口快照（Level-2） TDengine  高频（3 秒 / 次）、逐笔委托  Level-2 策略、大单监测
指数行情数据  TDengine+PostgreSQL 分时（指数分钟线）+ 日线 大盘趋势分析、指数增强策略
2. 参考数据 股票信息  MySQL 静态、基础属性 标的唯一性识别、基础筛选
行业分类  MySQL 半静态、多标准分类 行业轮动策略、行业风险对冲
概念分类  MySQL 半静态、动态标签  概念热点跟踪、主题投资策略
成分股信息 MySQL 半静态、定期调整  指数成分股策略、权重计算
交易日历  MySQL 静态、预定义  回测日期过滤、任务调度
基本面数据 - 结构化财务指标 MySQL 低频（季度 / 年度）、关系型 财务因子计算、基本面选股
基本面数据 - 分红送配数据  MySQL 低频（不定期）、关联除权除息  复权计算、股息策略
基本面数据 - 股东数据  MySQL 低频（月度）、资金动向 机构持仓分析、大股东跟踪
市场规则数据  MySQL 静态、系统级配置  涨跌幅限制校验、停牌处理
3. 衍生数据 技术指标  PostgreSQL+TimescaleDB  计算密集、时序输出 技术分析（如 MACD 金叉）、信号生成
量化因子  PostgreSQL+TimescaleDB  计算密集、多维度  因子选股、组合优化
模型输出  PostgreSQL+MinIO  结构化结果 + 二进制权重 AI 策略预测结果、模型迭代
交易信号  PostgreSQL+TimescaleDB  时序、触发式输出  实盘下单触发、信号回测
回测结果数据  PostgreSQL+TimescaleDB  非时序（参数组合）+ 时序（收益曲线） 策略绩效评估、参数优化
风险指标数据  PostgreSQL+TimescaleDB  计算密集、多维度  风险控制（如 VaR）、夏普比率评估
4. 交易数据 订单记录  PostgreSQL  持久化、关联成交  订单回溯、实盘日志审计
成交记录  PostgreSQL  持久化、时序  交易归因、手续费统计
持仓记录  PostgreSQL  持久化、历史快照  持仓回溯、仓位分析
实时持仓  Redis 热数据、高频读写  实盘仓位监控、下单仓位校验
实时账户  Redis 热数据、高频更新  实盘资金监控、可用资金校验
资金流水数据  PostgreSQL  持久化、时序  资金明细审计、成本核算
委托队列数据  Redis 热数据、实时更新  未成交订单监控、撤单决策
5. 元数据  数据源状态 MySQL 配置型、实时监控  数据源健康度检查、故障告警
任务调度  MySQL 配置型、定时触发  数据同步任务、回测任务调度
策略参数  MySQL 配置型、版本化 策略参数管理、参数回溯
系统配置  MySQL 配置型、全局生效  系统参数调整、权限控制
数据质量指标  MySQL 监控型、时序  数据完整性校验、延迟率监控
用户配置数据  MySQL 个性化、用户关联  自定义标的组合、看板设置
3.2 关键技术保障（支持未来扩展）
为避免频繁修改枚举类型、降低系统耦合，设计三层扩展机制：
3.2.1 1. 基础枚举层（核心不可变）
定义核心分类枚举（Python 示例），仅包含一级分类和关键二级子项，避免冗余：
python
from enum import Enum

class DataClassification(Enum):
    # 市场数据（高频时序）
    MARKET_TICK = "Tick数据"
    MARKET_MINUTE_KLINE = "分钟K线"
    MARKET_DAILY_KLINE = "日线数据"
    # 参考数据（关系型静态/半静态）
    REFERENCE_STOCK_INFO = "股票信息"
    REFERENCE_SYMBOL_CLASS = "标的分类（行业/概念/指数）"
    REFERENCE_FUNDAMENTAL = "基本面数据"
    # 衍生数据（计算密集）
    DERIVED_FACTOR = "量化因子"
    DERIVED_BACKTEST = "回测结果数据"
    # 交易数据（实时/历史）
    TRADE_ORDER = "订单记录"
    TRADE_REAL_TIME_POS = "实时持仓"
    # 元数据（配置/监控）
    META_DATA_QUALITY = "数据质量指标"
    META_SYSTEM_CONFIG = "系统配置"
3.2.2 2. 二级标签层（灵活扩展）
对于细分维度（如行业分类的 “申万一级 / 证监会行业”、财务指标的 “季度报 / 年报”），通过配置文件定义二级标签，无需修改枚举：
yaml
# 参考数据-标的分类的二级标签配置（config/classification_tags.yaml）
SYMBOL_CLASS_TAGS:
  industry_standards: ["申万一级", "申万二级", "证监会行业"]  # 行业分类标准
  index_types: ["上证系列", "深证系列", "中证系列"]          # 指数类型
  market_layers: ["沪市主板", "深市主板", "创业板", "科创板", "北交所"]  # 市场分层
3.2.3 3. 存储元数据层（动态适配）
通过配置文件定义每个子项的存储策略（更新频率、保留周期、索引规则），新增子项时仅需添加配置，无需修改代码：
yaml
# 存储元数据配置（config/storage_meta.yaml）
MARKET_TICK:
  storage_engine: "TDengine"
  update_frequency: "real_time"  # 实时更新
  retention_days: 90             # 保留90天
  index_rule: "symbol, timestamp"# 索引规则
REFERENCE_FUNDAMENTAL:
  storage_engine: "MySQL"
  update_frequency: "quarterly"  # 季度更新
  retention_days: 3650           # 保留10年（财务数据需长期回溯）
  index_rule: "symbol, report_period"
四、实施建议
4.1 优先级排序
第一阶段（核心基础）：补充市场数据（指数行情、Level-2 盘口快照）、参考数据（标的分类、财务指标），保障策略研发基础数据需求；
第二阶段（交易支撑）：补充交易数据（资金流水、委托队列）、元数据（数据质量指标），支撑实盘交易监控；
第三阶段（高级扩展）：补充衍生数据（风险指标、模型输出二进制存储），支撑复杂策略与 AI 模型集成。
4.2 数据一致性保障
关联字段统一：所有分类通过symbol（股票代码，格式如 “600000.SH”）关联，避免多格式导致的关联失败；
时间戳规范：统一使用 UTC+8 时间，格式为 “YYYY-MM-DD HH:MM:SS”，确保跨分类时间对齐（如 “2025-10-10 09:30:00” 的 Tick 数据与分钟 K 线）；
数据质量监控：在元数据 “数据质量指标” 中，新增各分类的 “完整性率”（如 Tick 数据缺失率）、“更新延迟率”（如财务数据发布后多久入库），每日生成质量报告，异常时触发告警。
4.3 兼容性处理
对于现有系统中已存在的 5 层分类数据，需做迁移适配：
行情数据（Tick / 分钟 K 线 / 日线）：直接迁移至对应子项，补充 TDengine 分区策略（按 symbol + 日期分区，优化查询性能）；
SYMBOLS_INFO：拆分基础信息（代码、名称、上市日期）与分类信息（行业 / 概念），分类信息迁移至SYMBOL_CLASSIFICATIONS；
REALTIME_POSITIONS：拆分为 “实时持仓”（Redis，热数据）与 “持仓记录”（PostgreSQL，历史快照），确保实盘与回溯需求兼顾。
五、总结
优化后的 5 层数据分类体系具备三大核心优势：
全流程覆盖：从策略研发（因子、回测结果）到实盘交易（订单、资金流水），再到系统监控（数据质量、数据源状态），无关键缺口；
灵活扩展性：通过 “基础枚举 + 二级标签 + 存储元数据” 三层机制，新增分类无需修改核心代码，适配未来业务扩展（如新增 “债券数据”“期货数据”）；
性能最优：按数据特征匹配存储引擎（高频时序→TDengine、实时热数据→Redis、关系型数据→MySQL），兼顾写入性能与查询效率，支撑国内 A 股量化系统的高并发、低延迟需求。