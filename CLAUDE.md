# Claude AI Assistant é¡¹ç›®ä½¿ç”¨è®°å½•

## é¡¹ç›®æ¦‚è¿°
MyStocksé‡åŒ–äº¤æ˜“æ•°æ®ç®¡ç†ç³»ç»Ÿ - AIé©±åŠ¨çš„è‚¡ç¥¨é‡åŒ–åˆ†æå¹³å°

## æœ€æ–°è¿›å±• (2025-11-29)

### Phase 10: E2E å…¨é¢è¦†ç›– - ä¼˜å…ˆçº§é¡µé¢å®Œæ•´é›†æˆ âœ… å®Œæˆ
**å¯åŠ¨æ—¥æœŸ**: 2025-11-29
**å®Œæˆæ—¥æœŸ**: 2025-11-29
**æˆæœ**: 110 ä¸ª E2E æµ‹è¯•ï¼Œè¦†ç›– 4 ä¸ª P1 é¡µé¢ï¼Œæ„å»ºé›¶é”™è¯¯

**å®Œæˆå†…å®¹**:
- âœ… Milestone 1: RealTimeMonitor.vue (30 tests)
  - SSE å®æ—¶ç›‘æ§ä¸­å¿ƒåŠŸèƒ½éªŒè¯
  - å®æ—¶æ¨é€ç³»ç»Ÿ (è®­ç»ƒè¿›åº¦ã€å›æµ‹è¿›åº¦ã€é£é™©å‘Šè­¦)
  - SSE è¿æ¥çŠ¶æ€å’Œæµ‹è¯•å·¥å…·
  - API: `/api/v1/sse/status`

- âœ… Milestone 2: StockDetail.vue (40 tests)
  - è‚¡ç¥¨åˆ†æé¡µå®Œæ•´åŠŸèƒ½éªŒè¯
  - Kçº¿ã€åˆ†æ—¶ã€æ—¶é—´èŒƒå›´é€‰æ‹©
  - æŠ€æœ¯æŒ‡æ ‡ (MA, RSI, MACD, BOLL, ATR ç­‰)
  - äº¤æ˜“æ‘˜è¦ã€äº¤æ˜“æ‰§è¡Œè¡¨å•
  - API: 4 ä¸ªæ ¸å¿ƒç«¯ç‚¹é›†æˆ

- âœ… Milestone 3: IndicatorLibrary.vue (40 tests)
  - æŠ€æœ¯æŒ‡æ ‡åº“æ³¨å†Œè¡¨ (161 ä¸ª TA-Lib æŒ‡æ ‡)
  - æœç´¢å’Œåˆ†ç±»è¿‡æ»¤
  - å‚æ•°è¡¨ã€è¾“å‡ºå­—æ®µã€å‚è€ƒçº¿æ˜¾ç¤º
  - API: `/api/technical/indicators/registry`

- âœ… Milestone 4: Wencai.vue (40 tests)
  - é—®è´¢è‡ªç„¶è¯­è¨€é€‰è‚¡å·¥å…·
  - 4 æ ‡ç­¾é¡µå¯¼èˆª (æŸ¥è¯¢ã€æˆ‘çš„ã€åˆ†æã€æŒ‡å—)
  - 9 ä¸ªé¢„å®šä¹‰æŸ¥è¯¢æ¨¡æ¿
  - åŠŸèƒ½è¯´æ˜å’Œå¿«é€Ÿå…¥é—¨æŒ‡å—
  - API: `/api/market/wencai/queries`

**æŠ€æœ¯æˆå°±**:
- âœ… é›¶æ„å»ºé”™è¯¯ (npm build: 15.07s)
- âœ… 110 ä¸ªæµ‹è¯•ç”¨ä¾‹å…¨éƒ¨æœ‰æ•ˆ
- âœ… å¤šæµè§ˆå™¨æ”¯æŒ (Chrome, Firefox, Safari)
- âœ… å®Œæ•´ API é›†æˆéªŒè¯
- âœ… é”™è¯¯å¤„ç†å’Œç©ºçŠ¶æ€è¦†ç›–

**ä¸‹ä¸€æ­¥**: Phase 11 - P1 å¤±è´¥æµ‹è¯•ä¿®å¤ + P2 é¡µé¢ E2E æ‰©å±•

### Phase 8: P1 æ·±åº¦é›†æˆä¸ä¼˜åŒ– âœ… å®Œæˆ (ä¹‹å‰)
- âœ… E2E æµ‹è¯•å¤±è´¥åˆ†æå’Œä¿®å¤
- âœ… P1 é¡µé¢é›†æˆè¯„ä¼° (2/6 = 33.3%)
- âœ… P2+ é¡µé¢ç³»ç»Ÿè¯„ä¼° (23/47 = 48.9%)

### Phase 7: P0 ä¿®å¤éªŒè¯ + E2E æµ‹è¯• + æ€§èƒ½ä¼˜åŒ– âœ… å®Œæˆ
- âœ… ä¿®å¤äº† 4 ä¸ªå‰ç«¯æ„å»ºé”™è¯¯ (å›¾æ ‡å¯¼å…¥ã€API æ–¹æ³•)
- âœ… å®Œæˆ 72 ä¸ª E2E æµ‹è¯•ç”¨ä¾‹ï¼Œ77.8% é€šè¿‡ (56/72)
- âœ… ä¼˜åŒ– Sass åºŸå¼ƒ API å’Œä»£ç åˆ†å‰²
- âœ… P1 é¡µé¢ API é›†æˆè¯„ä¼°å®Œæˆ (5/6, 83.3%)

### Phase 6: ç»¼åˆé”™è¯¯å¤„ç†å’Œæ¢å¤æœºåˆ¶ âœ… å®Œæˆ
- å®ç°äº†å®Œæ•´çš„é”™è¯¯åˆ†ç±»ã€é‡è¯•ç­–ç•¥ã€ç†”æ–­å™¨æ¨¡å¼
- æ·»åŠ äº†å®æ—¶ç›‘æ§å’Œè­¦æŠ¥ç³»ç»Ÿ
- é›†æˆåˆ°æ•°æ®æœåŠ¡å±‚ï¼Œæä¾›å¼ºå¤§çš„å®¹é”™èƒ½åŠ›

### æ ¸å¿ƒæŠ€æœ¯å®ç°

#### 1. ç»¼åˆé”™è¯¯å¤„ç†ç³»ç»Ÿ (`src/core/error_handling.py`)
- **é”™è¯¯åˆ†ç±»**: 6ç§é”™è¯¯ç±»å‹ (æ•°æ®åº“ã€ç½‘ç»œã€éªŒè¯ã€ç³»ç»Ÿã€ä¸šåŠ¡ã€è¶…æ—¶ã€èµ„æº)
- **ä¸¥é‡ç¨‹åº¦**: 4çº§åˆ†ç±» (ä½ã€ä¸­ã€é«˜ã€ä¸¥é‡)
- **é‡è¯•ç­–ç•¥**: æŒ‡æ•°é€€é¿ (1-60ç§’) å’Œçº¿æ€§é€€é¿ (1-10ç§’)
- **ç†”æ–­å™¨**: 5æ¬¡å¤±è´¥åç†”æ–­ï¼Œ60ç§’è‡ªåŠ¨æ¢å¤
- **è£…é¥°å™¨**: `@handle_errors` æ”¯æŒè‡ªå®šä¹‰é‡è¯•æ¬¡æ•°ã€å»¶è¿Ÿç­–ç•¥ã€å›é€€å€¼
- **æ•°æ®éªŒè¯**: DataFrameå®Œæ•´æ€§æ£€æŸ¥ã€ç©ºå€¼æ¯”ä¾‹éªŒè¯
- **å®‰å…¨æ‰§è¡Œ**: `safe_execute` åŒ…è£…å™¨ï¼Œå¼‚å¸¸æ—¶è‡ªåŠ¨è®°å½•

#### 2. ç›‘æ§å’Œè­¦æŠ¥ç³»ç»Ÿ (`src/core/monitoring.py`)
- **æŒ‡æ ‡æ”¶é›†å™¨**: æ”¯æŒè®¡æ•°å™¨ã€ä»ªè¡¨ã€ç›´æ–¹å›¾ã€è®¡æ—¶å™¨
- **ç³»ç»Ÿç›‘æ§**: CPUã€å†…å­˜ã€ç£ç›˜ã€ç½‘ç»œIOå®æ—¶ç›‘æ§
- **APIç›‘æ§**: è¯·æ±‚é‡ã€å“åº”æ—¶é—´ã€é”™è¯¯ç‡ç»Ÿè®¡
- **è­¦æŠ¥ç®¡ç†**: å¯é…ç½®è§„åˆ™ã€å¤šä¸¥é‡ç¨‹åº¦ã€è‡ªåŠ¨è§£é™¤
- **ä»ªè¡¨æ¿æ•°æ®**: JSONæ ¼å¼å®æ—¶ç›‘æ§æ•°æ®

#### 3. å¢å¼ºæ•°æ®æœåŠ¡ (`web/backend/app/services/data_service_enhanced.py`)
- **é”™è¯¯å¤„ç†é›†æˆ**: å®Œæ•´é›†æˆç»¼åˆé”™è¯¯å¤„ç†ç³»ç»Ÿ
- **è‡ªåŠ¨é‡è¯•**: æ•°æ®åº“æŸ¥è¯¢å¤±è´¥æ—¶è‡ªåŠ¨é‡è¯•
- **ç†”æ–­å™¨ä¿æŠ¤**: é˜²æ­¢çº§è”æ•°æ®åº“æ•…éšœ
- **æ€§èƒ½ç›‘æ§**: APIè¯·æ±‚å’Œå“åº”æ—¶é—´è‡ªåŠ¨è®°å½•
- **å¥åº·æ£€æŸ¥**: å¤šç»„ä»¶çŠ¶æ€ç›‘æ§ç«¯ç‚¹
- **ä¼˜é›…é™çº§**: å¼‚å¸¸æ—¶ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®æˆ–ç¼“å­˜

#### 4. æŠ€æœ¯ç‰¹æ€§
- **çº¿ç¨‹å®‰å…¨**: æ‰€æœ‰æŒ‡æ ‡æ”¶é›†æ“ä½œéƒ½æ˜¯çº¿ç¨‹å®‰å…¨çš„
- **å†å²é™åˆ¶**: è‡ªåŠ¨é™åˆ¶å†å²æ•°æ®é‡ï¼Œé˜²æ­¢å†…å­˜æ³„æ¼
- **ç™¾åˆ†ä½æ•°è®¡ç®—**: P95ã€P99ç­‰æ€§èƒ½æŒ‡æ ‡
- **å®æ—¶ç›‘æ§**: 30ç§’é—´éš”çš„ç³»ç»Ÿèµ„æºç›‘æ§
- **é…ç½®é©±åŠ¨**: é€šè¿‡ç¯å¢ƒå˜é‡å’Œé…ç½®æ–‡ä»¶ç®¡ç†

## ä½¿ç”¨çš„ä¸»è¦å·¥å…·å’ŒæŠ€èƒ½

### å¼€å‘å·¥å…·
- **Claude Code**: ä¸»è¦å¼€å‘ç¯å¢ƒå’Œä»£ç ç¼–è¾‘å™¨
- **Git**: ç‰ˆæœ¬æ§åˆ¶å’Œä»£ç ç®¡ç†
- **FastAPI**: åç«¯APIæ¡†æ¶
- **Vue.js 3**: å‰ç«¯å“åº”å¼æ¡†æ¶
- **PostgreSQL**: ä¸»æ•°æ®åº“ï¼Œè¿æ¥æ± ä¼˜åŒ–
- **TDengine**: æ—¶åºæ•°æ®åº“ï¼Œé«˜æ€§èƒ½å­˜å‚¨
- **Docker**: å®¹å™¨åŒ–éƒ¨ç½²

### AIæŠ€èƒ½ä½¿ç”¨
- **javascript-typescript**: ç°ä»£JavaScriptå’ŒTypeScriptæœ€ä½³å®è·µ
- **backend-development**: åç«¯æ¶æ„è®¾è®¡å’ŒAPIè®¾è®¡åŸåˆ™
- **database-architect**: æ•°æ®åº“æ¶æ„ä¼˜åŒ–è®¾è®¡
- **python-development**: Pythonæ€§èƒ½ä¼˜åŒ–å’Œé”™è¯¯å¤„ç†

## é¡¹ç›®ç»“æ„ç‰¹ç‚¹

### Week 3 ç®€åŒ–æ¶æ„
- ç§»é™¤MySQLå’ŒRedisä¾èµ–ï¼Œé™ä½å¤æ‚åº¦
- ä¸“æ³¨PostgreSQL + TDengineåŒæ ¸å¿ƒæ¶æ„
- è¿æ¥æ± å‚æ•°ä¼˜åŒ– (pool_size=20, max_overflow=40)
- è¶…æ—¶é…ç½® (pool_timeout=30ç§’)

### é”™è¯¯å¤„ç†å’Œç›‘æ§
- ç”Ÿäº§çº§é”™è¯¯å¤„ç†æœºåˆ¶
- å®æ—¶ç›‘æ§ä»ªè¡¨æ¿
- è‡ªåŠ¨è­¦æŠ¥å’Œæ¢å¤ç­–ç•¥
- æ€§èƒ½æŒ‡æ ‡æ”¶é›†å’Œåˆ†æ
- ç†”æ–­å™¨æ¨¡å¼ä¿æŠ¤å…³é”®ç»„ä»¶

## å½“å‰è¿è¡ŒçŠ¶æ€

### åç«¯æœåŠ¡ (FastAPI)
- **ç«¯å£**: 8000
- **çƒ­é‡è½½**: å¼€å‘æ¨¡å¼å·²å¯ç”¨
- **é”™è¯¯å¤„ç†**: ç»¼åˆé”™è¯¯å¤„ç†å·²é›†æˆ
- **ç›‘æ§**: å®æ—¶ç›‘æ§è¿è¡Œä¸­

### å‰ç«¯æœåŠ¡ (Vue.js 3)
- **ç«¯å£**: 3001
- **å¼€å‘æ¨¡å¼**: çƒ­é‡è½½å·²å¯ç”¨
- **APIé›†æˆ**: ä¸åç«¯WebSocketè¿æ¥æ­£å¸¸

### æ•°æ®åº“çŠ¶æ€
- **PostgreSQL**: è¿æ¥æ± ä¼˜åŒ–å®Œæˆï¼Œè¿è¡Œç¨³å®š
- **TDengine**: æ—¶åºæ•°æ®å­˜å‚¨æ­£å¸¸
- **ç¼“å­˜**: æ™ºèƒ½ç¼“å­˜ç³»ç»Ÿå·²é…ç½®

## Phase 7 å®Œæˆè¯¦æƒ… (2025-11-27)

### 1. æ„å»ºé”™è¯¯ä¿®å¤
- âœ… RiskAlerts.vue: CircleFilled/CircleClose â†’ CircleCheck/Warning
- âœ… Market.vue: ç§»é™¤ marketApiV2ï¼Œä½¿ç”¨ dataApi.getMarketOverview()
- âœ… Architecture.vue: Database â†’ DataBoard å›¾æ ‡
- âœ… DatabaseMonitor.vue: Database â†’ DataBoard å›¾æ ‡
- **ç»“æœ**: é›¶æ„å»ºé”™è¯¯ï¼Œnpm build âœ“ æˆåŠŸ

### 2. E2E è‡ªåŠ¨åŒ–æµ‹è¯•
- âœ… åˆ›å»º 72 ä¸ªæµ‹è¯•ç”¨ä¾‹ (4 ä¸ªä¿®å¤é¡µé¢ + API + å›¾æ ‡ + è¾¹ç•Œæƒ…æ™¯)
- âœ… 77.8% é€šè¿‡ç‡ (56/72 é€šè¿‡)
- âœ… å¤šæµè§ˆå™¨æ”¯æŒ (Chrome, Firefox, Safari)
- âœ… å®Œæ•´æŠ¥å‘Š: `/docs/reports/E2E_TEST_REPORT_2025-11-26.md`

### 3. æ€§èƒ½ä¼˜åŒ–
- âœ… Sass åºŸå¼ƒ API: ä¿®æ”¹ `vite.config.js` æ·»åŠ  `api: 'modern'`
- âœ… ä»£ç åˆ†å‰²: åˆ†ç¦» element-plus (930KB), icons (171KB), echarts (1034KB)
- âœ… Chunk é˜ˆå€¼: ä» 500KB æå‡åˆ° 600KB
- âœ… æ„å»ºæ—¶é—´: 11.95s (ç¨³å®š)

### 4. P1 é¡µé¢è¯„ä¼°
- âœ… æ£€æŸ¥ 6 ä¸ª P1 ä¼˜å…ˆçº§é¡µé¢
- âœ… 5/6 é¡µé¢å·²æœ‰ API é›†æˆ (83.3%)
- âœ… è¯„ä¼°æŠ¥å‘Š: `/docs/reports/P1_INTEGRATION_ASSESSMENT.md`

## ä¸‹ä¸€æ­¥è®¡åˆ’ (Phase 8)

### Phase 8: P1 æ·±åº¦é›†æˆä¸ä¼˜åŒ– (2-3 å¤©)
- [ ] ä¿®å¤å¤±è´¥çš„ E2E æµ‹è¯•é€‰æ‹©å™¨
- [ ] P1 é¡µé¢ 100% é›†æˆéªŒè¯
- [ ] P2 ä¼˜å…ˆçº§é¡µé¢è¯„ä¼° (30+ é¡µé¢)
- [ ] CI/CD è‡ªåŠ¨åŒ–æµ‹è¯•é›†æˆ

### ä¸­æœŸç›®æ ‡ (1 å‘¨)
- P1 å®Œæˆåº¦: 100% (6/6 é¡µé¢)
- æ€»ä½“ API é›†æˆ: >= 35%
- E2E æµ‹è¯•é€šè¿‡ç‡: >= 85%

### é•¿æœŸç›®æ ‡
- å»ºç«‹å®Œæ•´çš„DevOpsç›‘æ§ä½“ç³»
- å®ç°è‡ªåŠ¨åŒ–çš„æ€§èƒ½è°ƒä¼˜
- å»ºç«‹ç”Ÿäº§ç¯å¢ƒçš„é«˜å¯ç”¨æ€§ä¿éšœ
- æ‰©å±•æœºå™¨å­¦ä¹ é¢„æµ‹èƒ½åŠ›

---

## ğŸ”’ ç«¯å£åˆ†é…è¦æ±‚ (MANDATORY)

**é¡¹ç›®**: MyStocks Spec (mystocks_spec)
**å¼ºåˆ¶æ‰§è¡Œ**: ä¸¥æ ¼éµå®ˆä»¥ä¸‹ç«¯å£åˆ†é…è§„èŒƒ
**ç”Ÿæ•ˆæ—¥æœŸ**: 2025-11-30

### å‰ç«¯ç«¯å£åˆ†é… (Frontend Ports)

**èŒƒå›´**: `3000 - 3009`

| ç«¯å£ | åº”ç”¨ | ç”¨é€” | çŠ¶æ€ |
|------|------|------|------|
| 3000 | ä¸»å‰ç«¯åº”ç”¨ | Vite å¼€å‘æœåŠ¡å™¨ï¼ˆé¦–é€‰ç«¯å£ï¼‰ | âœ… |
| 3001 | å¤‡ç”¨å‰ç«¯ | è‹¥ 3000 è¢«å ç”¨ | å¯ç”¨ |
| 3002-3009 | å…¶ä»–å‰ç«¯åº”ç”¨ | å¤šå¼€å‘å®ä¾‹ | å¯ç”¨ |

**å¯åŠ¨å‘½ä»¤è§„èŒƒ**:
```bash
# âœ… æ­£ç¡®: æ˜ç¡®æŒ‡å®šç«¯å£ 3000-3009 èŒƒå›´å†…
cd web/frontend && npm run dev -- --port 3000
cd web/frontend && VITE_PORT=3002 npm run dev

# âŒ é”™è¯¯: ä½¿ç”¨äº† 3010+ æˆ– 5173 ç­‰èŒƒå›´å¤–çš„ç«¯å£
cd web/frontend && npm run dev  # Vite å¯èƒ½éšæ„é€‰æ‹©
```

### åç«¯ç«¯å£åˆ†é… (Backend Ports)

**èŒƒå›´**: `8000 - 8009`

| ç«¯å£ | åº”ç”¨ | ç”¨é€” | çŠ¶æ€ |
|------|------|------|------|
| 8000 | FastAPI ä¸»æœåŠ¡ | REST API + WebSocket | âœ… |
| 8001 | å¤‡ç”¨åç«¯ | è‹¥ 8000 è¢«å ç”¨ | å¯ç”¨ |
| 8002-8009 | å…¶ä»–åç«¯æœåŠ¡ | å¾®æœåŠ¡ / åˆ†å¸ƒå¼å¼€å‘ | å¯ç”¨ |

**å¯åŠ¨å‘½ä»¤è§„èŒƒ**:
```bash
# âœ… æ­£ç¡®: æ˜ç¡®æŒ‡å®šç«¯å£ 8000-8009
python -m uvicorn main:app --host 0.0.0.0 --port 8000

# âŒ é”™è¯¯: ä½¿ç”¨äº† 8010+ æˆ–å…¶ä»–èŒƒå›´å¤–çš„ç«¯å£
python -m uvicorn main:app  # å¯èƒ½éšæ„é€‰æ‹©ç«¯å£
```

### ç«¯å£åˆ†é…æ˜ å°„è¡¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      MyStocks Spec ç«¯å£åˆ†é…             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  ğŸ”µ å‰ç«¯ (Frontend):                   â”‚
â”‚     Port 3000-3009                      â”‚
â”‚     ç”¨é€”: Vue 3 å¼€å‘æœåŠ¡å™¨              â”‚
â”‚     å½“å‰: 3000 (primary)                â”‚
â”‚                                         â”‚
â”‚  ğŸ”´ åç«¯ (Backend):                    â”‚
â”‚     Port 8000-8009                      â”‚
â”‚     ç”¨é€”: FastAPI REST API + WebSocket  â”‚
â”‚     å½“å‰: 8000 (primary)                â”‚
â”‚                                         â”‚
â”‚  ğŸŸ¡ æµ‹è¯• (E2E Tests):                  â”‚
â”‚     è¿æ¥åˆ°: http://localhost:3000-3009 â”‚
â”‚     API åŸºç¡€: http://localhost:8000    â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç›‘ç£å’Œæ‰§è¡Œæœºåˆ¶

#### 1. å¯åŠ¨å‰æ£€æŸ¥
æ¯æ¬¡å¯åŠ¨å‰ï¼Œ**å¿…é¡»** éªŒè¯ç«¯å£åˆ†é…ï¼š

```bash
# æ£€æŸ¥å‰ç«¯ç«¯å£å ç”¨æƒ…å†µ
lsof -i :3000 && echo "âš ï¸  3000 å·²è¢«å ç”¨" || echo "âœ… 3000 å¯ç”¨"

# æ£€æŸ¥åç«¯ç«¯å£å ç”¨æƒ…å†µ
lsof -i :8000 && echo "âš ï¸  8000 å·²è¢«å ç”¨" || echo "âœ… 8000 å¯ç”¨"

# è‹¥ç«¯å£è¢«å ç”¨ï¼Œè¯·ï¼š
# 1. ä½¿ç”¨èŒƒå›´å†…çš„å…¶ä»–ç«¯å£ (3001-3009 æˆ– 8001-8009)
# 2. æ›´æ–°å¯¹åº”çš„é…ç½®æ–‡ä»¶æˆ–ç¯å¢ƒå˜é‡
# 3. ç¡®ä¿ E2E æµ‹è¯•é…ç½®ä¹Ÿç›¸åº”æ›´æ–°
```

#### 2. ç¯å¢ƒå˜é‡é…ç½®
åœ¨ `.env` å’Œ `playwright.config.js` ä¸­æ˜ç¡®æŒ‡å®šç«¯å£ï¼š

```bash
# .env æ–‡ä»¶ç¤ºä¾‹
VITE_PORT=3000                    # å‰ç«¯ç«¯å£
VITE_API_BASE=http://localhost:8000  # åç«¯ API åŸºå€

# web/frontend/playwright.config.js
baseURL: 'http://localhost:3000',  # E2E æµ‹è¯•è®¿é—®åœ°å€
```

#### 3. å¼€å‘çº¦å®š
æ‰€æœ‰å¼€å‘äººå‘˜ **å¿…é¡»** éµå®ˆï¼š

| è§„èŒƒ | è¦æ±‚ |
|------|------|
| å‰ç«¯å¯åŠ¨ | åœ¨ 3000-3009 èŒƒå›´å†…å¯åŠ¨ |
| åç«¯å¯åŠ¨ | åœ¨ 8000-8009 èŒƒå›´å†…å¯åŠ¨ |
| ç«¯å£å†²çª | é€‰æ‹©èŒƒå›´å†…çš„å…¶ä»–å¯ç”¨ç«¯å£ |
| æµ‹è¯•è¿è¡Œ | ç¡®ä¿å‰åç«¯éƒ½åœ¨æŒ‡å®šèŒƒå›´å†… |
| PR æäº¤ | ç«¯å£é…ç½®ä¸åº”è¢«æäº¤ (ä½¿ç”¨ .env.example) |
| æ–‡æ¡£æ›´æ–° | è‹¥æ”¹å˜ç«¯å£é…ç½®ï¼Œæ›´æ–°æ­¤éƒ¨åˆ† |

#### 4. è¿è§„å¤„ç†
å¦‚æœå‘ç°ä¸éµå®ˆç«¯å£è§„èŒƒï¼š

- ğŸŸ¡ **ç¬¬ä¸€æ¬¡**: ä»£ç å®¡æŸ¥è¯„è®ºï¼Œè¦æ±‚ä¿®æ­£
- ğŸŸ  **ç¬¬äºŒæ¬¡**: é˜»æ­¢åˆå¹¶ï¼Œéœ€è¦è§£å†³ç«¯å£é—®é¢˜
- ğŸ”´ **ç¬¬ä¸‰æ¬¡**: ä¼šè®®è®¨è®ºï¼Œåˆ†ææ ¹æœ¬åŸå› ï¼Œåˆ¶å®šæ”¹è¿›è®¡åˆ’

#### 5. è‡ªåŠ¨åŒ–æ£€æŸ¥
E2E æµ‹è¯•è¿è¡Œå‰ï¼Œè‡ªåŠ¨éªŒè¯ç«¯å£é…ç½®ï¼š

```javascript
// æµ‹è¯•å¯åŠ¨å‰æ£€æŸ¥
beforeAll(async () => {
  const frontendUrl = process.env.BASE_URL || 'http://localhost:3000';
  const backendUrl = process.env.API_BASE || 'http://localhost:8000';

  // éªŒè¯ç«¯å£åœ¨å…è®¸èŒƒå›´å†…
  const frontendPort = new URL(frontendUrl).port;
  const backendPort = new URL(backendUrl).port;

  if (!['3000','3001','3002','3003','3004','3005','3006','3007','3008','3009'].includes(frontendPort)) {
    throw new Error(`âŒ å‰ç«¯ç«¯å£ ${frontendPort} ä¸åœ¨å…è®¸èŒƒå›´ (3000-3009)`);
  }
  if (!['8000','8001','8002','8003','8004','8005','8006','8007','8008','8009'].includes(backendPort)) {
    throw new Error(`âŒ åç«¯ç«¯å£ ${backendPort} ä¸åœ¨å…è®¸èŒƒå›´ (8000-8009)`);
  }
});
```

### å¸¸è§ç«¯å£å†²çªè§£å†³

**é—®é¢˜**: Vite è¯´ç«¯å£ 3000 è¢«å ç”¨

```bash
# âœ… è§£å†³æ–¹æ¡ˆ 1: æŒ‡å®šå…è®¸èŒƒå›´å†…çš„å…¶ä»–ç«¯å£
npm run dev -- --port 3002

# âœ… è§£å†³æ–¹æ¡ˆ 2: æŸ¥æ‰¾å ç”¨è¿›ç¨‹å¹¶å…³é—­
lsof -i :3000
kill -9 <PID>

# âœ… è§£å†³æ–¹æ¡ˆ 3: ä½¿ç”¨ä¸åŒç«¯å£å¹¶æ›´æ–°é…ç½®
VITE_PORT=3003 npm run dev
# åŒæ—¶æ›´æ–° playwright.config.js çš„ baseURL
```

**é—®é¢˜**: FastAPI å¯åŠ¨å¤±è´¥ï¼Œç«¯å£å·²è¢«å ç”¨

```bash
# âœ… è§£å†³æ–¹æ¡ˆ: ä½¿ç”¨å…è®¸èŒƒå›´å†…çš„å…¶ä»–ç«¯å£
python -m uvicorn main:app --port 8001

# æ›´æ–° .env ä¸­çš„ API_BASE
echo "API_BASE=http://localhost:8001" >> .env
```

### å¿«é€Ÿå‚è€ƒ

**å¯åŠ¨å®Œæ•´å¼€å‘ç¯å¢ƒ**:
```bash
# Terminal 1: åç«¯ (8000)
cd /opt/claude/mystocks_spec
python -m uvicorn web.backend.app.main:app --host 0.0.0.0 --port 8000

# Terminal 2: å‰ç«¯ (3000)
cd /opt/claude/mystocks_spec/web/frontend
npm run dev -- --port 3000

# Terminal 3: E2E æµ‹è¯•
cd /opt/claude/mystocks_spec
npx playwright test  # è‡ªåŠ¨è¿æ¥åˆ° http://localhost:3000
```

### æœ€åæ›´æ–°
- **æ—¥æœŸ**: 2025-11-30
- **å†…å®¹**: å¼ºåˆ¶ç«¯å£åˆ†é…è§„èŒƒï¼Œä¸¥æ ¼æ‰§è¡ŒèŒƒå›´ 3000-3009 (å‰ç«¯) å’Œ 8000-8009 (åç«¯)
- **ç‰ˆæœ¬**: 1.0
- **å¼ºåˆ¶çº§åˆ«**: ğŸ”’ MANDATORY

---

**æœ€åæ›´æ–°**: 2025-11-29 (ç§»é™¤ç§»åŠ¨ç«¯æ”¯æŒ)
**çŠ¶æ€**: Phase 10 å®Œæˆï¼ŒWeb æ¡Œé¢ç«¯ä¸“ç”¨ âœ…
